{"version":3,"sources":["lib/fs.ts","utilities/note.ts","lib/crossnote.ts","utilities/image.ts","i18n/i18n.ts","i18n/lang/enUS.ts","i18n/lang/zhCN.ts","i18n/lang/zhTW.ts","i18n/lang/jaJP.ts","themes/theme.ts","themes/light.ts","themes/dark.ts","themes/one-dark.ts","themes/solarized-light.ts","containers/global.ts","editor/widgets/timer/index.tsx","utilities/image_uploader.ts","editor/widgets/image/index.tsx","editor/widgets/audio/index.tsx","editor/widgets/video/index.tsx","editor/widgets/bilibili/index.tsx","editor/widgets/youtube/index.tsx","editor/widgets/ocr/index.tsx","containers/crossnote.ts","env.js","utilities/history.ts","utilities/preview.ts","components/EditImageDialog.tsx","editor/widgets/kanban/index.tsx","generated/graphql.tsx","utilities/client.ts","editor/widgets/comment/CommentMessages.tsx","editor/widgets/comment/CommentEditor.tsx","editor/widgets/comment/CommentDialog.tsx","editor/widgets/widget/WidgetTopPanel.tsx","editor/widgets/comment/index.tsx","editor/widgets/github_gist/index.tsx","editor/index.ts","themes/manager.ts","lib/keymap.ts","containers/settings.ts","components/PushNotebookDialog.tsx","components/ChangeFilePathDialog.tsx","editor/views/float-win.ts","components/DeleteNoteDialog.tsx","components/TagsMenuPopover.tsx","components/Editor.tsx","editor/views/math-preview.ts","components/AddNotebookDialog.tsx","components/NotebookTreeView.tsx","components/ConfigureNotebookDialog.tsx","components/NoteCard.tsx","components/Notes.tsx","components/RenameDirectoryDialog.tsx","components/RenameTagDialog.tsx","components/DeleteDirectoryDialog.tsx","components/DeleteTagDialog.tsx","components/NotesPanel.tsx","components/WikiPanel.tsx","containers/cloud.ts","_git_commit.js","components/Settings.tsx","components/AuthDialog.tsx","containers/notifications.ts","components/notifications/NotificationAvatarPanel.tsx","components/notifications/CommentWidgetMessagePostingNotification.tsx","components/Notifications.tsx","components/PublishNotebookDialog.tsx","components/NotebookCard.tsx","components/Notebooks.tsx","components/ExplorePanel.tsx","components/ConfigurePublishedNotebookDialog.tsx","components/NotebookPanel.tsx","pages/Privacy.tsx","components/AttachmentCard.tsx","components/Attachments.tsx","components/AttachmentsPanel.tsx","components/LanguageSelectorDialog.tsx","pages/Home.tsx","components/GitHubOAuthCallback.tsx","serviceWorker.ts","components/ServiceWorkerWrapper.tsx","App.tsx","index.tsx","utilities/utils.ts","utilities/markdown.ts"],"names":["FileSystem","fs","readFile","writeFile","readdir","unlink","stats","mkdir","exists","rename","rmdir","mkdirp","this","setUpFSMethods","path","opts","Promise","resolve","reject","error","data","toString","encoding","files","stat","oldPath","newPath","a","isDirectory","oldPathStat","newPathStat","i","length","file","filePath","dirPath","promises","push","all","LightningFS","pfs","getHeaderFromMarkdown","markdown","titleMatch","match","replace","trim","getMentionsFromMarkdown","map","username","toLocaleLowerCase","filter","index","self","findIndex","username2","generateSummaryFromMarkdown","title","images","contentString","aheadString","slice","indexOf","coverMatch","coverImagesMatch","forEach","mdImage","image","m","summary","split","x","join","tags","html","EmptyPageInfo","hasPreviousPage","hasNextPage","startCursor","UUIDNil","endCursor","formatNoteConfig","noteConfig","newObject","Object","assign","createdAt","modifiedAt","Crossnote","notebookDB","PouchDB","plugin","PouchdbFind","createIndex","fields","name","corsProxy","gitURL","branch","password","depth","rememberCredentials","cloneNotebook","_id","randomID","dir","notebook","gitBranch","gitCorsProxy","gitUsername","gitPassword","autoFetchPeriod","fetchedAt","Date","remoteSha","localSha","git","put","Error","http","url","ref","singleBranch","onAuth","auth","getGitSHA","sha","getDefaultNotebookNameFromGitURL","notebookID","get","remove","nb","force","note","newFilePath","endsWith","oldFilePath","newDirPath","filepath","oldDirName","newDirName","dirName","cache","createCache","stagedFiles","status","authorName","authorEmail","message","onProgress","onMessage","onAuthFailure","onAuthSuccess","pullNotebook","numConflicts","author","email","restoreSHA","progress","pushResult","ok","updateNotebook","logs","oid","deleteNote","dirname","markdownHasConflicts","result","generateChangesCache","localStorage","setItem","JSON","stringify","fetchHead","hardResetNotebook","restoreFilesFromCache","LINEBREAKS","markerSize","ourName","theirName","ourContent","baseContent","theirContent","baseContentBlobResult","Buffer","from","blob","theirContentBlobTresult","ours","base","theirs","diff3Merge","mergedText","hasConflict","item","conflict","repeat","b","removeItem","m1","m2","m3","filepaths","getNote","newNote","find","selector","$gt","notebooks","docs","pendingPull","getItem","parse","sort","y","localeCompare","absFilePath","isFile","ctimeMs","mtimeMs","matter","frontMatter","newFrontMatter","newMarkdown","matterStringify","content","encryption","pinned","config","includeSubdirectories","notes","listNotesPromises","listNotes","r","concat","attachments","listAttachmentsPromises","isFileAnImage","isBinarySync","attachment","listAttachments","AES","encrypt","oldNote","writeNote","rootDirectory","children","filePaths","Set","add","value","dirNames","directory","subDirectory","paths","j","rootTagNode","tag","node","t","offset","c","newNode","lastIndexOf","resolveNoteImageSrc","imageSrc","startsWith","loadImageAsBase64","resolveNotebookFilePath","gitURLArr","gitHost","toLowerCase","gitOwner","gitRepo","outFilePath","noteFilePath","imageFilePath","Uint8Array","base64","buffer","imageType","fileName","i18next","use","initReactI18next","init","interpolation","escapeValue","keySeparator","lng","fallbackLng","resources","translation","languageCodeToDateFNSLocale","code","zhCN","enUS","zhTW","ja","CrossnoteTheme","muiThemeOptions","muiTheme","createMuiTheme","LightTheme","palette","primary","blue","secondary","orange","DarkTheme","common","black","white","background","paper","lighten","default","light","main","dark","contrastText","divider","text","disabled","hint","action","active","OneDarkTheme","cyan","blueGrey","SolarizedLight","amber","globalContainers","cloudContainer","settingsContainer","crossnoteContainer","Timer","props","attributes","theme","useTheme","style","cursor","padding","backgroundColor","color","borderRadius","display","justifyContent","width","maxWidth","boxShadow","marginBottom","isPreview","className","toLocaleString","smmsUploadImages","type","FormData","append","fetch","method","mode","headers","referrer","body","then","response","json","catch","useStyles","makeStyles","createStyles","card","spacing","position","actionButtons","top","right","section","marginTop","dropArea","darken","ImageWidget","classes","useTranslation","useState","setURL","imageUploaderElement","setImageUploaderElement","uploadingImages","setUploadingImages","Card","elevation","clsx","Typography","variant","Box","Tooltip","IconButton","onClick","removeSelf","Input","margin","placeholder","onChange","event","target","onKeyDown","which","replaceSelf","fullWidth","e","preventDefault","stopPropagation","onchange","Noty","layout","timeout","show","urls","click","multiple","element","AudioWidget","source","setSource","autoplay","setAutoplay","controls","setControls","loop","setLoop","muted","setMuted","autoPlay","src","attrs","setAttributes","FormControlLabel","label","control","Switch","checked","videoWrapper","height","paddingTop","video","left","VideoWidget","poster","setPoster","border","errorMessage","BilibiliWidget","setError","scrolling","frameBorder","allowFullScreen","aid","bvid","YoutubeWidget","alt","window","open","videoID","canvasWrapper","canvas","OCRWidget","setCanvas","link","setLink","imageDataURL","setImageDataURL","ocrDataURL","setOCRDataURL","imageDropAreaElement","setImageDropAreaElement","isProcessing","setIsProcessing","ocrProgresses","setOCRProgresses","getInitialLanguages","selectedLanguages","setSelectedLanguages","grayscaleChecked","setGrayscaleChecked","toggleLanguage","lang","splice","useEffect","imageObject","Image","context","getContext","onload","clearRect","fillStyle","fillRect","globalCompositeOperation","drawImage","toDataURL","onerror","setAttribute","List","ListItem","ListItemText","ListItemSecondaryAction","Math","floor","FormGroup","Checkbox","ButtonGroup","Button","input","worker","createWorker","logger","languagesArr","load","loadLanguage","initialize","recognize","terminate","ocr","startOCRFromLink","textAlign","reader","FileReader","readAsDataURL","EditorMode","SelectedSectionType","OrderBy","OrderDirection","HomeSection","env","browserHistory","createBrowserHistory","basename","CrossnoteContainer","createContainer","initialState","crossnote","initialized","setInitialized","setNotebooks","selectedNotebook","setSelectedNotebook","notebookNotes","setNotebookNotes","notebookDirectories","setNotebookDirectories","notebookTagNode","setNotebookTagNode","setNotes","selectedNote","setSelectedNote","selectedAttachment","setSelectedAttachment","setIncludeSubdirectories","Notes","selectedSection","setSelectedSection","isAddingNotebook","setIsAddingNotebook","isPushingNotebook","setIsPushingNotebook","isPullingNotebook","setIsPullingNotebook","isLoadingAttachments","setIsLoadingAttachments","displayMobileEditor","setDisplayMobileEditor","displayAttachmentEditor","setDisplayAttachmentEditor","needsToRefreshNotes","setNeedsToRefreshNotes","wikiTOCElement","setWikiTOCElement","isLoadingNotebook","setIsLoadingNotebook","hasSummaryMD","setHasSummaryMD","ModifiedAt","orderBy","setOrderBy","DESC","orderDirection","setOrderDirection","Preview","editorMode","setEditorMode","pendingNote","setPendingNote","isPerformingAutoFetch","setIsPerformingAutoFetch","Unknown","homeSection","setHomeSection","_setSelectedNote","useCallback","encodeURIComponent","updateNoteMarkdown","callback","getStatus","newNotes","n","getNotebookDirectoriesFromNotes","directories","getNotebookTagNodeFromNotes","changeNoteFilePath","renameDirectory","Directory","deleteDirectory","renameTag","oldTagName","newTagName","sanitizeTag","modified","updateNoteConfig","Tag","deleteTag","tagName","hasPrefix","createNewNote","Today","Todo","Tagged","Untagged","VickyMD","duplicateNote","duplicatedNote","_setSelectedNotebook","addNotebook","gitRememberCredentials","deleteNotebook","pushNotebook","args","checkoutNote","updateNotebookTagNode","openNoteAtPath","loadAttachments","listNotebooks","selectedNotebookID","now","getTime","OneDay","Conflicted","Encrypted","Wiki","CreatedAt","Title","Notebooks","useInterval","fetchNotebook","console","log","openURL","location","origin","decodeURIComponent","postprocessPreview","previewElement","isPresentationCallback","handleLinksClickEvent","preview","links","getElementsByTagName","onclick","hasAttribute","getAttribute","resolveImages","childElementCount","toUpperCase","overflow","contentDocument","imageWrapper","imagePreview","maxHeight","EditImageDialog","editor","marker","imageElement","setImageSrc","imageAlt","setImageAlt","imageTitle","setImageTitle","finalImageSrc","setFinalImageSrc","deleteImage","pos","replaceRange","to","onClose","updateImage","Dialog","zIndex","DialogTitle","DialogContent","TextField","autoFocus","helperText","DialogActions","require","columnHeader","alignItems","kanbanCard","breakpoints","down","editorWrapper","textarea","KanbanColumnHeaderDisplay","column","board","refreshBoard","clickedTitle","setClickedTitle","titleValue","setTitleValue","onBlur","onKeyUp","id","description","cards","columns","l","KanbanCardDisplay","textAreaElement","setTextAreaElement","React","setPreviewElement","setEditor","setDescription","editorDialogOpen","setEditDialogOpen","editImageElement","setEditImageElement","editImageTextMarker","setEditImageTextMarker","editImageDialogOpen","setEditImageDialogOpen","fromTextArea","hashtag","keyMap","showCursorWhenSelecting","inputStyle","setValue","setOption","on","getValue","focus","setTheme","themeName","renderPreview","linkIconClickedHandler","imageClickedHandler","loadImage","off","minWidth","KanbanWidget","setBoard","lanes","newBoard","renderColumnHeader","renderCard","dragging","allowAddColumn","allowAddCard","renderColumnAdder","marginLeft","wip","onNewColumnConfirm","newColumn","disableCardDrag","disableColumnDrag","onCardDragEnd","destination","fromPosition","fromColumnId","toPosition","toColumnId","fromColumn","toColumn","onColumnDragEnd","NotificationEventType","WidgetType","NotebookOrderBy","PageInfoFieldsFragmentDoc","gql","CommentWidgetMessageFieldsFragmentDoc","CommentWidgetMessageConnectionFieldsFragmentDoc","CommentWidgetFieldsFragmentDoc","NotebookFieldsFragmentDoc","NotificationFieldsFragmentDoc","ViewerFieldsFragmentDoc","SignUpDocument","SignInDocument","SignUpWithGitHubAccountDocument","SignInWithGitHubAccountDocument","SendEmailVerificationCodeDocument","ResetPasswordDocument","CreateCommentWidgetDocument","PostCommentWidgetMessageDocument","UpdateCommentWidgetMessageDocument","AddReactionToCommentWidgetDocument","RemoveReactionFromCommentWidgetDocument","AddReactionToCommentWidgetMessageDocument","RemoveReactionFromCommentWidgetMessageDocument","SubscribeToCommentWidgetDocument","UnsubscribeFromCommentWidgetDocument","LinkWithGitHubAccountDocument","UnlinkGitHubAccountDocument","PublishNotebookDocument","UnpublishNotebookDocument","UpdateNotebookDocument","StarNotebookDocument","UnstarNotebookDocument","DeleteNotificationDocument","DeleteAllNotificationsDocument","SetUserInfoDocument","DeleteWidgetDocument","UpdateWidgetDocument","CommentWidgetDocument","CommentWidgetMessagesDocument","GitHubUserDocument","NotebooksDocument","NotificationsDocument","ViewerDocument","GraphQLClient","createClient","getGraphQLEndpoint","exchanges","defaultExchanges","fetchOptions","Authorization","chatMessage","avatarPanel","gridTemplateAreas","gridColumnGap","avatar","gridArea","time","reactions","singleTime","modifiedCaption","reactionChip","actionBtnClass","CommentMessage","previousMessage","anchorEl","setAnchorEl","emojiPickerOpen","setEmojiPickerOpen","Urql","resAddReactionToCommentWidgetMessage","executeAddReactionToCommentWidgetMessageMutation","resRemoveReactionFromCommentWidgetMessage","executeRemoveReactionFromCommentWidgetMessageMutation","forceUpdate","setForceUpdate","handleClose","openPopper","Boolean","updatedAt","updateReactionSummaries","reaction","found","reactionSummaries","count","selfAuthored","Avatar","Identicon","sha256","formatRelative","locale","language","weightX","weightY","reactionSummary","Chip","size","key","marginRight","loggedIn","messageID","setAuthDialogOpen","emoji","Popover","anchorOrigin","vertical","horizontal","transformOrigin","mentionUser","viewer","onModifyChatMessage","showSkinTones","onSelect","colons","root","flexDirection","bottom","toolbar","toolbarLeft","sendButton","CommentEditor","updateMessageID","updateMessageMarkdown","cancelUpdatingMessage","updateMessage","updatingMessage","sendMessage","sendingMessage","topBar","row","commentWrapper","messages","CommentDialog","fullScreen","useMediaQuery","commentWidget","instance","edges","edge","setMessages","messagesElement","setMessagesElement","pageInfo","latestPulledMessagePageInfo","setLatestPulledMessagePageInfo","setUpdateMessageID","options","query","useCommentWidgetMessagesQuery","variables","widgetID","before","after","first","last","requestPolicy","pause","resMessagesAfter","executeMessagesAfterQuery","resPostMessage","executePostMessageMutation","resUpdateMessage","executeUpdateMessageMutation","resSubscribeToCommentWidget","executeSubscribeToCommentWidgetMutation","resUnsubscribeFromCommentWidget","executeUnsubscribeFromCommentWidgetMutation","replaceSelection","subscribeToChatGroup","subscribed","unsubscribeFromChatGroup","notifyUsers","addMessage","xC","yC","scrollMessagesToBottom","scrollTop","scrollHeight","fetchPreviousMessages","fetching","postCommentWidgetMessage","updateCommentWidgetMessage","connection","widget","paddingBottom","commentMessage","topPanel","widgetTitle","widgetSourceLink","WidgetTopPanel","resDeleteWidget","executeDeleteWidgetMutation","executeUpdateWidgetMutation","widgetSource","setWidgetSource","deleteWidget","updateWidget","closeEditDialog","err","whiteSpace","Link","href","owner","canConfigure","paddingLeft","paddingRight","interactionPanel","button","CommentWidget","commentDialogOpen","setCommentDialogOpen","resCreateCommentWidget","executeCreateCommentWidgetMutation","useCommentWidgetQuery","resCommentWidget","executeCommentWidgetQuery","executeAddReactionToCommentWidgetMutation","executeRemoveReactionFromCommentWidgetMutation","setCommentWidget","reactionsCount","createWidget","messagesCount","Badge","actionButtonsGroup","GitHubGistWidget","setGistURL","URL","host","pathname","registerWidgetCreator","el","document","createElement","ReactDOM","render","ThemeProvider","ErrorWidget","VickyMDVersion","dependencies","vickymd","VickyMDSetTheme","baseUri","_themeManager","themes","selectedTheme","selectTheme","addTheme","KeyMap","themeManager","SettingsContainer","v","setLanguage","editorCursorColor","setEditorCursorColor","setAuthorName","setAuthorEmail","getTheme","DEFAULT","VIM","EMACS","setKeyMap","i18n","_setLanguage","changeLanguage","_setEditorCursorColor","_setAuthorName","_setAuthorEmail","_setTheme","_setKeyMap","textField","PushNotebookDialog","setGitUsername","setGitPassword","commitMessage","setCommitMessage","useContainer","ChangeFilePathDialog","inputEl","setInputEl","setNewFilePath","changeFilePath","setSelectionRange","start","end","inputRef","FloatWin","closeBtn","visible","win","getElementById","titlebar","querySelector","addEventListener","boxX","boxY","mouseX","mouseY","offsetX","offsetY","hide","ev","keyCode","offsetLeft","offsetTop","getMouseXY","move","up","test","documentElement","clientWidth","offsetWidth","clientHeight","offsetHeight","min","max","removeEventListener","pageX","pageY","clientX","scrollLeft","clientLeft","clientY","clientTop","moveToCenter","setTimeout","moveTo","innerWidth","innerHeight","s","DeleteNoteDialog","DialogContentText","menuItemOverride","menuItemTextField","TagsMenuPopover","setTagName","setOptions","addTag","anchorElement","helper","keepMounted","Autocomplete","inputValue","onInputChange","newInputValue","opt","newValue","renderInput","params","noOptionsText","openText","closeText","loadingText","clearText","tagNames","is","HMDFold","math","editorPanel","bottomPanel","controlBtn","controlBtnSelected","controlBtnSelectedSecondary","cursorPositionInfo","presentation","splitView","borderLeft","backBtn","floatWin","floatWinHidden","floatWinTitle","floatWinContent","floatWinClose","Editor","line","ch","cursorPosition","setCursorPosition","deleteNoteDialogOpen","setDeleteNoteDialogOpen","filePathDialogOpen","setFilePathDialogOpen","pushDialogOpen","setPushDialogOpen","previewIsPresentation","setPreviewIsPresentation","gitStatus","setGitStatus","fullScreenMode","setFullScreenMode","tagsMenuAnchorEl","setTagsMenuAnchorEl","setTagNames","shareAnchorEl","setShareAnchorEl","toggleEncryptionDialogOpen","setToggleEncryptionDialogOpen","toggleEncryptionPassword","setToggleEncryptionPassword","decryptionDialogOpen","setDecryptionDialogOpen","decryptionPassword","setDecryptionPassword","isDecrypted","setIsDecrypted","needsToPrint","setNeedsToPrint","closeFilePathDialog","closeEncryptionDialog","closeDecryptionDialog","newTagNames","toggleEncryption","bytes","CryptoJS","decrypt","Utf8","decryptNote","togglePin","previewPostprocessPreview","flag","styleID","appendChild","innerText","refresh","hmdFold","hmdClick","info","cm","ctrlKey","altKey","getCursor","mathRenderer","supressed","onPreview","expr","hmd","FoldMath","createRenderer","onChanged","cursorPos","charCoords","isReady","startRender","onPreviewEnd","initMathPreview","changesHandler","getOption","keyupHandler","switchToHyperMD","getWrapperElement","SourceCode","switchToNormal","SplitView","innerHTML","clickHandler","onChangeHandler","changeObject","getLine","showHint","closeOnUnfocus","completeSingle","token","getTokenAt","lineStr","currentWord","cur","wrapper","leftPanel","iconWrapper","fontSize","iconElement","classList","icon","rightPanel","descriptionElement","commandElement","command","commands","date","filtered","list","doubleSemiColon","def","EmojiDefinitions","displayText","TagStopRegExp","removed","lines","timerTexts","dataMatch","dataStr","datetime","currentTimerText","previousTimerText","duration","formatDistance","includeSeconds","newText","onCursorActivityHandler","onChangeCallback","onCursorActivityCallback","onScrollCallback","onWindowResizeCallback","scrollMap","scrollTimeout","previewScrollDelay","editorScrollDelay","editorClientWidth","getScrollInfo","editorClientHeight","lastCursorPosition","totalLineCount","lineCount","buildScrollMap","nonEmptyList","lineElements","getElementsByClassName","parseInt","removeAttribute","offsetParent","round","scrollToPos","clearTimeout","perTick","scrollSyncToLine","topRatio","revealEditorLine","scrollInfo","scrollIntoView","firstLine","lineAtHeight","lastLine","midLine","topLine","bottomLine","onscroll","mid","screenRow","abs","previewSyncSource","tempPreviewElement","bannerElement","currentTheme","printDone","VickyMDPrintPreview","printPreview","onChangesHandler","aria-label","currentTarget","desktop","copyToClipboard","Breadcrumbs","maxItems","arr","Hidden","smUp","AddNotebookDialog","notebookName","setNotebookName","expanded","setExpanded","setGitURL","setGitBranch","setGitCorsProxy","rememberCredentialsChecked","setRememberCredentialsChecked","close","autoComplete","autoCorrect","ExpansionPanel","ExpansionPanelSummary","expandIcon","ExpansionPanelDetails","canCancel","treeItemRoot","treeItemContent","typography","fontWeightMedium","fontWeight","fontWeightRegular","treeItemGroup","treeItemExpanded","treeItemLabel","treeItemLabelRoot","treeItemLabelIcon","treeItemLabelText","flexGrow","NotebookTreeView","handleChange","nodes","TreeView","defaultExpandIcon","disableFocusRipple","disableRipple","defaultCollapseIcon","defaultEndIcon","onNodeToggle","TreeItem","nodeId","group","role","constructDirectoryTreeItems","endIcon","constructTagNodeTreeItems","tagNode","Attachments","ConfigureNotebookDialog","setAutoFetchPeriod","clickDeleteCount","setClickDeleteCount","clickHardResetCount","setClickHardResetCount","parseFloat","isNaN","endAdornment","InputAdornment","noteCard","selected","unselected","borderBottom","header","wordBreak","imagesWrapper","backgroundSize","backgroundPosition","pin","NoteCard","setHeader","setSummary","setImages","formatDistanceStrict","imageSrcs","ButtonBase","arrow","backgroundImage","notesList","flex","overflowY","updatePanel","notesListElement","setNotesListElement","searchValue","unpinned","regexp","RegExp","keyDownHandler","currentIndex","hack","initialHeight","initialFlex","boxSizing","Skeleton","animation","once","scrollContainer","resize","RenameDirectoryDialog","setDirectory","RenameTagDialog","setTag","DeleteDirectoryDialog","DeleteTagDialog","notesPanel","sectionName","search","shape","fade","searchIcon","pointerEvents","inputRoot","inputInput","transition","transitions","create","loading","transform","sortSelected","NotesPanel","sortMenuAnchorEl","setSortMenuAnchorEl","isCreatingNote","setIsCreatingNote","directoryActionsAnchorEl","setDirectoryActionsAnchorEl","tagActionsAnchorEl","setTagActionsAnchorEl","renameDirectoryDialogOpen","setRenameDirectoryDialogOpen","deleteDirectoryDialogOpen","setDeleteDirectoryDialogOpen","renameTagDialogOpen","setRenameTagDialogOpen","deleteTagDialogOpen","setDeleteTagDialogOpen","setSearchValue","searchValueInputTimeout","setSearchValueInputTimeout","finalSearchValue","setFinalSearchValue","notebookConfigurationDialogOpen","setNotebookConfigurationDialogOpen","onChangeSearchValue","implementation","toggleDrawer","InputBase","inputProps","Divider","ListItemIcon","ASC","CircularProgress","wikiPanel","toc","WikiPanel","CloudContainer","authDialogOpen","setLoggedIn","setViewer","useViewerQuery","resViewer","executeViewerQuery","resSetUserInfo","executeSetUserInfoMutation","displayNotebookPreview","setDisplayNotebookPreview","refetchViewer","pollInterval","setUserInfo","cover","bio","reduceNotificationsCountByOne","notifications","totalCount","clearNotificationsCount","logout","reload","settingsCard","loggedInSection","saveBtn","logoutBtn","swatch","editorText","editorCursor","borderLeftStyle","borderLeftWidth","getRGBA","inputStr","g","Settings","colorPickerAnchorElement","setColorPickerAnchorElement","displayColorPicker","setAvatar","uploadingAvatar","setUploadingAvatar","useGitHubUserQuery","resGitHubUser","resUnlinkGitHubAccount","executeUnlinkGitHubAccount","widgetsCount","InputLabelProps","shrink","githubUser","login","onDelete","startGitHubOAuth","Select","MenuItem","borderLeftColor","cursorColor","rgb","GitCommit","Stage","form","authBtn","switchLink","AuthDialog","Signin","stage","setStage","setUsername","setEmail","setPassword","passwordConfirmation","setPasswordConfirmation","setErrorMessage","verificationCode","setVerificationCode","resSignIn","executeSignInMutation","resSignUp","executeSignUpMutation","resSendEmailVerificationCode","executeSendEmailVerificationCodeMutation","resResetPassword","executeResetPasswordMutation","signin","signup","sendEmailVerificationCode","resetPassword","signIn","signUp","Signup","ForgotPassword","NotificationsContainer","setPageInfo","setNotifications","needsRefetch","setNeedsRefetch","useNotificationsQuery","resNotifications","executeNotificationsQuery","resDeleteNotification","executeDeleteNotificationMutation","resDeleteAllNotifications","executeDeleteAllNotificationsMutation","fetchMoreNotifications","deleteNotification","notificationID","notification","deleteAllNotifications","ns","newNotifications","reverse","NotificationAvatarPanel","user","flexWrap","CommentWidgetMessagePostingNotification","notificationsCard","Notifications","notificationsContainer","dense","idx","notificationComponent","CommentWidgetMessagePosting","Fragment","PublishNotebookDialog","resPublishNotebook","executePublishNotebookMutation","notebookCard","star","NotebookCard","isStarred","starsCount","notebooksList","setNotebooksListElement","page","setPage","useNotebooksQuery","perPage","TotalStarsCount","resNotebooks","executeNotebooksQuery","finishedLoadingAll","setFinishedLoadingAll","newNotebooks","explorePanel","ExplorePanel","publishNotebookDialogOpen","setPublishNotebookDialogOpen","ConfigurePublishedNotebookDialog","resUpdateNotebook","executeUpdateNotebookMutation","resUnpublishNotebook","executeUnpublishNotebookMutation","unpublishNotebook","notebookPanel","previewWrapper","NotebookPanel","alreadyDownloadedNotebook","setAlreadyDownloadedNotebook","addNotebookDialogOpen","setAddNotebookDialogOpen","configureNotebookDialogOpen","setConfigureNotebookDialogOpen","executeStarNotebookMutation","executeUnstarNotebookMutation","openGitURLWithBranch","starOrUnstarTheNotebook","starred","openNotebook","PrivacyPolicy","attachmentCard","AttachmentCard","setImage","attachmentsList","setAttachments","attachmentsPanel","AttachmentsPanel","LanguageSelectorDialog","languages","setOpen","titleLanguage","setTitleLanguage","chooseLanguage","appBar","drawer","toolBar","displayNone","flexShrink","drawerPaper","notebooksSection","controllersSection","listItemIcon","menuButton","mainPanel","toolBarSpace","mixins","Home","isMobile","addNotebookRepo","setAddNotebookRepo","addNotebookBranch","setAddNotebookBranch","drawerOpen","setDrawerOpen","queryParams","repo","disablePadding","disableGutters","online","badgeContent","Explore","CssBaseline","Drawer","ModalProps","xsDown","defaultSize","minSize","maxSize","Privacy","container","GitHubOAuthCallback","accessToken","setAccessToken","setTitle","resLinkWithGitHubAccount","executeLinkWithGitHubAccount","resSignInWithGitHubAccount","executeSignInWithGitHubAccount","resSignUpWithGitHubAccount","executeSignUpWithGitHubAccount","signInWithGitHubAccount","signUpWithGitHubAccount","isLocalhost","hostname","register","navigator","process","swUrl","contentType","serviceWorker","ready","registration","unregister","registerValidSW","checkValidServiceWorker","onupdatefound","installingWorker","installing","onstatechange","state","controller","onUpdate","onSuccess","ServiceWorkerWrapper","showReload","setShowReload","waitingWorker","setWaitingWorker","onSWUpdate","waiting","reloadPage","postMessage","Snackbar","App","handler","prompt","userChoice","choiceResult","history","exact","qs","safari","copyTitle","copyBody","copyShareButtonLabel","copyAddHomeButtonLabel","copyClosePrompt","Provider","clipboardData","setData","queryCommandSupported","textContent","select","execCommand","ex","warn","removeChild","reduce","charCodeAt","hashCode","random","substr","endFrontMatterOffset","frontMatterString","yamlStr"],"mappings":"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","file":"static/js/main.fd0c2705.chunk.js","sourcesContent":["// @ts-ignore\nimport LightningFS from \"@isomorphic-git/lightning-fs\";\nimport * as path from \"path\";\nimport { Stats } from \"fs\";\n\nclass FileSystem {\n  private fs: any;\n\n  public readFile: (path: string, opts?: any) => Promise<string | Uint8Array>;\n  public writeFile: (path: string, data: string) => Promise<void>;\n  public readdir: (path: string) => Promise<string[]>;\n  public unlink: (path: string) => Promise<void>;\n  public stats: (path: string) => Promise<Stats>;\n  public mkdir: (path: string) => Promise<void>;\n  public exists: (path: string) => Promise<boolean>;\n  public rename: (oldPath: string, newPath: string) => Promise<void>;\n  public rmdir: (path: string) => Promise<void>;\n  public mkdirp: (path: string) => Promise<void>;\n\n  constructor(fs: any) {\n    this.fs = fs;\n    this.setUpFSMethods();\n  }\n\n  private setUpFSMethods() {\n    this.readFile = (path: string, opts?: any) => {\n      return new Promise((resolve, reject) => {\n        this.fs.readFile(path, opts, (error: Error, data: string) => {\n          if (error) {\n            return reject(error);\n          } else {\n            return resolve(data.toString());\n          }\n        });\n      });\n    };\n    this.writeFile = (path: string, data: string) => {\n      return new Promise((resolve, reject) => {\n        this.fs.writeFile(path, data, { encoding: \"utf8\" }, (error: Error) => {\n          if (error) {\n            return reject(error);\n          } else {\n            return resolve();\n          }\n        });\n      });\n    };\n    this.readdir = (path: string) => {\n      return new Promise((resolve, reject) => {\n        this.fs.readdir(path, (error: Error, files: string[]) => {\n          if (error) {\n            return reject(error);\n          } else {\n            return resolve(files);\n          }\n        });\n      });\n    };\n    this.unlink = (path: string) => {\n      return new Promise((resolve, reject) => {\n        this.fs.unlink(path, (error: Error) => {\n          if (error) {\n            return reject(error);\n          } else {\n            return resolve();\n          }\n        });\n      });\n    };\n    this.stats = (path: string) => {\n      return new Promise((resolve, reject) => {\n        this.fs.stat(path, (error: Error, stats: Stats) => {\n          if (error) {\n            return reject(error);\n          } else {\n            return resolve(stats);\n          }\n        });\n      });\n    };\n    this.mkdir = (path: string) => {\n      return new Promise((resolve, reject) => {\n        this.fs.mkdir(path, \"0777\", (error: Error) => {\n          if (error) {\n            return reject(error);\n          } else {\n            return resolve();\n          }\n        });\n      });\n    };\n    this.exists = (path: string) => {\n      return new Promise((resolve, reject) => {\n        this.fs.stat(path, (error: Error, stats: Stats) => {\n          if (error) {\n            return resolve(false);\n          } else {\n            return resolve(true);\n          }\n        });\n      });\n    };\n    const rename = async (oldPath: string, newPath: string) => {\n      const stats = await this.stats(oldPath);\n      if (stats.isDirectory()) {\n        await this.mkdirp(newPath);\n      } else {\n        await this.mkdirp(path.dirname(newPath));\n      }\n\n      return new Promise((resolve, reject) => {\n        this.fs.rename(oldPath, newPath, (error: Error) => {\n          if (error) {\n            return reject(error);\n          } else {\n            return resolve();\n          }\n        });\n      });\n    };\n    this.rename = async (oldPath: string, newPath: string) => {\n      const oldPathStat = await this.stats(oldPath);\n      let newPathStat: Stats;\n      if (await this.exists(newPath)) {\n        newPathStat = await this.stats(newPath);\n      } else {\n        newPathStat = null;\n      }\n      if (\n        oldPathStat.isDirectory() ||\n        (newPathStat && newPathStat.isDirectory())\n      ) {\n        const files = await this.readdir(oldPath);\n        // const promises = []; // <= It seems to cause bug if run parallel\n        for (let i = 0; i < files.length; i++) {\n          const file = files[i];\n          const filePath = path.resolve(oldPath, file);\n          const stats = await this.stats(filePath);\n          if (stats.isDirectory()) {\n            await this.rename(filePath, path.resolve(newPath, file));\n          } else {\n            await rename(filePath, path.resolve(newPath, file));\n          }\n        }\n        // await Promise.all(promises);\n        await this.rmdir(oldPath);\n      } else {\n        await rename(oldPath, newPath);\n      }\n    };\n    const rmdir = (path: string) => {\n      return new Promise((resolve, reject) => {\n        this.fs.rmdir(path, (error: Error) => {\n          if (error) {\n            return reject(error);\n          } else {\n            return resolve();\n          }\n        });\n      });\n    };\n    // Remove the directory recursively\n    this.rmdir = async (dirPath: string) => {\n      const files = await this.readdir(dirPath);\n      const promises = [];\n      for (let i = 0; i < files.length; i++) {\n        const file = files[i];\n        const filePath = path.resolve(dirPath, file);\n        const stats = await this.stats(filePath);\n        if (stats.isDirectory()) {\n          promises.push(this.rmdir(filePath));\n        } else {\n          promises.push(this.unlink(filePath));\n        }\n      }\n      await Promise.all(promises);\n      await rmdir(dirPath);\n    };\n\n    this.mkdirp = async (dirPath: string) => {\n      if (await this.exists(dirPath)) {\n        return;\n      } else {\n        await this.mkdirp(path.dirname(dirPath));\n        await this.mkdir(dirPath);\n      }\n    };\n  }\n}\n\nexport const fs = new LightningFS(\"fs\");\nexport const pfs = new FileSystem(fs);\n","import { UUIDNil } from \"./utils\";\n\nexport interface Summary {\n  title: string;\n  summary: string;\n  images: string[]; // If has `title`, then images[0] is cover.\n  tags: string[]; // TODO: support tags\n  html: string; // original html\n}\n\n/*\nexport async function getTopicsAndMentionsFromHTML(\n  html: string,\n  ribbit: Ribbit\n): Promise<{\n  topics: string[];\n  mentions: { name: string; address: string }[];\n}> {\n  const div = document.createElement(\"div\");\n  const topics = [];\n  const mentions = [];\n  div.innerHTML = html;\n\n  const tagElems = div.getElementsByClassName(\"tag\");\n  for (let i = 0; i < tagElems.length; i++) {\n    const tagElem = tagElems[i] as HTMLAnchorElement;\n    if (tagElem.classList.contains(\"tag-mention\")) {\n      const mention = tagElem.getAttribute(\"data-mention\");\n      const userInfo = await ribbit.getUserInfoFromUsername(mention);\n      mentions.push({\n        name: userInfo.username,\n        address: userInfo.address\n      });\n    } else if (tagElem.classList.contains(\"tag-topic\")) {\n      const topic = tagElem.getAttribute(\"data-topic\");\n      topics.push(topic);\n    }\n  }\n  div.remove();\n\n  return {\n    topics: Array.from(new Set(topics)),\n    mentions\n  };\n}\n*/\n\nexport function getHeaderFromMarkdown(markdown: string): string {\n  const titleMatch = markdown.match(/^#\\s.+$/gim);\n  if (titleMatch && titleMatch.length) {\n    return titleMatch[0].replace(/^#/, \"\").trim();\n  }\n  return \"\";\n}\n\nexport function getMentionsFromMarkdown(markdown: string): string[] {\n  return (markdown.match(/@(?:[a-zA-Z\\d]+-)*[a-zA-Z\\d]+/g) || [])\n    .map((username) => username.replace(/^@/, \"\").toLocaleLowerCase())\n    .filter(\n      (username, index, self) =>\n        index === self.findIndex((username2) => username === username2),\n    );\n}\n\nexport async function generateSummaryFromMarkdown(\n  markdown: string,\n): Promise<Summary> {\n  let title = \"\",\n    summary = \"\",\n    images: string[] = [];\n  markdown = markdown.replace(/^---([\\w\\W]+?\\n---)/, \"\").trim(); // Remove front matter\n  let contentString = markdown;\n\n  const titleMatch = markdown.match(/^#\\s.+$/gim);\n  if (titleMatch && titleMatch.length) {\n    title = titleMatch[0].replace(/^#/, \"\").trim();\n    const aheadString = markdown\n      .slice(0, markdown.indexOf(titleMatch[0]))\n      .trim();\n    contentString = markdown.slice(\n      markdown.indexOf(titleMatch[0]) + titleMatch[0].length,\n      markdown.length,\n    );\n    const coverMatch = aheadString.match(/^!\\[.*?\\]\\(.+?\\)/gim);\n    if (coverMatch && coverMatch.length) {\n      images.push(coverMatch[0].match(/\\(([^)\"]+?)\\)/)[1].trim());\n    }\n  }\n\n  const coverImagesMatch = markdown.match(/^!\\[.*?\\]\\(.+?\\)/gim);\n  if (coverImagesMatch && coverImagesMatch.length) {\n    coverImagesMatch.forEach((mdImage) => {\n      images.push(mdImage.match(/\\(([^)\"]+?)\\)/)[1].trim());\n    });\n    images = images.filter(\n      (image, index, self) => index === self.findIndex((m) => m === image),\n    );\n  }\n\n  summary = contentString\n    .split(\"\\n\")\n    .filter(\n      (x) =>\n        x.trim().length > 0 &&\n        !x.match(/!\\[.*?\\]\\(.+?\\)/) && // Remove image\n        !x.match(/<!--\\s*@.+?-->/), // Remove widget\n    )\n    .map((x) => x.replace(/#+\\s(.+)\\s*$/, \"**$1**\").trim()) // Replace headers to bold\n    .slice(0, 10)\n    .join(\"  \\n\");\n\n  return {\n    title,\n    summary,\n    images,\n    tags: [],\n    html: \"\",\n  };\n}\n\nexport const EmptyPageInfo = {\n  hasPreviousPage: false,\n  hasNextPage: false,\n  startCursor: UUIDNil,\n  endCursor: UUIDNil,\n};\n","import * as git from \"isomorphic-git\";\nimport http from \"isomorphic-git/http/web\";\nimport * as path from \"path\";\nimport PouchDB from \"pouchdb\";\nimport PouchdbFind from \"pouchdb-find\";\n// @ts-ignore\nimport diff3Merge from \"diff3\";\nimport { isBinarySync } from \"istextorbinary\";\nimport { randomID } from \"../utilities/utils\";\nimport AES from \"crypto-js/aes\";\nimport { Stats } from \"fs\";\nimport { getHeaderFromMarkdown } from \"../utilities/note\";\nimport { pfs, fs } from \"./fs\";\nimport { isFileAnImage } from \"../utilities/image\";\nimport { matter, matterStringify } from \"../utilities/markdown\";\n\nexport interface Notebook {\n  _id: string;\n  dir: string;\n  name: string;\n\n  // git\n  gitURL: string;\n  gitBranch: string;\n  gitCorsProxy?: string;\n  gitUsername?: string;\n  gitPassword?: string;\n\n  autoFetchPeriod: number; // in milliseconds\n  fetchedAt: Date;\n  remoteSha: string;\n  localSha: string;\n}\n\nexport interface Note {\n  notebook: Notebook;\n  filePath: string;\n  markdown: string;\n  config: NoteConfig;\n  // createdAt: Date; // <- Can't get modifiedAt time\n}\n\nexport interface Attachment {\n  notebook: Notebook;\n  filePath: string;\n  content: string;\n  createdAt: Date;\n  modifiedAt: Date;\n}\n\nexport interface Directory {\n  name: string;\n  path: string;\n  children?: Directory[];\n}\n\nexport interface TagNode {\n  name: string;\n  path: string;\n  children?: TagNode[];\n  // numNotes: number;\n}\n\nexport interface NoteConfigEncryption {\n  title: string;\n  // method: string;? // Default AES256\n}\n\nexport interface NoteConfig {\n  createdAt: Date;\n  modifiedAt: Date;\n  tags?: string[];\n  pinned?: boolean;\n  encryption?: NoteConfigEncryption;\n}\n\nexport interface NotebookConfig {\n  repository: string;\n  branch: string;\n  author: string;\n  contributors: string[];\n}\n\ninterface CloneNotebookArgs {\n  name?: string;\n  corsProxy?: string;\n  gitURL: string;\n  branch?: string;\n  depth?: number;\n  username?: string;\n  password?: string;\n  rememberCredentials?: boolean;\n}\n\ninterface ListNotesArgs {\n  notebook: Notebook;\n  dir: string;\n  includeSubdirectories?: Boolean;\n}\n\ntype ListAttachmentsArgs = ListNotesArgs;\n\nexport interface PushNotebookArgs {\n  notebook: Notebook;\n  authorName?: string;\n  authorEmail?: string;\n  username?: string;\n  password?: string;\n  message?: string;\n  onProgress?: (progress: git.GitProgressEvent) => void;\n  onMessage?: (message: string) => void;\n  onAuthFailure?: (url: string) => void;\n  onAuthSuccess?: (url: string) => void;\n}\n\nexport interface PullNotebookArgs {\n  notebook: Notebook;\n  onProgress?: (progress: git.GitProgressEvent) => void;\n  onMessage?: (message: string) => void;\n  onAuthFailure?: (url: string) => void;\n  onAuthSuccess?: (url: string) => void;\n}\n\nexport type FetchNotebookArgs = PullNotebookArgs;\n\ninterface PullNotebookResult {\n  numConflicts: number;\n  cache: Cache;\n}\n\ntype Cache = {\n  [key: string]: {\n    status: string;\n    markdown: string;\n  };\n};\n\n/**\n * Change \"createdAt\" to \"created\", and \"modifiedAt\" to \"modified\"\n * @param noteConfig\n */\nfunction formatNoteConfig(noteConfig: NoteConfig) {\n  const newObject: any = Object.assign({}, noteConfig);\n\n  newObject[\"created\"] = noteConfig.createdAt;\n  delete newObject[\"createdAt\"];\n\n  newObject[\"modified\"] = noteConfig.modifiedAt;\n  delete newObject[\"modifiedAt\"];\n\n  return newObject;\n}\n\nexport default class Crossnote {\n  private notebookDB: PouchDB.Database<Notebook>;\n\n  constructor() {\n    PouchDB.plugin(PouchdbFind);\n    this.notebookDB = new PouchDB(\"notebooks\");\n    this.notebookDB.createIndex({\n      index: {\n        fields: [\"gitURL\"],\n      },\n    });\n  }\n\n  public async addNotebook({\n    name = \"\",\n    corsProxy,\n    gitURL,\n    branch = \"master\",\n    username = \"\",\n    password = \"\",\n    depth = 3,\n    rememberCredentials = false,\n  }: CloneNotebookArgs) {\n    if (gitURL) {\n      return await this.cloneNotebook({\n        name,\n        corsProxy,\n        gitURL,\n        branch,\n        username,\n        password,\n        depth,\n        rememberCredentials,\n      });\n    } else {\n      const _id = randomID();\n      const dir = `/notebooks/${_id}`;\n      const notebook: Notebook = {\n        _id,\n        dir,\n        name: name.trim() || \"Unnamed\",\n        gitURL: gitURL.trim(),\n        gitBranch: branch.trim() || \"master\",\n        gitCorsProxy: corsProxy.trim(),\n        gitUsername: rememberCredentials ? username.trim() : \"\",\n        gitPassword: rememberCredentials ? password : \"\",\n        autoFetchPeriod: 0,\n        fetchedAt: new Date(),\n        remoteSha: \"\",\n        localSha: \"\",\n      };\n      if (!(await pfs.exists(\"/notebooks\"))) {\n        await pfs.mkdir(\"/notebooks\");\n      }\n      if (!(await pfs.exists(dir))) {\n        await pfs.mkdir(dir);\n      }\n      await git.init({\n        fs: fs,\n        dir,\n      });\n\n      // Save to DB\n      try {\n        await this.notebookDB.put(notebook);\n      } catch (error) {\n        // Failed to save to DB\n        await pfs.rmdir(dir);\n      }\n\n      return notebook;\n    }\n  }\n\n  public async cloneNotebook({\n    name = \"\",\n    corsProxy,\n    gitURL,\n    branch = \"master\",\n    username = \"\",\n    password = \"\",\n    depth = 10,\n    rememberCredentials = false,\n  }: CloneNotebookArgs): Promise<Notebook> {\n    if (!gitURL.match(/^https?:\\/\\//)) {\n      throw new Error(\"error/invalid-git-url-prefix\");\n    }\n\n    // Check if gitURL exists\n    /*\n    let exists = false;\n    try {\n      const notebooks = await this.notebookDB.find({\n        selector: {\n          gitURL: { $eq: gitURL }\n        }\n      });\n      if (notebooks.docs && notebooks.docs.length) {\n        exists = true;\n      }\n    } catch (error) {\n      exists = false;\n    }\n\n    if (exists) {\n      throw new Error(\"error/repository-already-cloned\");\n    }*/\n\n    const _id = randomID();\n    const dir = `/notebooks/${_id}`;\n\n    await git.clone({\n      fs: fs,\n      http,\n      dir,\n      corsProxy,\n      url: gitURL,\n      ref: branch.trim() || \"master\",\n      depth: depth,\n      singleBranch: true,\n      onAuth: (url, auth) => {\n        return {\n          username,\n          password,\n        };\n      },\n    });\n\n    const sha = await this.getGitSHA(\n      dir,\n      `origin/${branch.trim() || \"master\"}`,\n    );\n\n    const notebook: Notebook = {\n      _id,\n      dir,\n      name: name || this.getDefaultNotebookNameFromGitURL(gitURL),\n      gitURL: gitURL,\n      gitBranch: branch.trim() || \"master\",\n      gitCorsProxy: corsProxy,\n      gitUsername: rememberCredentials ? username : \"\",\n      gitPassword: rememberCredentials ? password : \"\",\n      autoFetchPeriod: 3600000, // 60 minutes\n      fetchedAt: new Date(),\n      localSha: sha,\n      remoteSha: sha,\n    };\n\n    // Save to DB\n    try {\n      await this.notebookDB.put(notebook);\n    } catch (error) {\n      // Failed to save to DB\n      await pfs.rmdir(dir);\n    }\n\n    return notebook;\n  }\n\n  public async exportNotebookToJSON(notebook: Notebook): Promise<string> {\n    return \"\";\n  }\n\n  public async importNotebookFromJSON(notebook: Notebook): Promise<string> {\n    return \"\";\n  }\n\n  public async deleteNotebook(notebookID: string) {\n    const notebook = await this.notebookDB.get(notebookID);\n    await pfs.rmdir(notebook.dir);\n    await this.notebookDB.remove(notebook);\n  }\n  public async updateNotebook(notebook: Notebook) {\n    const nb = await this.notebookDB.get(notebook._id);\n    nb.dir = notebook.dir;\n    nb.name = notebook.name;\n    nb.gitURL = notebook.gitURL;\n    nb.gitBranch = notebook.gitBranch;\n    nb.gitCorsProxy = notebook.gitCorsProxy;\n    nb.gitUsername = notebook.gitUsername;\n    nb.gitPassword = notebook.gitPassword;\n    nb.autoFetchPeriod = notebook.autoFetchPeriod;\n    nb.fetchedAt = notebook.fetchedAt;\n    nb.remoteSha = notebook.remoteSha;\n    nb.localSha = notebook.localSha;\n    await this.notebookDB.put(nb, { force: true });\n  }\n\n  public async changeNoteFilePath(\n    notebook: Notebook,\n    note: Note,\n    newFilePath: string,\n  ) {\n    newFilePath = newFilePath.replace(/^\\/+/, \"\");\n    if (!newFilePath.endsWith(\".md\")) {\n      newFilePath = newFilePath + \".md\";\n    }\n\n    const oldFilePath = note.filePath;\n    const newDirPath = path.dirname(path.resolve(notebook.dir, newFilePath));\n    await pfs.mkdirp(newDirPath);\n\n    // TODO: Check if newFilePath already exists. If so don't overwrite\n    const exists = await pfs.exists(path.resolve(notebook.dir, newFilePath));\n    if (exists) {\n      throw new Error(\"error/target-file-already-exists\");\n    }\n\n    await pfs.rename(\n      path.resolve(notebook.dir, oldFilePath),\n      path.resolve(notebook.dir, newFilePath),\n    );\n    await git.remove({\n      fs: fs,\n      dir: notebook.dir,\n      filepath: oldFilePath,\n    });\n    await git.add({\n      fs: fs,\n      dir: notebook.dir,\n      filepath: newFilePath,\n    });\n  }\n\n  public async renameDirectory(\n    notebook: Notebook,\n    oldDirName: string,\n    newDirName: string,\n  ) {\n    await pfs.rename(\n      path.resolve(notebook.dir, oldDirName),\n      path.resolve(notebook.dir, newDirName),\n    );\n    await git.remove({\n      fs: fs,\n      dir: notebook.dir,\n      filepath: oldDirName,\n    });\n    await git.add({\n      fs: fs,\n      dir: notebook.dir,\n      filepath: newDirName || \".\",\n    });\n  }\n\n  public async deleteDirectory(notebook: Notebook, dirName: string) {\n    await pfs.rmdir(path.resolve(notebook.dir, dirName));\n    await git.remove({\n      fs: fs,\n      dir: notebook.dir,\n      filepath: dirName,\n    });\n  }\n\n  private async generateChangesCache(notebook: Notebook): Promise<Cache> {\n    const cache: Cache = {};\n    const createCache = async (stagedFiles: string[]) => {\n      for (let i = 0; i < stagedFiles.length; i++) {\n        if (stagedFiles[i] in cache) {\n          continue;\n        }\n        const status = await git.status({\n          fs: fs,\n          dir: notebook.dir,\n          filepath: stagedFiles[i],\n        });\n        if (status.match(/^\\*?(modified|added)/)) {\n          cache[stagedFiles[i]] = {\n            status,\n            markdown: (await pfs.readFile(\n              path.resolve(notebook.dir, stagedFiles[i]),\n              { encoding: \"utf8\" },\n            )) as string,\n          };\n        } else if (status.match(/^\\*?(deleted)/)) {\n          cache[stagedFiles[i]] = {\n            status,\n            markdown: \"\",\n          };\n        }\n      }\n    };\n\n    await createCache(\n      // Check previous staged file for `delete` status\n      await git.listFiles({\n        fs: fs,\n        dir: notebook.dir,\n        ref: \"HEAD\",\n      }),\n    );\n\n    await createCache(\n      // Check current staged file for `add` status\n      await git.listFiles({\n        fs: fs,\n        dir: notebook.dir,\n      }),\n    );\n\n    return cache;\n  }\n\n  public async pushNotebook({\n    notebook,\n    authorName = \"crossnote\",\n    authorEmail = \"anonymous@crossnote.com\",\n    username,\n    password,\n    message = \"doc: Updated docs\",\n    onProgress,\n    onMessage,\n    onAuthFailure,\n    onAuthSuccess,\n  }: PushNotebookArgs): Promise<null | git.PushResult> {\n    // Pull notebook first\n    const pullNotebookResult = await this.pullNotebook({\n      notebook,\n      onProgress,\n      onAuthFailure,\n      onAuthSuccess,\n      onMessage,\n    });\n\n    if (pullNotebookResult.numConflicts > 0) {\n      throw new Error(\"error/please-resolve-conflicts\");\n    }\n\n    const localSha = notebook.localSha;\n\n    const sha = await git.commit({\n      fs: fs,\n      dir: notebook.dir,\n      author: {\n        name: authorName,\n        email: authorEmail,\n      },\n      message,\n    });\n\n    const restoreSHA = async () => {\n      const gitBranch = notebook.gitBranch || \"master\";\n      // Perform a soft reset\n      await pfs.writeFile(\n        path.resolve(notebook.dir, `.git/refs/heads/${gitBranch}`),\n        localSha,\n      );\n    };\n\n    // console.log(sha);\n    const pushResult = await git.push({\n      fs: fs,\n      http,\n      onAuth: (url, auth) => {\n        return {\n          username: username, // || notebook.gitUsername,\n          password: password, // || notebook.gitPassword\n        };\n      },\n      onProgress: (progress) => {\n        if (onProgress) {\n          onProgress(progress);\n        }\n      },\n      onMessage: (message) => {\n        if (onMessage) {\n          onMessage(message);\n        }\n      },\n      onAuthFailure: (url, auth) => {\n        if (onAuthFailure) {\n          onAuthFailure(url);\n        }\n        restoreSHA();\n      },\n      onAuthSuccess: (url, auth) => {\n        if (onAuthSuccess) {\n          onAuthSuccess(url);\n        }\n      },\n      url: notebook.gitURL,\n      dir: notebook.dir,\n      ref: notebook.gitBranch,\n      corsProxy: notebook.gitCorsProxy,\n    });\n\n    // console.log(\"pushResult: \", pushResult);\n\n    if (pushResult.error) {\n      restoreSHA();\n    }\n\n    if (pushResult.ok) {\n      // Update notebook\n      notebook.fetchedAt = new Date();\n      notebook.localSha = sha;\n      notebook.remoteSha = sha;\n      await this.updateNotebook(notebook);\n    }\n    return pushResult;\n  }\n\n  public async getGitSHA(dir: string, ref: string = \"master\"): Promise<string> {\n    try {\n      let logs = await git.log({\n        fs: fs,\n        dir: dir,\n        ref: ref,\n        depth: 5,\n      });\n      if (logs.length > 0) {\n        return (logs && logs[0]).oid;\n      } else {\n        return \"\";\n      }\n    } catch (error) {\n      return \"\";\n    }\n  }\n\n  public async hardResetNotebook(notebook: Notebook, sha: string) {\n    await pfs.writeFile(\n      path.resolve(notebook.dir, `.git/refs/heads/${notebook.gitBranch}`),\n      sha,\n    );\n    await pfs.unlink(path.resolve(notebook.dir, `.git/index`));\n    await git.checkout({\n      dir: notebook.dir,\n      fs: fs,\n      ref: notebook.gitBranch || \"master\",\n    });\n  }\n\n  private async restoreFilesFromCache(\n    cache: Cache,\n    notebook: Notebook,\n  ): Promise<number> {\n    let numConflicts = 0;\n    // console.log(\"same\");\n    for (const filePath in cache) {\n      if (cache[filePath].status === \"deleted\") {\n        await this.deleteNote(notebook, filePath);\n        continue;\n      }\n      const markdown = cache[filePath].markdown;\n      const dirname = path.dirname(path.resolve(notebook.dir, filePath));\n      await pfs.mkdirp(dirname);\n      await pfs.writeFile(path.resolve(notebook.dir, filePath), markdown);\n      await git.add({\n        fs: fs,\n        dir: notebook.dir,\n        filepath: filePath,\n      });\n      if (this.markdownHasConflicts(markdown)) {\n        numConflicts += 1;\n      }\n    }\n    return numConflicts;\n  }\n\n  public async pullNotebook({\n    notebook,\n    onProgress,\n    onAuthFailure,\n    onAuthSuccess,\n    onMessage,\n  }: PullNotebookArgs): Promise<PullNotebookResult> {\n    // Stop using git.pull as merge will cause error\n    const result = await git.fetch({\n      fs: fs,\n      http,\n      dir: notebook.dir,\n      singleBranch: true,\n      corsProxy: notebook.gitCorsProxy,\n      ref: notebook.gitBranch || \"master\",\n      onAuth: (url, auth) => {\n        return {\n          username: notebook.gitUsername,\n          password: notebook.gitPassword,\n        };\n      },\n      onProgress,\n      onAuthFailure,\n      onAuthSuccess,\n      onMessage,\n    });\n\n    // NOTE: Seems like diff3 not working as I expected. Therefore I might create my own type of diff\n    const cache: {\n      [key: string]: {\n        status: string;\n        markdown: string;\n      };\n    } = await this.generateChangesCache(notebook);\n    const localSha = notebook.localSha;\n\n    // Save cache in case of system crash\n    localStorage.setItem(\n      `pending/pull/${notebook._id}`,\n      JSON.stringify({\n        cache,\n        localSha,\n      }),\n    );\n\n    // Perform a hard reset\n    const remoteSha = result.fetchHead;\n    await this.hardResetNotebook(notebook, remoteSha);\n\n    let numConflicts = 0;\n    if (localSha === remoteSha) {\n      // Restore from cache\n      numConflicts = await this.restoreFilesFromCache(cache, notebook);\n    } else {\n      // Check conflicted notes\n      // console.log(\"check conflicted\");\n      const LINEBREAKS = /^.*(\\r?\\n|$)/gm;\n      const markerSize = 7;\n      const ourName = \"ours\";\n      const theirName = \"theirs\";\n      // const baseName = \"base\";\n      for (const filePath in cache) {\n        const ourContent = cache[filePath].markdown;\n        if (await pfs.exists(path.resolve(notebook.dir, filePath))) {\n          let baseContent: string = \"\";\n          let theirContent: string = \"\";\n          try {\n            const baseContentBlobResult = await git.readBlob({\n              fs: fs,\n              dir: notebook.dir,\n              oid: localSha,\n              filepath: filePath,\n            });\n            baseContent = Buffer.from(baseContentBlobResult.blob).toString(\n              \"utf8\",\n            );\n          } catch (error) {}\n          try {\n            const theirContentBlobTresult = await git.readBlob({\n              fs: fs,\n              dir: notebook.dir,\n              oid: remoteSha,\n              filepath: filePath,\n            });\n            theirContent = Buffer.from(theirContentBlobTresult.blob).toString(\n              \"utf8\",\n            );\n          } catch (error) {}\n          // console.log(\"ourContent: \", ourContent);\n          // console.log(\"theirContent: \", theirContent);\n          // console.log(\"baseContent: \", baseContent);\n\n          // TODO: clean front-matter\n\n          // Refered from https://github.com/isomorphic-git/isomorphic-git/blob/4e66704d05042624bbc78b85ee5110d5ee7ec3e2/src/utils/mergeFile.js\n          const ours = ourContent.match(LINEBREAKS);\n          const base = baseContent.match(LINEBREAKS);\n          const theirs = theirContent.match(LINEBREAKS);\n\n          // Here we let the diff3 library do the heavy lifting.\n          const result = diff3Merge(ours, base, theirs);\n\n          // Here we note whether there are conflicts and format the results\n          let mergedText = \"\";\n          let hasConflict = false;\n          for (const item of result) {\n            if (item.ok) {\n              mergedText += item.ok.join(\"\");\n            }\n            if (item.conflict) {\n              hasConflict = true;\n              mergedText += `\\\\<${\"<\".repeat(markerSize - 1)} ${ourName}\\n`;\n              mergedText += item.conflict.a.join(\"\") + \"\\n\";\n              // if (format === \"diff3\") {\n              //mergedText += `\\\\|${\"|\".repeat(markerSize - 1)} ${baseName}\\n`;\n              //mergedText += item.conflict.o.join(\"\");\n              // }\n              mergedText += `\\\\=${\"=\".repeat(markerSize - 1)}\\n`;\n              mergedText += item.conflict.b.join(\"\") + \"\\n\";\n              mergedText += `\\\\>${\">\".repeat(markerSize - 1)} ${theirName}\\n`;\n            }\n          }\n          if (hasConflict) {\n            numConflicts += 1;\n          }\n\n          // console.log(\"mergedText: \", mergedText);\n          const dirname = path.dirname(path.resolve(notebook.dir, filePath));\n          await pfs.mkdirp(dirname);\n          await pfs.writeFile(path.resolve(notebook.dir, filePath), mergedText);\n          await git.add({\n            fs: fs,\n            dir: notebook.dir,\n            filepath: filePath,\n          });\n        } else {\n          const markdown = cache[filePath].markdown;\n          const dirname = path.dirname(path.resolve(notebook.dir, filePath));\n          await pfs.mkdirp(dirname);\n          await pfs.writeFile(path.resolve(notebook.dir, filePath), markdown);\n          await git.add({\n            fs: fs,\n            dir: notebook.dir,\n            filepath: filePath,\n          });\n        }\n      }\n    }\n\n    // Update notebook\n    notebook.fetchedAt = new Date();\n    notebook.localSha = remoteSha;\n    notebook.remoteSha = remoteSha;\n    await this.updateNotebook(notebook);\n\n    localStorage.removeItem(`pending/pull/${notebook._id}`);\n\n    return {\n      numConflicts,\n      cache,\n    };\n  }\n\n  public async fetchNotebook({\n    notebook,\n    onProgress,\n    onAuthFailure,\n    onAuthSuccess,\n    onMessage,\n  }: FetchNotebookArgs): Promise<boolean> {\n    const localSha = notebook.localSha;\n    const result = await git.fetch({\n      fs: fs,\n      http,\n      dir: notebook.dir,\n      singleBranch: true,\n      tags: false,\n      depth: 1,\n      corsProxy: notebook.gitCorsProxy,\n      url: notebook.gitURL,\n      ref: notebook.gitBranch || \"master\",\n      onAuth: (url, auth) => {\n        return {\n          username: notebook.gitUsername,\n          password: notebook.gitPassword,\n        };\n      },\n      onProgress,\n      onAuthFailure,\n      onAuthSuccess,\n      onMessage,\n    });\n\n    // Update notebook\n    notebook.fetchedAt = new Date();\n    notebook.localSha = localSha;\n    notebook.remoteSha = result.fetchHead;\n    await this.updateNotebook(notebook);\n\n    return localSha !== result.fetchHead;\n  }\n\n  public markdownHasConflicts(markdown: string): boolean {\n    const m1 = markdown.match(/^\\\\<+\\s/gm);\n    const m2 = markdown.match(/^\\\\=+\\s/gm);\n    const m3 = markdown.match(/^\\\\>+\\s/gm);\n    return m1 && m1.length > 0 && m2 && m2.length > 0 && m3 && m3.length > 0;\n  }\n\n  public async checkoutNote(note: Note): Promise<Note> {\n    try {\n      await git.checkout({\n        fs: fs,\n        dir: note.notebook.dir,\n        // ref: \"HEAD\"\n        // ref: note.notebook.gitBranch,\n        filepaths: [note.filePath],\n        force: true,\n      });\n      if (await pfs.exists(path.resolve(note.notebook.dir, note.filePath))) {\n        await git.add({\n          // .remove is wrong\n          fs: fs,\n          dir: note.notebook.dir,\n          filepath: note.filePath,\n        });\n      }\n      const newNote = await this.getNote(note.notebook, note.filePath);\n      return newNote;\n    } catch (error) {\n      return null;\n    }\n  }\n\n  public async listNotebooks(): Promise<Notebook[]> {\n    const notebooks = (\n      await this.notebookDB.find({\n        selector: {\n          gitURL: { $gt: null },\n        },\n      })\n    ).docs;\n    // console.log(notebooks);\n\n    const promises = notebooks.map((notebook, i) => {\n      return (async (i: number) => {\n        const notebook = notebooks[i];\n        notebook.fetchedAt = new Date(notebook.fetchedAt || 0);\n        if (notebook.gitURL.trim().length <= 0) {\n          // no remote set\n          return;\n        }\n        if (typeof notebook.autoFetchPeriod === \"undefined\") {\n          notebook.autoFetchPeriod = 3600000; // 60 minutes\n        }\n        if (typeof notebook.localSha === \"undefined\") {\n          notebook.localSha = await this.getGitSHA(\n            notebook.dir,\n            `origin/${notebook.gitBranch}`,\n          );\n        }\n        if (typeof notebook.remoteSha === \"undefined\") {\n          notebook.remoteSha = notebook.localSha;\n        }\n        const gitBranch = notebook.gitBranch || \"master\";\n        const sha = notebook.localSha || \"\";\n        try {\n          // Perform a soft reset\n          await pfs.writeFile(\n            path.resolve(notebook.dir, `.git/refs/heads/${gitBranch}`),\n            sha,\n          );\n\n          // Restore cached files from failed `git` pull event\n          const pendingPull = localStorage.getItem(\n            `pending/pull/${notebook._id}`,\n          );\n          if (pendingPull) {\n            try {\n              await this.restoreFilesFromCache(\n                JSON.parse(pendingPull).cache,\n                notebook,\n              );\n            } catch (error) {}\n            localStorage.removeItem(`pending/pull/${notebook._id}`);\n          }\n\n          const status = await git.status({\n            fs: fs,\n            dir: notebook.dir,\n            filepath: \".\",\n          });\n\n          // check: absent, deleted, undeleted\n          if (status.match(/(absent|deleted)/) || pendingPull) {\n            // NOTE: Seems like there is a bug somewhere that caused all files to become *undeleted\n            // So we run git.add again.\n            await git.add({\n              fs: fs,\n              dir: notebook.dir,\n              filepath: \".\",\n            });\n          }\n        } catch (error) {\n          notebooks[i] = null;\n        }\n      })(i);\n    });\n\n    await Promise.all(promises);\n\n    return notebooks\n      .filter((nb) => nb)\n      .sort((x, y) => x.name.localeCompare(y.name));\n  }\n\n  public async getNote(\n    notebook: Notebook,\n    filePath: string,\n    stats?: Stats,\n  ): Promise<Note> {\n    const absFilePath = path.resolve(notebook.dir, filePath);\n    if (!stats) {\n      try {\n        stats = await pfs.stats(absFilePath);\n      } catch (error) {\n        return null;\n      }\n    }\n    if (stats.isFile() && filePath.endsWith(\".md\")) {\n      let markdown = (await pfs.readFile(absFilePath, {\n        encoding: \"utf8\",\n      })) as string;\n      // console.log(\"read: \", filePath, markdown);\n\n      // Read the noteConfig, which is like <!-- note {...} --> at the end of the markdown file\n      let noteConfig: NoteConfig = {\n        // id: \"\",\n        createdAt: new Date(stats.ctimeMs),\n        modifiedAt: new Date(stats.mtimeMs),\n        tags: [],\n      };\n\n      try {\n        const data = matter(markdown);\n        const frontMatter: any = Object.assign({}, data.data);\n        if (data.data[\"note\"]) {\n          // TODO: Remove this check for legacy note config in the future.\n          noteConfig = Object.assign(noteConfig, data.data[\"note\"] || {});\n          delete frontMatter[\"note\"];\n\n          // Migration\n          const newFrontMatter = Object.assign(\n            {},\n            frontMatter,\n            formatNoteConfig(noteConfig),\n          );\n          const newMarkdown = matterStringify(data.content, newFrontMatter);\n          await pfs.writeFile(absFilePath, newMarkdown);\n          await git.add({\n            fs: fs,\n            dir: notebook.dir,\n            filepath: filePath,\n          });\n        } else {\n          // New note config design in beta 3\n          if (data.data[\"created\"]) {\n            noteConfig.createdAt = new Date(data.data[\"created\"]);\n            delete frontMatter[\"created\"];\n          }\n          if (data.data[\"modified\"]) {\n            noteConfig.modifiedAt = new Date(data.data[\"modified\"]);\n            delete frontMatter[\"modified\"];\n          }\n          if (data.data[\"tags\"]) {\n            // TODO: Remove this tags support\n            noteConfig.tags = data.data[\"tags\"];\n            delete frontMatter[\"tags\"];\n          }\n          if (data.data[\"encryption\"]) {\n            // TODO: Remove the encryption support\n            noteConfig.encryption = data.data[\"encryption\"];\n            delete frontMatter[\"encryption\"];\n          }\n          if (data.data[\"pinned\"]) {\n            noteConfig.pinned = data.data[\"pinned\"];\n            delete frontMatter[\"pinned\"];\n          }\n        }\n        // markdown = matter.stringify(data.content, frontMatter); // <= NOTE: I think gray-matter has bug. Although I delete \"note\" section from front-matter, it still includes it.\n        markdown = matterStringify(data.content, frontMatter);\n      } catch (error) {\n        // Do nothing\n        markdown =\n          \"Please fix front-matter. (👈 Don't forget to delete this line)\\n\\n\" +\n          markdown;\n      }\n\n      // Create note\n      const note: Note = {\n        notebook: notebook,\n        filePath: path.relative(notebook.dir, absFilePath),\n        markdown,\n        config: noteConfig,\n      };\n      return note;\n    } else {\n      return null;\n    }\n  }\n\n  public async listNotes({\n    notebook,\n    dir = \"./\",\n    includeSubdirectories = false,\n  }: ListNotesArgs): Promise<Note[]> {\n    let notes: Note[] = [];\n    let files: string[] = [];\n    try {\n      files = await pfs.readdir(path.resolve(notebook.dir, dir));\n    } catch (error) {\n      files = [];\n    }\n    const listNotesPromises = [];\n    for (let i = 0; i < files.length; i++) {\n      const file = files[i];\n      const absFilePath = path.resolve(notebook.dir, dir, file);\n      const stats = await pfs.stats(absFilePath);\n      const note = await this.getNote(\n        notebook,\n        path.relative(notebook.dir, absFilePath),\n        stats,\n      );\n      if (note) {\n        notes.push(note);\n      }\n\n      if (stats.isDirectory() && file !== \".git\" && includeSubdirectories) {\n        listNotesPromises.push(\n          this.listNotes({\n            notebook,\n            dir: path.relative(notebook.dir, absFilePath),\n            includeSubdirectories,\n          }),\n        );\n      }\n    }\n    const res = await Promise.all(listNotesPromises);\n    res.forEach((r) => {\n      notes = notes.concat(r);\n    });\n\n    // console.log(\"listNotes: \", notes);\n    return notes;\n  }\n\n  public async listAttachments({\n    notebook,\n    dir = \"./\",\n    includeSubdirectories = false,\n  }: ListAttachmentsArgs): Promise<Attachment[]> {\n    let attachments: Attachment[] = [];\n    let files: string[] = [];\n    try {\n      files = await pfs.readdir(path.resolve(notebook.dir, dir));\n    } catch (error) {\n      files = [];\n    }\n    const listAttachmentsPromises = [];\n    for (let i = 0; i < files.length; i++) {\n      const file = files[i];\n      const absFilePath = path.resolve(notebook.dir, dir, file);\n      const stats = await pfs.stats(absFilePath);\n      if (\n        stats.isFile() &&\n        !absFilePath.endsWith(\".md\") &&\n        isFileAnImage(file) // TODO: We only support images for now. Supports other types of files in the future\n      ) {\n        const attachment: Attachment = {\n          notebook,\n          filePath: path.relative(notebook.dir, absFilePath),\n          content: isBinarySync(file)\n            ? \"\"\n            : ((await pfs.readFile(absFilePath, {\n                encoding: \"utf8\",\n              })) as string),\n          createdAt: new Date(stats.ctimeMs),\n          modifiedAt: new Date(stats.mtimeMs),\n        };\n        attachments.push(attachment);\n        if (isBinarySync(file)) {\n        } else {\n        }\n      }\n\n      if (stats.isDirectory() && file !== \".git\" && includeSubdirectories) {\n        listAttachmentsPromises.push(\n          this.listAttachments({\n            notebook,\n            dir: path.relative(notebook.dir, absFilePath),\n            includeSubdirectories,\n          }),\n        );\n      }\n    }\n\n    const res = await Promise.all(listAttachmentsPromises);\n    res.forEach((r) => {\n      attachments = attachments.concat(r);\n    });\n\n    return attachments;\n  }\n\n  public async writeNote(\n    notebook: Notebook,\n    filePath: string,\n    markdown: string,\n    noteConfig: NoteConfig,\n    password?: string,\n  ): Promise<NoteConfig> {\n    noteConfig.modifiedAt = new Date();\n\n    try {\n      const data = matter(markdown);\n      if (data.data[\"note\"] && data.data[\"note\"] instanceof Object) {\n        noteConfig = Object.assign({}, noteConfig, data.data[\"note\"] || {});\n      }\n      const frontMatter = Object.assign(\n        data.data || {},\n        formatNoteConfig(noteConfig),\n      );\n      delete frontMatter[\"note\"];\n      markdown = data.content;\n      if (noteConfig.encryption) {\n        // TODO: Refactor\n        noteConfig.encryption.title = getHeaderFromMarkdown(markdown);\n        markdown = AES.encrypt(\n          JSON.stringify({ markdown }),\n          password || \"\",\n        ).toString();\n      }\n      markdown = matterStringify(markdown, frontMatter);\n    } catch (error) {\n      if (noteConfig.encryption) {\n        // TODO: Refactor\n        noteConfig.encryption.title = getHeaderFromMarkdown(markdown);\n        markdown = AES.encrypt(\n          JSON.stringify({ markdown }),\n          password || \"\",\n        ).toString();\n      }\n      markdown = matterStringify(markdown, formatNoteConfig(noteConfig));\n    }\n\n    await pfs.writeFile(path.resolve(notebook.dir, filePath), markdown);\n    await git.add({\n      fs: fs,\n      dir: notebook.dir,\n      filepath: filePath,\n    });\n    return noteConfig;\n  }\n\n  /**\n   * Update noteConfig only without updating markdown (excluding the front-matter)\n   * @param notebook\n   * @param filePath\n   * @param noteConfig\n   */\n  public async updateNoteConfig(\n    notebook: Notebook,\n    filePath: string,\n    noteConfig: NoteConfig,\n  ) {\n    const note = await this.getNote(notebook, filePath);\n    const data = matter(note.markdown);\n    const frontMatter = Object.assign(\n      data.data || {},\n      formatNoteConfig(noteConfig),\n    );\n    delete frontMatter[\"note\"]; // TODO: Remove this in beta 3\n    const markdown = matterStringify(data.content, frontMatter);\n    await pfs.writeFile(path.resolve(notebook.dir, filePath), markdown);\n    await git.add({\n      fs: fs,\n      dir: notebook.dir,\n      filepath: filePath,\n    });\n  }\n\n  public async deleteNote(notebook: Notebook, filePath: string) {\n    if (await pfs.exists(path.resolve(notebook.dir, filePath))) {\n      await pfs.unlink(path.resolve(notebook.dir, filePath));\n      await git.remove({\n        fs: fs,\n        dir: notebook.dir,\n        filepath: filePath,\n      });\n    }\n  }\n\n  public async duplicateNote(notebook: Notebook, filePath: string) {\n    const oldNote = await this.getNote(notebook, filePath);\n    if (!oldNote) return;\n    const noteConfig = oldNote.config;\n    noteConfig.createdAt = new Date();\n    noteConfig.modifiedAt = new Date();\n    const newFilePath = filePath.replace(/\\.md$/, \".copy.md\");\n    await this.writeNote(notebook, newFilePath, oldNote.markdown, noteConfig);\n    return await this.getNote(notebook, newFilePath);\n  }\n\n  // public async moveNote(fromFilePath: string, toFilePath: string) {}\n  public async getNotebookDirectoriesFromNotes(\n    notes: Note[],\n  ): Promise<Directory> {\n    const rootDirectory: Directory = {\n      name: \".\",\n      path: \".\",\n      children: [],\n    };\n\n    const filePaths = new Set<string>([]);\n    for (let i = 0; i < notes.length; i++) {\n      filePaths.add(path.dirname(notes[i].filePath));\n    }\n\n    filePaths.forEach((value) => {\n      const dirNames = value.split(\"/\");\n      let directory = rootDirectory;\n      for (let i = 0; i < dirNames.length; i++) {\n        if (dirNames[i] === \".\") {\n          break;\n        } else {\n          let subDirectory = directory.children.filter(\n            (directory) => directory.name === dirNames[i],\n          )[0];\n          if (subDirectory) {\n            directory = subDirectory;\n          } else {\n            let paths: string[] = [];\n            for (let j = 0; j <= i; j++) {\n              paths.push(dirNames[j]);\n            }\n            subDirectory = {\n              name: dirNames[i],\n              path: paths.join(\"/\"),\n              children: [],\n            };\n            directory.children.push(subDirectory);\n            directory = subDirectory;\n          }\n        }\n      }\n    });\n\n    return rootDirectory;\n  }\n\n  public getNotebookTagNodeFromNotes(notes: Note[]): TagNode {\n    const rootTagNode: TagNode = {\n      name: \".\",\n      path: \".\",\n      children: [],\n    };\n\n    for (let i = 0; i < notes.length; i++) {\n      const note = notes[i];\n      const tags = note.config.tags || [];\n      tags.forEach((tag) => {\n        let node = rootTagNode;\n        tag.split(\"/\").forEach((t, index) => {\n          t = t.toLocaleLowerCase().replace(/\\s+/g, \" \");\n          const offset = node.children.findIndex((c) => c.name === t);\n          if (offset >= 0) {\n            node = node.children[offset];\n          } else {\n            const newNode: TagNode = {\n              name: t,\n              path: node.name === \".\" ? t : node.path + \"/\" + t,\n              children: [],\n            };\n            node.children.push(newNode);\n            node.children.sort((x, y) => x.name.localeCompare(y.name));\n            node = newNode;\n          }\n        });\n      });\n    }\n\n    return rootTagNode;\n  }\n\n  public async hasSummaryMD(notebook: Notebook): Promise<boolean> {\n    if (!notebook || !notebook.dir) {\n      return false;\n    }\n    return await pfs.exists(path.resolve(notebook.dir, \"SUMMARY.md\"));\n  }\n\n  private getDefaultNotebookNameFromGitURL(gitURL: string) {\n    const i = gitURL.lastIndexOf(\"/\");\n    return gitURL.slice(i + 1).replace(/\\.git/, \"\");\n  }\n\n  public async getStatus(notebook: Notebook, filePath: string) {\n    return await git.status({\n      fs: fs,\n      dir: notebook.dir,\n      filepath: filePath,\n    });\n  }\n}\n","import { Note, Notebook } from \"../lib/crossnote\";\nimport * as path from \"path\";\nimport { pfs } from \"../lib/fs\";\nimport { NotebookFieldsFragment } from \"../generated/graphql\";\n\nexport async function resolveNoteImageSrc(note: Note, imageSrc: string) {\n  if (!note) {\n    return imageSrc;\n  }\n  if (imageSrc.startsWith(\"https://\") || imageSrc.startsWith(\"data:\")) {\n    return imageSrc;\n  } else if (imageSrc.startsWith(\"http://\")) {\n    return \"\";\n  } else {\n    return await loadImageAsBase64(note.notebook, note.filePath, imageSrc);\n  }\n}\n\nexport function resolveNotebookFilePath(\n  notebook: NotebookFieldsFragment,\n  filePath: string,\n) {\n  if (!notebook) {\n    return filePath;\n  }\n  if (filePath.startsWith(\"https://\") || filePath.startsWith(\"data:\")) {\n    return filePath;\n  } else if (filePath.startsWith(\"http://\")) {\n    return \"\";\n  } else {\n    const { gitURL, gitBranch } = notebook;\n    const gitURLArr = gitURL.replace(\"https://\", \"\").split(\"/\");\n    const gitHost = gitURLArr[0].toLowerCase();\n    const gitOwner = gitURLArr[1];\n    const gitRepo = gitURLArr[2].replace(/\\.git$/, \"\");\n    let outFilePath = \"\";\n    filePath = filePath.replace(/^\\/+/, \"\").replace(/^\\.\\/+/, \"\");\n    if (gitHost === \"github.com\") {\n      outFilePath = `https://github.com/${gitOwner}/${gitRepo}/raw/${gitBranch}/${filePath}`;\n    } else if (gitHost === \"gitlab.com\") {\n      outFilePath = `https://gitlab.com/${gitOwner}/${gitRepo}/-/raw/${gitBranch}/${filePath}`;\n    } else if (gitHost === \"gitee.com\") {\n      outFilePath = `https://gitee.com/${gitOwner}/${gitRepo}/raw/${gitBranch}/${filePath}`;\n    } else if (gitHost === \"gitea.com\") {\n      outFilePath = `https://gitea.com/${gitOwner}/${gitRepo}/raw/branch/${gitBranch}/${filePath}`;\n    }\n\n    return outFilePath;\n  }\n}\n\nexport async function loadImageAsBase64(\n  notebook: Notebook,\n  noteFilePath: string,\n  imageSrc: string,\n): Promise<string> {\n  let imageFilePath;\n  if (imageSrc.startsWith(\"/\")) {\n    imageFilePath = path.resolve(notebook.dir, \".\" + imageSrc);\n  } else {\n    imageFilePath = path.join(\n      notebook.dir,\n      path.dirname(noteFilePath),\n      imageSrc,\n    );\n  }\n  if (await pfs.exists(imageFilePath)) {\n    const data: Uint8Array = new Uint8Array(\n      // @ts-ignore\n      (await pfs.readFile(imageFilePath)).split(\",\"),\n    );\n    const base64 = Buffer.from(data.buffer).toString(\"base64\");\n    let imageType = path.extname(imageSrc).slice(1);\n    if (imageType.match(/^svg$/i)) {\n      imageType = \"svg+xml\";\n    } else if (imageType.match(/^jpg$/i)) {\n      imageType = \"jpeg\";\n    }\n    return `data:image/${imageType};base64,${base64}`;\n  } else {\n    return \"\";\n  }\n}\n\nexport function isFileAnImage(fileName: string) {\n  return !!fileName.match(/\\.(jpg|jpeg|png|gif|svg)$/i);\n}\n","import i18next from \"i18next\";\nimport { initReactI18next } from \"react-i18next\";\nimport { zhCN, enUS, zhTW, ja } from \"date-fns/locale\";\nimport { enUS as enUSLanguage } from \"./lang/enUS\";\nimport { zhCN as zhCNLanguage } from \"./lang/zhCN\";\nimport { zhTW as zhTWLanguage } from \"./lang/zhTW\";\nimport { jaJP as jaJPLanguage } from \"./lang/jaJP\";\n\ni18next.use(initReactI18next).init({\n  interpolation: {\n    // React already does escaping\n    escapeValue: false,\n  },\n  keySeparator: false, // we do not use keys in form messages.welcome\n  lng: localStorage.getItem(\"settings/language\") || \"en-US\", // \"en-US\" | \"zh-CN\"\n  fallbackLng: \"en-US\",\n  resources: {\n    \"en-US\": enUSLanguage,\n    \"zh-CN\": zhCNLanguage,\n    \"zh-TW\": zhTWLanguage,\n    \"ja-JP\": jaJPLanguage,\n  },\n});\n\nexport default i18next;\n\nexport function languageCodeToLanguageName(code: string) {\n  if (code === \"zh-CN\") {\n    return \"简体中文\";\n  } else if (code === \"zh-TW\") {\n    return \"繁体中文\";\n  } else if (code === \"ja-JP\") {\n    return \"日本語\";\n  } else {\n    return \"English\";\n  }\n}\n\nexport function languageCodeToDateFNSLocale(code: string) {\n  if (code === \"zh-CN\") {\n    return zhCN;\n  } else if (code === \"en-US\") {\n    return enUS;\n  } else if (code === \"zh-HK\") {\n    return zhTW;\n  } else if (code === \"ja-JP\") {\n    return ja;\n  } else {\n    return enUS;\n  }\n}\n","export const enUS = {\n  translation: {\n    \"title/Crossnote\": \"Crossnote\",\n    \"search/notes\": \"Search Notes\",\n    \"search/notebooks\": \"Search Notebooks\",\n    \"search/attachments\": \"Search Attachments\",\n\n    // Account\n    \"account/Anonymous\": \"Anonymous\",\n    \"account/anonymous\": \"anonymous\",\n\n    // General\n    \"general/go-back\": \"Go back\",\n    \"general/sending\": \"Sending\",\n    \"general/send\": \"Send\",\n    \"general/cancel\": \"Cancel\",\n    \"general/add\": \"Add\",\n    \"general/adding\": \"Adding\",\n    \"general/backed-up-at\": \"Backed up at\",\n    \"general/created-at\": \"Created at\",\n    \"general/modified-at\": \"Modified at\",\n    \"general/interacted-at\": \"Interacted at\",\n    \"general/date-created\": \"Date created\",\n    \"general/date-modified\": \"Date modified\",\n    \"general/date-interacted\": \"Date interacted\",\n    \"general/title\": \"Title\",\n    \"general/saved-at\": \"Saved at\",\n    \"general/loading\": \"Loading ...\",\n    \"general/loading-notifications\": \"Loading notifications ...\",\n    \"general/failed-to-set\": \"Failed to set\",\n    \"general/update\": \"Update\",\n    \"general/updated\": \"Updated\",\n    \"general/updating\": \"Updating\",\n    \"general/close\": \"Close\",\n    \"general/Note\": \"Note\",\n    \"general/notes\": \"Notes\",\n    \"general/Settings\": \"Settings\",\n    \"general/Collaborators\": \"Collaborators\",\n    \"general/collaborators\": \"collaborators\",\n    \"general/Backups\": \"Backups\",\n    \"general/backups\": \"backups\",\n    \"general/Discussion\": \"Discussion\",\n    \"general/discussion\": \"discussion\",\n    \"general/Notifications\": \"Notifications\",\n    \"general/Username\": \"Username\",\n    \"general/Email\": \"Email\",\n    \"general/Password\": \"Password\",\n    \"general/confirm-password\": \"Confirm password\",\n    \"general/Continue\": \"Continue\",\n    \"general/enter-username\": \"Enter username\",\n    \"general/vickymd\": \"VickyMD\",\n    \"general/tags\": \"Tags\",\n    \"general/add-a-tag\": \"Add a tag\",\n    \"general/private\": \"Private\",\n    \"general/public\": \"Public\",\n    \"general/friends-only\": \"Friends only\",\n    \"general/anonymous\": \"Anonymous\",\n    \"general/onymous\": \"Onymous\",\n    \"general/Tag\": \"Tag\",\n    \"general/no-tags\": \"No tags\",\n    \"general/Directory\": \"Directory\",\n    \"general/Untitled\": \"Untitled\",\n    \"general/untitled\": \"untitled\",\n    \"general/Unknown\": \"Unknown\",\n    \"general/unknown\": \"unknown\",\n    \"general/Agree\": \"Agree\",\n    \"general/Disagree\": \"Disagree\",\n    \"general/Print\": \"Print\",\n    \"general/Share\": \"Share\",\n    \"Editor\": \"Editor\",\n    \"EDITOR\": \"EDITOR\",\n    \"Viewer\": \"Viewer\",\n    \"VIEWER\": \"VIEWER\",\n    \"Admin\": \"Admin\",\n    \"ADMIN\": \"ADMIN\",\n    \"ARCHIVED\": \"ARCHIVED\",\n    \"ATTACHED NOTES\": \"ATTACHED NOTES\",\n    \"DELETED\": \"DELETED\",\n    \"PINNED\": \"PINNED\",\n    \"OTHERS\": \"OTHERS\",\n    \"PUBLIC NOTES\": \"PUBLIC NOTES\",\n    \"FOLLOWINGS' NOTES\": \"FOLLOWINGS' NOTES\",\n    \"SHARED WITH ME\": \"SHARED WITH ME\",\n    \"BOOKMARKS\": \"BOOKMARKS\",\n    \"MY TAGS\": \"MY TAGS\",\n    \"general/enter-fullscreen-mode\": \"Enter fullscreen mode\",\n    \"general/enter-presentation-mode\": \"Enter presentation mode\",\n    \"general/math-preview\": \"Math Preview\",\n    \"general/this-note-is-empty\": \"This note is empty\",\n    \"general/this-notebook-is-empty\": \"This notebook is empty\",\n    \"general/nothing-here\": \"Nothing here\",\n    \"general/no-notes-found\": \"No more notes found\",\n    \"general/no-more-notebooks-found\": \"No more notebooks found\",\n    \"general/no-more-attachments-found\": \"No more attachments found\",\n    \"general/no-notifications-found\": \"No notifications found\",\n    \"general/clear-all\": \"Clear all\",\n    \"general/Save\": \"Save\",\n    \"general/Delete\": \"Delete\",\n    \"general/Follow\": \"Follow\",\n    \"general/Following\": \"Following\",\n    \"general/Unfollow\": \"Unfollow\",\n    \"general/my-notes\": \"My notes\",\n    \"general/public-notes\": \"Public notes\",\n    \"general/followings-notes\": \"Followings' notes\",\n    \"general/shared-with-me\": \"Shared with me\",\n    \"general/Bookmarks\": \"Bookmarks\",\n    \"general/Archive\": \"Archive\",\n    \"general/Trash\": \"Trash\",\n    \"general/new-note\": \"New note\",\n    \"general/new-attachment\": \"New attachment\",\n    \"general/profile-updated\": \"Profile updated\",\n    \"general/ID\": \"ID\",\n    \"general/Audio\": \"Audio\",\n    \"general/Video\": \"Video\",\n    \"general/source-url\": \"Source URL\",\n    \"general/sign-in\": \"Sign in\",\n    \"general/sign-up\": \"Sign up\",\n    \"general/Link\": \"Link\",\n    \"general/Upload\": \"Upload\",\n    \"general/Uploading\": \"Uploading\",\n    \"general/clicks\": \"clicks\",\n    \"general/Processing\": \"Processing...\",\n    \"general/please-wait\": \"Please wait...\",\n    \"general/please-sign-in-first\": \"Please sign in first\",\n    \"general/Languages\": \"Languages\",\n    \"general/track\": \"Track\",\n    \"general/Publish\": \"Publish\",\n    \"general/Unpublish\": \"Unpublish\",\n    \"general/Open\": \"Open\",\n    \"general/Download\": \"Download\",\n    \"general/Configure\": \"Configure\",\n    \"general/Update\": \"Update\",\n    \"general/empty\": \"empty\",\n    \"general/Explore\": \"Explore\",\n    \"general/Notebooks\": \"Notebooks\",\n    \"general/add-a-notebook\": \"Add a notebook\",\n    \"general/add-a-note\": \"Add a note\",\n    \"general/add-an-attachment\": \"Add an attachment\",\n    \"general/configure-the-notebook\": \"Configure the notebook\",\n    \"general/publish-your-notebook\": \"Publish your notebook\",\n    \"general/notebook-name\": \"Notebook name\",\n    \"general/git-repository\": \"git repository\",\n    \"general/optional\": \"optional\",\n    \"general/url\": \"Url\",\n    \"general/branch\": \"branch\",\n    \"general/remember-username-and-password\": \"Remember credentials\",\n    \"general/stored-locally\": \"stored locally\",\n    \"general/cors-proxy\": \"CORS proxy\",\n    \"general/why-cors-proxy\": \"Why do we need CORS proxy？\",\n    \"general/today\": \"Today\",\n    \"general/todo\": \"Todo\",\n    \"general/wiki\": \"Wiki\",\n    \"general/tagged\": \"Tagged\",\n    \"general/untagged\": \"Untagged\",\n    \"general/encrypt\": \"Encrypt\",\n    \"general/encrypted\": \"Encrypted\",\n    \"general/decrypt\": \"Decrypt\",\n    \"general/conflicted\": \"Conflicted\",\n    \"general/attachments\": \"Attachments\",\n    \"general/Pin\": \"Pin\",\n    \"general/Encryption\": \"Encryption\",\n    \"general/Fullscreen\": \"Fullscreen\",\n    \"general/change-file-path\": \"Change file path\",\n    \"general/create-a-copy\": \"Create a copy\",\n    \"general/restore-checkout\": \"Restore (git checkout)\",\n    \"general/download-pull\": \"Download (git pull)\",\n    \"general/upload-push\": \"Upload (git pull & git push)\",\n    \"general/disable-the-encryption-on-this-note\":\n      \"Disable the encryption on this note\",\n    \"general/encrypt-this-note-with-password\":\n      \"Encrypt this note with password\",\n    \"general/disable-encryption\": \"Disable encryption\",\n    \"general/decrypt-this-note\": \"Decrypt this note\",\n    \"general/upload-the-profile\": \"Upload profile\",\n    \"general/commit-message\": \"Commit message\",\n    \"general/upload-notebook\": \"Upload the notebook\",\n    \"general/Comments\": \"Comments\",\n    \"general/Source\": \"Source\",\n    \"general/Description\": \"Description\",\n    \"general/Edit\": \"Edit\",\n    \"general/Rename\": \"Rename\",\n    \"general/rename-directory\": \"Rename directory\",\n    \"general/delete-directory\": \"Delete directory\",\n    \"general/rename-tag\": \"Rename tag\",\n    \"general/delete-tag\": \"Delete tag\",\n    \"general/notebook-updates-found\": \"Notebook updates found\",\n    \"general/update-the-notebook\": \"Update the notebook\",\n    \"general/check-notebook-updates-periodically\":\n      \"Check notebook updates periodically\",\n    \"general/minutes\": \"minute(s)\",\n    \"general/hard-reset\": \"Hard reset\",\n    \"general/Default\": \"Default\",\n    \"general/Vim\": \"Vim\",\n    \"general/Emacs\": \"Emacs\",\n    \"general/Desc\": \"Desc\",\n    \"general/Asc\": \"Asc\",\n\n    // Error\n    \"error/authentication-failed\": \"Authentication failed\",\n    \"error/failed-to-upload-notebook\": \"Failed to upload notebook\",\n    \"error/failed-to-download-notebook\": \"Failed to download notebook\",\n    \"error/notebook-already-exists\": \"Notebook already exists\",\n    \"error/invalid-git-url-prefix\": \"Invalid git URL prefix\",\n    \"error/please-resolve-conflicts\": \"Please resolve conflicts first\",\n    \"error/failed-to-disable-encryption\": \"Failed to disable encryption\",\n    \"error/decryption-failed\": \"Decryption failed\",\n    \"error/failed-to-change-file-path\": \"Failed to change file path\",\n    \"error/failed-to-create-widget\": \"Failed to create widget\",\n    \"error/failed-to-load-widget\": \"Failed to load widget\",\n    \"error/failed-to-update-the-notebook\": \"Failed to update the notebook\",\n    \"error/failed-to-unpublish-the-notebook\":\n      \"Failed to unpublish the notebook\",\n    \"error/failed-to-publish-notebook\": \"Failed to publish the notebook\",\n\n    // Success\n    \"success/notebook-uploaded\": \"Notebook uploaded\",\n    \"success/notebook-downloaded\": \"Notebook downloaded\",\n\n    // Info\n    \"info/downloading-notebook\": \"Downloading notebook\",\n\n    // Note\n    \"note/unarchive-note\": \"Unarchive note\",\n    \"note/archive-note\": \"Archive note\",\n    \"note/delete-forever\": \"Delete forever\",\n    \"note/delete-note\": \"Delete note\",\n    \"note/restore-note\": \"Restore note\",\n    \"note/report-note\": \"Report note\",\n    \"note/open-in-crossnote-website\": \"Open in Crossnote website\",\n\n    // NoteTags\n    \"note-tags/send-suggestion-failure\": \"Failed to send suggestion\",\n    \"note-tags/suggestion-sent\": \"Suggestion sent\",\n    \"note-tags/suggest-a-tag-to-this-note\": \"Suggest a tag to this note\",\n\n    // UserTags\n    \"user-tags/follow-a-tag\": \"Follow a tag\",\n\n    // Notifications\n    \"notifications/refresh\": \"Refresh to see new notifications\",\n    \"notifications/new-version-available\":\n      \"A new version of Crossnote is available!\",\n\n    // Settings\n    \"settings/about-this-project\": \"About this project\",\n    \"settings/issues-and-feature-requests\":\n      \"Found issues or have feature requests?\",\n    \"settings/uploading-cover-image\": \"Uploading cover image\",\n    \"settings/upload-image-failure\": \"Failed to upload image\",\n    \"settings/Cover\": \"Cover\",\n    \"settings/enter-cover-image-url\": \"Enter cover image URL\",\n    \"settings/upload-image\": \"Upload image\",\n    \"settings/Avatar\": \"Avatar\",\n    \"settings/enter-avatar-image-url\": \"Enter avatar image URL\",\n    \"settings/Name\": \"Name\",\n    \"settings/enter-name\": \"Enter your Name (this is not your username)\",\n    \"settings/editor-cursor-color\": \"Editor cursor color\",\n    \"settings/hello\": \"Hello, \",\n    \"settings/world\": \"world!\",\n    \"settings/linked-with-github-account\": \"Linked with GitHub account\",\n    \"settings/link-with-github-account\": \"Link with GitHub account\",\n    \"settings/log-out\": \"Log out\",\n    \"settings/author-name\": \"Author name\",\n    \"settings/author-email\": \"Author email\",\n    \"settings/theme\": \"Theme\",\n    \"settings/created-cloud-widgets-count\": \"Created cloud widgets count\",\n    \"settings/key-map\": \"Key Map\",\n\n    // Preview\n    \"preview/attach-a-note\": \"Attach a note\",\n    \"preview/crossnote-untitled\": \"Crossnote - Untitled\",\n    \"preview/edit-this-note\": \"Edit this note\",\n\n    // ProfileCard\n    \"profile-card/followings\": \"followings\",\n    \"profile-card/followers\": \"followers\",\n    \"profile-card/Followings\": \"Followings\",\n    \"profile-card/Followers\": \"Followers\",\n    \"profile-card/notes\": \"notes\",\n    \"profile-card/follow-user-failure\": \"Failed to follow user\",\n    \"profile-card/followed-user\": \"Followed user\",\n    \"profile-card/unfollow-user-failure\": \"Failed to unfollow user\",\n    \"profile-card/unfollowed-user\": \"Unfollowed user\",\n\n    // TagCard\n    \"tag-card/pin-to-my-notes-page\": \"Pin to my notes page\",\n\n    // Interaction panel\n    \"interaction-panel/show-attached-notes\": \"Show attached notes\",\n    \"interaction-panel/add-comment\": \"Add comment\",\n    \"interaction-panel/add-reaction\": \"Add reaction\",\n\n    // Editor\n    \"editor/loading-your-note\": \"Loading your note...\",\n    \"editor/sync-failure\": \"Failed to sync... Please refresh your page\",\n    \"editor/saving\": \"Saving...\",\n    \"editor/save-failure\": \"Failed to save\",\n    \"editor/saved\": \"Saved\",\n    \"editor/update-note-failure\": \"Failed to update note\",\n    \"editor/placeholder\": \"#  Hi 😀 Type '/' for commands\",\n    \"editor/ln\": \"Ln\",\n    \"editor/col\": \"Col\",\n\n    // * NoteControl\n    \"editor/note-control/allow-readers-to-suggest-note-tags\":\n      \"Allow readers to suggest note tags\",\n    \"editor/note-control/allow-readers-to-attach-notes-under-this-note\":\n      \"Allow readers to attach notes under this note\",\n    \"editor/note-control/inherit-parent-note-collaborators-list\":\n      \"Inherit parent note collaborators list\",\n    \"editor/note-control/note-visibility-hint\":\n      \"All collaborators will be able to see this note\",\n    \"editor/note-control/allow-readers-to-attach-notes-unchecked\":\n      \"Applies to you and collaborators that can edit and admin\",\n    \"editor/note-control/allow-readers-to-attach-notes-checked\":\n      \"Applies to anyone that can view this note\",\n    \"editor/note-control/enter-parent-note-id\": \"Enter parent note ID\",\n    \"editor/note-control/attach-note-failure\": \"Failed to attach note\",\n    \"editor/note-control/unattach-note-failure\": \"Failed to unattach note\",\n    \"editor/collaborator-hint\": \" - note will be visible to them\",\n    \"editor/shareable-link-hint\":\n      \"people with the link can view/edit this note with no need of login\",\n\n    // * BackupsControl\n    \"editor/backups-control/create-backup\": \"Create backup\",\n    \"editor/backups-control/delete-this-backup\": \"Delete this backup\",\n    \"editor/backups-control/create-backup-failure\": \"Failed to create backup\",\n    \"editor/backups-control/backup-created\": \"Backup created\",\n    \"editor/backups-control/delete-backup-failure\": \"Failed to delete backup\",\n    \"editor/backups-control/backup-deleted\": \"Backup deleted\",\n    \"editor/backups-control/cloud-version\": \"Cloud version\",\n    \"editor/backups-control/backup-name\": \"Backup name\",\n\n    // * CollaboratorasControl\n    \"editor/collaborators-control/set-collaborator-role-failure\":\n      \"Failed to set collaborator role\",\n    \"editor/collaborators-control/add-collaborator-failure\":\n      \"Failed to add collaborator\",\n    \"editor/collaborators-control/collaborator-removed\": \"Collaborator removed\",\n    \"editor/collaborators-control/collaborator-added\": \"Collaborator added\",\n    \"editor/collaborators-control/can-view\": \"Can view\",\n    \"editor/collaborators-control/can-edit\": \"Can edit\",\n    \"editor/collaborators-control/can-administrate\": \"Can administrate\",\n\n    // * EditorToolBar\n    \"editor/toolbar/insert-image\": \"Insert image\",\n    \"editor/toolbar/upload-local-images\": \"Upload local images\",\n    \"editor/toolbar/capture-webpage\": \"Capture the whole webpage\",\n    \"editor/toolbar/insert-clock\": \"Insert clock\",\n    \"editor/toolbar/insert-emoji\": \"Insert emoji\",\n    \"editor/toolbar/insert-media\": \"Insert media\",\n    \"editor/toolbar/insert-audio\": \"Insert Audio\",\n    \"editor/toolbar/netease-music\": \"Netease Music\",\n    \"editor/toolbar/insert-video\": \"Insert video\",\n    \"editor/toolbar/insert-youtube\": \"Insert Youtube\",\n    \"editor/toolbar/insert-bilibili\": \"Insert Bilibili\",\n    \"editor/toolbar/insert-slide\": \"Insert slide\",\n    \"editor/toolbar/insert-ocr\": \"Insert OCR\",\n    \"editor/toolbar/insert-kanban\": \"Insert Kanban\",\n    \"editor/toolbar/insert-abc-notation\": \"Insert ABC notation\",\n    \"editor/toolbar/insert-header-1\": \"Insert header 1\",\n    \"editor/toolbar/insert-header-2\": \"Insert header 2\",\n    \"editor/toolbar/insert-header-3\": \"Insert header 3\",\n    \"editor/toolbar/insert-header-4\": \"Insert header 4\",\n    \"editor/toolbar/insert-header-5\": \"Insert header 5\",\n    \"editor/toolbar/insert-header-6\": \"Insert header 6\",\n    \"editor/toolbar/bold\": \"Bold\",\n    \"editor/toolbar/italic\": \"Italic\",\n    \"editor/toolbar/strikethrough\": \"Strikethrough\",\n    \"editor/toolbar/insert-inline-code\": \"Insert inline code\",\n    \"editor/toolbar/insert-blockquote\": \"Insert blockquote\",\n    \"editor/toolbar/insert-unordered-list\": \"Insert unordered list\",\n    \"editor/toolbar/insert-ordered-list\": \"Insert ordered list\",\n    \"editor/toolbar/insert-link\": \"Insert link\",\n    \"editor/toolbar/insert-table\": \"Insert table\",\n    \"editor/toolbar/insert-comment\": \"Insert crossnote cloud comment widget\",\n    \"editor/toolbar/insert-github-gist\": \"Insert GitHub Gist\",\n\n    // * NoteControl\n    \"editor/note-control/tag-added\": \"Tag added\",\n    \"editor/note-control/tag-deleted\": \"Tag deleted\",\n    \"editor/note-control/set-note-visibility-failure\":\n      \"Failed to set note visibility\",\n    \"editor/note-control/note-visibility-updated\": \"Note visibility updated\",\n    \"editor/note-control/set-author-visibility-failure\":\n      \"Failed to set author visibility\",\n    \"editor/note-control/author-visibility-updated\":\n      \"Author visibility updated\",\n    \"editor/note-control/editor-mode\": \"Editor mode\",\n    \"editor/note-control/source-code\": \"Source code\",\n    \"editor/note-control/preview\": \"Preview\",\n    \"editor/note-control/split-view\": \"Split view\",\n    \"editor/note-control/pin-preview\": \"Pin preview on the side\",\n    \"editor/note-control/display-modification-records\":\n      \"Display modification records\",\n    \"editor/note-control/note-visibility\": \"Note visibility\",\n    \"editor/note-control/author-visibility\": \"Author visibility\",\n    \"editor/note-control/shareable-link\": \"Shareable link\",\n    \"editor/note-control/copy-to-clipboard\": \"Copy to clipboard\",\n    \"editor/note-control/link-to-preview\": \"Link to preview\",\n    \"editor/note-control/link-to-editor\": \"Link to editor\",\n    \"editor/note-control/attach-to-note\": \"Attach to note\",\n    \"editor/note-control/source-added\": \"URL added\",\n    \"editor/note-control/source-deleted\": \"URL deleted\",\n    \"editor/note-control/invalid-note-source\": \"Invalid URL\",\n    \"editor/note-control/add-note-source\": \"Add related URLs\",\n    \"editor/note-control/note-source-hint\":\n      \"Notes on the same URL will be grouped together\",\n    \"editor/note-control/enter-note-source\": \"Enter URL\",\n\n    // AvatarPanel\n    \"avatar-panel/this-note-is-private\": \"This note is private\",\n    \"avatar-panel/this-note-is-public\": \"This note is visible to public\",\n    \"avatar-panel/this-note-is-friends-only\":\n      \"This note is only visible to friends\",\n    \"avatar-panel/you-are-anonymous\": \"You are anonymous\",\n\n    // FileExporter\n    \"file-exporter/name\": \"File exporter\",\n    \"file-exporter/orientation\": \"Orientation\",\n    \"file-exporter/portrait\": \"portrait\",\n    \"file-exporter/landscape\": \"landscape\",\n    \"file-exporter/paper-size\": \"Paper size\",\n    \"file-exporter/unit\": \"Unit\",\n    \"file-exporter/margin-top\": \"Margin top\",\n    \"file-exporter/margin-bottom\": \"Margin bottom\",\n    \"file-exporter/margin-left\": \"Margin left\",\n    \"file-exporter/margin-right\": \"Margin right\",\n\n    // Utils\n    \"utils/uploading-image\": \"Uploading image...\",\n    \"utils/upload-image-failure\": \"Failed to upload image\",\n\n    // Notification\n    // * CommentPostingNotification\n    \"notification/replies-to-you-in\": \"Replies to you in\",\n    \"notification/'s-note\": \"'s note \",\n    // * NoteReactionNotification\n    \"notification/added\": \"Added\",\n    \"notification/to-your-note\": \"to your note\",\n    \"notification/add-you-as\": \"Added you as\",\n    \"notification/of-note\": \"of note\",\n    // * NoteTagSuggestion\n    \"notification/add-tag-failure\": \"Failed to add tag\",\n    \"notification/suggested-to-add-tag\": \"Suggested to add tag\",\n    // * UserFollowingNotification\n    \"notification/started-following-you\": \"Started following you\",\n    // * BookmarkNotification\n    \"notification/bookmarked-your-note\": \"Bookmarked your note\",\n    \"notification/view-more-notifications\": \"View more notifications\",\n\n    // GitHubOAuthCallback\n    \"github-oauth/wait\": \"Please wait ...\",\n    \"github-oauth/link-with-github-account-failure\":\n      \"Failed to link with GitHub account\",\n    \"github-oauth/sign-in-with-github-account-failure\":\n      \"Failed to sign in with GitHub account\",\n    \"github-oauth/first-time-sign-in\":\n      \"It seems to be the first time you sign in with GitHub account\",\n    \"github-oauth/first-time-sign-in-small\":\n      \"Please finish the registeration below\",\n\n    // Widgets\n    \"widget/autoplay\": \"autoplay\",\n    \"widget/controls\": \"controls\",\n    \"widget/loop\": \"loop\",\n    \"widget/muted\": \"muted\",\n    \"widget/creating-widget\": \"Creating widget\",\n    \"widget/loading-widget\": \"Loading widget\",\n    \"widget/crossnote.image/thanks_sm_ms\":\n      \"Thanks sm.ms for offering free image hosting service.\",\n    \"widget/crossnote.audio/audio_element_fail\":\n      \"Your browser does not support the audio element.\",\n    \"widget/crossnote.audio/source-url-placeholder\":\n      \"Enter audio source URL here, then press 'Enter' to insert.\",\n    \"widget/crossnote.video/video_element_fail\":\n      \"Your browser does not support the video element\",\n    \"widget/crossnote.bilibili/error_message\":\n      \"Error: Only supported https://www.bilibili.com/video/av79126732 like URL\",\n    \"widget/crossnote.youtube/error_message\":\n      \"Error: Only supported https://www.youtube.com/watch?v=MmB9b5njVbA like URL\",\n    \"widget/crossnote.auth/welcome\": \"Welcome to Crossnote\",\n    \"widget/crossnote.auth/doesnt-have-account\":\n      \"Doesn't have an account? Let's create one 😉!\",\n    \"widget/crossnote.auth/forgot_password\": \"Forgot your password 😣?\",\n    \"widget/crossnote.auth/failed_to_send_code\":\n      \"Failed to send verification code\",\n    \"widget/crossnote.auth/verification_code_sent\":\n      \"Verification code has been sent to \",\n    \"widget/crossnote.auth/failed_to_reset_password\":\n      \"Failed to reset password\",\n    \"widget/crossnote.auth/password_reset\": \"Your password has been reset\",\n    \"widget/crossnote.auth/password-mismatch\": \"Passwords mismatch\",\n    \"widget/crossnote.auth/hello\": \"Hello, \",\n    \"widget/crossnote.auth/enter-the-verification-code\":\n      \"Enter the verification code\",\n    \"widget/crossnote.auth/get-code\": \"Get code\",\n    \"widget/crossnote.auth/sign-in-with-github-account\":\n      \"Sign in with GitHub account\",\n    \"widget/crossnote.auth/already-have-an-account\": \"Already have an account?\",\n    \"widget/crossnote.auth/reset-password\": \"Reset password\",\n    \"widget/crossnote.auth/Or\": \"Or\",\n    \"widget/crossnote.bilibili/Bilibili\": \"Bilibili\",\n    \"widget/crossnote.bilibili/bilibili-video-url\": \"Bilibili video URL\",\n    \"widget/crossnote.bilibili/url-placeholder\":\n      \"Enter the Bilibili video URL here, then press 'Enter' to insert.\",\n    \"widget/crossnote.image/image-helper\": \"Image helper\",\n    \"widget/crossnote.image/image-url-placeholder\":\n      \"Enter image URL here, then press 'Enter' to insert.\",\n    \"widget/crossnote.image/click-here-to-browse-image-file\":\n      \"Click here to browse image file\",\n    \"widget/crossnote.neteasemusic/song-id-placeholder\":\n      \"Enter Netease Music song number ID.\",\n    \"widget/crossnote.video/video-url-placeholder\":\n      \"Enter video source URL here, then press 'Enter' to insert.\",\n    \"widget/crossnote.video/poster-url\": \"Poster URL (optional)\",\n    \"widget/crossnote.video/poster-url-placeholder\": \"Enter poster URL here.\",\n    \"widget/crossnote.youtube/youtube-video-url\": \"Youtube video URL\",\n    \"widget/crossnote.youtube/youtube-video-url-placeholder\":\n      \"Enter the Youtube video URL here, then press 'Enter' to insert.\",\n    \"widget/crossnote.ocr/ocr\": \"OCR - Optical character recognition\",\n    \"widget/crossnote.ocr/local-image\": \"Local image\",\n    \"widget/crossnote.ocr/recognize-text-in-languages\":\n      \"Recognize text in languages\",\n    \"widget/crossnote.ocr/start-ocr\": \"Start OCR\",\n    \"widget/crossnote.ocr/extra-settings\": \"Extra settings\",\n    \"widget/crossnote.ocr/grayscale\": \"Grayscale\",\n    \"widget/crossnote.kanban/add-column\": \"Add new column\",\n    \"widget/crossnote.github_gist/title\": \"Embed a GitHub Gist\",\n    \"widget/crossnote/github_gist/enter-github-gist-url\":\n      \"Enter GitHub Gist URL\",\n\n    // Tesseract\n    \"tesseract/loading tesseract core\": \"loading tesseract core\",\n    \"tesseract/initializing tesseract\": \"initializing tesseract\",\n    \"tesseract/initialized tesseract\": \"initialized tesseract\",\n    \"tesseract/loading language traineddata\": \"loading language traineddata\",\n    \"tesseract/loaded language traineddata\": \"loaded language traineddata\",\n    \"tesseract/initializing api\": \"initializing api\",\n    \"tesseract/initialized api\": \"initialized api\",\n    \"tesseract/recognizing text\": \"recognizing text\",\n\n    // Comment widget\n    \"widget/crossnote.comment/reply-to-this-user\": \"Reply to this user\",\n    \"widget/crossnote.comment/add-reaction-to-this-comment\":\n      \"Add reaction to this comment\",\n    \"widget/crossnote.comment/edit-this-message\": \"Edit this comment\",\n    \"widget/crossnote.comment/modified-comment\": \"modified comment\",\n    \"widget/crossnote.comment/post-comment-failure\": \"Failed to post comment\",\n    \"widget/crossnote.comment/unsubscribe-info\":\n      \"Unsubscribe from the comments\",\n    \"widget/crossnote.comment/subscribe-info\": \"Subscribe to the comments\",\n    \"widget/crossnote.comment/view-more-comments\": \"View more comments\",\n\n    // Dialogs\n    \"delete-note-dialog/title\": \"Are you sure to delete this note?\",\n    \"delete-note-dialog/subtitle\": \"You can't undo this action.\",\n    \"delete-directory-dialog/title\": \"Are you sure to delete this directory?\",\n    \"delete-directory-dialog/subtitle\":\n      \"All the child directories and notes will also be deleted. You can't undo this action.\",\n    \"delete-tag-dialog/title\": \"Are you sure to delete this tag?\",\n    \"delete-tag-dialog/subtitle\":\n      \"All the child tags will also be deleted. You can't undo this action.\",\n    \"add-notebook-dialog/disclaimer\":\n      \"Notebook data will only be stored locally in browser for offline uses. We won't upload any notebook data to our server.\",\n    \"edit-image-dialog/title\": \"Edit the image\",\n    \"edit-image-dialog/image-url\": \"image URL\",\n    \"edit-image-dialog/image-title\": \"image title\",\n    \"edit-image-dialog/image-alt-text\": \"image alt text\",\n    \"language-selector-dialog/subtitle\": \"Please choose the preferred language\",\n\n    // react-ios-pwa-prompt\n    \"react-ios-pwa-prompt/copy-title\": \"Add to Home Screen\",\n    \"react-ios-pwa-prompt/copy-body\":\n      \"This website has app functionality. Add it to your home screen to use it in fullscreen and while offline.\",\n    \"react-ios-pwa-prompt/copy-share-button-label\":\n      \"1) Press the 'Share' button\",\n    \"react-ios-pwa-prompt/copy-add-home-button-label\":\n      \"2) Press 'Add to Home Screen'\",\n\n    // Publish notebook\n    \"publish-notebook/disclaimer-1\":\n      \"We currently only support publishing the notebook from a public repository on GitHub, GitLab, Gitea, or Gitea. We only collect README.md file data.\",\n    \"publish-notebook/disclaimer-2\":\n      \"Please declare the ownership of your notebook by adding the following front-matter to README.md in remote repository:\",\n\n    // git\n    \"git/status/ignored\": \"ignored\",\n    \"git/status/unmodified\": \"unmodified\",\n    \"git/status/*modified\": \"*modified\",\n    \"git/status/*deleted\": \"*deleted\",\n    \"git/status/*added\": \"*added\",\n    \"git/status/absent\": \"absent\",\n    \"git/status/modified\": \"modified\",\n    \"git/status/deleted\": \"deleted\",\n    \"git/status/added\": \"added\",\n    \"git/status/*unmodified\": \"*unmodified\",\n    \"git/status/*absent\": \"*absent\",\n    \"git/status/*undeleted\": \"*undeleted\",\n    \"git/status/*undeletemodified\": \"*undeletemodified\",\n    \"git/status/\": \"\",\n  },\n};\n","export const zhCN = {\n  translation: {\n    \"title/Crossnote\": \"交叉笔记\",\n    \"search/notes\": \"搜索笔记\",\n    \"search/notebooks\": \"搜索笔记本\",\n    \"search/attachments\": \"搜索附件\",\n\n    // Account\n    \"account/Anonymous\": \"匿名\",\n    \"account/anonymous\": \"匿名\",\n\n    // General\n    \"general/go-back\": \"回退\",\n    \"general/sending\": \"发送中\",\n    \"general/send\": \"发送\",\n    \"general/cancel\": \"取消\",\n    \"general/add\": \"添加\",\n    \"general/adding\": \"正在添加\",\n    \"general/backed-up-at\": \"备份于\",\n    \"general/created-at\": \"创建于\",\n    \"general/modified-at\": \"修改于\",\n    \"general/interacted-at\": \"互动于\",\n    \"general/date-created\": \"创建时间\",\n    \"general/date-modified\": \"修改时间\",\n    \"general/date-interacted\": \"互动时间\",\n    \"general/title\": \"标题\",\n    \"general/saved-at\": \"保存于\",\n    \"general/loading\": \"读取中 ...\",\n    \"general/loading-notifications\": \"正在读取消息 ...\",\n    \"general/failed-to-set\": \"设置失败\",\n    \"general/update\": \"更新\",\n    \"general/updated\": \"已更新\",\n    \"general/updating\": \"正在更新\",\n    \"general/close\": \"关闭\",\n    \"general/Note\": \"笔记\",\n    \"general/notes\": \"笔记\",\n    \"general/Settings\": \"设置\",\n    \"general/Collaborators\": \"协作者\",\n    \"general/collaborators\": \"协作者\",\n    \"general/Backups\": \"备份\",\n    \"general/backups\": \"备份\",\n    \"general/Discussion\": \"讨论\",\n    \"general/discussion\": \"讨论\",\n    \"general/Notifications\": \"消息\",\n    \"general/Username\": \"用户名\",\n    \"general/Email\": \"邮箱\",\n    \"general/Password\": \"密码\",\n    \"general/confirm-password\": \"再次确认密码\",\n    \"general/Continue\": \"下一步\",\n    \"general/enter-username\": \"输入用户名\",\n    \"general/vickymd\": \"VickyMD(微记)\",\n    \"general/tags\": \"标签\",\n    \"general/add-a-tag\": \"添加一个标签\",\n    \"general/private\": \"私有\",\n    \"general/public\": \"公开可见\",\n    \"general/friends-only\": \"仅好友可见\",\n    \"general/anonymous\": \"匿名\",\n    \"general/onymous\": \"公开署名\",\n    \"general/Tag\": \"标签\",\n    \"general/no-tags\": \"没有标签\",\n    \"general/Directory\": \"目录\",\n    \"general/Untitled\": \"无标题\",\n    \"general/untitled\": \"无标题\",\n    \"general/Unknown\": \"未知\",\n    \"general/unknown\": \"未知\",\n    \"general/Agree\": \"同意\",\n    \"general/Disagree\": \"不同意\",\n    \"general/Print\": \"打印\",\n    \"general/Share\": \"分享\",\n    \"Editor\": \"编辑者\",\n    \"EDITOR\": \"编辑者\",\n    \"Viewer\": \"阅读者\",\n    \"VIEWER\": \"阅读者\",\n    \"Admin\": \"管理员\",\n    \"ADMIN\": \"管理员\",\n    \"ARCHIVED\": \"归档的笔记\",\n    \"ATTACHED NOTES\": \"附加的笔记\",\n    \"DELETED\": \"删除的笔记\",\n    \"PINNED\": \"置顶\",\n    \"OTHERS\": \"其它\",\n    \"PUBLIC NOTES\": \"公开的笔记\",\n    \"FOLLOWINGS' NOTES\": \"关注人的笔记\",\n    \"SHARED WITH ME\": \"分享给我的\",\n    \"BOOKMARKS\": \"收藏\",\n    \"MY TAGS\": \"我的标签\",\n    \"general/enter-fullscreen-mode\": \"进入全屏模式\",\n    \"general/enter-presentation-mode\": \"进入幻灯片模式\",\n    \"general/math-preview\": \"数学预览\",\n    \"general/this-note-is-empty\": \"这个笔记没有内容\",\n    \"general/this-notebook-is-empty\": \"这个笔记本没有内容\",\n    \"general/nothing-here\": \"这里什么也没有\",\n    \"general/no-notes-found\": \"没有找到其它的笔记\",\n    \"general/no-more-attachments-found\": \"没有找到其它的附件\",\n    \"general/no-more-notebooks-found\": \"没有找到其它的笔记本\",\n    \"general/no-notifications-found\": \"没有找到其它的消息\",\n    \"general/clear-all\": \"清空所有\",\n    \"general/Save\": \"保存\",\n    \"general/Delete\": \"删除\",\n    \"general/Follow\": \"关注\",\n    \"general/Following\": \"正在关注\",\n    \"general/Unfollow\": \"取消关注\",\n    \"general/my-notes\": \"我的笔记\",\n    \"general/public-notes\": \"公开的笔记\",\n    \"general/followings-notes\": \"关注人的笔记\",\n    \"general/shared-with-me\": \"分享给我的\",\n    \"general/Bookmarks\": \"收藏\",\n    \"general/Archive\": \"归档\",\n    \"general/Trash\": \"废纸篓\",\n    \"general/new-note\": \"新的笔记\",\n    \"general/new-attachment\": \"新的附件\",\n    \"general/profile-updated\": \"用户信息已更新\",\n    \"general/ID\": \"ID\",\n    \"general/Audio\": \"音频\",\n    \"general/Video\": \"视频\",\n    \"general/source-url\": \"源链接\",\n    \"general/sign-in\": \"登录\",\n    \"general/sign-up\": \"注册\",\n    \"general/Link\": \"链接\",\n    \"general/Upload\": \"上传\",\n    \"general/Uploading\": \"正在上传\",\n    \"general/clicks\": \"点击\",\n    \"general/Processing\": \"正在处理...\",\n    \"general/please-wait\": \"请稍候...\",\n    \"general/please-sign-in-first\": \"请先登录\",\n    \"general/Languages\": \"语言\",\n    \"general/track\": \"跟踪\",\n    \"general/Publish\": \"发布\",\n    \"general/Unpublish\": \"取消发布\",\n    \"general/Open\": \"打开\",\n    \"general/Download\": \"下载\",\n    \"general/Configure\": \"配置\",\n    \"general/Update\": \"更新\",\n    \"general/empty\": \"空的\",\n    \"general/Explore\": \"探索\",\n    \"general/Notebooks\": \"笔记本\",\n    \"general/add-a-notebook\": \"添加一个笔记本\",\n    \"general/add-a-note\": \"添加一个笔记\",\n    \"general/add-an-attachment\": \"添加一个附件\",\n    \"general/configure-the-notebook\": \"设置笔记本\",\n    \"general/publish-your-notebook\": \"发布你的笔记本\",\n    \"general/notebook-name\": \"笔记本名称\",\n    \"general/git-repository\": \"git 仓库\",\n    \"general/optional\": \"可选\",\n    \"general/url\": \"Url\",\n    \"general/branch\": \"分支\",\n    \"general/remember-username-and-password\": \"记住用户名和密码\",\n    \"general/stored-locally\": \"储存于本地\",\n    \"general/cors-proxy\": \"CORS 代理\",\n    \"general/why-cors-proxy\": \"为什么需要 CORS 代理？\",\n    \"general/today\": \"今天\",\n    \"general/todo\": \"待办事项\",\n    \"general/wiki\": \"维基\",\n    \"general/tagged\": \"标签\",\n    \"general/untagged\": \"未标签\",\n    \"general/encrypt\": \"加密\",\n    \"general/encrypted\": \"已加密\",\n    \"general/decrypt\": \"解密\",\n    \"general/conflicted\": \"冲突\",\n    \"general/attachments\": \"附件\",\n    \"general/Pin\": \"置顶\",\n    \"general/Encryption\": \"加密\",\n    \"general/Fullscreen\": \"全屏\",\n    \"general/change-file-path\": \"更改文件路径\",\n    \"general/create-a-copy\": \"创建一个副本\",\n    \"general/restore-checkout\": \"恢复 (git checkout)\",\n    \"general/download-pull\": \"下载 (git pull)\",\n    \"general/upload-push\": \"上传 (git pull & git push)\",\n    \"general/disable-the-encryption-on-this-note\": \"解除这个笔记上的加密\",\n    \"general/encrypt-this-note-with-password\": \"通过密码加密这个笔记\",\n    \"general/disable-encryption\": \"解除加密\",\n    \"general/decrypt-this-note\": \"解密这个笔记\",\n    \"general/upload-the-profile\": \"上传账户信息\",\n    \"general/commit-message\": \"提交说明\",\n    \"general/upload-notebook\": \"上传笔记本\",\n    \"general/Comments\": \"评论\",\n    \"general/Source\": \"源\",\n    \"general/Description\": \"描述\",\n    \"general/Edit\": \"编辑\",\n    \"general/Rename\": \"重命名\",\n    \"general/rename-directory\": \"重命名目录\",\n    \"general/delete-directory\": \"删除目录\",\n    \"general/rename-tag\": \"重命名标签\",\n    \"general/delete-tag\": \"删除标签\",\n    \"general/notebook-updates-found\": \"发现笔记本更新\",\n    \"general/update-the-notebook\": \"更新这个笔记本\",\n    \"general/check-notebook-updates-periodically\": \"周期性地检查笔记本更新\",\n    \"general/minutes\": \"分钟\",\n    \"general/hard-reset\": \"硬重置\",\n    \"general/Default\": \"默认\",\n    \"general/Vim\": \"Vim\",\n    \"general/Emacs\": \"Emacs\",\n    \"general/Desc\": \"降序\",\n    \"general/Asc\": \"升序\",\n\n    // Error\n    \"error/authentication-failed\": \"认证失败\",\n    \"error/failed-to-upload-notebook\": \"上传笔记本失败\",\n    \"error/failed-to-download-notebook\": \"下载笔记本失败\",\n    \"error/notebook-already-exists\": \"笔记本已经存在\",\n    \"error/invalid-git-url-prefix\": \"无效的 git URL 前缀\",\n    \"error/please-resolve-conflicts\": \"请先解决冲突\",\n    \"error/failed-to-disable-encryption\": \"解除加密失败\",\n    \"error/decryption-failed\": \"解密失败\",\n    \"error/failed-to-change-file-path\": \"更改文件路径失败\",\n    \"error/failed-to-create-widget\": \"创建挂件失败\",\n    \"error/failed-to-load-widget\": \"读取挂件失败\",\n    \"error/failed-to-update-the-notebook\": \"更新笔记本失败\",\n    \"error/failed-to-unpublish-the-notebook\": \"取消发布笔记本失败\",\n    \"error/failed-to-publish-notebook\": \"发布笔记本失败\",\n\n    // Success\n    \"success/notebook-uploaded\": \"笔记本已上传\",\n    \"success/notebook-downloaded\": \"笔记本已下载\",\n\n    // Info\n    \"info/downloading-notebook\": \"正在下载笔记本\",\n\n    // Note\n    \"note/unarchive-note\": \"取消归档\",\n    \"note/archive-note\": \"归档\",\n    \"note/delete-forever\": \"永久删除\",\n    \"note/delete-note\": \"删除\",\n    \"note/restore-note\": \"恢复\",\n    \"note/report-note\": \"举报\",\n    \"note/open-in-crossnote-website\": \"在交叉笔记网站中打开\",\n\n    // NoteTags\n    \"note-tags/send-suggestion-failure\": \"发送建议失败\",\n    \"note-tags/suggestion-sent\": \"建议已发送\",\n    \"note-tags/suggest-a-tag-to-this-note\": \"给这个笔记建议一个标签\",\n\n    // UserTags\n    \"user-tags/follow-a-tag\": \"关注一个标签\",\n\n    // Notifications\n    \"notifications/refresh\": \"刷新来查看新的消息\",\n    \"notifications/new-version-available\": \"发现了新版本的交叉笔记！\",\n\n    // Settings\n    \"settings/about-this-project\": \"关于这个项目\",\n    \"settings/issues-and-feature-requests\": \"发现了问题或者有功能请求？\",\n    \"settings/uploading-cover-image\": \"上传封面图片\",\n    \"settings/upload-image-failure\": \"上传图片失败\",\n    \"settings/Cover\": \"封面图片\",\n    \"settings/enter-cover-image-url\": \"输入封面图片链接\",\n    \"settings/upload-image\": \"上传图片\",\n    \"settings/Avatar\": \"头像\",\n    \"settings/enter-avatar-image-url\": \"输入头像图片链接\",\n    \"settings/Name\": \"名字\",\n    \"settings/enter-name\": \"输入你的名字（这个不是你的用户名）\",\n    \"settings/editor-cursor-color\": \"编辑器光标颜色\",\n    \"settings/hello\": \"你好，\",\n    \"settings/world\": \"世界！\",\n    \"settings/linked-with-github-account\": \"已关联 GitHub 帐号\",\n    \"settings/link-with-github-account\": \"关联到 GitHub 帐号\",\n    \"settings/log-out\": \"登出\",\n    \"settings/author-name\": \"作者姓名\",\n    \"settings/author-email\": \"作者邮箱\",\n    \"settings/theme\": \"主题\",\n    \"settings/created-cloud-widgets-count\": \"创建的云挂件数量\",\n    \"settings/key-map\": \"键盘映射\",\n\n    // Preview\n    \"preview/attach-a-note\": \"附加一个笔记\",\n    \"preview/crossnote-untitled\": \"交叉笔记 - 无标题\",\n    \"preview/edit-this-note\": \"编辑这个笔记\",\n\n    // ProfileCard\n    \"profile-card/followings\": \"关注\",\n    \"profile-card/followers\": \"粉丝\",\n    \"profile-card/Followings\": \"关注\",\n    \"profile-card/Followers\": \"粉丝\",\n    \"profile-card/notes\": \"笔记\",\n    \"profile-card/follow-user-failure\": \"无法关注这个用户\",\n    \"profile-card/followed-user\": \"关注了这个用户\",\n    \"profile-card/unfollow-user-failure\": \"无法取消关注这个用户\",\n    \"profile-card/unfollowed-user\": \"取消关注了这个用户\",\n\n    // TagCard\n    \"tag-card/pin-to-my-notes-page\": \"置顶到我的笔记页\",\n\n    // Interaction panel\n    \"interaction-panel/show-attached-notes\": \"显示附加的笔记\",\n    \"interaction-panel/add-comment\": \"添加评论\",\n    \"interaction-panel/add-reaction\": \"添加表情\",\n\n    // Editor\n    \"editor/loading-your-note\": \"正在读取你的笔记...\",\n    \"editor/sync-failure\": \"同步失败... 请重启网页\",\n    \"editor/saving\": \"正在保存...\",\n    \"editor/save-failure\": \"保存失败\",\n    \"editor/saved\": \"已保存\",\n    \"editor/update-note-failure\": \"更新笔记失败\",\n    \"editor/placeholder\": \"#  你好 😀 输入 '/' 打开命令\",\n    \"editor/ln\": \"行\",\n    \"editor/col\": \"列\",\n\n    // * NoteControl\n    \"editor/note-control/allow-readers-to-suggest-note-tags\":\n      \"允许读者向你建议笔记的标签\",\n    \"editor/note-control/allow-readers-to-attach-notes-under-this-note\":\n      \"允许读者在这个笔记下附加笔记\",\n    \"editor/note-control/inherit-parent-note-collaborators-list\":\n      \"继承上一级笔记的协作者列表\",\n    \"editor/note-control/note-visibility-hint\":\n      \"所有的协作者也将能够看到这个笔记\",\n    \"editor/note-control/allow-readers-to-attach-notes-unchecked\":\n      \"适用于你以及所有可编辑或可管理这个笔记的协作者\",\n    \"editor/note-control/allow-readers-to-attach-notes-checked\":\n      \"适用于所有可以看到这个笔记的人\",\n    \"editor/note-control/enter-parent-note-id\": \"输入上一级笔记的 ID\",\n    \"editor/note-control/attach-note-failure\": \"附加笔记失败\",\n    \"editor/note-control/unattach-note-failure\": \"取消附加笔记失败\",\n    \"editor/collaborator-hint\": \" - 他们将会看到这个笔记\",\n    \"editor/shareable-link-hint\":\n      \"所有拥有这个链接的人无需登录即可查看/修改这个笔记\",\n\n    // * BackupsControl\n    \"editor/backups-control/create-backup\": \"创建备份\",\n    \"editor/backups-control/delete-this-backup\": \"删除这个备份\",\n    \"editor/backups-control/create-backup-failure\": \"创建备份失败\",\n    \"editor/backups-control/backup-created\": \"备份已创建\",\n    \"editor/backups-control/delete-backup-failure\": \"删除备份失败\",\n    \"editor/backups-control/backup-deleted\": \"备份已删除\",\n    \"editor/backups-control/cloud-version\": \"云端版本\",\n    \"editor/backups-control/backup-name\": \"备份名称\",\n\n    // * CollaboratorasControl\n    \"editor/collaborators-control/set-collaborator-role-failure\":\n      \"设置协作者角色失败\",\n    \"editor/collaborators-control/add-collaborator-failure\": \"添加协作者失败\",\n    \"editor/collaborators-control/collaborator-removed\": \"协作者已删除\",\n    \"editor/collaborators-control/collaborator-added\": \"协作者已添加\",\n    \"editor/collaborators-control/can-view\": \"可以浏览\",\n    \"editor/collaborators-control/can-edit\": \"可以编辑\",\n    \"editor/collaborators-control/can-administrate\": \"可以管理员管理\",\n\n    // * EditorToolBar\n    \"editor/toolbar/insert-image\": \"插入图片\",\n    \"editor/toolbar/upload-local-images\": \"上传本地图片\",\n    \"editor/toolbar/capture-webpage\": \"截取整个网页\",\n    \"editor/toolbar/insert-clock\": \"插入时钟\",\n    \"editor/toolbar/insert-emoji\": \"插入 Emoji\",\n    \"editor/toolbar/insert-media\": \"插入媒体\",\n    \"editor/toolbar/insert-audio\": \"插入音频\",\n    \"editor/toolbar/netease-music\": \"网易云音乐\",\n    \"editor/toolbar/insert-video\": \"插入视频\",\n    \"editor/toolbar/insert-youtube\": \"插入 Youtube\",\n    \"editor/toolbar/insert-bilibili\": \"插入 Bilibili\",\n    \"editor/toolbar/insert-slide\": \"插入幻灯片\",\n    \"editor/toolbar/insert-ocr\": \"插入 OCR\",\n    \"editor/toolbar/insert-kanban\": \"插入看板\",\n    \"editor/toolbar/insert-abc-notation\": \"插入 ABC notation\",\n    \"editor/toolbar/insert-header-1\": \"插入一级标题\",\n    \"editor/toolbar/insert-header-2\": \"插入二级标题\",\n    \"editor/toolbar/insert-header-3\": \"插入三级标题\",\n    \"editor/toolbar/insert-header-4\": \"插入四级标题\",\n    \"editor/toolbar/insert-header-5\": \"插入五级标题\",\n    \"editor/toolbar/insert-header-6\": \"插入六级标题\",\n    \"editor/toolbar/bold\": \"粗体\",\n    \"editor/toolbar/italic\": \"斜体\",\n    \"editor/toolbar/strikethrough\": \"删除线\",\n    \"editor/toolbar/insert-inline-code\": \"插入行内代码\",\n    \"editor/toolbar/insert-blockquote\": \"插入引用\",\n    \"editor/toolbar/insert-unordered-list\": \"插入无序列表\",\n    \"editor/toolbar/insert-ordered-list\": \"插入有序列表\",\n    \"editor/toolbar/insert-link\": \"插入链接\",\n    \"editor/toolbar/insert-table\": \"插入表格\",\n    \"editor/toolbar/insert-comment\": \"插入交叉笔记云评论挂件\",\n    \"editor/toolbar/insert-github-gist\": \"插入 GitHub Gist\",\n\n    // * NoteControl\n    \"editor/note-control/tag-added\": \"标签已被添加\",\n    \"editor/note-control/tag-deleted\": \"标签已被删除\",\n    \"editor/note-control/set-note-visibility-failure\": \"设置笔记可见度失败\",\n    \"editor/note-control/note-visibility-updated\": \"笔记可见度已更新\",\n    \"editor/note-control/set-author-visibility-failure\": \"设置作者可见度失败\",\n    \"editor/note-control/author-visibility-updated\": \"作者可见度已更新\",\n    \"editor/note-control/editor-mode\": \"编辑器模式\",\n    \"editor/note-control/source-code\": \"源代码\",\n    \"editor/note-control/preview\": \"预览\",\n    \"editor/note-control/split-view\": \"分栏\",\n    \"editor/note-control/pin-preview\": \"固定预览到右侧\",\n    \"editor/note-control/display-modification-records\": \"显示修改记录\",\n    \"editor/note-control/note-visibility\": \"笔记可见度\",\n    \"editor/note-control/author-visibility\": \"作者可见度\",\n    \"editor/note-control/shareable-link\": \"可分享的链接\",\n    \"editor/note-control/copy-to-clipboard\": \"复制到粘贴板\",\n    \"editor/note-control/link-to-preview\": \"到预览的链接\",\n    \"editor/note-control/link-to-editor\": \"到编辑器的链接\",\n    \"editor/note-control/attach-to-note\": \"附加到笔记\",\n    \"editor/note-control/source-added\": \"链接已被添加\",\n    \"editor/note-control/source-deleted\": \"链接已被删除\",\n    \"editor/note-control/invalid-note-source\": \"无效的链接\",\n    \"editor/note-control/add-note-source\": \"添加相关的链接\",\n    \"editor/note-control/note-source-hint\":\n      \"所有相同链接的笔记将会被聚集到一起\",\n    \"editor/note-control/enter-note-source\": \"输入链接\",\n\n    // AvatarPanel\n    \"avatar-panel/this-note-is-private\": \"这个笔记是私有的\",\n    \"avatar-panel/this-note-is-public\": \"这个笔记是公开可见的\",\n    \"avatar-panel/this-note-is-friends-only\": \"这个笔记仅对好友可见\",\n    \"avatar-panel/you-are-anonymous\": \"你是匿名的\",\n\n    // FileExporter\n    \"file-exporter/name\": \"文件导出\",\n    \"file-exporter/orientation\": \"方向\",\n    \"file-exporter/portrait\": \"竖直\",\n    \"file-exporter/landscape\": \"水平\",\n    \"file-exporter/paper-size\": \"纸张大小\",\n    \"file-exporter/unit\": \"单位\",\n    \"file-exporter/margin-top\": \"上边距\",\n    \"file-exporter/margin-bottom\": \"下边距\",\n    \"file-exporter/margin-left\": \"左边距\",\n    \"file-exporter/margin-right\": \"右边距\",\n\n    // Utils\n    \"utils/uploading-image\": \"正在上传图片...\",\n    \"utils/upload-image-failure\": \"上传图片失败\",\n\n    // Notification\n    // * CommentPostingNotification\n    \"notification/replies-to-you-in\": \"回复了你在\",\n    \"notification/'s-note\": \"的笔记 \",\n    // * NoteReactionNotification\n    \"notification/added\": \" 添加了\",\n    \"notification/to-your-note\": \"到你的笔记\",\n    \"notification/add-you-as\": \"添加了你作为\",\n    \"notification/of-note\": \"到笔记\",\n    // * NoteTagSuggestion\n    \"notification/add-tag-failure\": \"添加标签失败\",\n    \"notification/suggested-to-add-tag\": \"建议添加标签\",\n    // * UserFollowingNotification\n    \"notification/started-following-you\": \"开始关注了你\",\n    // * BookmarkNotification\n    \"notification/bookmarked-your-note\": \"收藏了你的笔记\",\n    \"notification/view-more-notifications\": \"查看更多的消息\",\n\n    // GitHubOAuthCallback\n    \"github-oauth/wait\": \"请稍等 ...\",\n    \"github-oauth/link-with-github-account-failure\": \"无法连接到 GitHub 账号\",\n    \"github-oauth/sign-in-with-github-account-failure\":\n      \"使用 GitHub 账号登录失败\",\n    \"github-oauth/first-time-sign-in\": \"看上去这是你第一次使用 GitHub 账号登录\",\n    \"github-oauth/first-time-sign-in-small\": \"请完成下方的注册\",\n\n    // Widgets\n    \"widget/autoplay\": \"自动播放\",\n    \"widget/controls\": \"控制器\",\n    \"widget/loop\": \"循环\",\n    \"widget/muted\": \"静音\",\n    \"widget/creating-widget\": \"正在创建挂件\",\n    \"widget/loading-widget\": \"正在读取挂件\",\n    \"widget/crossnote.image/thanks_sm_ms\":\n      \"在此由衷感谢 sm.ms 提供免费的图床服务。\",\n    \"widget/crossnote.audio/audio_element_fail\":\n      \"你的浏览器不支持音频 audio 元素\",\n    \"widget/crossnote.audio/source-url-placeholder\":\n      \"在这里输入音频文件源链接，然后按 '回车' 键来插入\",\n    \"widget/crossnote.video/video_element_fail\":\n      \"你的浏览器不支持视频 video 元素\",\n    \"widget/crossnote.bilibili/error_message\":\n      \"错误：仅支持 https://www.bilibili.com/video/av79126732 这样的链接\",\n    \"widget/crossnote.youtube/error_message\":\n      \"错误：仅支持 https://www.youtube.com/watch?v=MmB9b5njVbA 这样的链接\",\n    \"widget/crossnote.auth/welcome\": \"欢迎使用交叉笔记\",\n    \"widget/crossnote.auth/doesnt-have-account\": \"没有帐号？咱们来创建一个😉！\",\n    \"widget/crossnote.auth/forgot_password\": \"忘记你的密码了 😣？\",\n    \"widget/crossnote.auth/failed_to_send_code\": \"发送验证码到邮箱失败\",\n    \"widget/crossnote.auth/verification_code_sent\": \"验证码已经被发送到 \",\n    \"widget/crossnote.auth/failed_to_reset_password\": \"重置密码失败\",\n    \"widget/crossnote.auth/password_reset\": \"你的密码已被重置\",\n    \"widget/crossnote.auth/password-mismatch\": \"密码不一致\",\n    \"widget/crossnote.auth/hello\": \"你好，\",\n    \"widget/crossnote.auth/enter-the-verification-code\": \"输入验证码\",\n    \"widget/crossnote.auth/get-code\": \"获取验证码\",\n    \"widget/crossnote.auth/sign-in-with-github-account\": \"使用 GitHub 账号登录\",\n    \"widget/crossnote.auth/already-have-an-account\": \"已有帐号？\",\n    \"widget/crossnote.auth/reset-password\": \"重置密码\",\n    \"widget/crossnote.auth/Or\": \"或者\",\n    \"widget/crossnote.bilibili/Bilibili\": \"Bilibili\",\n    \"widget/crossnote.bilibili/bilibili-video-url\": \"Bilibili 视频链接\",\n    \"widget/crossnote.bilibili/url-placeholder\":\n      \"在这里插入 Bilibili 视频的链接，然后按 '回车' 键来插入\",\n    \"widget/crossnote.image/image-helper\": \"图片助手\",\n    \"widget/crossnote.image/image-url-placeholder\":\n      \"在这里输入图片链接，然后按 '回车' 键来插入\",\n    \"widget/crossnote.image/click-here-to-browse-image-file\":\n      \"点击这里来选择图片文件\",\n    \"widget/crossnote.neteasemusic/song-id-placeholder\":\n      \"输入网易云音乐歌曲数字 ID\",\n    \"widget/crossnote.video/video-url-placeholder\":\n      \"在这里输入视频文件源链接，然后按 '回车' 键来插入\",\n    \"widget/crossnote.video/poster-url\": \"封面图片链接（可选填）\",\n    \"widget/crossnote.video/poster-url-placeholder\": \"在这里输入封面图片链接。\",\n    \"widget/crossnote.youtube/youtube-video-url\": \"Youtube 视频链接\",\n    \"widget/crossnote.youtube/youtube-video-url-placeholder\":\n      \"在这里插入 Youtube 视频的链接，然后按 '回车' 键来插入\",\n    \"widget/crossnote.ocr/ocr\": \"OCR - 光学字符识别\",\n    \"widget/crossnote.ocr/local-image\": \"本地图片\",\n    \"widget/crossnote.ocr/recognize-text-in-languages\": \"识别以下语言的文字\",\n    \"widget/crossnote.ocr/start-ocr\": \"开始文字识别\",\n    \"widget/crossnote.ocr/extra-settings\": \"额外设定\",\n    \"widget/crossnote.ocr/grayscale\": \"灰度\",\n    \"widget/crossnote.kanban/add-column\": \"添加新的列\",\n    \"widget/crossnote.github_gist/title\": \"嵌入一个 GitHub Gist\",\n    \"widget/crossnote/github_gist/enter-github-gist-url\":\n      \"输入 GitHub Gist URL\",\n\n    // Tesseract\n    \"tesseract/loading tesseract core\": \"正在读取 tesseract 核心\",\n    \"tesseract/initializing tesseract\": \"正在初始化 tesseract\",\n    \"tesseract/initialized tesseract\": \"已初始化 tesseract\",\n    \"tesseract/loading language traineddata\": \"正在读取语言训练数据\",\n    \"tesseract/loaded language traineddata\": \"已读取语言训练数据\",\n    \"tesseract/initializing api\": \"正在初始化程序接口\",\n    \"tesseract/initialized api\": \"已初始化程序接口\",\n    \"tesseract/recognizing text\": \"正在识别文字\",\n\n    // Comment widget\n    \"widget/crossnote.comment/reply-to-this-user\": \"回复给这个用户\",\n    \"widget/crossnote.comment/add-reaction-to-this-comment\":\n      \"给这条评论添加反应\",\n    \"widget/crossnote.comment/edit-this-message\": \"编辑这条评论\",\n    \"widget/crossnote.comment/modified-comment\": \"编辑过的评论\",\n    \"widget/crossnote.comment/post-comment-failure\": \"发送评论失败\",\n    \"widget/crossnote.comment/unsubscribe-info\": \"取消订阅评论\",\n    \"widget/crossnote.comment/subscribe-info\": \"订阅评论\",\n    \"widget/crossnote.comment/view-more-comments\": \"查看更多的评论\",\n\n    // Dialogs\n    \"delete-note-dialog/title\": \"你确定要删除这个笔记？\",\n    \"delete-note-dialog/subtitle\": \"你无法撤销此操作。\",\n    \"delete-directory-dialog/title\": \"你确定要删除这个目录？\",\n    \"delete-directory-dialog/subtitle\":\n      \"所有子目录以及笔记也将会被删除。你无法撤销此操作。\",\n    \"delete-tag-dialog/title\": \"你确定要删除这个标签？\",\n    \"delete-tag-dialog/subtitle\": \"所有子标签也将会被删除。你无法撤销此操作。\",\n    \"add-notebook-dialog/disclaimer\":\n      \"所有笔记本的数据将只会被保存于浏览器本地以供离线使用。我们不会上传任何你的笔记本数据到我们的服务器。\",\n    \"edit-image-dialog/title\": \"编辑图片\",\n    \"edit-image-dialog/image-url\": \"图片 URL\",\n    \"edit-image-dialog/image-title\": \"图片标题\",\n    \"edit-image-dialog/image-alt-text\": \"图片替代文本\",\n    \"language-selector-dialog/subtitle\": \"请选择偏好语言\",\n\n    // react-ios-pwa-prompt\n    \"react-ios-pwa-prompt/copy-title\": \"添加到主屏幕\",\n    \"react-ios-pwa-prompt/copy-body\":\n      \"这个网站拥有软件功能。将它添加到你的主屏幕来开启全屏以及离线使用功能。\",\n    \"react-ios-pwa-prompt/copy-share-button-label\": \"1) 点击 '分享' 按钮\",\n    \"react-ios-pwa-prompt/copy-add-home-button-label\": \"2) 点击 '添加到主屏幕'\",\n\n    // Publish notebook\n    \"publish-notebook/disclaimer-1\":\n      \"我们目前仅支持从 GitHub、GitLab、Gitea 或码云的公共仓库发布笔记本。我们只收集 README.md 文件数据。\",\n    \"publish-notebook/disclaimer-2\":\n      \"请通过在远程仓库中向 README.md 添加以下 front-matter 来声明笔记本的所有权：\",\n\n    // git\n    \"git/status/ignored\": \"已忽略\",\n    \"git/status/unmodified\": \"未修改\",\n    \"git/status/*modified\": \"*已修改\",\n    \"git/status/*deleted\": \"*已删除\",\n    \"git/status/*added\": \"*新增\",\n    \"git/status/absent\": \"缺失\",\n    \"git/status/modified\": \"已修改\",\n    \"git/status/deleted\": \"已删除\",\n    \"git/status/added\": \"新增\",\n    \"git/status/*unmodified\": \"*未修改\",\n    \"git/status/*absent\": \"*缺失\",\n    \"git/status/*undeleted\": \"*未删除\",\n  },\n};\n","export const zhTW = {\n  translation: {\n    \"title/Crossnote\": \"交叉筆記\",\n    \"search/notes\": \"搜尋筆記\",\n    \"search/notebooks\": \"搜尋筆記本\",\n    \"search/attachments\": \"搜尋附件\",\n\n    // Account\n    \"account/Anonymous\": \"匿名\",\n    \"account/anonymous\": \"匿名\",\n\n    // General\n    \"general/go-back\": \"回退\",\n    \"general/sending\": \"發送中\",\n    \"general/send\": \"發送\",\n    \"general/cancel\": \"取消\",\n    \"general/add\": \"添加\",\n    \"general/adding\": \"正在添加\",\n    \"general/backed-up-at\": \"備份於\",\n    \"general/created-at\": \"創建於\",\n    \"general/modified-at\": \"修改於\",\n    \"general/interacted-at\": \"互動於\",\n    \"general/date-created\": \"創建時間\",\n    \"general/date-modified\": \"修改時間\",\n    \"general/date-interacted\": \"互動時間\",\n    \"general/title\": \"標題\",\n    \"general/saved-at\": \"保存於\",\n    \"general/loading\": \"讀取中 ...\",\n    \"general/loading-notifications\": \"正在讀取消息 ...\",\n    \"general/failed-to-set\": \"設置失敗\",\n    \"general/update\": \"更新\",\n    \"general/updated\": \"已更新\",\n    \"general/updating\": \"正在更新\",\n    \"general/close\": \"關閉\",\n    \"general/Note\": \"筆記\",\n    \"general/notes\": \"筆記\",\n    \"general/Settings\": \"設置\",\n    \"general/Collaborators\": \"協作者\",\n    \"general/collaborators\": \"協作者\",\n    \"general/Backups\": \"備份\",\n    \"general/backups\": \"備份\",\n    \"general/Discussion\": \"討論\",\n    \"general/discussion\": \"討論\",\n    \"general/Notifications\": \"消息\",\n    \"general/Username\": \"用戶名\",\n    \"general/Email\": \"郵箱\",\n    \"general/Password\": \"密碼\",\n    \"general/confirm-password\": \"再次確認密碼\",\n    \"general/Continue\": \"下一步\",\n    \"general/enter-username\": \"輸入用戶名\",\n    \"general/vickymd\": \"VickyMD(微記)\",\n    \"general/tags\": \"標籤\",\n    \"general/add-a-tag\": \"添加一個標籤\",\n    \"general/private\": \"私有\",\n    \"general/public\": \"公開可見\",\n    \"general/friends-only\": \"僅好友可見\",\n    \"general/anonymous\": \"匿名\",\n    \"general/onymous\": \"公開署名\",\n    \"general/Tag\": \"標籤\",\n    \"general/no-tags\": \"沒有標籤\",\n    \"general/Directory\": \"目錄\",\n    \"general/Untitled\": \"無標題\",\n    \"general/untitled\": \"無標題\",\n    \"general/Unknown\": \"未知\",\n    \"general/unknown\": \"未知\",\n    \"general/Agree\": \"同意\",\n    \"general/Disagree\": \"不同意\",\n    \"general/Print\": \"打印\",\n    \"general/Share\": \"分享\",\n    \"Editor\": \"編輯者\",\n    \"EDITOR\": \"編輯者\",\n    \"Viewer\": \"閱讀者\",\n    \"VIEWER\": \"閱讀者\",\n    \"Admin\": \"管理員\",\n    \"ADMIN\": \"管理員\",\n    \"ARCHIVED\": \"歸檔的筆記\",\n    \"ATTACHED NOTES\": \"附加的筆記\",\n    \"DELETED\": \"刪除的筆記\",\n    \"PINNED\": \"置頂\",\n    \"OTHERS\": \"其它\",\n    \"PUBLIC NOTES\": \"公開的筆記\",\n    \"FOLLOWINGS' NOTES\": \"關注人的筆記\",\n    \"SHARED WITH ME\": \"分享給我的\",\n    \"BOOKMARKS\": \"收藏\",\n    \"MY TAGS\": \"我的標籤\",\n    \"general/enter-fullscreen-mode\": \"進入全屏模式\",\n    \"general/enter-presentation-mode\": \"進入幻燈片模式\",\n    \"general/math-preview\": \"數學預覽\",\n    \"general/this-note-is-empty\": \"這個筆記沒有內容\",\n    \"general/this-notebook-is-empty\": \"這個筆記本沒有內容\",\n    \"general/nothing-here\": \"這裡什麼都沒有\",\n    \"general/no-notes-found\": \"沒有找到其它的筆記\",\n    \"general/no-more-attachments-found\": \"没有找到其它的附件\",\n    \"general/no-more-notebooks-found\": \"沒有找到其它的筆記本\",\n    \"general/no-notifications-found\": \"沒有找到其它的消息\",\n    \"general/clear-all\": \"清空所有\",\n    \"general/Save\": \"保存\",\n    \"general/Delete\": \"刪除\",\n    \"general/Follow\": \"關注\",\n    \"general/Following\": \"正在關注\",\n    \"general/Unfollow\": \"取消關注\",\n    \"general/my-notes\": \"我的筆記\",\n    \"general/public-notes\": \"公開的筆記\",\n    \"general/followings-notes\": \"關注人的筆記\",\n    \"general/shared-with-me\": \"分享給我的\",\n    \"general/Bookmarks\": \"收藏\",\n    \"general/Archive\": \"歸檔\",\n    \"general/Trash\": \"廢紙簍\",\n    \"general/new-note\": \"新的筆記\",\n    \"general/new-attachment\": \"新的附件\",\n    \"general/profile-updated\": \"用戶信息已更新\",\n    \"general/ID\": \"ID\",\n    \"general/Audio\": \"音頻\",\n    \"general/Video\": \"視頻\",\n    \"general/source-url\": \"源鏈接\",\n    \"general/sign-in\": \"登錄\",\n    \"general/sign-up\": \"註冊\",\n    \"general/Link\": \"鏈接\",\n    \"general/Upload\": \"上傳\",\n    \"general/Uploading\": \"正在上傳\",\n    \"general/clicks\": \"點擊\",\n    \"general/Processing\": \"正在處理...\",\n    \"general/please-wait\": \"請稍候...\",\n    \"general/please-sign-in-first\": \"請先登錄\",\n    \"general/Languages\": \"語言\",\n    \"general/track\": \"跟蹤\",\n    \"general/Publish\": \"發布\",\n    \"general/Unpublish\": \"取消發佈\",\n    \"general/Open\": \"開啟\",\n    \"general/Download\": \"下載\",\n    \"general/Configure\": \"設定\",\n    \"general/Update\": \"更新\",\n    \"general/empty\": \"空的\",\n    \"general/Explore\": \"探索\",\n    \"general/Notebooks\": \"筆記本\",\n    \"general/add-a-notebook\": \"添加一個筆記本\",\n    \"general/add-a-note\": \"添加一个筆記\",\n    \"general/add-an-attachment\": \"添加一个附件\",\n    \"general/configure-the-notebook\": \"設置筆記本\",\n    \"general/publish-your-notebook\": \"發佈你的筆記本\",\n    \"general/notebook-name\": \"筆記本名稱\",\n    \"general/git-repository\": \"git 倉庫\",\n    \"general/optional\": \"可選\",\n    \"general/url\": \"Url\",\n    \"general/branch\": \"分支\",\n    \"general/remember-username-and-password\": \"記住用戶名和密碼\",\n    \"general/stored-locally\": \"儲存於本地\",\n    \"general/cors-proxy\": \"CORS 代理\",\n    \"general/why-cors-proxy\": \"為什麼需要 CORS 代理？\",\n    \"general/today\": \"今天\",\n    \"general/todo\": \"待辦事項\",\n    \"general/wiki\": \"維琪\",\n    \"general/tagged\": \"標籤\",\n    \"general/untagged\": \"未標籤\",\n    \"general/encrypt\": \"加密\",\n    \"general/encrypted\": \"已加密\",\n    \"general/decrypt\": \"解密\",\n    \"general/conflicted\": \"衝突\",\n    \"general/attachments\": \"附件\",\n    \"general/Pin\": \"置頂\",\n    \"general/Encryption\": \"加密\",\n    \"general/Fullscreen\": \"全屏\",\n    \"general/change-file-path\": \"更改檔路徑\",\n    \"general/create-a-copy\": \"建立複本\",\n    \"general/restore-checkout\": \"恢復 (git checkout)\",\n    \"general/download-pull\": \"下載 (git pull)\",\n    \"general/upload-push\": \"上傳 (git pull & git push)\",\n    \"general/disable-the-encryption-on-this-note\": \"解除這個筆記上的加密\",\n    \"general/encrypt-this-note-with-password\": \"通過密碼加密這個筆記\",\n    \"general/disable-encryption\": \"解除加密\",\n    \"general/decrypt-this-note\": \"解密這個筆記\",\n    \"general/upload-the-profile\": \"上傳賬戶信息\",\n    \"general/commit-message\": \"提交說明\",\n    \"general/upload-notebook\": \"上傳筆記本\",\n    \"general/Comments\": \"評論\",\n    \"general/Source\": \"源\",\n    \"general/Description\": \"描述\",\n    \"general/Edit\": \"編輯\",\n    \"general/Rename\": \"重命名\",\n    \"general/rename-directory\": \"重命名目錄\",\n    \"general/delete-directory\": \"删除目錄\",\n    \"general/rename-tag\": \"重命名標籤\",\n    \"general/delete-tag\": \"删除標籤\",\n    \"general/notebook-updates-found\": \"發現筆記本更新\",\n    \"general/update-the-notebook\": \"更新這個筆記本\",\n    \"general/check-notebook-updates-periodically\": \"週期性地檢查筆記本更新\",\n    \"general/minutes\": \"分鐘\",\n    \"general/hard-reset\": \"硬重設\",\n    \"general/Default\": \"預設\",\n    \"general/Vim\": \"Vim\",\n    \"general/Emacs\": \"Emacs\",\n    \"general/Desc\": \"遞減\",\n    \"general/Asc\": \"遞增\",\n\n    // Error\n    \"error/authentication-failed\": \"認証失敗\",\n    \"error/failed-to-upload-notebook\": \"上傳筆記本失敗\",\n    \"error/failed-to-download-notebook\": \"下載筆記本失敗\",\n    \"error/notebook-already-exists\": \"筆記本已經存在\",\n    \"error/invalid-git-url-prefix\": \"無效的 git URL 前綴\",\n    \"error/please-resolve-conflicts\": \"請先解決沖突\",\n    \"error/failed-to-disable-encryption\": \"解除加密失敗\",\n    \"error/decryption-failed\": \"解密失敗\",\n    \"error/failed-to-change-file-path\": \"更改文件路徑失敗\",\n    \"error/failed-to-create-widget\": \"創建掛件失敗\",\n    \"error/failed-to-load-widget\": \"讀取掛件失敗\",\n    \"error/failed-to-update-the-notebook\": \"更新筆記本失敗\",\n    \"error/failed-to-unpublish-the-notebook\": \"取消發佈筆記本失敗\",\n    \"error/failed-to-publish-notebook\": \"發佈筆記本失敗\",\n\n    // Success\n    \"success/notebook-uploaded\": \"筆記本已上傳\",\n    \"success/notebook-downloaded\": \"筆記本已下載\",\n\n    // Info\n    \"info/downloading-notebook\": \"正在下載筆記本\",\n\n    // Note\n    \"note/unarchive-note\": \"取消歸檔\",\n    \"note/archive-note\": \"歸檔\",\n    \"note/delete-forever\": \"永久刪除\",\n    \"note/delete-note\": \"刪除\",\n    \"note/restore-note\": \"恢復\",\n    \"note/report-note\": \"舉報\",\n    \"note/open-in-crossnote-website\": \"在交叉筆記網站中打開\",\n\n    // NoteTags\n    \"note-tags/send-suggestion-failure\": \"發送建議失敗\",\n    \"note-tags/suggestion-sent\": \"建議已發送\",\n    \"note-tags/suggest-a-tag-to-this-note\": \"給這個筆記建議一個標籤\",\n\n    // UserTags\n    \"user-tags/follow-a-tag\": \"關注一個標籤\",\n\n    // Notifications\n    \"notifications/refresh\": \"刷新來查看新的消息\",\n    \"notifications/new-version-available\": \"發現了新版本的交叉筆記!\",\n\n    // Settings\n    \"settings/about-this-project\": \"關於這個項目\",\n    \"settings/issues-and-feature-requests\": \"發現左問題或者有功能請求?\",\n    \"settings/uploading-cover-image\": \"上傳封面圖片\",\n    \"settings/upload-image-failure\": \"上傳圖片失敗\",\n    \"settings/Cover\": \"封面圖片\",\n    \"settings/enter-cover-image-url\": \"輸入封面圖片鏈接\",\n    \"settings/upload-image\": \"上傳圖片\",\n    \"settings/Avatar\": \"頭像\",\n    \"settings/enter-avatar-image-url\": \"輸入頭像圖片鏈接\",\n    \"settings/Name\": \"名字\",\n    \"settings/enter-name\": \"輸入你的名字（這個不是你的用戶名）\",\n    \"settings/editor-cursor-color\": \"編輯器光標顏色\",\n    \"settings/hello\": \"你好，\",\n    \"settings/world\": \"世界！\",\n    \"settings/linked-with-github-account\": \"已關聯 GitHub 帳號\",\n    \"settings/link-with-github-account\": \"關聯到 GitHub 帳號\",\n    \"settings/log-out\": \"登出\",\n    \"settings/author-name\": \"作者姓名\",\n    \"settings/author-email\": \"作者郵箱\",\n    \"settings/theme\": \"主題\",\n    \"settings/created-cloud-widgets-count\": \"建立的雲掛件數量\",\n    \"settings/key-map\": \"鍵盤對應\",\n\n    // Preview\n    \"preview/attach-a-note\": \"附加一個筆記\",\n    \"preview/crossnote-untitled\": \"交叉筆記 - 無標題\",\n    \"preview/edit-this-note\": \"編輯這個筆記\",\n\n    // ProfileCard\n    \"profile-card/followings\": \"關注\",\n    \"profile-card/followers\": \"粉絲\",\n    \"profile-card/Followings\": \"關注\",\n    \"profile-card/Followers\": \"粉絲\",\n    \"profile-card/notes\": \"筆記\",\n    \"profile-card/follow-user-failure\": \"無法關注這個用戶\",\n    \"profile-card/followed-user\": \"關注了這個用戶\",\n    \"profile-card/unfollow-user-failure\": \"無法取消關注這個用戶\",\n    \"profile-card/unfollowed-user\": \"取消關注了這個用戶\",\n\n    // TagCard\n    \"tag-card/pin-to-my-notes-page\": \"置頂到我的筆記頁\",\n\n    // Interaction panel\n    \"interaction-panel/show-attached-notes\": \"顯示附加的筆記\",\n    \"interaction-panel/add-comment\": \"添加評論\",\n    \"interaction-panel/add-reaction\": \"添加表情\",\n\n    // Editor\n    \"editor/loading-your-note\": \"正在讀取你的筆記...\",\n    \"editor/sync-failure\": \"同步失敗... 請重啟網頁\",\n    \"editor/saving\": \"正在保存...\",\n    \"editor/save-failure\": \"保存失敗\",\n    \"editor/saved\": \"已保存\",\n    \"editor/update-note-failure\": \"更新筆記失敗\",\n    \"editor/placeholder\": \"#  你好 😀 輸入 '/' 打開命令\",\n    \"editor/ln\": \"行\",\n    \"editor/col\": \"列\",\n\n    // * NoteControl\n    \"editor/note-control/allow-readers-to-suggest-note-tags\":\n      \"允許讀者向你建議筆記的標籤\",\n    \"editor/note-control/allow-readers-to-attach-notes-under-this-note\":\n      \"允許讀者在這個筆記下附加筆記\",\n    \"editor/note-control/inherit-parent-note-collaborators-list\":\n      \"繼承上一級筆記的協作者列表\",\n    \"editor/note-control/note-visibility-hint\":\n      \"所有的協作者也將能夠看到這個筆記\",\n    \"editor/note-control/allow-readers-to-attach-notes-unchecked\":\n      \"適用於你以及所有可編輯或可管理這個筆記的協作者\",\n    \"editor/note-control/allow-readers-to-attach-notes-checked\":\n      \"適用於所有可以看到這個筆記的人\",\n    \"editor/note-control/enter-parent-note-id\": \"輸入上一級筆記的 ID\",\n    \"editor/note-control/attach-note-failure\": \"附加筆記失敗\",\n    \"editor/note-control/unattach-note-failure\": \"取消附加筆記失敗\",\n    \"editor/collaborator-hint\": \" - 他們將會看到這個筆記\",\n    \"editor/shareable-link-hint\":\n      \"所有擁有這個鏈接的人無需登錄即可查看/修改這個筆記\",\n\n    // * BackupsControl\n    \"editor/backups-control/create-backup\": \"創建備份\",\n    \"editor/backups-control/delete-this-backup\": \"刪除這個備份\",\n    \"editor/backups-control/create-backup-failure\": \"創建備份失敗\",\n    \"editor/backups-control/backup-created\": \"備份已創建\",\n    \"editor/backups-control/delete-backup-failure\": \"刪除備份失敗\",\n    \"editor/backups-control/backup-deleted\": \"備份已刪除\",\n    \"editor/backups-control/cloud-version\": \"雲端版本\",\n    \"editor/backups-control/backup-name\": \"備份名稱\",\n\n    // * CollaboratorasControl\n    \"editor/collaborators-control/set-collaborator-role-failure\":\n      \"設置協作者角色失敗\",\n    \"editor/collaborators-control/add-collaborator-failure\": \"添加協作者失敗\",\n    \"editor/collaborators-control/collaborator-removed\": \"協作者已刪除\",\n    \"editor/collaborators-control/collaborator-added\": \"協作者已添加\",\n    \"editor/collaborators-control/can-view\": \"可以瀏覽\",\n    \"editor/collaborators-control/can-edit\": \"可以編輯\",\n    \"editor/collaborators-control/can-administrate\": \"可以管理員管理\",\n\n    // * EditorToolBar\n    \"editor/toolbar/insert-image\": \"插入圖片\",\n    \"editor/toolbar/upload-local-images\": \"上傳本地圖片\",\n    \"editor/toolbar/capture-webpage\": \"截取整個網頁\",\n    \"editor/toolbar/insert-clock\": \"插入時鐘\",\n    \"editor/toolbar/insert-emoji\": \"插入 Emoji\",\n    \"editor/toolbar/insert-media\": \"插入媒體\",\n    \"editor/toolbar/insert-audio\": \"插入音頻\",\n    \"editor/toolbar/netease-music\": \"網易雲音樂\",\n    \"editor/toolbar/insert-video\": \"插入視頻\",\n    \"editor/toolbar/insert-youtube\": \"插入 Youtube\",\n    \"editor/toolbar/insert-bilibili\": \"插入 Bilibili\",\n    \"editor/toolbar/insert-slide\": \"插入幻燈片\",\n    \"editor/toolbar/insert-ocr\": \"插入 OCR\",\n    \"editor/toolbar/insert-kanban\": \"插入看板\",\n    \"editor/toolbar/insert-abc-notation\": \"插入 ABC notation\",\n    \"editor/toolbar/insert-header-1\": \"插入一級標題\",\n    \"editor/toolbar/insert-header-2\": \"插入二級標題\",\n    \"editor/toolbar/insert-header-3\": \"插入三級標題\",\n    \"editor/toolbar/insert-header-4\": \"插入四級標題\",\n    \"editor/toolbar/insert-header-5\": \"插入五級標題\",\n    \"editor/toolbar/insert-header-6\": \"插入六級標題\",\n    \"editor/toolbar/bold\": \"粗體\",\n    \"editor/toolbar/italic\": \"斜體\",\n    \"editor/toolbar/strikethrough\": \"刪除線\",\n    \"editor/toolbar/insert-inline-code\": \"插入行內代碼\",\n    \"editor/toolbar/insert-blockquote\": \"插入引用\",\n    \"editor/toolbar/insert-unordered-list\": \"插入無序列表\",\n    \"editor/toolbar/insert-ordered-list\": \"插入有序列表\",\n    \"editor/toolbar/insert-link\": \"插入鏈接\",\n    \"editor/toolbar/insert-table\": \"插入表格\",\n    \"editor/toolbar/insert-comment\": \"插入交叉筆記雲評論掛件\",\n    \"editor/toolbar/insert-github-gist\": \"插入 GitHub Gist\",\n\n    // * NoteControl\n    \"editor/note-control/tag-added\": \"標籤已被添加\",\n    \"editor/note-control/tag-deleted\": \"標籤已被刪除\",\n    \"editor/note-control/set-note-visibility-failure\": \"設置筆記可見度失敗\",\n    \"editor/note-control/note-visibility-updated\": \"筆記可見度已更新\",\n    \"editor/note-control/set-author-visibility-failure\": \"設置作者可見度失敗\",\n    \"editor/note-control/author-visibility-updated\": \"作者可見度已更新\",\n    \"editor/note-control/editor-mode\": \"編輯器模式\",\n    \"editor/note-control/source-code\": \"源代碼\",\n    \"editor/note-control/preview\": \"預覽\",\n    \"editor/note-control/split-view\": \"分欄\",\n    \"editor/note-control/pin-preview\": \"固定預覽到右側\",\n    \"editor/note-control/display-modification-records\": \"顯示修改記錄\",\n    \"editor/note-control/note-visibility\": \"筆記可見度\",\n    \"editor/note-control/author-visibility\": \"作者可見度\",\n    \"editor/note-control/shareable-link\": \"可分享的鏈接\",\n    \"editor/note-control/copy-to-clipboard\": \"複製到粘貼板\",\n    \"editor/note-control/link-to-preview\": \"到預覽的鏈接\",\n    \"editor/note-control/link-to-editor\": \"到編輯器的鏈接\",\n    \"editor/note-control/attach-to-note\": \"附加到筆記\",\n    \"editor/note-control/source-added\": \"鏈接已被添加\",\n    \"editor/note-control/source-deleted\": \"鏈接已被刪除\",\n    \"editor/note-control/invalid-note-source\": \"無效的鏈接\",\n    \"editor/note-control/add-note-source\": \"添加相關的鏈接\",\n    \"editor/note-control/note-source-hint\":\n      \"所有相同鏈接的筆記將會被聚集到壹起\",\n    \"editor/note-control/enter-note-source\": \"輸入鏈接\",\n\n    // AvatarPanel\n    \"avatar-panel/this-note-is-private\": \"這個筆記是私有的\",\n    \"avatar-panel/this-note-is-public\": \"這個筆記是公開可見的\",\n    \"avatar-panel/this-note-is-friends-only\": \"這個筆記僅對好友可見\",\n    \"avatar-panel/you-are-anonymous\": \"你是匿名的\",\n\n    // FileExporter\n    \"file-exporter/name\": \"文件導出\",\n    \"file-exporter/orientation\": \"方向\",\n    \"file-exporter/portrait\": \"豎直\",\n    \"file-exporter/landscape\": \"水平\",\n    \"file-exporter/paper-size\": \"紙張大小\",\n    \"file-exporter/unit\": \"單位\",\n    \"file-exporter/margin-top\": \"上邊距\",\n    \"file-exporter/margin-bottom\": \"下邊距\",\n    \"file-exporter/margin-left\": \"左邊距\",\n    \"file-exporter/margin-right\": \"右邊距\",\n\n    // Utils\n    \"utils/uploading-image\": \"正在上傳圖片...\",\n    \"utils/upload-image-failure\": \"上傳圖片失敗\",\n\n    // Notification\n    // * CommentPostingNotification\n    \"notification/replies-to-you-in\": \"回復了你在\",\n    \"notification/'s-note\": \"的筆記 \",\n    // * NoteReactionNotification\n    \"notification/added\": \" 添加了\",\n    \"notification/to-your-note\": \"到你的筆記\",\n    \"notification/add-you-as\": \"添加了你作為\",\n    \"notification/of-note\": \"到筆記\",\n    // * NoteTagSuggestion\n    \"notification/add-tag-failure\": \"添加標籤失敗\",\n    \"notification/suggested-to-add-tag\": \"建議添加標籤\",\n    // * UserFollowingNotification\n    \"notification/started-following-you\": \"開始關注了你\",\n    // * BookmarkNotification\n    \"notification/bookmarked-your-note\": \"收藏了你的筆記\",\n    \"notification/view-more-notifications\": \"查看更多的消息\",\n\n    // GitHubOAuthCallback\n    \"github-oauth/wait\": \"請稍等 ...\",\n    \"github-oauth/link-with-github-account-failure\": \"無法連接到 GitHub 賬號\",\n    \"github-oauth/sign-in-with-github-account-failure\":\n      \"使用 GitHub 賬號登錄失敗\",\n    \"github-oauth/first-time-sign-in\": \"看上去這是你第一次使用 GitHub 賬號登錄\",\n    \"github-oauth/first-time-sign-in-small\": \"請完成下方的註冊\",\n\n    // Widgets\n    \"widget/autoplay\": \"自動播放\",\n    \"widget/controls\": \"控制器\",\n    \"widget/loop\": \"循環\",\n    \"widget/muted\": \"靜音\",\n    \"widget/creating-widget\": \"正在創建掛件\",\n    \"widget/loading-widget\": \"正在讀取掛件\",\n    \"widget/crossnote.image/thanks_sm_ms\":\n      \"在此由衷感謝 sm.ms 提供免費的圖床服務。\",\n    \"widget/crossnote.audio/audio_element_fail\":\n      \"你的瀏覽器不支持音頻 audio 元素\",\n    \"widget/crossnote.audio/source-url-placeholder\":\n      \"在這裡輸入音頻文件源鏈接，然後按 '回車' 鍵來插入\",\n    \"widget/crossnote.video/video_element_fail\":\n      \"你的瀏覽器不支持視頻 video 元素\",\n    \"widget/crossnote.bilibili/error_message\":\n      \"錯誤：僅支持 https://www.bilibili.com/video/av79126732 這樣的鏈接\",\n    \"widget/crossnote.youtube/error_message\":\n      \"錯誤：僅支持 https://www.youtube.com/watch?v=MmB9b5njVbA 這樣的鏈接\",\n    \"widget/crossnote.auth/welcome\": \"歡迎使用交叉筆記\",\n    \"widget/crossnote.auth/doesnt-have-account\": \"沒有帳號？咱們來創建一個😉！\",\n    \"widget/crossnote.auth/forgot_password\": \"忘記你的密碼了 😣？\",\n    \"widget/crossnote.auth/failed_to_send_code\": \"發送驗證碼到郵箱失敗\",\n    \"widget/crossnote.auth/verification_code_sent\": \"驗證碼已經被發送到 \",\n    \"widget/crossnote.auth/failed_to_reset_password\": \"重置密碼失敗\",\n    \"widget/crossnote.auth/password_reset\": \"你的密碼已被重置\",\n    \"widget/crossnote.auth/password-mismatch\": \"密碼不一致\",\n    \"widget/crossnote.auth/hello\": \"你好，\",\n    \"widget/crossnote.auth/enter-the-verification-code\": \"輸入驗證碼\",\n    \"widget/crossnote.auth/get-code\": \"獲取驗證碼\",\n    \"widget/crossnote.auth/sign-in-with-github-account\": \"使用 GitHub 賬號登錄\",\n    \"widget/crossnote.auth/already-have-an-account\": \"已有帳號？\",\n    \"widget/crossnote.auth/reset-password\": \"重置密碼\",\n    \"widget/crossnote.auth/Or\": \"或者\",\n    \"widget/crossnote.bilibili/Bilibili\": \"Bilibili\",\n    \"widget/crossnote.bilibili/bilibili-video-url\": \"Bilibili 視頻鏈接\",\n    \"widget/crossnote.bilibili/url-placeholder\":\n      \"在這裡插入 Bilibili 視頻的鏈接，然後按 '回車' 鍵來插入\",\n    \"widget/crossnote.image/image-helper\": \"圖片助手\",\n    \"widget/crossnote.image/image-url-placeholder\":\n      \"在這裡輸入圖片鏈接，然後按 '回車' 鍵來插入\",\n    \"widget/crossnote.image/click-here-to-browse-image-file\":\n      \"點擊這裡來選擇圖片文件\",\n    \"widget/crossnote.neteasemusic/song-id-placeholder\":\n      \"輸入網易雲音樂歌曲數字 ID\",\n    \"widget/crossnote.video/video-url-placeholder\":\n      \"在這裡輸入視頻文件源鏈接，然後按 '回車' 鍵來插入\",\n    \"widget/crossnote.video/poster-url\": \"封面圖片鏈接（可選填）\",\n    \"widget/crossnote.video/poster-url-placeholder\": \"在這裡輸入封面圖片鏈接。\",\n    \"widget/crossnote.youtube/youtube-video-url\": \"Youtube 視頻鏈接\",\n    \"widget/crossnote.youtube/youtube-video-url-placeholder\":\n      \"在這裡插入 Youtube 視頻的鏈接，然後按 '回車' 鍵來插入\",\n    \"widget/crossnote.ocr/ocr\": \"OCR - 光學字元識別\",\n    \"widget/crossnote.ocr/local-image\": \"本地圖片\",\n    \"widget/crossnote.ocr/recognize-text-in-languages\": \"識別以下語言的文字\",\n    \"widget/crossnote.ocr/start-ocr\": \"開始文字識別\",\n    \"widget/crossnote.ocr/extra-settings\": \"額外設定\",\n    \"widget/crossnote.ocr/grayscale\": \"灰度\",\n    \"widget/crossnote.kanban/add-column\": \"添加新的列\",\n    \"widget/crossnote.github_gist/title\": \"內嵌入 GitHub Gist\",\n    \"widget/crossnote/github_gist/enter-github-gist-url\":\n      \"輸入 GitHub Gist URL\",\n\n    // Tesseract\n    \"tesseract/loading tesseract core\": \"正在讀取 tesseract 核心\",\n    \"tesseract/initializing tesseract\": \"正在初始化 tesseract\",\n    \"tesseract/initialized tesseract\": \"已初始化 tesseract\",\n    \"tesseract/loading language traineddata\": \"正在讀取語言訓練數據\",\n    \"tesseract/loaded language traineddata\": \"已讀取語言訓練數據\",\n    \"tesseract/initializing api\": \"正在初始化程序接口\",\n    \"tesseract/initialized api\": \"已初始化程序接口\",\n    \"tesseract/recognizing text\": \"正在識別文字\",\n\n    // Comment widget\n    \"widget/crossnote.comment/reply-to-this-user\": \"回復給這個用戶\",\n    \"widget/crossnote.comment/add-reaction-to-this-comment\":\n      \"給這條評論添加反應\",\n    \"widget/crossnote.comment/edit-this-message\": \"編輯這條評論\",\n    \"widget/crossnote.comment/modified-comment\": \"編輯过的評論\",\n    \"widget/crossnote.comment/post-comment-failure\": \"發送評論失敗\",\n    \"widget/crossnote.comment/unsubscribe-info\": \"取消訂閱評論\",\n    \"widget/crossnote.comment/subscribe-info\": \"訂閱評論\",\n    \"widget/crossnote.comment/view-more-comments\": \"查看更多的評論\",\n\n    // Dialogs\n    \"delete-note-dialog/title\": \"你確定要刪除這個筆記?\",\n    \"delete-note-dialog/subtitle\": \"你無法撤銷此操作。\",\n    \"delete-directory-dialog/title\": \"你確定要刪除這個目錄?\",\n    \"delete-directory-dialog/subtitle\":\n      \"所有子目錄以及筆記也將會被刪除。你無法撤銷此操作。\",\n    \"delete-tag-dialog/title\": \"你確定要刪除這個標籤?\",\n    \"delete-tag-dialog/subtitle\": \"所有子標籤也將會被刪除。你無法撤銷此操作。\",\n    \"add-notebook-dialog/disclaimer\":\n      \"所有筆記本的數據將只會被保存於瀏覽器本地以供離線使用。我們不會上傳任何你的筆記本數據到我們的伺服器。\",\n    \"edit-image-dialog/title\": \"編輯圖片\",\n    \"edit-image-dialog/image-url\": \"圖片 URL\",\n    \"edit-image-dialog/image-title\": \"圖片標題\",\n    \"edit-image-dialog/image-alt-text\": \"圖片替代文本\",\n    \"language-selector-dialog/subtitle\": \"請選擇偏好語言\",\n\n    \"react-ios-pwa-prompt/copy-title\": \"新增到主畫面\",\n    \"react-ios-pwa-prompt/copy-body\":\n      \"本網站具有應用功能。將其添加到主螢幕,以全屏和脫機時使用。\",\n    \"react-ios-pwa-prompt/copy-share-button-label\": \"1) 按下「共用」按鈕\",\n    \"react-ios-pwa-prompt/copy-add-home-button-label\":\n      \"2) 按下「添加到主螢幕」\",\n\n    // Publish notebook\n    \"publish-notebook/disclaimer-1\":\n      \"我們目前僅支援從 GitHub、GitLab、Gitea 或碼雲的公共倉庫發佈筆記本。 我們只收集 README.md 文件數據。\",\n    \"publish-notebook/disclaimer-2\":\n      \"請通過在遠端倉庫中向 README.md 添加以下 front-matter 來聲明筆記本的擁有權:\",\n\n    // git\n    \"git/status/ignored\": \"已忽略\",\n    \"git/status/unmodified\": \"未變更\",\n    \"git/status/*modified\": \"*已變更\",\n    \"git/status/*deleted\": \"*已刪除\",\n    \"git/status/*added\": \"*新增\",\n    \"git/status/absent\": \"缺失\",\n    \"git/status/modified\": \"已變更\",\n    \"git/status/deleted\": \"已刪除\",\n    \"git/status/added\": \"新增\",\n    \"git/status/*unmodified\": \"*未變更\",\n    \"git/status/*absent\": \"*缺失\",\n    \"git/status/*undeleted\": \"*未刪除\",\n  },\n};\n","export const jaJP = {\n  translation: {\n    \"title/Crossnote\": \"クロスノート\",\n    \"search/notes\": \"ノートを検索する\",\n    \"search/notebooks\": \"ノートブックを検索する\",\n    \"search/attachments\": \"添付を検索する\",\n\n    // Account\n    \"account/Anonymous\": \"匿名\",\n    \"account/anonymous\": \"匿名\",\n\n    // General\n    \"general/go-back\": \"戻る\",\n    \"general/sending\": \"送信中\",\n    \"general/send\": \"送る\",\n    \"general/cancel\": \"キャンセル\",\n    \"general/add\": \"追加\",\n    \"general/adding\": \"追加\",\n    \"general/backed-up-at\": \"備份於\",\n    \"general/created-at\": \"創建於\",\n    \"general/modified-at\": \"修改於\",\n    \"general/interacted-at\": \"交互於\",\n    \"general/date-created\": \"作成日\",\n    \"general/date-modified\": \"更新日\",\n    \"general/date-interacted\": \"交互時間\",\n    \"general/title\": \"表題\",\n    \"general/saved-at\": \"保存於\",\n    \"general/loading\": \"讀取中 ...\",\n    \"general/loading-notifications\": \"通知を読み込んでいます ...\",\n    \"general/failed-to-set\": \"設定に失敗しました\",\n    \"general/update\": \"更新\",\n    \"general/updated\": \"更新しました\",\n    \"general/updating\": \"更新中\",\n    \"general/close\": \"閉じる\",\n    \"general/Note\": \"ノート\",\n    \"general/notes\": \"ノート\",\n    \"general/Settings\": \"設定\",\n    \"general/Collaborators\": \"協力者\",\n    \"general/collaborators\": \"協力者\",\n    \"general/Backups\": \"バックアップ\",\n    \"general/backups\": \"バックアップ\",\n    \"general/Discussion\": \"話し合う\",\n    \"general/discussion\": \"話し合う\",\n    \"general/Notifications\": \"通知\",\n    \"general/Username\": \"ユーザー名\",\n    \"general/Email\": \"Eメール\",\n    \"general/Password\": \"パスワード\",\n    \"general/confirm-password\": \"もう一度パスワードを確認してください\",\n    \"general/Continue\": \"継続する\",\n    \"general/enter-username\": \"ユーザー名を入力してください\",\n    \"general/vickymd\": \"VickyMD(微記)\",\n    \"general/tags\": \"タグ\",\n    \"general/add-a-tag\": \"タグを追加する\",\n    \"general/private\": \"民間\",\n    \"general/public\": \"公開可見\",\n    \"general/friends-only\": \"友達にのみ表示\",\n    \"general/anonymous\": \"匿名\",\n    \"general/onymous\": \"公開署名\",\n    \"general/Tag\": \"タグ\",\n    \"general/no-tags\": \"タグなし\",\n    \"general/Directory\": \"ディレクトリ\",\n    \"general/Untitled\": \"無題\",\n    \"general/untitled\": \"無題\",\n    \"general/Unknown\": \"不明\",\n    \"general/unknown\": \"不明\",\n    \"general/Agree\": \"同意する\",\n    \"general/Disagree\": \"同意しない\",\n    \"general/Print\": \"印刷する\",\n    \"general/Share\": \"シェア\",\n    \"Editor\": \"編集者\",\n    \"EDITOR\": \"編集者\",\n    \"Viewer\": \"読者\",\n    \"VIEWER\": \"読者\",\n    \"Admin\": \"管理者\",\n    \"ADMIN\": \"管理者\",\n    \"ARCHIVED\": \"アーカイブされたノート\",\n    \"ATTACHED NOTES\": \"添付ノート\",\n    \"DELETED\": \"削除されたノート\",\n    \"PINNED\": \"スティッキー\",\n    \"OTHERS\": \"その他\",\n    \"PUBLIC NOTES\": \"公開ノート\",\n    \"FOLLOWINGS' NOTES\": \"關注人的筆記\",\n    \"SHARED WITH ME\": \"私に共有する\",\n    \"BOOKMARKS\": \"ブックマーク\",\n    \"MY TAGS\": \"私のタグ\",\n    \"general/enter-fullscreen-mode\": \"全画面モードに入る\",\n    \"general/enter-presentation-mode\": \"スライドショーモードに入る\",\n    \"general/math-preview\": \"数学プレビュー\",\n    \"general/this-note-is-empty\": \"このノートには内容がありません\",\n    \"general/this-notebook-is-empty\": \"このノートブックには内容がありません\",\n    \"general/nothing-here\": \"ここには何もない\",\n    \"general/no-notes-found\": \"他のノートは見つかりませんでした\",\n    \"general/no-more-attachments-found\": \"添付が見つかりません\",\n    \"general/no-more-notebooks-found\": \"ノートブックが見つかりません\",\n    \"general/no-notifications-found\": \"他のニュースは見つかりませんでした\",\n    \"general/clear-all\": \"すべてクリア\",\n    \"general/Save\": \"保存\",\n    \"general/Delete\": \"削除する\",\n    \"general/Follow\": \"フォロー\",\n    \"general/Following\": \"フォロー中\",\n    \"general/Unfollow\": \"フォロー解除\",\n    \"general/my-notes\": \"私のノート\",\n    \"general/public-notes\": \"公開ノート\",\n    \"general/followings-notes\": \"關注人的筆記\",\n    \"general/shared-with-me\": \"私に共有する\",\n    \"general/Bookmarks\": \"ブックマーク\",\n    \"general/Archive\": \"アーカイブ\",\n    \"general/Trash\": \"ゴミ箱\",\n    \"general/new-note\": \"新しい添付\",\n    \"general/new-attachment\": \"新しい\",\n    \"general/profile-updated\": \"ユーザー情報が更新されました\",\n    \"general/ID\": \"ID\",\n    \"general/Audio\": \"音声\",\n    \"general/Video\": \"映像\",\n    \"general/source-url\": \"ソースリンク\",\n    \"general/sign-in\": \"サインイン\",\n    \"general/sign-up\": \"サインアップ\",\n    \"general/Link\": \"リンク\",\n    \"general/Upload\": \"アップロードする\",\n    \"general/Uploading\": \"アップロードしています\",\n    \"general/clicks\": \"クリック\",\n    \"general/Processing\": \"処理中...\",\n    \"general/please-wait\": \"しばらくお待ちください...\",\n    \"general/please-sign-in-first\": \"最初にサインインしてください\",\n    \"general/Languages\": \"言語\",\n    \"general/track\": \"たどる\",\n    \"general/Publish\": \"公開\",\n    \"general/Unpublish\": \"非公開\",\n    \"general/Open\": \"開く\",\n    \"general/Download\": \"ダウンロード\",\n    \"general/Configure\": \"構成\",\n    \"general/Update\": \"更新\",\n    \"general/empty\": \"空\",\n    \"general/Explore\": \"探索\",\n    \"general/Notebooks\": \"ノートブック\",\n    \"general/add-a-notebook\": \"ノートブックを追加する\",\n    \"general/add-a-note\": \"ノートを追加する\",\n    \"general/add-an-attachment\": \"添付を追加する\",\n    \"general/configure-the-notebook\": \"ノートブックを構成する\",\n    \"general/publish-your-notebook\": \"ノートブックを発行する\",\n    \"general/notebook-name\": \"ノートブック名\",\n    \"general/git-repository\": \"git リポジトリ\",\n    \"general/optional\": \"オプション\",\n    \"general/url\": \"Url\",\n    \"general/branch\": \"ブランチ\",\n    \"general/remember-username-and-password\": \"資格情報を記憶する\",\n    \"general/stored-locally\": \"ローカルに保存\",\n    \"general/cors-proxy\": \"CORS プロキシ\",\n    \"general/why-cors-proxy\": \"なぜ CORS プロキシが必要なのですか?\",\n    \"general/today\": \"今日\",\n    \"general/todo\": \"Todo\",\n    \"general/wiki\": \"Wiki\",\n    \"general/tagged\": \"タグ\",\n    \"general/untagged\": \"タグない\",\n    \"general/encrypt\": \"暗号化\",\n    \"general/encrypted\": \"暗号化\",\n    \"general/decrypt\": \"復号化\",\n    \"general/conflicted\": \"競合\",\n    \"general/attachments\": \"添付\",\n    \"general/Pin\": \"ピン\",\n    \"general/Encryption\": \"暗号化\",\n    \"general/Fullscreen\": \"フルスクリーン\",\n    \"general/change-file-path\": \"ファイル パスの変更\",\n    \"general/create-a-copy\": \"コピーを作成する\",\n    \"general/restore-checkout\": \"復元 (git checkout)\",\n    \"general/download-pull\": \"ダウンロード (git pull)\",\n    \"general/upload-push\": \"アップロード (git pull & git push)\",\n    \"general/disable-the-encryption-on-this-note\":\n      \"このノートの暗号化を無効にする\",\n    \"general/encrypt-this-note-with-password\":\n      \"このノートをパスワードで暗号化する\",\n    \"general/disable-encryption\": \"暗号化を無効にする\",\n    \"general/decrypt-this-note\": \"このノートを復号化する\",\n    \"general/upload-the-profile\": \"プロファイルをアップロードする\",\n    \"general/commit-message\": \"コミット メッセージ\",\n    \"general/upload-notebook\": \"ノートブックをアップロードする\",\n    \"general/Comments\": \"コメント\",\n    \"general/Source\": \"ソース\",\n    \"general/Description\": \"説明\",\n    \"general/Edit\": \"編集\",\n    \"general/Rename\": \"変更\",\n    \"general/rename-directory\": \"ディレクトリ名を変更する\",\n    \"general/delete-directory\": \"ディレクトリ名を削除する\",\n    \"general/rename-tag\": \"タグの名前を変更する\",\n    \"general/delete-tag\": \"タグを削除する\",\n    \"general/notebook-updates-found\": \"ノートブックの更新が見つかりました\",\n    \"general/update-the-notebook\": \"ノートブックを更新する\",\n    \"general/check-notebook-updates-periodically\":\n      \"ノートブックの更新を定期的に確認する\",\n    \"general/minutes\": \"分\",\n    \"general/hard-reset\": \"ハードリセット\",\n    \"general/Default\": \"既定\",\n    \"general/Vim\": \"Vim\",\n    \"general/Emacs\": \"Emacs\",\n    \"general/Desc\": \"降順\",\n    \"general/Asc\": \"昇順\",\n\n    // Error\n    \"error/authentication-failed\": \"認証に失敗しました\",\n    \"error/failed-to-upload-notebook\":\n      \"ノートブックをアップロードできませんでした\",\n    \"error/failed-to-download-notebook\":\n      \"ノートブックをダウンロードできませんでした ...\",\n    \"error/notebook-already-exists\": \"ノートブックは既に存在します\",\n    \"error/invalid-git-url-prefix\": \"無効な git URL プレフィックス\",\n    \"error/please-resolve-conflicts\": \"最初に競合を解決してください\",\n    \"error/failed-to-disable-encryption\": \"暗号化を無効にできませんでした\",\n    \"error/decryption-failed\": \"復号化に失敗しました\",\n    \"error/failed-to-change-file-path\": \"ファイル パスの変更に失敗しました\",\n    \"error/failed-to-create-widget\": \"ウィジェットの作成に失敗しました\",\n    \"error/failed-to-load-widget\": \"ウィジェットを読み込めませんでした\",\n    \"error/failed-to-update-the-notebook\": \"ノートブックの更新に失敗しました\",\n    \"error/failed-to-unpublish-the-notebook\":\n      \"ノートブックの公開を取り消すことができませんでした\",\n    \"error/failed-to-publish-notebook\": \"ノートブックを発行できませんでした\",\n\n    // Success\n    \"success/notebook-uploaded\": \"ノートブックがアップロードされます\",\n    \"success/notebook-downloaded\": \"ノートブックがダウンロードされます\",\n\n    // Info\n    \"info/downloading-notebook\": \"ノートブックをダウンロード中\",\n\n    // Note\n    \"note/unarchive-note\": \"アーカイブ解除\",\n    \"note/archive-note\": \"アーカイブ\",\n    \"note/delete-forever\": \"完全に削除\",\n    \"note/delete-note\": \"削除する\",\n    \"note/restore-note\": \"回復する\",\n    \"note/report-note\": \"報告書\",\n    \"note/open-in-crossnote-website\": \"クロスノートのウェブサイトで開く\",\n\n    // NoteTags\n    \"note-tags/send-suggestion-failure\": \"提案の送信に失敗しました\",\n    \"note-tags/suggestion-sent\": \"提案を送信しました\",\n    \"note-tags/suggest-a-tag-to-this-note\": \"このノートのタグを提案する\",\n\n    // UserTags\n    \"user-tags/follow-a-tag\": \"タグをフォロー\",\n\n    // Notifications\n    \"notifications/refresh\": \"更新して新しいメッセージを表示\",\n    \"notifications/new-version-available\":\n      \"クロスノートの新バージョンが利用可能です!\",\n\n    // Settings\n    \"settings/about-this-project\": \"このプロジェクトについて\",\n    \"settings/issues-and-feature-requests\":\n      \"問題を発見したか、機能要求がありますか？\",\n    \"settings/uploading-cover-image\": \"カバー画像をアップロード\",\n    \"settings/upload-image-failure\": \"画像のアップロードに失敗しました\",\n    \"settings/Cover\": \"カバー写真\",\n    \"settings/enter-cover-image-url\": \"カバー画像のリンクを入力してください\",\n    \"settings/upload-image\": \"写真をアップロードする\",\n    \"settings/Avatar\": \"アバター\",\n    \"settings/enter-avatar-image-url\": \"アバター画像リンクを入力してください\",\n    \"settings/Name\": \"名\",\n    \"settings/enter-name\":\n      \"名前を入力してください（これはユーザー名ではありません）\",\n    \"settings/editor-cursor-color\": \"エディターのカーソルの色\",\n    \"settings/hello\": \"こんにちは，\",\n    \"settings/world\": \"世界！\",\n    \"settings/linked-with-github-account\":\n      \"GitHub アカウントがリンクされました\",\n    \"settings/link-with-github-account\": \"GitHub アカウントへのリンク\",\n    \"settings/log-out\": \"ログアウトする\",\n    \"settings/author-name\": \"著者名\",\n    \"settings/author-email\": \"著者の電子メール\",\n    \"settings/theme\": \"テーマ\",\n    \"settings/created-cloud-widgets-count\": \"作成されたクラウドウィジェット数\",\n    \"settings/key-map\": \"キーマップ\",\n\n    // Preview\n    \"preview/attach-a-note\": \"ノートを添付\",\n    \"preview/crossnote-untitled\": \"クロスノート - 無題\",\n    \"preview/edit-this-note\": \"このノートを編集\",\n\n    // ProfileCard\n    \"profile-card/followings\": \"フォロー\",\n    \"profile-card/followers\": \"ファン\",\n    \"profile-card/Followings\": \"フォロー\",\n    \"profile-card/Followers\": \"ファン\",\n    \"profile-card/notes\": \"ノート\",\n    \"profile-card/follow-user-failure\": \"このユーザーをフォローできません\",\n    \"profile-card/followed-user\": \"このユーザーをフォローしました\",\n    \"profile-card/unfollow-user-failure\":\n      \"このユーザーのフォローを解除できません\",\n    \"profile-card/unfollowed-user\": \"このユーザーのフォローを解除しました\",\n\n    // TagCard\n    \"tag-card/pin-to-my-notes-page\": \"ノートページにピン留めする\",\n\n    // Interaction panel\n    \"interaction-panel/show-attached-notes\": \"添付されたノートを表示\",\n    \"interaction-panel/add-comment\": \"コメントを追加\",\n    \"interaction-panel/add-reaction\": \"絵文字を追加\",\n\n    // Editor\n    \"editor/loading-your-note\": \"ノートを読む...\",\n    \"editor/sync-failure\":\n      \"同期に失敗しました... Webページを再起動してください\",\n    \"editor/saving\": \"保存中...\",\n    \"editor/save-failure\": \"保存失敗\",\n    \"editor/saved\": \"保存しました\",\n    \"editor/update-note-failure\": \"ノートの更新に失敗しました\",\n    \"editor/placeholder\": \"#  こんにちは 😀 コマンドに 「/」 と入力します。\",\n    \"editor/ln\": \"行\",\n    \"editor/col\": \"列\",\n\n    // * NoteControl\n    \"editor/note-control/allow-readers-to-suggest-note-tags\":\n      \"読者がノートを提案できるタグ\",\n    \"editor/note-control/allow-readers-to-attach-notes-under-this-note\":\n      \"読者がこのノートの下にノートを添付できるようにする\",\n    \"editor/note-control/inherit-parent-note-collaborators-list\":\n      \"親ノートを継承した共同編集者のリスト\",\n    \"editor/note-control/note-visibility-hint\":\n      \"すべての共同編集者もこのノートを見ることができます\",\n    \"editor/note-control/allow-readers-to-attach-notes-unchecked\":\n      \"あなたとこのノートを編集または管理できるすべての共同編集者向け\",\n    \"editor/note-control/allow-readers-to-attach-notes-checked\":\n      \"このノートを見ることができるすべての人のために\",\n    \"editor/note-control/enter-parent-note-id\":\n      \"親ノートのIDを入力してください\",\n    \"editor/note-control/attach-note-failure\": \"ノートの添付に失敗しました\",\n    \"editor/note-control/unattach-note-failure\":\n      \"ノートの添付解除に失敗しました\",\n    \"editor/collaborator-hint\": \" - このノートが表示されます\",\n    \"editor/shareable-link-hint\":\n      \"このリンクを知っている全員がログインせずにこのノートを表示/変更できます\",\n\n    // * BackupsControl\n    \"editor/backups-control/create-backup\": \"バックアップを作成\",\n    \"editor/backups-control/delete-this-backup\": \"このバックアップを削除\",\n    \"editor/backups-control/create-backup-failure\":\n      \"バックアップの作成に失敗しました\",\n    \"editor/backups-control/backup-created\": \"バックアップを作成しました\",\n    \"editor/backups-control/delete-backup-failure\":\n      \"バックアップの削除に失敗しました\",\n    \"editor/backups-control/backup-deleted\": \"バックアップを削除しました\",\n    \"editor/backups-control/cloud-version\": \"クラウド版\",\n    \"editor/backups-control/backup-name\": \"バックアップ名\",\n\n    // * CollaboratorasControl\n    \"editor/collaborators-control/set-collaborator-role-failure\":\n      \"共同編集者の役割を設定できませんでした\",\n    \"editor/collaborators-control/add-collaborator-failure\":\n      \"共同編集者の追加に失敗しました\",\n    \"editor/collaborators-control/collaborator-removed\":\n      \"共同編集者を削除しました\",\n    \"editor/collaborators-control/collaborator-added\":\n      \"共同編集者が追加されました\",\n    \"editor/collaborators-control/can-view\": \"閲覧できる\",\n    \"editor/collaborators-control/can-edit\": \"編集可能\",\n    \"editor/collaborators-control/can-administrate\": \"管理者が管理できます\",\n\n    // * EditorToolBar\n    \"editor/toolbar/insert-image\": \"画像を挿入\",\n    \"editor/toolbar/upload-local-images\": \"ローカルイメージをアップロードする\",\n    \"editor/toolbar/capture-webpage\": \"ウェブページ全体をキャプチャする\",\n    \"editor/toolbar/insert-clock\": \"時計を挿入\",\n    \"editor/toolbar/insert-emoji\": \"絵文字を挿入\",\n    \"editor/toolbar/insert-media\": \"メディアを挿入する\",\n    \"editor/toolbar/insert-audio\": \"音声を挿入\",\n    \"editor/toolbar/netease-music\": \"Netease Cloud Music\",\n    \"editor/toolbar/insert-video\": \"ビデオを挿入\",\n    \"editor/toolbar/insert-youtube\": \"Youtube を挿入\",\n    \"editor/toolbar/insert-bilibili\": \"Bilibili を挿入\",\n    \"editor/toolbar/insert-slide\": \"スライドを挿入\",\n    \"editor/toolbar/insert-ocr\": \"OCRを挿入\",\n    \"editor/toolbar/insert-kanban\": \"かんばんを挿入\",\n    \"editor/toolbar/insert-abc-notation\": \"ABC notation を挿入\",\n    \"editor/toolbar/insert-header-1\": \"第1レベルの見出しを挿入\",\n    \"editor/toolbar/insert-header-2\": \"第2レベルの見出しを挿入\",\n    \"editor/toolbar/insert-header-3\": \"第3レベルの見出しを挿入\",\n    \"editor/toolbar/insert-header-4\": \"第4レベルの見出しを挿入\",\n    \"editor/toolbar/insert-header-5\": \"第5レベルの見出しを挿入\",\n    \"editor/toolbar/insert-header-6\": \"第6レベルの見出しを挿入\",\n    \"editor/toolbar/bold\": \"太字\",\n    \"editor/toolbar/italic\": \"斜体\",\n    \"editor/toolbar/strikethrough\": \"取り消し 線\",\n    \"editor/toolbar/insert-inline-code\": \"インラインコードを挿入\",\n    \"editor/toolbar/insert-blockquote\": \"参照を挿入\",\n    \"editor/toolbar/insert-unordered-list\": \"順不同リストを挿入\",\n    \"editor/toolbar/insert-ordered-list\": \"順序付きリストを挿入\",\n    \"editor/toolbar/insert-link\": \"リンクを挿入\",\n    \"editor/toolbar/insert-table\": \"テーブルを挿入\",\n    \"editor/toolbar/insert-comment\":\n      \"クロスノートクラウドコメントウィジェットを挿入\",\n    \"editor/toolbar/insert-github-gist\": \"GitHub Gist を挿入\",\n\n    // * NoteControl\n    \"editor/note-control/tag-added\": \"タグが追加されました\",\n    \"editor/note-control/tag-deleted\": \"タグが削除されました\",\n    \"editor/note-control/set-note-visibility-failure\":\n      \"ノートの可視性の設定に失敗しました\",\n    \"editor/note-control/note-visibility-updated\":\n      \"ノートの可視性が更新されました\",\n    \"editor/note-control/set-author-visibility-failure\":\n      \"著者の可視性を設定できませんでした\",\n    \"editor/note-control/author-visibility-updated\":\n      \"著者の可視性が更新されました\",\n    \"editor/note-control/editor-mode\": \"エディターモード\",\n    \"editor/note-control/source-code\": \"ソースコード\",\n    \"editor/note-control/preview\": \"プレビュー\",\n    \"editor/note-control/split-view\": \"分割ビュー\",\n    \"editor/note-control/pin-preview\": \"右にピンプレビュー\",\n    \"editor/note-control/display-modification-records\": \"変更レコードの表示\",\n    \"editor/note-control/note-visibility\": \"ノートの可視性\",\n    \"editor/note-control/author-visibility\": \"著者の可視性\",\n    \"editor/note-control/shareable-link\": \"共有可能なリンク\",\n    \"editor/note-control/copy-to-clipboard\": \"ペーストボードにコピー\",\n    \"editor/note-control/link-to-preview\": \"プレビューへのリンク\",\n    \"editor/note-control/link-to-editor\": \"エディターへのリンク\",\n    \"editor/note-control/attach-to-note\": \"ノートに添付\",\n    \"editor/note-control/source-added\": \"URL が追加されました\",\n    \"editor/note-control/source-deleted\": \"URL が削除されました\",\n    \"editor/note-control/invalid-note-source\": \"無効な URL\",\n    \"editor/note-control/add-note-source\": \"関連する URL を追加しました\",\n    \"editor/note-control/note-source-hint\":\n      \"同じ URL 上のノートはグループ化されます\",\n    \"editor/note-control/enter-note-source\": \"URL を入力してください\",\n\n    // AvatarPanel\n    \"avatar-panel/this-note-is-private\": \"このノートは非公開です\",\n    \"avatar-panel/this-note-is-public\": \"このノートは一般公開されています\",\n    \"avatar-panel/this-note-is-friends-only\":\n      \"このノートは友達にのみ表示されます\",\n    \"avatar-panel/you-are-anonymous\": \"あなたは匿名です\",\n\n    // FileExporter\n    \"file-exporter/name\": \"ファイルのエクスポート\",\n    \"file-exporter/orientation\": \"方向\",\n    \"file-exporter/portrait\": \"縦\",\n    \"file-exporter/landscape\": \"水平\",\n    \"file-exporter/paper-size\": \"用紙サイズ\",\n    \"file-exporter/unit\": \"単位\",\n    \"file-exporter/margin-top\": \"上マージン\",\n    \"file-exporter/margin-bottom\": \"下マージン\",\n    \"file-exporter/margin-left\": \"左マージン\",\n    \"file-exporter/margin-right\": \"右マージン\",\n\n    // Utils\n    \"utils/uploading-image\": \"画像をアップロードしています...\",\n    \"utils/upload-image-failure\": \"画像のアップロードに失敗しました\",\n\n    // Notification\n    // * CommentPostingNotification\n    \"notification/replies-to-you-in\": \"返信する\",\n    // somone's\n    \"notification/'s-note\": \"ノート \",\n    // * NoteReactionNotification\n    \"notification/added\": \" 添加了\",\n    // some reaction\n    \"notification/to-your-note\": \"到你的筆記\",\n    \"notification/add-you-as\": \"添加了你作為\",\n    // some role\n    \"notification/of-note\": \"到筆記\",\n    // * NoteTagSuggestion\n    \"notification/add-tag-failure\": \"タグの追加に失敗しました\",\n    \"notification/suggested-to-add-tag\": \"タグの追加を提案する\",\n    // * UserFollowingNotification\n    \"notification/started-following-you\": \"あなたをフォローし始めました\",\n    // * BookmarkNotification\n    \"notification/bookmarked-your-note\": \"あなたのノートをブックマーク\",\n    \"notification/view-more-notifications\": \"その他の通知を表示する\",\n\n    // GitHubOAuthCallback\n    \"github-oauth/wait\": \"お待ちください ...\",\n    \"github-oauth/link-with-github-account-failure\":\n      \"GitHub アカウントに接続できません\",\n    \"github-oauth/sign-in-with-github-account-failure\":\n      \"GitHub アカウントでのログインに失敗しました\",\n    \"github-oauth/first-time-sign-in\":\n      \"これは、GitHub アカウントで初めてサインインするようです\",\n    \"github-oauth/first-time-sign-in-small\": \"以下の登録を完了してください\",\n\n    // Widgets\n    \"widget/autoplay\": \"自動再生\",\n    \"widget/controls\": \"コントローラー\",\n    \"widget/loop\": \"サイクル\",\n    \"widget/muted\": \"ミュート\",\n    \"widget/creating-widget\": \"ウィジェットを作成しています\",\n    \"widget/loading-widget\": \"ウィジェットを読み込んでいます\",\n    \"widget/crossnote.image/thanks_sm_ms\":\n      \"無料のドローイングベッドサービスを提供してくれたsm.msに感謝します。\",\n    \"widget/crossnote.audio/audio_element_fail\":\n      \"お使いのブラウザはオーディオ要素をサポートしていません\",\n    \"widget/crossnote.audio/source-url-placeholder\":\n      \"ここにオーディオファイルのソースリンクを入力し、「Enter」キーを押して挿入します\",\n    \"widget/crossnote.video/video_element_fail\":\n      \"お使いのブラウザは動画動画要素をサポートしていません\",\n    \"widget/crossnote.bilibili/error_message\":\n      \"エラー：https://www.bilibili.com/video/av79126732のようなリンクのみがサポートされています\",\n    \"widget/crossnote.youtube/error_message\":\n      \"エラー：https://www.youtube.com/watch?v=MmB9b5njVbAなどのリンクのみがサポートされています\",\n    \"widget/crossnote.auth/welcome\": \"クロスノートへようこそ\",\n    \"widget/crossnote.auth/doesnt-have-account\":\n      \"アカウントなし？ 作成しましょう😉！\",\n    \"widget/crossnote.auth/forgot_password\": \"パスワードを忘れました 😣？\",\n    \"widget/crossnote.auth/failed_to_send_code\":\n      \"確認コードをメールに送信できませんでした\",\n    \"widget/crossnote.auth/verification_code_sent\":\n      \"確認コードが送信されました \",\n    \"widget/crossnote.auth/failed_to_reset_password\":\n      \"パスワードをリセットできませんでした\",\n    \"widget/crossnote.auth/password_reset\": \"パスワードがリセットされました\",\n    \"widget/crossnote.auth/password-mismatch\": \"一貫性のないパスワード\",\n    \"widget/crossnote.auth/hello\": \"こんにちは，\",\n    \"widget/crossnote.auth/enter-the-verification-code\":\n      \"確認コードを入力してください\",\n    \"widget/crossnote.auth/get-code\": \"確認コードを取得する\",\n    \"widget/crossnote.auth/sign-in-with-github-account\":\n      \"GitHub アカウントでサインインする\",\n    \"widget/crossnote.auth/already-have-an-account\":\n      \"すでにアカウントをお持ちですか？\",\n    \"widget/crossnote.auth/reset-password\": \"パスワードをリセット\",\n    \"widget/crossnote.auth/Or\": \"または\",\n    \"widget/crossnote.bilibili/Bilibili\": \"Bilibili\",\n    \"widget/crossnote.bilibili/bilibili-video-url\": \"Bilibili ビデオリンク\",\n    \"widget/crossnote.bilibili/url-placeholder\":\n      \"ここにビリビリのビデオへのリンクを挿入し、「Enter」を押して挿入します\",\n    \"widget/crossnote.image/image-helper\": \"画像アシスタント\",\n    \"widget/crossnote.image/image-url-placeholder\":\n      \"ここに画像リンクを入力し、「Enter」を押して挿入します\",\n    \"widget/crossnote.image/click-here-to-browse-image-file\":\n      \"画像ファイルを選択するにはここをクリックしてください\",\n    \"widget/crossnote.neteasemusic/song-id-placeholder\":\n      \"NetEase Cloud Music SongデジタルIDを入力してください\",\n    \"widget/crossnote.video/video-url-placeholder\":\n      \"ここにビデオファイルのソースリンクを入力し、「Enter」を押して挿入します\",\n    \"widget/crossnote.video/poster-url\": \"カバー画像リンク（オプション）\",\n    \"widget/crossnote.video/poster-url-placeholder\":\n      \"ここにカバー画像のリンクを入力してください。\",\n    \"widget/crossnote.youtube/youtube-video-url\": \"Youtube ビデオリンク\",\n    \"widget/crossnote.youtube/youtube-video-url-placeholder\":\n      \"Youtubeビデオへのリンクをここに挿入し、「Enter」を押して挿入します\",\n    \"widget/crossnote.ocr/ocr\": \"OCR - Optical character recognition\",\n    \"widget/crossnote.ocr/local-image\": \"ローカル画像\",\n    \"widget/crossnote.ocr/recognize-text-in-languages\":\n      \"次の言語のテキストを認識する\",\n    \"widget/crossnote.ocr/start-ocr\": \"開始文字識別\",\n    \"widget/crossnote.ocr/extra-settings\": \"追加設定\",\n    \"widget/crossnote.ocr/grayscale\": \"グレースケール\",\n    \"widget/crossnote.kanban/add-column\": \"新しい列を追加する\",\n    \"widget/crossnote.github_gist/title\": \"GitHub Gist を埋め込む\",\n    \"widget/crossnote/github_gist/enter-github-gist-url\":\n      \"GitHub Gist URL を入力してください\",\n\n    // Tesseract\n    \"tesseract/loading tesseract core\": \"loading tesseract core\",\n    \"tesseract/initializing tesseract\": \"initializing tesseract\",\n    \"tesseract/initialized tesseract\": \"initialized tesseract\",\n    \"tesseract/loading language traineddata\": \"loading language traineddata\",\n    \"tesseract/loaded language traineddata\": \"loaded language traineddata\",\n    \"tesseract/initializing api\": \"initializing api\",\n    \"tesseract/initialized api\": \"initialized api\",\n    \"tesseract/recognizing text\": \"recognizing text\",\n\n    // Comment widget\n    \"widget/crossnote.comment/reply-to-this-user\": \"このユーザーに返信\",\n    \"widget/crossnote.comment/add-reaction-to-this-comment\":\n      \"このコメントへの応答を追加します\",\n    \"widget/crossnote.comment/edit-this-message\": \"このコメントを編集する\",\n    \"widget/crossnote.comment/modified-comment\": \"変更されたコメント\",\n    \"widget/crossnote.comment/post-comment-failure\":\n      \"コメントの送信に失敗しました\",\n    \"widget/crossnote.comment/unsubscribe-info\": \"コメントの購読を解除する\",\n    \"widget/crossnote.comment/subscribe-info\": \"コメントを購読する\",\n    \"widget/crossnote.comment/view-more-comments\": \"その他のコメントを表示する\",\n\n    // Dialogs\n    \"delete-note-dialog/title\": \"このノートを削除しますか?\",\n    \"delete-note-dialog/subtitle\": \"この操作を取り消すことはできません。\",\n    \"delete-directory-dialog/title\": \"このディレクトリを削除しますか？\",\n    \"delete-directory-dialog/subtitle\":\n      \"すべてのサブディレクトリとノートも削除されます。この操作を取り消すことはできません。\",\n    \"delete-tag-dialog/title\": \"このタグを削除しますか？\",\n    \"delete-tag-dialog/subtitle\":\n      \"すべてのサブタグも削除されます。この操作を取り消すことはできません。\",\n    \"add-notebook-dialog/disclaimer\":\n      \"すべてのノートブックデータは、ブラウザにローカルに保存されます。ノートブックデータを当社のサーバーにアップロードすることはありません。\",\n    \"edit-image-dialog/title\": \"画像を編集する\",\n    \"edit-image-dialog/image-url\": \"画像の URL\",\n    \"edit-image-dialog/image-title\": \"画像のタイトル\",\n    \"edit-image-dialog/image-alt-text\": \"画像代替テキスト\",\n    \"language-selector-dialog/subtitle\": \"希望する言語を選択してください\",\n\n    // react-ios-pwa-prompt\n    \"react-ios-pwa-prompt/copy-title\": \"ホーム画面に追加\",\n    \"react-ios-pwa-prompt/copy-body\":\n      \"このウェブサイトにはアプリ機能があります。フルスクリーンとオフライン中に使用するためにあなたのホーム画面にそれを追加します。\",\n    \"react-ios-pwa-prompt/copy-share-button-label\":\n      \"1) [共有] ボタンを押します。\",\n    \"react-ios-pwa-prompt/copy-add-home-button-label\":\n      \"2) 「ホーム画面に追加」を押します。\",\n\n    // Publish notebook\n    \"publish-notebook/disclaimer-1\":\n      \"現在、GitHub、GitLab、Gitea、またはコードクラウドのパブリックウェアハウスからノートブックをリリースする場合のみサポートしています。 README.md ファイル データのみを収集します。\",\n    \"publish-notebook/disclaimer-2\":\n      \"リモート ウェアハウスで次の front-matter を README.md に追加して、ノートブックの所有権を主張します。\",\n\n    // git\n    \"git/status/ignored\": \"無視\",\n    \"git/status/unmodified\": \"未変更\",\n    \"git/status/*modified\": \"*変更済み\",\n    \"git/status/*deleted\": \"*削除済み\",\n    \"git/status/*added\": \"*追加\",\n    \"git/status/absent\": \"欠落\",\n    \"git/status/modified\": \"変更済み\",\n    \"git/status/deleted\": \"削除済み\",\n    \"git/status/added\": \"追加\",\n    \"git/status/*unmodified\": \"*未変更\",\n    \"git/status/*absent\": \"*欠落\",\n    \"git/status/*undeleted\": \"*削除されませんでした\",\n  },\n};\n","import { ThemeOptions, Theme, createMuiTheme } from \"@material-ui/core\";\nimport { ThemeName } from \"vickymd/theme\";\n\ninterface CrossnoteThemeProps {\n  name: ThemeName;\n  muiThemeOptions: ThemeOptions;\n}\n\nexport class CrossnoteTheme {\n  public name: ThemeName;\n  public muiTheme: Theme;\n  constructor({ name, muiThemeOptions }: CrossnoteThemeProps) {\n    this.name = name;\n    this.muiTheme = createMuiTheme(muiThemeOptions);\n  }\n}\n","import { CrossnoteTheme } from \"./theme\";\nimport { blue, orange } from \"@material-ui/core/colors\";\n\nexport const LightTheme: CrossnoteTheme = new CrossnoteTheme({\n  name: \"light\",\n  muiThemeOptions: {\n    palette: {\n      primary: blue,\n      secondary: orange,\n    },\n  },\n});\n","import { CrossnoteTheme } from \"./theme\";\nimport { lighten } from \"@material-ui/core\";\n\nexport const DarkTheme: CrossnoteTheme = new CrossnoteTheme({\n  name: \"dark\",\n  muiThemeOptions: {\n    palette: {\n      common: { black: \"#000\", white: \"#fff\" },\n      background: {\n        paper: lighten(\"#1e1e1e\", 0.05),\n        default: \"#1e1e1e\",\n      },\n      primary: {\n        light: \"#7986cb\",\n        main: \"rgba(144, 19, 254, 1)\",\n        dark: \"#303f9f\",\n        contrastText: \"#fff\",\n      },\n      secondary: {\n        light: \"#ff4081\",\n        main: \"#f50057\",\n        dark: \"#c51162\",\n        contrastText: \"#fff\",\n      },\n      error: {\n        light: \"#e57373\",\n        main: \"#f44336\",\n        dark: \"#d32f2f\",\n        contrastText: \"rgba(197, 197, 197, 1)\",\n      },\n      divider: \"#222\",\n      text: {\n        primary: \"#ccc\",\n        secondary: \"rgba(180, 180, 180, 1)\",\n        disabled: \"rgba(121, 7, 7, 0.38)\",\n        hint: \"rgba(0, 0, 0, 0.38)\",\n      },\n      action: {\n        active: \"rgba(180, 180, 180, 1)\",\n        disabled: \"#353535\",\n      },\n    },\n  },\n});\n","import { CrossnoteTheme } from \"./theme\";\nimport { lighten } from \"@material-ui/core\";\nimport { blueGrey, cyan } from \"@material-ui/core/colors\";\n\nexport const OneDarkTheme: CrossnoteTheme = new CrossnoteTheme({\n  name: \"one-dark\",\n  muiThemeOptions: {\n    palette: {\n      common: { black: \"#000\", white: \"#fff\" },\n      background: {\n        paper: lighten(\"#282c34\", 0.05),\n        default: \"#282c34\",\n      },\n      primary: cyan,\n      secondary: blueGrey,\n      error: {\n        light: \"#e57373\",\n        main: \"#f44336\",\n        dark: \"#d32f2f\",\n        contrastText: \"rgba(197, 197, 197, 1)\",\n      },\n      divider: \"#222\",\n      text: {\n        primary: \"#ccc\",\n        secondary: \"rgba(180, 180, 180, 1)\",\n        disabled: \"rgba(121, 7, 7, 0.38)\",\n        hint: \"rgba(0, 0, 0, 0.38)\",\n      },\n      action: {\n        active: \"rgba(180, 180, 180, 1)\",\n        disabled: \"#353535\",\n      },\n    },\n  },\n});\n","import { CrossnoteTheme } from \"./theme\";\nimport { orange, amber } from \"@material-ui/core/colors\";\nimport { lighten } from \"@material-ui/core\";\n\nexport const SolarizedLight: CrossnoteTheme = new CrossnoteTheme({\n  name: \"solarized-light\",\n  muiThemeOptions: {\n    palette: {\n      primary: orange,\n      secondary: amber,\n      background: {\n        paper: lighten(\"#fdf6e3\", 0.05),\n        default: \"#fdf6e3\",\n      },\n    },\n  },\n});\n","import { CloudContainer } from \"./cloud\";\nimport { SettingsContainer } from \"./settings\";\nimport { CrossnoteContainer } from \"./crossnote\";\n\ninterface GlobalContainers {\n  cloudContainer: ReturnType<typeof CloudContainer.useContainer>;\n  settingsContainer: ReturnType<typeof SettingsContainer.useContainer>;\n  crossnoteContainer: ReturnType<typeof CrossnoteContainer.useContainer>;\n}\n\nexport const globalContainers: GlobalContainers = {\n  cloudContainer: null,\n  settingsContainer: null,\n  crossnoteContainer: null,\n};\n","// 0xGG Team\n// Distributed under AGPL3\n//\n// DESCRIPTION: This widget displays time related information\nimport React from \"react\";\nimport ReactDOM from \"react-dom\";\nimport { WidgetArgs, WidgetCreator } from \"vickymd/widget\";\nimport { ErrorWidget } from \"vickymd/widget/error/error\";\nimport { useTheme, ThemeProvider } from \"@material-ui/core\";\nimport { themeManager } from \"../../../themes/manager\";\nimport { globalContainers } from \"../../../containers/global\";\n\nfunction Timer(props: WidgetArgs) {\n  const attributes = props.attributes;\n  const theme = useTheme();\n\n  return (\n    <div\n      style={{\n        cursor: \"default\",\n        padding: \"4px 12px\",\n        backgroundColor:\n          attributes[\"backgroundColor\"] ||\n          theme.palette.secondary.main ||\n          \"rgb(250, 145, 1)\",\n        color:\n          attributes[\"color\"] || theme.palette.secondary.contrastText || \"#fff\",\n        borderRadius: \"16px\",\n        display: \"flex\",\n        justifyContent: \"space-between\",\n        width: \"375px\",\n        maxWidth: \"100%\",\n        boxShadow: \"0 1px 3px 1px #aaa\",\n        marginBottom: props.isPreview ? \"16px\" : \"0\",\n      }}\n    >\n      <div className={\"widget-timer-date\"}>\n        {\"⌚ \" + new Date(attributes[\"date\"]).toLocaleString()}\n      </div>\n      <div className={\"widget-timer-duration\"}>\n        {attributes[\"duration\"] ? \"🎬 \" + attributes[\"duration\"] : \"\"}\n      </div>\n    </div>\n  );\n}\n\nexport const TimerWidgetCreator: WidgetCreator = (args) => {\n  const el = document.createElement(\"span\");\n  if (!args.attributes[\"date\"]) {\n    return ErrorWidget({\n      ...args,\n      ...{\n        attributes: {\n          message: \"Field 'date' is missing\",\n        },\n      },\n    });\n  }\n  ReactDOM.render(\n    <ThemeProvider theme={globalContainers.settingsContainer.theme.muiTheme}>\n      <Timer attributes={args.attributes} isPreview={args.isPreview}></Timer>\n    </ThemeProvider>,\n    el,\n  );\n  return el;\n};\n","/**\n * Upload image to sm.ms\n * @param filePath\n */\nexport async function smmsUploadImages(files: File[] = []): Promise<string[]> {\n  const promises = [];\n  for (let i = 0; i < files.length; i++) {\n    const file = files[i];\n    if (!file.type.match(\"image.*\")) {\n      continue;\n    }\n    promises.push(\n      new Promise<string>((resolve, reject) => {\n        const headers = {\n          // \"Content-Type\": \"multipart/form-data\" // <= Adding this will cause problem.\n        };\n        const data = new FormData();\n        data.append(\"smfile\", file);\n        data.append(\"format\", \"json\");\n        fetch(\"https://sm.ms/api/v2/upload\", {\n          method: \"POST\",\n          mode: \"cors\",\n          headers,\n          referrer: \"\",\n          body: data,\n        })\n          .then((response) => response.json())\n          .then((json) => {\n            if (json[\"success\"]) {\n              return resolve(json[\"data\"][\"url\"]);\n            } else if (\n              json[\"code\"] === \"image_repeated\" ||\n              (json[\"code\"] === \"exception\" &&\n                json[\"message\"].match(/this image exists at:/))\n            ) {\n              return resolve(json[\"message\"].match(/https:\\/\\/.+$/)[0]);\n            } else {\n              return reject(json[\"message\"]);\n            }\n          })\n          .catch((error) => {\n            return reject(\"Failed to connect to sm.ms host\");\n          });\n      }),\n    );\n  }\n  return await Promise.all(promises);\n}\n","import { WidgetCreator, WidgetArgs } from \"vickymd/widget\";\nimport React, { useState } from \"react\";\nimport ReactDOM from \"react-dom\";\nimport {\n  Card,\n  Typography,\n  IconButton,\n  Box,\n  Input,\n  Tooltip,\n} from \"@material-ui/core\";\nimport {\n  createStyles,\n  makeStyles,\n  Theme,\n  ThemeProvider,\n  darken,\n} from \"@material-ui/core/styles\";\nimport clsx from \"clsx\";\nimport { TrashCan } from \"mdi-material-ui\";\nimport { useTranslation } from \"react-i18next\";\nimport { smmsUploadImages } from \"../../../utilities/image_uploader\";\nimport Noty from \"noty\";\nimport { globalContainers } from \"../../../containers/global\";\n\nconst useStyles = makeStyles((theme: Theme) =>\n  createStyles({\n    card: {\n      padding: theme.spacing(2),\n      position: \"relative\",\n    },\n    actionButtons: {\n      position: \"absolute\",\n      top: \"0\",\n      right: \"0\",\n    },\n    section: {\n      marginTop: theme.spacing(2),\n    },\n    dropArea: {\n      \"textAlign\": \"center\",\n      \"padding\": \"24px\",\n      \"border\": \"4px dotted #c7c7c7\",\n      \"backgroundColor\": darken(theme.palette.background.paper, 0.01),\n      \"cursor\": \"pointer\",\n      \"&:hover\": {\n        backgroundColor: darken(theme.palette.background.paper, 0.2),\n      },\n    },\n    disabled: {\n      cursor: \"not-allowed\",\n    },\n  }),\n);\n\nfunction ImageWidget(props: WidgetArgs) {\n  const classes = useStyles(props);\n  const { t } = useTranslation();\n  const [url, setURL] = useState<string>(\"\");\n  const [imageUploaderElement, setImageUploaderElement] = useState<\n    HTMLInputElement\n  >(null);\n  const [uploadingImages, setUploadingImages] = useState<boolean>(false);\n\n  function clickDropArea(e: any) {\n    e.preventDefault();\n    e.stopPropagation();\n    if (!imageUploaderElement || uploadingImages) return;\n    imageUploaderElement.onchange = function (event) {\n      const target = event.target as any;\n      const files = target.files || [];\n      new Noty({\n        type: \"info\",\n        text: t(\"utils/uploading-image\"),\n        layout: \"topRight\",\n        theme: \"relax\",\n        timeout: 2000,\n      }).show();\n      setUploadingImages(true);\n      smmsUploadImages(files)\n        .then((urls) => {\n          let markdown = ``;\n          urls.forEach((url) => {\n            markdown = markdown + `![](${url})  \\n`;\n          });\n          props.replaceSelf(markdown);\n        })\n        .catch((error: any) => {\n          // console.log(error);\n          setUploadingImages(false);\n          new Noty({\n            type: \"error\",\n            text: t(\"utils/upload-image-failure\"),\n            layout: \"topRight\",\n            theme: \"relax\",\n            timeout: 2000,\n          }).show();\n        });\n    };\n    imageUploaderElement.click();\n  }\n\n  if (props.isPreview) {\n    return <span></span>;\n  }\n\n  return (\n    <Card elevation={2} className={clsx(classes.card)}>\n      <Typography variant={\"h5\"}>\n        {t(\"widget/crossnote.image/image-helper\")}\n      </Typography>\n      <Box className={clsx(classes.actionButtons)}>\n        <Tooltip title={t(\"general/Delete\")}>\n          <IconButton onClick={() => props.removeSelf()}>\n            <TrashCan></TrashCan>\n          </IconButton>\n        </Tooltip>\n      </Box>\n      {!uploadingImages && (\n        <Box className={clsx(classes.section)}>\n          <Typography variant={\"subtitle1\"} style={{ marginBottom: \"8px\" }}>\n            {\"URL\"}\n          </Typography>\n          <Input\n            margin={\"dense\"}\n            placeholder={t(\"widget/crossnote.image/image-url-placeholder\")}\n            value={url}\n            onChange={(event) => {\n              setURL(event.target.value);\n            }}\n            onKeyDown={(event) => {\n              if (event.which === 13) {\n                props.replaceSelf(`![](${url})\\n`);\n              }\n            }}\n            fullWidth={true}\n          ></Input>\n        </Box>\n      )}\n      <Box className={clsx(classes.section)}>\n        <Typography variant={\"subtitle1\"} style={{ marginBottom: \"8px\" }}>\n          {t(\"general/Upload\")}\n        </Typography>\n        <Box\n          className={clsx(\n            classes.dropArea,\n            uploadingImages ? classes.disabled : null,\n          )}\n          onClick={clickDropArea}\n        >\n          <Typography>\n            {uploadingImages\n              ? t(\"utils/uploading-image\")\n              : t(\"widget/crossnote.image/click-here-to-browse-image-file\")}\n          </Typography>\n        </Box>\n      </Box>\n      <Box className={clsx(classes.section)}>\n        <Typography variant={\"caption\"}>\n          {t(\"widget/crossnote.image/thanks_sm_ms\")}\n        </Typography>\n      </Box>\n      <input\n        type=\"file\"\n        multiple\n        style={{ display: \"none\" }}\n        ref={(element: HTMLInputElement) => {\n          setImageUploaderElement(element);\n        }}\n      ></input>\n    </Card>\n  );\n}\n\nexport const ImageWidgetCreator: WidgetCreator = (args) => {\n  const el = document.createElement(\"span\");\n  ReactDOM.render(\n    <ThemeProvider theme={globalContainers.settingsContainer.theme.muiTheme}>\n      <ImageWidget {...args}></ImageWidget>\n    </ThemeProvider>,\n    el,\n  );\n  return el;\n};\n","import { WidgetCreator, WidgetArgs } from \"vickymd/widget\";\nimport React, { useState } from \"react\";\nimport ReactDOM from \"react-dom\";\nimport {\n  Card,\n  Typography,\n  IconButton,\n  Box,\n  Input,\n  Tooltip,\n  Switch,\n  FormControlLabel,\n} from \"@material-ui/core\";\nimport {\n  createStyles,\n  makeStyles,\n  Theme,\n  ThemeProvider,\n  fade,\n} from \"@material-ui/core/styles\";\nimport clsx from \"clsx\";\nimport { TrashCan } from \"mdi-material-ui\";\nimport { useTranslation } from \"react-i18next\";\nimport { globalContainers } from \"../../../containers/global\";\n\nconst useStyles = makeStyles((theme: Theme) =>\n  createStyles({\n    card: {\n      padding: theme.spacing(2),\n      position: \"relative\",\n    },\n    actionButtons: {\n      position: \"absolute\",\n      top: \"0\",\n      right: \"0\",\n    },\n    section: {\n      marginTop: theme.spacing(2),\n    },\n    disabled: {\n      cursor: \"not-allowed\",\n    },\n  }),\n);\n\nfunction AudioWidget(props: WidgetArgs) {\n  const attributes = props.attributes;\n  const classes = useStyles(props);\n  const { t } = useTranslation();\n  const [source, setSource] = useState<string>(attributes[\"source\"] || \"\");\n  const [autoplay, setAutoplay] = useState<boolean>(\n    attributes[\"autoplay\"] || false,\n  );\n  const [controls, setControls] = useState<boolean>(\n    attributes[\"controls\"] || true,\n  );\n  const [loop, setLoop] = useState<boolean>(attributes[\"loop\"] || false);\n  const [muted, setMuted] = useState<boolean>(attributes[\"muted\"] || false);\n\n  if (attributes[\"src\"]) {\n    return (\n      <span style={{ cursor: \"default\" }}>\n        <audio\n          autoPlay={attributes[\"autoplay\"] || attributes[\"autoPlay\"]}\n          controls={attributes[\"controls\"]}\n          loop={attributes[\"loop\"]}\n          muted={attributes[\"muted\"]}\n          style={attributes[\"style\"]}\n        >\n          {t(\"widget/crossnote.audio/audio_element_fail\")}\n          <source src={attributes[\"src\"]} type={attributes[\"type\"]}></source>\n        </audio>\n        {!props.isPreview && !attributes[\"controls\"] && \"🎵\"}\n      </span>\n    );\n  }\n\n  if (props.isPreview) {\n    return <span></span>;\n  }\n\n  return (\n    <Card elevation={2} className={clsx(classes.card)}>\n      <Typography variant={\"h5\"}>{t(\"general/Audio\")}</Typography>\n      <Box className={clsx(classes.actionButtons)}>\n        <Tooltip title={t(\"general/Delete\")}>\n          <IconButton onClick={() => props.removeSelf()}>\n            <TrashCan></TrashCan>\n          </IconButton>\n        </Tooltip>\n      </Box>\n      <Box className={clsx(classes.section)}>\n        <Typography variant={\"subtitle1\"} style={{ marginBottom: \"8px\" }}>\n          {t(\"general/source-url\")}\n        </Typography>\n        <Input\n          margin={\"dense\"}\n          placeholder={t(\"widget/crossnote.audio/source-url-placeholder\")}\n          value={source}\n          onChange={(event) => {\n            setSource(event.target.value);\n          }}\n          onKeyDown={(event) => {\n            if (event.which === 13) {\n              if (source) {\n                const attrs = {\n                  autoplay,\n                  controls,\n                  loop,\n                  muted,\n                  src: source,\n                };\n                props.setAttributes(attrs);\n              }\n            }\n          }}\n          fullWidth={true}\n        ></Input>\n      </Box>\n      <Box className={clsx(classes.section)}>\n        <FormControlLabel\n          label={t(\"widget/autoplay\")}\n          control={\n            <Switch\n              checked={autoplay}\n              onChange={() => setAutoplay(!autoplay)}\n              color={\"primary\"}\n            ></Switch>\n          }\n        ></FormControlLabel>\n        <FormControlLabel\n          label={t(\"widget/controls\")}\n          control={\n            <Switch\n              checked={controls}\n              onChange={() => setControls(!controls)}\n              color={\"primary\"}\n            ></Switch>\n          }\n        ></FormControlLabel>\n        <FormControlLabel\n          label={t(\"widget/loop\")}\n          control={\n            <Switch\n              checked={loop}\n              onChange={() => setLoop(!loop)}\n              color={\"primary\"}\n            ></Switch>\n          }\n        ></FormControlLabel>\n        <FormControlLabel\n          label={t(\"widget/muted\")}\n          control={\n            <Switch\n              checked={muted}\n              onChange={() => setMuted(!muted)}\n              color={\"primary\"}\n            ></Switch>\n          }\n        ></FormControlLabel>\n      </Box>\n    </Card>\n  );\n}\n\nexport const AudioWidgetCreator: WidgetCreator = (args) => {\n  const el = document.createElement(\"span\");\n  ReactDOM.render(\n    <ThemeProvider theme={globalContainers.settingsContainer.theme.muiTheme}>\n      <AudioWidget {...args}></AudioWidget>\n    </ThemeProvider>,\n    el,\n  );\n  return el;\n};\n","import { WidgetCreator, WidgetArgs } from \"vickymd/widget\";\nimport React, { useState } from \"react\";\nimport ReactDOM from \"react-dom\";\nimport {\n  Card,\n  Typography,\n  IconButton,\n  Box,\n  Input,\n  Tooltip,\n  Switch,\n  FormControlLabel,\n} from \"@material-ui/core\";\nimport {\n  createStyles,\n  makeStyles,\n  Theme,\n  ThemeProvider,\n} from \"@material-ui/core/styles\";\nimport clsx from \"clsx\";\nimport { TrashCan } from \"mdi-material-ui\";\nimport { useTranslation } from \"react-i18next\";\nimport { globalContainers } from \"../../../containers/global\";\n\nconst useStyles = makeStyles((theme: Theme) =>\n  createStyles({\n    card: {\n      padding: theme.spacing(2),\n      position: \"relative\",\n    },\n    actionButtons: {\n      position: \"absolute\",\n      top: \"0\",\n      right: \"0\",\n    },\n    section: {\n      marginTop: theme.spacing(2),\n    },\n    videoWrapper: {\n      cursor: \"default\",\n      position: \"relative\",\n      width: \"100%\",\n      height: \"0\",\n      paddingTop: \"56.25%\",\n    },\n    video: {\n      position: \"absolute\",\n      left: \"0\",\n      top: \"0\",\n      width: \"100%\",\n      height: \"100%\",\n    },\n  }),\n);\n\nfunction VideoWidget(props: WidgetArgs) {\n  const attributes = props.attributes;\n  const classes = useStyles(props);\n  const { t } = useTranslation();\n  const [source, setSource] = useState<string>(attributes[\"source\"] || \"\");\n  const [autoplay, setAutoplay] = useState<boolean>(\n    attributes[\"autoplay\"] || false,\n  );\n  const [controls, setControls] = useState<boolean>(\n    attributes[\"controls\"] || true,\n  );\n  const [loop, setLoop] = useState<boolean>(attributes[\"loop\"] || false);\n  const [muted, setMuted] = useState<boolean>(attributes[\"muted\"] || false);\n  const [poster, setPoster] = useState<string>(attributes[\"poster\"] || \"\");\n\n  if (attributes[\"src\"]) {\n    return (\n      <span style={{ cursor: \"default\" }}>\n        <Box className={clsx(classes.videoWrapper)}>\n          <video\n            className={clsx(classes.video)}\n            autoPlay={attributes[\"autoplay\"] || attributes[\"autoPlay\"]}\n            controls={attributes[\"controls\"]}\n            loop={attributes[\"loop\"]}\n            muted={attributes[\"muted\"]}\n            style={attributes[\"style\"]}\n            poster={attributes[\"poster\"]}\n          >\n            {t(\"widget/crossnote.video/video_element_fail\")}\n            <source src={attributes[\"src\"]} type={attributes[\"type\"]}></source>\n          </video>\n        </Box>\n      </span>\n    );\n  }\n\n  if (props.isPreview) {\n    return <span></span>;\n  }\n\n  return (\n    <Card elevation={2} className={clsx(classes.card)}>\n      <Typography variant={\"h5\"}>{t(\"general/Video\")}</Typography>\n      <Box className={clsx(classes.actionButtons)}>\n        <Tooltip title={t(\"general/Delete\")}>\n          <IconButton onClick={() => props.removeSelf()}>\n            <TrashCan></TrashCan>\n          </IconButton>\n        </Tooltip>\n      </Box>\n      <Box className={clsx(classes.section)}>\n        <Typography variant={\"subtitle1\"} style={{ marginBottom: \"8px\" }}>\n          {t(\"general/source-url\")}\n        </Typography>\n        <Input\n          margin={\"dense\"}\n          placeholder={t(\"widget/crossnote.video/video-url-placeholder\")}\n          value={source}\n          onChange={(event) => {\n            setSource(event.target.value);\n          }}\n          onKeyDown={(event) => {\n            if (event.which === 13) {\n              if (source) {\n                const attrs = {\n                  autoplay,\n                  controls,\n                  loop,\n                  muted,\n                  src: source,\n                  poster,\n                };\n                props.setAttributes(attrs);\n              }\n            }\n          }}\n          fullWidth={true}\n        ></Input>\n      </Box>\n      <Box className={clsx(classes.section)}>\n        <Typography variant={\"subtitle1\"} style={{ marginBottom: \"8px\" }}>\n          {t(\"widget/crossnote.video/poster-url\")}\n        </Typography>\n        <Input\n          margin={\"dense\"}\n          placeholder={t(\"widget/crossnote.video/poster-url-placeholder\")}\n          value={poster}\n          onChange={(event) => {\n            setPoster(event.target.value);\n          }}\n          fullWidth={true}\n        ></Input>\n      </Box>\n      <Box className={clsx(classes.section)}>\n        <FormControlLabel\n          label={t(\"widget/autoplay\")}\n          control={\n            <Switch\n              checked={autoplay}\n              onChange={() => setAutoplay(!autoplay)}\n              color={\"primary\"}\n            ></Switch>\n          }\n        ></FormControlLabel>\n        <FormControlLabel\n          label={t(\"widget/controls\")}\n          control={\n            <Switch\n              checked={controls}\n              onChange={() => setControls(!controls)}\n              color={\"primary\"}\n            ></Switch>\n          }\n        ></FormControlLabel>\n        <FormControlLabel\n          label={t(\"widget/loop\")}\n          control={\n            <Switch\n              checked={loop}\n              onChange={() => setLoop(!loop)}\n              color={\"primary\"}\n            ></Switch>\n          }\n        ></FormControlLabel>\n        <FormControlLabel\n          label={t(\"widget/muted\")}\n          control={\n            <Switch\n              checked={muted}\n              onChange={() => setMuted(!muted)}\n              color={\"primary\"}\n            ></Switch>\n          }\n        ></FormControlLabel>\n      </Box>\n    </Card>\n  );\n}\n\nexport const VideoWidgetCreator: WidgetCreator = (args) => {\n  const el = document.createElement(\"span\");\n  ReactDOM.render(\n    <ThemeProvider theme={globalContainers.settingsContainer.theme.muiTheme}>\n      <VideoWidget {...args}></VideoWidget>\n    </ThemeProvider>,\n    el,\n  );\n  return el;\n};\n","import { WidgetCreator, WidgetArgs } from \"vickymd/widget\";\nimport React, { useState } from \"react\";\nimport ReactDOM from \"react-dom\";\nimport {\n  Card,\n  Typography,\n  IconButton,\n  Box,\n  Input,\n  Tooltip,\n} from \"@material-ui/core\";\nimport {\n  createStyles,\n  makeStyles,\n  Theme,\n  ThemeProvider,\n} from \"@material-ui/core/styles\";\nimport clsx from \"clsx\";\nimport { TrashCan } from \"mdi-material-ui\";\nimport { useTranslation } from \"react-i18next\";\nimport { globalContainers } from \"../../../containers/global\";\n\nconst useStyles = makeStyles((theme: Theme) =>\n  createStyles({\n    card: {\n      padding: theme.spacing(2),\n      position: \"relative\",\n    },\n    actionButtons: {\n      position: \"absolute\",\n      top: \"0\",\n      right: \"0\",\n    },\n    section: {\n      marginTop: theme.spacing(2),\n    },\n    videoWrapper: {\n      cursor: \"default\",\n      position: \"relative\",\n      width: \"100%\",\n      height: \"0\",\n      paddingTop: \"56.25%\",\n    },\n    video: {\n      backgroundColor: \"#ddd\",\n      border: \"none\",\n      position: \"absolute\",\n      left: \"0\",\n      top: \"0\",\n      width: \"100%\",\n      height: \"100%\",\n    },\n    errorMessage: {\n      color: \"#f44336\",\n      marginTop: theme.spacing(2),\n    },\n  }),\n);\n\nfunction BilibiliWidget(props: WidgetArgs) {\n  const attributes = props.attributes;\n  const classes = useStyles(props);\n  const { t } = useTranslation();\n  const [url, setURL] = useState<string>(\"\");\n  const [error, setError] = useState<string>(\"\");\n\n  if (attributes[\"aid\"]) {\n    return (\n      <span style={{ cursor: \"default\" }}>\n        <Box className={clsx(classes.videoWrapper)}>\n          <iframe\n            title={\"bilibili_\" + attributes[\"id\"]}\n            className={clsx(classes.video)}\n            src={`https://player.bilibili.com/player.html?aid=${attributes[\"aid\"]}`}\n            scrolling={\"no\"}\n            frameBorder={\"no\"}\n            allowFullScreen={true}\n          ></iframe>\n        </Box>\n      </span>\n    );\n  }\n  if (attributes[\"bvid\"]) {\n    return (\n      <span style={{ cursor: \"default\" }}>\n        <Box className={clsx(classes.videoWrapper)}>\n          <iframe\n            title={\"bilibili_\" + attributes[\"id\"]}\n            className={clsx(classes.video)}\n            src={`https://player.bilibili.com/player.html?bvid=BV${attributes[\"bvid\"]}`}\n            scrolling={\"no\"}\n            frameBorder={\"no\"}\n            allowFullScreen={true}\n          ></iframe>\n        </Box>\n      </span>\n    );\n  }\n\n  if (props.isPreview) {\n    return <span></span>;\n  }\n\n  return (\n    <Card elevation={2} className={clsx(classes.card)}>\n      <Typography variant={\"h5\"}>\n        {t(\"widget/crossnote.bilibili/Bilibili\")}\n      </Typography>\n      <Box className={clsx(classes.actionButtons)}>\n        <Tooltip title={t(\"general/Delete\")}>\n          <IconButton onClick={() => props.removeSelf()}>\n            <TrashCan></TrashCan>\n          </IconButton>\n        </Tooltip>\n      </Box>\n      <Box className={clsx(classes.section)}>\n        <Typography variant={\"subtitle1\"} style={{ marginBottom: \"8px\" }}>\n          {t(\"widget/crossnote.bilibili/bilibili-video-url\")}\n        </Typography>\n        <Input\n          margin={\"dense\"}\n          placeholder={t(\"widget/crossnote.bilibili/url-placeholder\")}\n          value={url}\n          onChange={(event) => {\n            setURL(event.target.value);\n            setError(\"\");\n          }}\n          onKeyDown={(event) => {\n            if (event.which === 13) {\n              if (url && url.match(/\\/av(\\d+)/)) {\n                const aid = url.match(/\\/av(\\d+)/)[1];\n                const attrs = {\n                  aid,\n                };\n                props.setAttributes(attrs);\n              } else if (url && url.match(/\\/BV(.+?)($|\\/|\\?)/)) {\n                const bvid = url.match(/\\/BV(.+?)($|\\/|\\?)/)[1];\n                const attrs = {\n                  bvid,\n                };\n                props.setAttributes(attrs);\n              } else {\n                setError(t(\"widget/crossnote.bilibili/error_message\"));\n              }\n            }\n          }}\n          fullWidth={true}\n        ></Input>\n        <Typography className={clsx(classes.errorMessage)}>{error}</Typography>\n      </Box>\n    </Card>\n  );\n}\n\nexport const BilibiliWidgetCreator: WidgetCreator = (args) => {\n  const el = document.createElement(\"span\");\n  ReactDOM.render(\n    <ThemeProvider theme={globalContainers.settingsContainer.theme.muiTheme}>\n      <BilibiliWidget {...args}></BilibiliWidget>\n    </ThemeProvider>,\n    el,\n  );\n  return el;\n};\n","import { WidgetCreator, WidgetArgs } from \"vickymd/widget\";\nimport React, { useState } from \"react\";\nimport ReactDOM from \"react-dom\";\nimport {\n  Card,\n  Typography,\n  IconButton,\n  Box,\n  Input,\n  Tooltip,\n} from \"@material-ui/core\";\nimport {\n  createStyles,\n  makeStyles,\n  Theme,\n  ThemeProvider,\n} from \"@material-ui/core/styles\";\nimport clsx from \"clsx\";\nimport { TrashCan } from \"mdi-material-ui\";\nimport { useTranslation } from \"react-i18next\";\nimport { globalContainers } from \"../../../containers/global\";\n\nconst useStyles = makeStyles((theme: Theme) =>\n  createStyles({\n    card: {\n      padding: theme.spacing(2),\n      position: \"relative\",\n    },\n    actionButtons: {\n      position: \"absolute\",\n      top: \"0\",\n      right: \"0\",\n    },\n    section: {\n      marginTop: theme.spacing(2),\n    },\n    videoWrapper: {\n      cursor: \"default\",\n      position: \"relative\",\n      width: \"100%\",\n      height: \"0\",\n      paddingTop: \"56.25%\",\n    },\n    video: {\n      backgroundColor: \"#ddd\",\n      border: \"none\",\n      position: \"absolute\",\n      left: \"0\",\n      top: \"0\",\n      width: \"100%\",\n      height: \"100%\",\n    },\n    errorMessage: {\n      color: \"#f44336\",\n      marginTop: theme.spacing(2),\n    },\n  }),\n);\n\nfunction YoutubeWidget(props: WidgetArgs) {\n  const attributes = props.attributes;\n  const classes = useStyles(props);\n  const { t } = useTranslation();\n  const [url, setURL] = useState<string>(\"\");\n  const [error, setError] = useState<string>(\"\");\n\n  if (attributes[\"videoID\"]) {\n    if (!props.isPreview) {\n      return (\n        <span style={{ cursor: \"default\" }}>\n          <img\n            alt={\"Youtube: \" + attributes[\"videoID\"]}\n            src={`https://img.youtube.com/vi/${attributes[\"videoID\"]}/0.jpg`}\n            onClick={() => {\n              window.open(\n                `https://www.youtube.com/watch?v=${attributes[\"videoID\"]}`,\n                \"_blank\",\n              );\n            }}\n            style={{\n              cursor: \"pointer\",\n              width: \"100%\",\n            }}\n          ></img>\n        </span>\n      );\n    } else {\n      return (\n        <span style={{ cursor: \"default\" }}>\n          <Box className={clsx(classes.videoWrapper)}>\n            <iframe\n              title={\"youtube_\" + attributes[\"videoID\"]}\n              className={clsx(classes.video)}\n              src={`https://www.youtube.com/embed/${attributes[\"videoID\"]}`}\n              scrolling={\"no\"}\n              frameBorder={\"no\"}\n              allowFullScreen={true}\n            ></iframe>\n          </Box>\n        </span>\n      );\n    }\n  }\n\n  if (props.isPreview) {\n    return <span></span>;\n  }\n\n  return (\n    <Card elevation={2} className={clsx(classes.card)}>\n      <Typography variant={\"h5\"}>{t(\"Youtube\")}</Typography>\n      <Box className={clsx(classes.actionButtons)}>\n        <Tooltip title={t(\"general/Delete\")}>\n          <IconButton onClick={() => props.removeSelf()}>\n            <TrashCan></TrashCan>\n          </IconButton>\n        </Tooltip>\n      </Box>\n      <Box className={clsx(classes.section)}>\n        <Typography variant={\"subtitle1\"} style={{ marginBottom: \"8px\" }}>\n          {t(\"Youtube video URL\")}\n        </Typography>\n        <Input\n          margin={\"dense\"}\n          placeholder={t(\n            \"widget/crossnote.youtube/youtube-video-url-placeholder\",\n          )}\n          value={url}\n          onChange={(event) => {\n            setURL(event.target.value);\n            setError(\"\");\n          }}\n          onKeyDown={(event) => {\n            if (event.which === 13) {\n              if (url && url.match(/\\?v=(.+?)(&|$)/)) {\n                const videoID = url.match(/\\?v=(.+?)(&|$)/)[1];\n                const attrs = {\n                  videoID,\n                };\n                props.setAttributes(attrs);\n              } else if (url && url.match(/\\/youtu\\.be\\/(.+?)(\\?|$)/)) {\n                const videoID = url.match(/\\/youtu\\.be\\/(.+?)(\\?|$)/)[1];\n                const attrs = {\n                  videoID,\n                };\n                props.setAttributes(attrs);\n              } else {\n                setError(t(\"widget/crossnote.youtube/error_message\"));\n              }\n            }\n          }}\n          fullWidth={true}\n        ></Input>\n        <Typography className={clsx(classes.errorMessage)}>{error}</Typography>\n      </Box>\n    </Card>\n  );\n}\n\nexport const YoutubeWidgetCreator: WidgetCreator = (args) => {\n  const el = document.createElement(\"span\");\n  ReactDOM.render(\n    <ThemeProvider theme={globalContainers.settingsContainer.theme.muiTheme}>\n      <YoutubeWidget {...args}></YoutubeWidget>\n    </ThemeProvider>,\n    el,\n  );\n  return el;\n};\n","import { WidgetCreator, WidgetArgs } from \"vickymd/widget\";\nimport React, { useState, useEffect } from \"react\";\nimport ReactDOM from \"react-dom\";\nimport {\n  Card,\n  Typography,\n  IconButton,\n  Box,\n  Input,\n  Tooltip,\n  Switch,\n  FormControlLabel,\n  ListItem,\n  ListItemText,\n  List,\n  ListItemSecondaryAction,\n  FormGroup,\n  Checkbox,\n  ButtonGroup,\n  Button,\n} from \"@material-ui/core\";\nimport {\n  createStyles,\n  makeStyles,\n  Theme,\n  ThemeProvider,\n  darken,\n} from \"@material-ui/core/styles\";\nimport clsx from \"clsx\";\nimport { TrashCan } from \"mdi-material-ui\";\nimport { useTranslation } from \"react-i18next\";\nimport { createWorker } from \"tesseract.js\";\nimport { globalContainers } from \"../../../containers/global\";\n\nconst useStyles = makeStyles((theme: Theme) =>\n  createStyles({\n    card: {\n      padding: theme.spacing(2),\n      position: \"relative\",\n    },\n    actionButtons: {\n      position: \"absolute\",\n      top: \"0\",\n      right: \"0\",\n    },\n    section: {\n      marginTop: theme.spacing(2),\n    },\n    dropArea: {\n      \"textAlign\": \"center\",\n      \"padding\": \"24px\",\n      \"border\": \"4px dotted #c7c7c7\",\n      \"backgroundColor\": darken(theme.palette.background.paper, 0.01),\n      \"cursor\": \"pointer\",\n      \"&:hover\": {\n        backgroundColor: darken(theme.palette.background.paper, 0.2),\n      },\n    },\n    canvasWrapper: {\n      marginTop: theme.spacing(2),\n      // height: 0,\n      // paddingTop: \"56.25%\" // 16:9\n    },\n    canvas: {\n      maxWidth: \"100%\",\n    },\n    disabled: {\n      cursor: \"not-allowed\",\n    },\n  }),\n);\n\ninterface OCRProgress {\n  status: string;\n  progress: number;\n  workerId?: string;\n}\n\nfunction getInitialLanguages() {\n  try {\n    return JSON.parse(\n      localStorage.getItem(\"widget/crossnote.ocr/languages\") || '[\"eng\"]',\n    );\n  } catch (error) {\n    return [\"eng\"];\n  }\n}\n\nfunction OCRWidget(props: WidgetArgs) {\n  const classes = useStyles(props);\n  const { t } = useTranslation();\n  const [canvas, setCanvas] = useState<HTMLCanvasElement>(null);\n  // https://github.com/tesseract-ocr/tesseract/wiki/Data-Files#data-files-for-version-400-november-29-2016\n  const [link, setLink] = useState<string>(\"\");\n  const [imageDataURL, setImageDataURL] = useState<string>(\"\");\n  const [ocrDataURL, setOCRDataURL] = useState<string>(\"\");\n  const [imageDropAreaElement, setImageDropAreaElement] = useState<\n    HTMLInputElement\n  >(null);\n  const [isProcessing, setIsProcessing] = useState<boolean>(false);\n  const [ocrProgresses, setOCRProgresses] = useState<OCRProgress[]>([]);\n  const [selectedLanguages, setSelectedLanguages] = useState<string[]>(\n    getInitialLanguages(),\n  );\n  const [grayscaleChecked, setGrayscaleChecked] = useState<boolean>(\n    !!localStorage.getItem(\"widget/crossnote.ocr/grayscale\") || true,\n  );\n\n  useEffect(() => {\n    if (canvas && imageDataURL) {\n      const imageObject = new Image();\n      const context = canvas.getContext(\"2d\");\n      imageObject.onload = function () {\n        canvas.width = imageObject.width;\n        canvas.height = imageObject.height;\n        context.clearRect(0, 0, canvas.width, canvas.height);\n        if (grayscaleChecked) {\n          context.fillStyle = \"#FFF\";\n          context.fillRect(0, 0, canvas.width, canvas.height);\n          context.globalCompositeOperation = \"luminosity\";\n        }\n        context.drawImage(imageObject, 0, 0);\n        setOCRDataURL(canvas.toDataURL());\n      };\n      imageObject.onerror = (error) => {\n        throw error;\n      };\n      imageObject.setAttribute(\"crossOrigin\", \"anonymous\");\n      imageObject.src = imageDataURL;\n    }\n  }, [canvas, imageDataURL, grayscaleChecked]);\n\n  function clickDropArea(e: any) {\n    e.preventDefault();\n    e.stopPropagation();\n    if (!imageDropAreaElement || isProcessing) return;\n    imageDropAreaElement.onchange = function (event) {\n      const target = event.target as any;\n      const files = target.files || [];\n      if (files.length) {\n        try {\n          const file = files[0] as File;\n          const reader = new FileReader();\n          reader.readAsDataURL(file);\n          reader.onload = () => {\n            setImageDataURL(reader.result as string);\n          };\n          reader.onerror = (error) => {\n            throw error;\n          };\n        } catch (error) {}\n      }\n    };\n    imageDropAreaElement.click();\n  }\n\n  function startOCRFromLink() {\n    try {\n      setImageDataURL(link);\n    } catch (error) {}\n  }\n\n  function ocr(input: File | string | HTMLCanvasElement) {\n    const worker = createWorker({\n      logger: (m: OCRProgress) => {\n        setOCRProgresses((ocrProgresses) => {\n          if (\n            ocrProgresses.length &&\n            ocrProgresses[ocrProgresses.length - 1].status === m.status\n          ) {\n            return [...ocrProgresses.slice(0, ocrProgresses.length - 1), m];\n          } else {\n            return [...ocrProgresses, m];\n          }\n        });\n      },\n    });\n\n    (async () => {\n      setIsProcessing(true);\n      let languagesArr = selectedLanguages;\n      if (languagesArr.length === 0) {\n        languagesArr = [\"eng\"];\n      }\n\n      await worker.load();\n      await worker.loadLanguage(languagesArr.join(\"+\"));\n      await worker.initialize(languagesArr.join(\"+\"));\n      const {\n        data: { text },\n      } = await worker.recognize(input);\n      props.replaceSelf(\"\\n\" + text);\n      await worker.terminate();\n      setIsProcessing(false);\n    })();\n  }\n\n  function toggleLanguage(lang: string) {\n    setSelectedLanguages((selectedLanguages) => {\n      const offset = selectedLanguages.indexOf(lang);\n      if (offset >= 0) {\n        selectedLanguages.splice(offset, 1);\n        selectedLanguages = [...selectedLanguages];\n      } else {\n        selectedLanguages = [...selectedLanguages, lang];\n      }\n      localStorage.setItem(\n        \"widget/crossnote.ocr/languages\",\n        JSON.stringify(selectedLanguages),\n      );\n      return selectedLanguages;\n    });\n  }\n\n  if (props.isPreview) {\n    return <span></span>;\n  }\n\n  if (isProcessing) {\n    return (\n      <Card elevation={2} className={clsx(classes.card)}>\n        <Typography variant={\"h5\"}>{t(\"general/Processing\")}</Typography>\n        {/*<Typography variant={\"body1\"}>{t(\"general/please-wait\")}</Typography>*/}\n        <List>\n          {ocrProgresses.length > 0 && (\n            <ListItem>\n              <ListItemText>\n                {t(\n                  \"tesseract/\" + ocrProgresses[ocrProgresses.length - 1].status,\n                )}\n              </ListItemText>\n              <ListItemSecondaryAction>\n                {Math.floor(\n                  ocrProgresses[ocrProgresses.length - 1].progress * 100,\n                ).toString() + \"%\"}\n              </ListItemSecondaryAction>\n            </ListItem>\n          )}\n        </List>\n      </Card>\n    );\n  }\n\n  if (imageDataURL) {\n    return (\n      <Card elevation={2} className={clsx(classes.card)}>\n        <Box className={clsx(classes.section)}>\n          <Typography variant={\"subtitle1\"} style={{ marginBottom: \"8px\" }}>\n            {t(\"widget/crossnote.ocr/recognize-text-in-languages\")}\n          </Typography>\n          <FormGroup>\n            <FormControlLabel\n              control={\n                <Checkbox\n                  checked={selectedLanguages.indexOf(\"eng\") >= 0}\n                  onChange={() => toggleLanguage(\"eng\")}\n                  value=\"eng\"\n                />\n              }\n              label=\"English\"\n            />\n            <FormControlLabel\n              control={\n                <Checkbox\n                  checked={selectedLanguages.indexOf(\"chi_sim\") >= 0}\n                  onChange={() => toggleLanguage(\"chi_sim\")}\n                  value=\"chi_sim\"\n                />\n              }\n              label=\"简体中文\"\n            />\n            <FormControlLabel\n              control={\n                <Checkbox\n                  checked={selectedLanguages.indexOf(\"chi_tra\") >= 0}\n                  onChange={() => toggleLanguage(\"chi_tra\")}\n                  value=\"chi_tra\"\n                />\n              }\n              label=\"繁體中文\"\n            />\n            <FormControlLabel\n              control={\n                <Checkbox\n                  checked={selectedLanguages.indexOf(\"jpn\") >= 0}\n                  onChange={() => toggleLanguage(\"jpn\")}\n                  value=\"jpn\"\n                />\n              }\n              label=\"日本語\"\n            />\n          </FormGroup>\n        </Box>\n        <Box className={clsx(classes.section)}>\n          <Typography variant={\"subtitle1\"} style={{ marginBottom: \"8px\" }}>\n            {t(\"widget/crossnote.ocr/extra-settings\")}\n          </Typography>\n          <FormControlLabel\n            control={\n              <Switch\n                checked={grayscaleChecked}\n                onChange={() => {\n                  if (grayscaleChecked) {\n                    localStorage.removeItem(\"widget/crossnote.ocr/grayscale\");\n                  } else {\n                    localStorage.setItem(\n                      \"widget/crossnote.ocr/grayscale\",\n                      \"true\",\n                    );\n                  }\n                  setGrayscaleChecked(!grayscaleChecked);\n                }}\n                color={\"primary\"}\n              ></Switch>\n            }\n            label={t(\"widget/crossnote.ocr/grayscale\")}\n          ></FormControlLabel>\n        </Box>\n        <Box className={clsx(classes.canvasWrapper)}>\n          <canvas\n            className={clsx(classes.canvas)}\n            ref={(element) => setCanvas(element)}\n          ></canvas>\n        </Box>\n        <ButtonGroup>\n          <Button\n            onClick={() => {\n              setImageDataURL(\"\");\n              setOCRDataURL(\"\");\n            }}\n          >\n            {t(\"general/go-back\")}\n          </Button>\n          <Button\n            color={\"primary\"}\n            onClick={() => ocr(ocrDataURL)}\n            disabled={!ocrDataURL}\n          >\n            {t(\"widget/crossnote.ocr/start-ocr\")}\n          </Button>\n        </ButtonGroup>\n      </Card>\n    );\n  }\n\n  return (\n    <Card elevation={2} className={clsx(classes.card)}>\n      <Typography variant={\"h5\"}>{t(\"widget/crossnote.ocr/ocr\")}</Typography>\n      <Box className={clsx(classes.actionButtons)}>\n        <Tooltip title={t(\"general/Delete\")}>\n          <IconButton onClick={() => props.removeSelf()}>\n            <TrashCan></TrashCan>\n          </IconButton>\n        </Tooltip>\n      </Box>\n      <Box className={clsx(classes.section)}>\n        <Typography variant={\"subtitle1\"} style={{ marginBottom: \"8px\" }}>\n          {t(\"general/Link\")}\n        </Typography>\n        <Input\n          margin={\"dense\"}\n          placeholder={t(\"widget/crossnote.image/image-url-placeholder\")}\n          value={link}\n          onChange={(event) => {\n            setLink(event.target.value);\n          }}\n          onKeyDown={(event) => {\n            if (event.which === 13) {\n              startOCRFromLink();\n            }\n          }}\n          fullWidth={true}\n        ></Input>\n      </Box>\n      <Typography\n        variant={\"subtitle1\"}\n        style={{ marginTop: \"16px\", textAlign: \"center\" }}\n      >\n        {t(\"widget/crossnote.auth/Or\")}\n      </Typography>\n      <Box className={clsx(classes.section)}>\n        <Typography variant={\"subtitle1\"} style={{ marginBottom: \"8px\" }}>\n          {t(\"widget/crossnote.ocr/local-image\")}\n        </Typography>\n        <Box\n          className={clsx(\n            classes.dropArea,\n            isProcessing ? classes.disabled : null,\n          )}\n          onClick={clickDropArea}\n        >\n          <Typography>\n            {isProcessing\n              ? t(\"utils/uploading-image\")\n              : t(\"widget/crossnote.image/click-here-to-browse-image-file\")}\n          </Typography>\n        </Box>\n      </Box>\n      <input\n        type=\"file\"\n        // multiple\n        style={{ display: \"none\" }}\n        ref={(element: HTMLInputElement) => {\n          setImageDropAreaElement(element);\n        }}\n      ></input>\n    </Card>\n  );\n}\n\nexport const OCRWidgetCreator: WidgetCreator = (args) => {\n  const el = document.createElement(\"span\");\n  ReactDOM.render(\n    <ThemeProvider theme={globalContainers.settingsContainer.theme.muiTheme}>\n      <OCRWidget {...args}></OCRWidget>\n    </ThemeProvider>,\n    el,\n  );\n  return el;\n};\n","import { useState, useEffect, useCallback } from \"react\";\nimport { env } from \"../env\";\nimport { createContainer } from \"unstated-next\";\nimport * as path from \"path\";\nimport Noty from \"noty\";\nimport useInterval from \"@use-it/interval\";\nimport { randomID, OneDay } from \"../utilities/utils\";\nimport { useTranslation } from \"react-i18next\";\nimport Crossnote, {\n  Notebook,\n  Note,\n  Directory,\n  NoteConfig,\n  PushNotebookArgs,\n  PullNotebookArgs,\n  TagNode,\n  Attachment,\n} from \"../lib/crossnote\";\nimport { getHeaderFromMarkdown } from \"../utilities/note\";\nimport { browserHistory } from \"../utilities/history\";\nimport * as qs from \"qs\";\nimport { pfs } from \"../lib/fs\";\nimport { sanitizeTag } from \"../utilities/markdown\";\n\nexport enum EditorMode {\n  VickyMD = \"VickyMD\",\n  SourceCode = \"SourceCode\",\n  Preview = \"Preview\",\n  SplitView = \"SplitView\",\n}\n\nexport enum SelectedSectionType {\n  Notes = \"Notes\",\n  Today = \"Today\",\n  Todo = \"Todo\",\n  Tagged = \"Tagged\",\n  Untagged = \"Untagged\",\n  Directory = \"Directory\",\n  Tag = \"Tag\",\n  Conflicted = \"Conflicted\",\n  Encrypted = \"Encrypted\",\n  Wiki = \"Wiki\",\n  Attachments = \"Attachments\",\n}\n\nexport interface SelectedSection {\n  type: SelectedSectionType;\n  path?: string;\n}\n\nexport enum OrderBy {\n  CreatedAt = \"CreatedAt\",\n  ModifiedAt = \"ModifiedAt\",\n  Title = \"Title\",\n}\n\nexport enum OrderDirection {\n  ASC = \"ASC\",\n  DESC = \"DESC\",\n}\n\nexport enum HomeSection {\n  Notebooks = \"Notebooks\",\n  Explore = \"Explore\",\n  Settings = \"Settings\",\n  Notifications = \"Notifications\",\n  Privacy = \"Privacy\",\n  Unknown = \"Unknown\",\n}\n\n/**\n * The note to open\n */\nexport interface PendingNote {\n  notebookID?: string;\n  repo?: string;\n  branch?: string;\n  filePath: string;\n}\n\ninterface InitialState {\n  crossnote: Crossnote;\n}\n\nfunction useCrossnoteContainer(initialState: InitialState) {\n  const { t } = useTranslation();\n  const crossnote = initialState.crossnote;\n  const [initialized, setInitialized] = useState<boolean>(false);\n  const [notebooks, setNotebooks] = useState<Notebook[]>([]);\n  const [selectedNotebook, setSelectedNotebook] = useState<Notebook>(null);\n  const [notebookNotes, setNotebookNotes] = useState<Note[]>([]);\n  const [notebookDirectories, setNotebookDirectories] = useState<Directory>({\n    name: \".\",\n    path: \".\",\n    children: [],\n  });\n  const [notebookTagNode, setNotebookTagNode] = useState<TagNode>({\n    name: \".\",\n    path: \".\",\n    children: [],\n  });\n  const [notes, setNotes] = useState<Note[]>([]);\n  const [selectedNote, setSelectedNote] = useState<Note>(null);\n  const [selectedAttachment, setSelectedAttachment] = useState<Attachment>(\n    null,\n  );\n  const [includeSubdirectories, setIncludeSubdirectories] = useState<boolean>(\n    true,\n  );\n  const [selectedSection, setSelectedSection] = useState<SelectedSection>({\n    type: SelectedSectionType.Notes,\n  }); // $notes | $todau | $todo | real directory\n  const [isAddingNotebook, setIsAddingNotebook] = useState<boolean>(false);\n  const [isPushingNotebook, setIsPushingNotebook] = useState<boolean>(false);\n  const [isPullingNotebook, setIsPullingNotebook] = useState<boolean>(false);\n  const [isLoadingAttachments, setIsLoadingAttachments] = useState<boolean>(\n    false,\n  );\n  const [displayMobileEditor, setDisplayMobileEditor] = useState<boolean>(\n    false,\n  ); // For mobile device without any initial data, set to `true` will create empty white page.\n  const [displayAttachmentEditor, setDisplayAttachmentEditor] = useState<\n    boolean\n  >(false);\n  const [needsToRefreshNotes, setNeedsToRefreshNotes] = useState<boolean>(\n    false,\n  );\n  const [wikiTOCElement, setWikiTOCElement] = useState<HTMLElement>(null);\n  const [isLoadingNotebook, setIsLoadingNotebook] = useState<boolean>(false);\n  const [hasSummaryMD, setHasSummaryMD] = useState<boolean>(false);\n  const [orderBy, setOrderBy] = useState<OrderBy>(OrderBy.ModifiedAt);\n  const [orderDirection, setOrderDirection] = useState<OrderDirection>(\n    OrderDirection.DESC,\n  );\n  const [editorMode, setEditorMode] = useState<EditorMode>(EditorMode.Preview);\n  const [pendingNote, setPendingNote] = useState<PendingNote>(null);\n  const [isPerformingAutoFetch, setIsPerformingAutoFetch] = useState<boolean>(\n    false,\n  );\n  const [homeSection, setHomeSection] = useState<HomeSection>(\n    HomeSection.Unknown,\n  );\n\n  const _setSelectedNote = useCallback(\n    (note: Note) => {\n      setSelectedNote(note);\n      const notebook = note.notebook;\n      if (notebook.gitURL) {\n        browserHistory.push(\n          //`${env.approot}/?repo=${encodeURIComponent(\n          `/?repo=${encodeURIComponent(\n            notebook.gitURL,\n          )}&branch=${encodeURIComponent(\n            notebook.gitBranch || \"master\",\n          )}&filePath=${encodeURIComponent(note.filePath)}`,\n        );\n      } else {\n        browserHistory.push(\n          //`${env.approot}/?notebookID=${notebook._id}&filePath=${encodeURIComponent(\n          `/?notebookID=${notebook._id}&filePath=${encodeURIComponent(\n            note.filePath,\n          )}`,\n        );\n      }\n    },\n    [setSelectedNote],\n  );\n\n  const updateNoteMarkdown = useCallback(\n    (\n      note: Note,\n      markdown: string,\n      password?: string,\n      callback?: (status: string) => void,\n    ) => {\n      crossnote\n        .writeNote(\n          note.notebook,\n          note.filePath,\n          markdown,\n          note.config,\n          password,\n        )\n        .then((noteConfig) => {\n          note.config = noteConfig;\n          note.markdown = markdown;\n          if (callback) {\n            crossnote.getStatus(note.notebook, note.filePath).then((status) => {\n              callback(status);\n            });\n          }\n          // QUESTION: Seems like every time cloudContainer refetches the viewer, the note card that got modified will be refreshed. I don't know why\n          // QUESTION: Don't disable it actually if cloudContainer has no token set and no viewer were fetched.\n          setNeedsToRefreshNotes(true);\n        });\n    },\n    [crossnote],\n  );\n\n  const deleteNote = useCallback(\n    async (note: Note) => {\n      await crossnote.deleteNote(selectedNotebook, note.filePath);\n      setNotebookNotes((notes) => {\n        const newNotes = notes.filter((n) => n.filePath !== note.filePath);\n        if (newNotes.length !== notes.length) {\n          setSelectedNote(null);\n        }\n\n        crossnote\n          .getNotebookDirectoriesFromNotes(newNotes)\n          .then((directories) => {\n            setNotebookDirectories(directories);\n          });\n\n        crossnote\n          .hasSummaryMD(selectedNotebook)\n          .then((exists) => setHasSummaryMD(exists));\n\n        setNotebookTagNode(crossnote.getNotebookTagNodeFromNotes(newNotes));\n        return newNotes;\n      });\n      setSelectedNote(null);\n      setDisplayMobileEditor(false);\n    },\n    [crossnote, selectedNotebook],\n  );\n\n  const changeNoteFilePath = useCallback(\n    (note: Note, newFilePath: string) => {\n      (async () => {\n        try {\n          await crossnote.changeNoteFilePath(\n            selectedNotebook,\n            note,\n            newFilePath,\n          );\n          const newNotes = notebookNotes.map((n) => {\n            if (n.filePath === note.filePath) {\n              n.filePath = newFilePath;\n              n.config.modifiedAt = new Date();\n              return n;\n            } else {\n              return n;\n            }\n          });\n          setNotebookNotes(newNotes);\n          setNotebookDirectories(\n            await crossnote.getNotebookDirectoriesFromNotes(newNotes),\n          );\n          setHasSummaryMD(await crossnote.hasSummaryMD(selectedNotebook));\n          setNotebookTagNode(crossnote.getNotebookTagNodeFromNotes(newNotes));\n        } catch (error) {\n          new Noty({\n            type: \"error\",\n            text: t(\"error/failed-to-change-file-path\"),\n            layout: \"topRight\",\n            theme: \"relax\",\n            timeout: 5000,\n          }).show();\n        }\n      })();\n    },\n    [selectedNotebook, notebookNotes, crossnote],\n  );\n\n  const renameDirectory = useCallback(\n    async (oldDirName: string, newDirName: string) => {\n      newDirName = newDirName\n        .replace(/^\\/+/, \"\")\n        .replace(/^\\.+\\/+/, \"\")\n        .replace(/\\/+$/, \"\");\n      if (oldDirName === newDirName) {\n        return;\n      }\n      await crossnote.renameDirectory(selectedNotebook, oldDirName, newDirName);\n      const newNotes = notebookNotes.map((n) => {\n        if (n.filePath.startsWith(oldDirName + \"/\")) {\n          if (newDirName.length > 0) {\n            n.filePath = n.filePath.replace(oldDirName, newDirName);\n          } else {\n            n.filePath = path.basename(n.filePath);\n          }\n        }\n        return n;\n      });\n      setNotebookNotes(newNotes);\n      setNotebookDirectories(\n        await crossnote.getNotebookDirectoriesFromNotes(newNotes),\n      );\n      if (newDirName.length) {\n        setSelectedSection({\n          type: SelectedSectionType.Directory,\n          path: newDirName,\n        });\n      } else {\n        setSelectedSection({\n          type: SelectedSectionType.Notes,\n        });\n      }\n    },\n    [selectedNotebook, notebookNotes, crossnote],\n  );\n\n  const deleteDirectory = useCallback(\n    async (dirName: string) => {\n      await crossnote.deleteDirectory(selectedNotebook, dirName);\n      const newNotes = notebookNotes.filter((n) => {\n        return !n.filePath.startsWith(dirName + \"/\");\n      });\n      setNotebookNotes(newNotes);\n      setNotebookDirectories(\n        await crossnote.getNotebookDirectoriesFromNotes(newNotes),\n      );\n      setSelectedSection({\n        type: SelectedSectionType.Notes,\n      });\n      _setSelectedNote(newNotes[0]);\n    },\n    [selectedNotebook, notebookNotes, _setSelectedNote, crossnote],\n  );\n\n  const renameTag = useCallback(\n    async (oldTagName: string, newTagName: string) => {\n      newTagName = sanitizeTag(newTagName);\n      const newNotes: Note[] = [];\n      const promises = [];\n      for (let i = 0; i < notebookNotes.length; i++) {\n        const note = notebookNotes[i];\n        let modified = false;\n        const tags = (note.config.tags || [])\n          .map((tag) => {\n            if ((tag + \"/\").startsWith(oldTagName + \"/\")) {\n              tag =\n                newTagName +\n                \"/\" +\n                tag.slice(oldTagName.length).replace(/^\\/+/, \"\");\n              modified = true;\n            }\n            return tag.replace(/^\\/+/, \"\").replace(/\\/+$/, \"\");\n          })\n          .filter((tag) => tag.length)\n          .filter(\n            (tag, index, self) => self.findIndex((x) => x === tag) === index,\n          );\n        if (modified) {\n          note.config.tags = tags;\n          promises.push(\n            crossnote.updateNoteConfig(\n              selectedNotebook,\n              note.filePath,\n              note.config,\n            ),\n          );\n        }\n        newNotes.push(note);\n      }\n      await Promise.all(promises);\n      setNotebookNotes(newNotes);\n      setNotebookTagNode(crossnote.getNotebookTagNodeFromNotes(newNotes));\n      if (newTagName.length) {\n        setSelectedSection({\n          type: SelectedSectionType.Tag,\n          path: newTagName,\n        });\n      } else {\n        setSelectedSection({\n          type: SelectedSectionType.Notes,\n        });\n      }\n    },\n    [selectedNotebook, notebookNotes, crossnote],\n  );\n\n  const deleteTag = useCallback(\n    async (tagName: string) => {\n      const newNotes: Note[] = [];\n      const promises = [];\n      for (let i = 0; i < notebookNotes.length; i++) {\n        const note = notebookNotes[i];\n        let modified = false;\n        const tags = (note.config.tags || []).filter((tag) => {\n          const hasPrefix = (tag + \"/\").startsWith(tagName + \"/\");\n          modified = modified || hasPrefix;\n          return !hasPrefix;\n        });\n        if (modified) {\n          note.config.tags = tags;\n          promises.push(\n            crossnote.updateNoteConfig(\n              selectedNotebook,\n              note.filePath,\n              note.config,\n            ),\n          );\n        }\n        newNotes.push(note);\n      }\n      await Promise.all(promises);\n      setNotebookNotes(newNotes);\n      setNotebookTagNode(crossnote.getNotebookTagNodeFromNotes(newNotes));\n      setSelectedSection({\n        type: SelectedSectionType.Notes,\n      });\n    },\n    [selectedNotebook, notebookNotes, crossnote],\n  );\n\n  const createNewNote = useCallback(\n    async (\n      notebook: Notebook,\n      fileName: string = \"\",\n      markdown: string = \"\",\n    ) => {\n      if (!notebook) {\n        return null;\n      }\n      if (!fileName) {\n        fileName = \"unnamed_\" + randomID();\n      }\n      if (!fileName.endsWith(\".md\")) {\n        fileName = fileName + \".md\";\n      }\n      let filePath;\n      let tags: string[] = [];\n      if (\n        selectedSection.type === SelectedSectionType.Notes ||\n        selectedSection.type === SelectedSectionType.Today ||\n        selectedSection.type === SelectedSectionType.Todo ||\n        selectedSection.type === SelectedSectionType.Tagged ||\n        selectedSection.type === SelectedSectionType.Untagged\n      ) {\n        filePath = fileName;\n      } else if (selectedSection.type === SelectedSectionType.Tag) {\n        filePath = fileName;\n        tags = [selectedSection.path];\n      } else {\n        filePath = path.relative(\n          notebook.dir,\n          path.resolve(notebook.dir, selectedSection.path, fileName),\n        );\n      }\n\n      const noteConfig: NoteConfig = {\n        tags: tags,\n        modifiedAt: new Date(),\n        createdAt: new Date(),\n      };\n      await crossnote.writeNote(notebook, filePath, markdown, noteConfig);\n      const note: Note = {\n        notebook: notebook,\n        filePath: filePath,\n        markdown,\n        config: noteConfig,\n      };\n      setNotebookNotes((notes) => [note, ...notes]);\n      setSelectedNote(note);\n      setDisplayMobileEditor(true);\n      setEditorMode(EditorMode.VickyMD);\n      return note;\n    },\n    [crossnote, selectedSection],\n  );\n\n  const duplicateNote = useCallback(\n    async (note: Note) => {\n      if (!crossnote) return;\n      const duplicatedNote = await crossnote.duplicateNote(\n        note.notebook,\n        note.filePath,\n      );\n      setNotebookNotes((notes) => [duplicatedNote, ...notes]);\n      setSelectedNote(duplicatedNote);\n    },\n    [crossnote],\n  );\n\n  const _setSelectedNotebook = useCallback(\n    (notebook: Notebook) => {\n      localStorage.setItem(\"selectedNotebookID\", notebook._id);\n      setSelectedNotebook(notebook);\n      if (notebook.gitURL) {\n        browserHistory.push(\n          //`${env.approot}/?repo=${encodeURIComponent(\n          `/?repo=${encodeURIComponent(\n            notebook.gitURL,\n          )}&branch=${encodeURIComponent(notebook.gitBranch || \"master\")}`,\n        );\n      } else {\n        //browserHistory.push(`${env.approot}/?notebookID=${notebook._id}`);\n        browserHistory.push(`/?notebookID=${notebook._id}`);\n      }\n    },\n    [setSelectedNotebook],\n  );\n\n  const addNotebook = useCallback(\n    async (\n      name: string,\n      gitURL: string,\n      gitBranch: string,\n      gitUsername: string,\n      gitPassword: string,\n      gitRememberCredentials: boolean,\n      gitCorsProxy: string,\n    ) => {\n      setIsAddingNotebook(true);\n      try {\n        if (\n          gitURL.length &&\n          notebooks.find(\n            (nb) => nb.gitBranch === gitBranch && nb.gitURL === gitURL,\n          )\n        ) {\n          setIsAddingNotebook(false);\n          throw new Error(\"error/notebook-already-exists\");\n        }\n        const notebook = await crossnote.addNotebook({\n          name,\n          gitURL,\n          branch: gitBranch,\n          username: gitUsername,\n          password: gitPassword,\n          corsProxy: gitCorsProxy,\n          rememberCredentials: gitRememberCredentials,\n        });\n        setNotebooks((notebooks) => [notebook, ...notebooks]);\n        _setSelectedNotebook(notebook);\n        setIsAddingNotebook(false);\n      } catch (error) {\n        setIsAddingNotebook(false);\n        throw error;\n      }\n    },\n    [crossnote, notebooks, _setSelectedNotebook],\n  );\n\n  const updateNotebook = useCallback(\n    async (notebook: Notebook) => {\n      if (!crossnote) {\n        return;\n      }\n      try {\n        await crossnote.updateNotebook(notebook);\n        setNotebooks((notebooks) => [...notebooks]);\n      } catch (error) {}\n    },\n    [crossnote],\n  );\n\n  const deleteNotebook = useCallback(\n    async (notebook: Notebook) => {\n      if (!crossnote) {\n        return;\n      }\n      try {\n        await crossnote.deleteNotebook(notebook._id);\n      } catch (error) {}\n      let selectedNotebook: Notebook = null;\n      setNotebooks((notebooks) =>\n        notebooks.filter((n) => {\n          if (!selectedNotebook && n._id !== notebook._id) {\n            selectedNotebook = n;\n          }\n          return n._id !== notebook._id;\n        }),\n      );\n      _setSelectedNotebook(selectedNotebook);\n    },\n    [crossnote, _setSelectedNotebook],\n  );\n\n  const hardResetNotebook = useCallback(\n    async (notebook: Notebook) => {\n      if (!crossnote) {\n        return;\n      }\n      try {\n        await crossnote.hardResetNotebook(notebook, notebook.localSha);\n\n        // TODO: Refactor\n        setIsLoadingNotebook(true);\n        const notes = await crossnote.listNotes({\n          notebook: notebook,\n          dir: \"./\",\n          includeSubdirectories: true,\n        });\n        setSelectedNote(null);\n        setNotebookNotes(notes);\n        setNotebookDirectories(\n          await crossnote.getNotebookDirectoriesFromNotes(notes),\n        );\n        setHasSummaryMD(await crossnote.hasSummaryMD(notebook));\n        setNotebookTagNode(crossnote.getNotebookTagNodeFromNotes(notes));\n        setIsLoadingNotebook(false);\n      } catch (error) {}\n    },\n    [crossnote],\n  );\n\n  const pushNotebook = useCallback(\n    async (args: PushNotebookArgs) => {\n      if (!crossnote) {\n        return;\n      }\n      setIsPushingNotebook(true);\n      try {\n        await crossnote.pushNotebook(args);\n        setIsPushingNotebook(false);\n        // TODO: Refactor. The code below is the same as pullNotebook\n        const notes = await crossnote.listNotes({\n          notebook: args.notebook,\n          dir: \"./\",\n          includeSubdirectories: true,\n        });\n        setNotebookNotes(notes);\n        setNotebookDirectories(\n          await crossnote.getNotebookDirectoriesFromNotes(notes),\n        );\n        setHasSummaryMD(await crossnote.hasSummaryMD(args.notebook));\n        setNotebookTagNode(crossnote.getNotebookTagNodeFromNotes(notes));\n\n        if (selectedNote) {\n          const newNote = notes.find(\n            (n) => n.filePath === selectedNote.filePath,\n          );\n          if (!newNote) {\n            setSelectedNote(notes[0]); // TODO: pull might remove currently selectedNote\n          } else {\n            setSelectedNote(newNote);\n          }\n        } else {\n          setSelectedNote(notes[0]);\n        }\n        setNeedsToRefreshNotes(true);\n      } catch (error) {\n        setIsPushingNotebook(false);\n        throw error;\n      }\n    },\n    [crossnote, selectedNote],\n  );\n\n  const pullNotebook = useCallback(\n    async (args: PullNotebookArgs) => {\n      if (!crossnote) {\n        return;\n      }\n      setIsPullingNotebook(true);\n      try {\n        // NOTE: Code here might have bug\n        await crossnote.pullNotebook(args);\n        setIsPullingNotebook(false);\n        const notes = await crossnote.listNotes({\n          notebook: args.notebook,\n          dir: \"./\",\n          includeSubdirectories: true,\n        });\n        setNotebookNotes(notes);\n        setNotebookDirectories(\n          await crossnote.getNotebookDirectoriesFromNotes(notes),\n        );\n        setHasSummaryMD(await crossnote.hasSummaryMD(args.notebook));\n        setNotebookTagNode(crossnote.getNotebookTagNodeFromNotes(notes));\n\n        if (selectedNote) {\n          const newNote = notes.find(\n            (n) => n.filePath === selectedNote.filePath,\n          );\n          if (!newNote) {\n            setSelectedNote(notes[0]); // TODO: pull might remove currently selectedNote\n          } else {\n            setSelectedNote(newNote);\n          }\n        } else {\n          setSelectedNote(notes[0]);\n        }\n        setNeedsToRefreshNotes(true);\n      } catch (error) {\n        setIsPullingNotebook(false);\n        throw error;\n      }\n    },\n    [crossnote, selectedNote],\n  );\n\n  const checkoutNote = useCallback(\n    async (note: Note) => {\n      if (!crossnote) {\n        return;\n      }\n      const newNote = await crossnote.checkoutNote(note);\n      if (newNote) {\n        setNotebookNotes((notes) =>\n          notes.map((n) => {\n            if (n.filePath === newNote.filePath) {\n              return newNote;\n            } else {\n              return n;\n            }\n          }),\n        );\n        setNotes((notes) =>\n          notes.map((n) => {\n            if (n.filePath === newNote.filePath) {\n              return newNote;\n            } else {\n              return n;\n            }\n          }),\n        );\n        setSelectedNote(newNote);\n      } else {\n        // The note is deleted after checkout\n        setNotebookNotes((notes) => {\n          const newNotes = notes.filter((n) => n.filePath !== note.filePath);\n          crossnote\n            .getNotebookDirectoriesFromNotes(newNotes)\n            .then((directories) => {\n              setNotebookDirectories(directories);\n            });\n          crossnote\n            .hasSummaryMD(selectedNotebook)\n            .then((exists) => setHasSummaryMD(exists));\n          setNotebookTagNode(crossnote.getNotebookTagNodeFromNotes(newNotes));\n          return newNotes;\n        });\n        setNotes((notes) => {\n          const newNotes = notes.filter((n) => n.filePath !== note.filePath);\n          setSelectedNote(newNotes[0]);\n          return newNotes;\n        });\n      }\n    },\n    [crossnote, selectedNotebook],\n  );\n\n  const updateNotebookTagNode = useCallback(() => {\n    if (!crossnote) return;\n    setNotebookTagNode(crossnote.getNotebookTagNodeFromNotes(notebookNotes));\n  }, [notebookNotes, crossnote]);\n\n  const getNote = useCallback(\n    async (notebook: Notebook, filePath: string) => {\n      if (!crossnote) {\n        return;\n      }\n      return await crossnote.getNote(notebook, filePath);\n    },\n    [crossnote],\n  );\n\n  const openNoteAtPath = useCallback(\n    (filePath: string) => {\n      if (!crossnote) return;\n\n      if (!filePath.endsWith(\".md\")) {\n        filePath += \".md\";\n      }\n\n      const note = notebookNotes.find((n) => n.filePath === filePath);\n      if (note) {\n        _setSelectedNote(note);\n      } else {\n        createNewNote(\n          selectedNotebook,\n          filePath,\n          \"# \" + path.basename(filePath).replace(/\\.md$/, \"\"),\n        );\n      }\n    },\n    [\n      crossnote,\n      notebookNotes,\n      selectedNotebook,\n      _setSelectedNote,\n      createNewNote,\n    ],\n  );\n\n  const loadAttachments = useCallback(async () => {\n    setIsLoadingAttachments(true);\n    const attachments = crossnote.listAttachments({\n      notebook: selectedNotebook,\n      dir: \"./\",\n      includeSubdirectories: true,\n    });\n    setIsLoadingAttachments(false);\n    return attachments;\n  }, [crossnote, selectedNotebook]);\n\n  useEffect(() => {\n    if (!crossnote || initialized) {\n      return;\n    }\n\n    (async () => {\n      const notebooks = await crossnote.listNotebooks();\n      let notebook: Notebook = null;\n      if (notebooks.length) {\n        setNotebooks(notebooks);\n        const selectedNotebookID = localStorage.getItem(\"selectedNotebookID\");\n        notebook = notebooks.find((n) => n._id === selectedNotebookID);\n        if (!notebook) {\n          notebook = notebooks[0];\n        }\n        setSelectedNotebook(notebook); // TODO: <= default selected\n        setInitialized(true);\n      } else {\n        /*\n        notebook = await crossnote.cloneNotebook({\n          corsProxy: \"https://crossnote.app/cors/\",\n          gitURL: \"https://github.com/0xGG/crossnote-doc.git\"\n        });\n        */\n        notebook = await crossnote.addNotebook({\n          name: \"Drafts\",\n          corsProxy: \"https://crossnote.app/cors/\",\n          gitURL: \"\",\n        });\n        await pfs.writeFile(\n          path.resolve(notebook.dir, \"README.md\"),\n          `# Welcome to Crossnote 😊\n\nIf you want to know more about this project,  \nplease download and read the [Welcome notebook](https://crossnote.app/?repo=https%3A%2F%2Fgithub.com%2F0xGG%2Fwelcome-notebook.git&branch=master&filePath=README.md).\n\nPlease also check the [Explore](https://crossnote.app/explore) section to discover the public notebooks shared by other users ;)\n`,\n        );\n        setNotebooks([notebook]);\n        setSelectedNotebook(notebook);\n        setInitialized(true);\n        // TODO: create empty note and add `We suggest you to add [Welcome to crossnote]() notebook ;)`\n      }\n    })();\n  }, [crossnote, initialized]);\n\n  useEffect(() => {\n    if (!crossnote) {\n      return;\n    }\n    (async () => {\n      setIsLoadingNotebook(true);\n      setNotebookNotes([]);\n      setNotebookDirectories({\n        name: \".\",\n        path: \".\",\n        children: [],\n      });\n      setHasSummaryMD(false);\n      setNotebookTagNode({\n        name: \".\",\n        path: \".\",\n        children: [],\n      });\n\n      const notes = await crossnote.listNotes({\n        notebook: selectedNotebook,\n        dir: \"./\",\n        includeSubdirectories: true,\n      });\n      setSelectedNote(null);\n      setNotebookNotes(notes);\n      setNotebookDirectories(\n        await crossnote.getNotebookDirectoriesFromNotes(notes),\n      );\n      setHasSummaryMD(await crossnote.hasSummaryMD(selectedNotebook));\n      setNotebookTagNode(crossnote.getNotebookTagNodeFromNotes(notes));\n      setIsLoadingNotebook(false);\n    })();\n  }, [crossnote, selectedNotebook]);\n\n  useEffect(() => {\n    if (crossnote && selectedNotebook) {\n      setSelectedSection({ type: SelectedSectionType.Notes });\n    }\n  }, [crossnote, selectedNotebook]);\n\n  useEffect(() => {\n    if (crossnote && selectedNotebook && notebookNotes) {\n      if (\n        notebookNotes.length &&\n        notebookNotes[0].notebook._id !== selectedNotebook._id\n      ) {\n        return;\n      }\n\n      let notes: Note[] = [];\n      if (selectedSection.type === SelectedSectionType.Notes) {\n        notes = [...notebookNotes];\n      } else if (selectedSection.type === SelectedSectionType.Todo) {\n        notes = notebookNotes.filter((note) =>\n          note.markdown.match(/(\\*|-|\\d+\\.)\\s\\[(\\s+|x|X)\\]\\s/gm),\n        );\n      } else if (selectedSection.type === SelectedSectionType.Today) {\n        notes = notebookNotes.filter(\n          (note) => Date.now() - note.config.modifiedAt.getTime() <= OneDay,\n        );\n      } else if (selectedSection.type === SelectedSectionType.Tagged) {\n        notes = notebookNotes.filter((note) => note.config.tags.length > 0);\n      } else if (selectedSection.type === SelectedSectionType.Untagged) {\n        notes = notebookNotes.filter((note) => note.config.tags.length === 0);\n      } else if (selectedSection.type === SelectedSectionType.Tag) {\n        notes = notebookNotes.filter((note) => {\n          const tags = note.config.tags;\n          return tags.find(\n            (tag) =>\n              (tag.toLocaleLowerCase() + \"/\").indexOf(\n                selectedSection.path + \"/\",\n              ) === 0,\n          );\n        });\n      } else if (selectedSection.type === SelectedSectionType.Conflicted) {\n        notes = notebookNotes.filter((note) => {\n          return crossnote.markdownHasConflicts(note.markdown);\n        });\n      } else if (selectedSection.type === SelectedSectionType.Encrypted) {\n        notes = notebookNotes.filter((note) => {\n          return note.config.encryption;\n        });\n      } else if (selectedSection.type === SelectedSectionType.Wiki) {\n        // Do nothing here\n      } else {\n        // SelectedSectionType.Directory\n        if (includeSubdirectories) {\n          notes = notebookNotes.filter(\n            (note) => note.filePath.indexOf(selectedSection.path + \"/\") === 0,\n          );\n        } else {\n          notes = notebookNotes.filter(\n            (note) => path.dirname(note.filePath) === selectedSection.path,\n          );\n        }\n      }\n\n      if (orderBy === OrderBy.ModifiedAt) {\n        if (orderDirection === OrderDirection.DESC) {\n          notes.sort(\n            (a, b) =>\n              b.config.modifiedAt.getTime() - a.config.modifiedAt.getTime(),\n          );\n        } else {\n          notes.sort(\n            (a, b) =>\n              a.config.modifiedAt.getTime() - b.config.modifiedAt.getTime(),\n          );\n        }\n      } else if (orderBy === OrderBy.CreatedAt) {\n        if (orderDirection === OrderDirection.DESC) {\n          notes.sort(\n            (a, b) =>\n              b.config.createdAt.getTime() - a.config.createdAt.getTime(),\n          );\n        } else {\n          notes.sort(\n            (a, b) =>\n              a.config.createdAt.getTime() - b.config.createdAt.getTime(),\n          );\n        }\n      } else if (orderBy === OrderBy.Title) {\n        if (orderDirection === OrderDirection.DESC) {\n          notes.sort((a, b) =>\n            (\n              (b.config.encryption && b.config.encryption.title) ||\n              getHeaderFromMarkdown(b.markdown)\n            ).localeCompare(\n              (a.config.encryption && a.config.encryption.title) ||\n                getHeaderFromMarkdown(a.markdown),\n            ),\n          );\n        } else {\n          notes.sort((a, b) =>\n            (\n              (a.config.encryption && a.config.encryption.title) ||\n              getHeaderFromMarkdown(a.markdown)\n            ).localeCompare(\n              (b.config.encryption && b.config.encryption.title) ||\n                getHeaderFromMarkdown(b.markdown),\n            ),\n          );\n        }\n      }\n\n      setNotes(notes);\n    }\n  }, [\n    selectedSection,\n    crossnote,\n    selectedNotebook,\n    includeSubdirectories,\n    notebookNotes,\n    orderBy,\n    orderDirection,\n  ]);\n\n  useEffect(() => {\n    if (\n      notes.length &&\n      !selectedNote &&\n      !pendingNote &&\n      homeSection === HomeSection.Notebooks\n    ) {\n      _setSelectedNote(notes[0]);\n    }\n  }, [notes, selectedNote, pendingNote, _setSelectedNote, homeSection]);\n\n  useEffect(() => {\n    if (selectedNote) {\n      if (selectedNote.markdown.length) {\n        setEditorMode(EditorMode.Preview);\n      } else {\n        setEditorMode(EditorMode.VickyMD);\n      }\n    } else {\n      setEditorMode(EditorMode.Preview);\n    }\n  }, [selectedNote]);\n\n  // Find and select the pending note\n  useEffect(() => {\n    if (!pendingNote || !initialized || isLoadingNotebook) {\n      return;\n    }\n    if (selectedNote && selectedNote.filePath === pendingNote.filePath) {\n      setPendingNote(null);\n      return;\n    }\n\n    // TODO: Also check if the notebook matches\n    const note = notebookNotes.find((n) => n.filePath === pendingNote.filePath);\n    if (note) {\n      setSelectedNote(note);\n    }\n    setPendingNote(null); // note doesn't exist\n  }, [\n    initialized,\n    isLoadingNotebook,\n    pendingNote,\n    selectedNote,\n    notebookNotes,\n  ]);\n\n  // TODO: This script should be moved to background (serviceWorker?)\n  useInterval(async () => {\n    if (isPerformingAutoFetch) {\n      return;\n    }\n    setIsPerformingAutoFetch(true);\n    for (let i = 0; i < notebooks.length; i++) {\n      const notebook = notebooks[i];\n      if (\n        notebook.autoFetchPeriod >= 1000 &&\n        Date.now() - notebook.fetchedAt.getTime() >= notebook.autoFetchPeriod &&\n        notebook.gitURL.length > 0 &&\n        notebook.localSha === notebook.remoteSha\n      ) {\n        // TODO:  Run tasks in parallel instead of running one by one\n        try {\n          const changed = await crossnote.fetchNotebook({ notebook });\n          if (changed) {\n            setNeedsToRefreshNotes(true);\n          }\n        } catch (error) {\n          console.log(error);\n        }\n      }\n    }\n    setIsPerformingAutoFetch(false);\n  }, 60000); // Check every 1 minute\n\n  return {\n    crossnote,\n    initialized,\n    notebooks,\n    selectedNotebook,\n    setSelectedNotebook: _setSelectedNotebook,\n    notes,\n    selectedNote,\n    setSelectedNote: _setSelectedNote,\n    selectedAttachment,\n    setSelectedAttachment,\n    updateNoteMarkdown,\n    createNewNote,\n    selectedSection,\n    setSelectedSection,\n    includeSubdirectories,\n    setIncludeSubdirectories,\n    deleteNote,\n    changeNoteFilePath,\n    renameDirectory,\n    deleteDirectory,\n    renameTag,\n    deleteTag,\n    duplicateNote,\n    notebookDirectories,\n    notebookTagNode,\n    addNotebook,\n    isAddingNotebook,\n    isPushingNotebook,\n    isPullingNotebook,\n    isLoadingAttachments,\n    updateNotebook,\n    deleteNotebook,\n    hardResetNotebook,\n    pushNotebook,\n    pullNotebook,\n    checkoutNote,\n    displayMobileEditor,\n    setDisplayMobileEditor,\n    displayAttachmentEditor,\n    setDisplayAttachmentEditor,\n    updateNotebookTagNode,\n    getNote,\n    isLoadingNotebook,\n    openNoteAtPath,\n    loadAttachments,\n    orderBy,\n    setOrderBy,\n    orderDirection,\n    setOrderDirection,\n    hasSummaryMD,\n    wikiTOCElement,\n    setWikiTOCElement,\n    editorMode,\n    setEditorMode,\n    setPendingNote,\n    needsToRefreshNotes,\n    setNeedsToRefreshNotes,\n    homeSection,\n    setHomeSection,\n  };\n}\n\nexport const CrossnoteContainer = createContainer(useCrossnoteContainer);\n","export const env = {\n  \"approot\": \"/crossnote\",\n}\n","import { createHashHistory, createBrowserHistory } from \"history\";\nimport { env } from \"../env\";\n// const hashHistory = createHashHistory();\n// export default hashHistory;\n\nexport const browserHistory = createBrowserHistory({basename: env.approot});\n","import { printPreview as VickyMDPrintPreview } from \"vickymd/preview\";\nimport * as path from \"path\";\nimport { Note } from \"../lib/crossnote\";\nimport { resolveNoteImageSrc } from \"./image\";\nimport { SelectedSection, SelectedSectionType } from \"../containers/crossnote\";\nimport { globalContainers } from \"../containers/global\";\nimport { browserHistory } from \"./history\";\n\nexport function printPreview(\n  previewElement: HTMLElement,\n  bannerElement?: HTMLElement,\n  timeout = 2000,\n) {\n  return VickyMDPrintPreview(\n    previewElement,\n    bannerElement,\n    [\"body\"],\n    `\n  #notes-panel,\n  .editor-bottom-panel,\n  .drawer,\n  .CodeMirror,\n  .editor-textarea,\n  .editor-toolbar,\n  .Pane.vertical.Pane1,\n  .control-panel-wrapper {\n    display: none;\n  }\n`,\n    timeout,\n  );\n}\n\nexport function openURL(url: string = \"\", note: Note) {\n  if (!note || !url) {\n    return;\n  }\n  if (url.match(/https?:\\/\\//)) {\n    if (url.startsWith(window.location.origin)) {\n      browserHistory.push(url.replace(window.location.origin, \"\"));\n    } else {\n      window.open(url, \"_blank\"); // TODO: opener bug, check zhihu\n    }\n  } else if (url.startsWith(\"/\")) {\n    let filePath = path.relative(\n      note.notebook.dir,\n      path.resolve(note.notebook.dir, url.replace(/^\\//, \"\")),\n    );\n    globalContainers.crossnoteContainer.openNoteAtPath(\n      decodeURIComponent(filePath),\n    );\n  } else {\n    let filePath = path.relative(\n      note.notebook.dir,\n      path.resolve(\n        path.dirname(path.resolve(note.notebook.dir, note.filePath)),\n        url,\n      ),\n    );\n    globalContainers.crossnoteContainer.openNoteAtPath(\n      decodeURIComponent(filePath),\n    );\n  }\n}\n\nexport function postprocessPreview(\n  previewElement: HTMLElement,\n  note: Note,\n  isPresentationCallback?: (isPresentation: boolean) => void,\n) {\n  if (!previewElement) {\n    return;\n  }\n  const handleLinksClickEvent = (preview: HTMLElement) => {\n    // Handle link click event\n    const links = preview.getElementsByTagName(\"A\");\n    for (let i = 0; i < links.length; i++) {\n      const link = links[i] as HTMLAnchorElement;\n      link.onclick = (event) => {\n        event.preventDefault();\n        if (link.hasAttribute(\"data-topic\")) {\n          const tag = link.getAttribute(\"data-topic\");\n          if (tag.length) {\n            globalContainers.crossnoteContainer.setSelectedSection({\n              type: SelectedSectionType.Tag,\n              path: tag,\n            });\n          }\n        } else {\n          openURL(link.getAttribute(\"href\"), note);\n        }\n      };\n    }\n  };\n  const resolveImages = async (preview: HTMLElement) => {\n    const images = preview.getElementsByTagName(\"IMG\");\n    for (let i = 0; i < images.length; i++) {\n      const image = images[i] as HTMLImageElement;\n      const imageSrc = image.getAttribute(\"src\");\n      image.setAttribute(\n        \"src\",\n        await resolveNoteImageSrc(note, decodeURIComponent(imageSrc)),\n      );\n    }\n  };\n\n  if (\n    previewElement.childElementCount &&\n    previewElement.children[0].tagName.toUpperCase() === \"IFRAME\"\n  ) {\n    // presentation\n    previewElement.style.maxWidth = \"100%\";\n    previewElement.style.height = \"100%\";\n    previewElement.style.overflow = \"hidden !important\";\n    handleLinksClickEvent(\n      (previewElement.children[0] as HTMLIFrameElement).contentDocument\n        .body as HTMLElement,\n    );\n    resolveImages(\n      (previewElement.children[0] as HTMLIFrameElement).contentDocument\n        .body as HTMLElement,\n    );\n    if (isPresentationCallback) {\n      isPresentationCallback(true);\n    }\n  } else {\n    // normal\n    // previewElement.style.maxWidth = `${EditorPreviewMaxWidth}px`;\n    previewElement.style.height = \"100%\";\n    previewElement.style.overflow = \"hidden !important\";\n    handleLinksClickEvent(previewElement);\n    resolveImages(previewElement);\n    if (isPresentationCallback) {\n      isPresentationCallback(false);\n    }\n  }\n}\n","import React, { useState, useEffect, useCallback } from \"react\";\nimport {\n  Dialog,\n  DialogTitle,\n  DialogContent,\n  DialogActions,\n  Button,\n  Box,\n  TextField,\n} from \"@material-ui/core\";\nimport { createStyles, makeStyles, Theme } from \"@material-ui/core/styles\";\nimport clsx from \"clsx\";\nimport { Editor as CodeMirrorEditor, TextMarker } from \"codemirror\";\nimport { useTranslation } from \"react-i18next\";\nimport { resolveNoteImageSrc } from \"../utilities/image\";\nimport { Note } from \"../lib/crossnote\";\n\ninterface Props {\n  open: boolean;\n  onClose: () => void;\n  editor: CodeMirrorEditor;\n  marker: TextMarker;\n  imageElement: HTMLImageElement;\n  note: Note;\n}\n\nconst useStyles = makeStyles((theme: Theme) =>\n  createStyles({\n    imageWrapper: {\n      textAlign: \"center\",\n    },\n    imagePreview: {\n      maxWidth: \"100%\",\n      maxHeight: \"400px\",\n    },\n  }),\n);\n\nexport default function EditImageDialog(props: Props) {\n  const classes = useStyles(props);\n  const { t } = useTranslation();\n  const editor = props.editor;\n  const marker = props.marker;\n  const imageElement = props.imageElement;\n  const [imageSrc, setImageSrc] = useState<string>(\"\");\n  const [imageAlt, setImageAlt] = useState<string>(\"\");\n  const [imageTitle, setImageTitle] = useState<string>(\"\");\n  const [finalImageSrc, setFinalImageSrc] = useState<string>(\"\");\n\n  const deleteImage = useCallback(() => {\n    if (!imageElement || !editor || !marker) {\n      return;\n    }\n    const pos = marker.find();\n    editor.replaceRange(\"\", pos.from, pos.to);\n    props.onClose();\n  }, [imageElement, editor, marker, props]);\n\n  const updateImage = useCallback(() => {\n    if (!imageElement || !editor || !marker) {\n      return;\n    }\n    const pos = marker.find();\n    if (!pos) return;\n    if (imageTitle.trim().length) {\n      editor.replaceRange(\n        `![${imageAlt.trim()}](${imageSrc.trim()} ${JSON.stringify(\n          imageTitle,\n        )})`,\n        pos.from,\n        pos.to,\n      );\n    } else {\n      editor.replaceRange(\n        `![${imageAlt.trim()}](${imageSrc.trim()})`,\n        pos.from,\n        pos.to,\n      );\n    }\n    props.onClose();\n  }, [imageElement, editor, marker, props, imageAlt, imageSrc, imageTitle]);\n\n  useEffect(() => {\n    if (imageElement && marker && editor) {\n      setFinalImageSrc(\"\");\n      setImageSrc(\n        imageElement.getAttribute(\"data-src\") || imageElement.src || \"\",\n      );\n      setImageTitle(imageElement.title || \"\");\n      setImageAlt(imageElement.alt || \"\");\n    }\n  }, [imageElement, marker, editor]);\n\n  useEffect(() => {\n    if (!props.note) {\n      return;\n    }\n    resolveNoteImageSrc(props.note, imageSrc)\n      .then((finalImageSrc) => {\n        setFinalImageSrc(finalImageSrc);\n      })\n      .catch((error) => {\n        setFinalImageSrc(\"\");\n      });\n  }, [imageSrc, props.note]);\n\n  if (!editor || !marker || !imageElement) {\n    return null;\n  }\n\n  return (\n    <Dialog open={props.open} onClose={props.onClose} style={{ zIndex: 3001 }}>\n      <DialogTitle>{t(\"edit-image-dialog/title\")}</DialogTitle>\n      <DialogContent style={{ width: \"400px\", maxWidth: \"100%\" }}>\n        <Box className={clsx(classes.imageWrapper)}>\n          <img\n            className={clsx(classes.imagePreview)}\n            src={finalImageSrc}\n            alt={imageAlt}\n            title={imageTitle}\n          ></img>{\" \"}\n        </Box>\n        <TextField\n          autoFocus={true}\n          value={imageSrc}\n          helperText={t(\"edit-image-dialog/image-url\")}\n          fullWidth={true}\n          onChange={(event) => setImageSrc(event.target.value)}\n        ></TextField>\n        <TextField\n          autoFocus={true}\n          value={imageTitle}\n          helperText={t(\"edit-image-dialog/image-title\")}\n          fullWidth={true}\n          onChange={(event) => setImageTitle(event.target.value)}\n        ></TextField>\n        <TextField\n          autoFocus={true}\n          value={imageAlt}\n          helperText={t(\"edit-image-dialog/image-alt-text\")}\n          fullWidth={true}\n          onChange={(event) => setImageAlt(event.target.value)}\n        ></TextField>\n      </DialogContent>\n      <DialogActions>\n        <Button variant={\"contained\"} color={\"primary\"} onClick={updateImage}>\n          {t(\"general/update\")}\n        </Button>\n        <Button variant={\"contained\"} color={\"secondary\"} onClick={deleteImage}>\n          {t(\"general/Delete\")}\n        </Button>\n        <Button onClick={props.onClose}> {t(\"general/cancel\")}</Button>\n      </DialogActions>\n    </Dialog>\n  );\n}\n","import { WidgetCreator, WidgetArgs } from \"vickymd/widget\";\nimport React, { useState, useEffect } from \"react\";\nimport ReactDOM from \"react-dom\";\nimport {\n  Card,\n  Typography,\n  IconButton,\n  Box,\n  TextField,\n  Button,\n  Dialog,\n  DialogContent,\n  DialogActions,\n} from \"@material-ui/core\";\nimport {\n  createStyles,\n  makeStyles,\n  Theme,\n  ThemeProvider,\n} from \"@material-ui/core/styles\";\nimport clsx from \"clsx\";\nimport {\n  CardPlus,\n  Close,\n  ContentSave,\n  Cancel,\n  Plus,\n  TrashCan,\n  Pencil,\n} from \"mdi-material-ui\";\nimport { useTranslation } from \"react-i18next\";\n\n// @ts-ignore\nimport Board from \"@lourenci/react-kanban\";\nimport { Editor as CodeMirrorEditor, TextMarker } from \"codemirror\";\nimport { renderPreview } from \"vickymd/preview\";\nimport { globalContainers } from \"../../../containers/global\";\nimport { setTheme } from \"../../../themes/manager\";\nimport { openURL, postprocessPreview } from \"../../../utilities/preview\";\nimport { resolveNoteImageSrc } from \"../../../utilities/image\";\nimport EditImageDialog from \"../../../components/EditImageDialog\";\nconst VickyMD = require(\"vickymd/core\");\n\nconst useStyles = makeStyles((theme: Theme) =>\n  createStyles({\n    columnHeader: {\n      width: \"256px\",\n      maxWidth: \"100%\",\n      display: \"flex\",\n      alignItems: \"center\",\n      justifyContent: \"space-between\",\n      color: \"#000\", // BUG: TODO: Wait for react-kanban styling support\n    },\n    kanbanCard: {\n      width: \"256px\",\n      maxWidth: \"100%\",\n      position: \"relative\",\n      backgroundColor: theme.palette.background.paper,\n      color: theme.palette.text.primary,\n      [theme.breakpoints.down(\"sm\")]: {\n        marginTop: \"4px\",\n        marginBottom: \"4px\",\n      },\n    },\n    editorWrapper: {\n      // height: \"160px\",\n      // border: \"2px solid #96c3e6\",\n      \"& .CodeMirror-gutters\": {\n        display: \"none\",\n      },\n    },\n    textarea: {\n      width: \"100%\",\n      height: \"100%\",\n    },\n    preview: {\n      padding: theme.spacing(2),\n    },\n  }),\n);\n\ninterface KanbanCard {\n  id: number;\n  title: string;\n  description: string;\n}\n\ninterface kanbanColumn {\n  id: number;\n  title: string;\n  wip: boolean;\n  cards: KanbanCard[];\n}\n\ninterface KanbanBoard {\n  columns: kanbanColumn[];\n}\n\ninterface KanbanColumnHeaderProps {\n  column: kanbanColumn;\n  board: KanbanBoard;\n  refreshBoard: (board: Board) => void;\n  isPreview: boolean;\n}\n\nfunction KanbanColumnHeaderDisplay(props: KanbanColumnHeaderProps) {\n  const classes = useStyles(props);\n  const { t } = useTranslation();\n  const column = props.column;\n  const board = props.board;\n  const isPreview = props.isPreview;\n  const refreshBoard = props.refreshBoard;\n  const [clickedTitle, setClickedTitle] = useState<boolean>(false);\n  const [titleValue, setTitleValue] = useState<string>(column.title);\n\n  useEffect(() => {\n    if (!clickedTitle && titleValue !== column.title) {\n      column.title = titleValue || t(\"general/Untitled\");\n      setTitleValue(column.title);\n      refreshBoard(board);\n    }\n  }, [clickedTitle, board, column.title, titleValue, t, refreshBoard]);\n\n  return (\n    <Box className={clsx(classes.columnHeader)}>\n      <Box>\n        {clickedTitle ? (\n          <TextField\n            value={titleValue}\n            onChange={(event) => {\n              setTitleValue(event.target.value);\n            }}\n            onBlur={() => {\n              setClickedTitle(false);\n            }}\n            onKeyUp={(event) => {\n              if (event.which === 13) {\n                setClickedTitle(false);\n              }\n            }}\n          ></TextField>\n        ) : (\n          <Typography\n            variant={\"body1\"}\n            style={{ cursor: \"text\" }}\n            onClick={() => {\n              if (!isPreview) {\n                setClickedTitle(true);\n              }\n            }}\n          >\n            {titleValue}\n          </Typography>\n        )}\n      </Box>\n      {!isPreview && (\n        <Box>\n          <IconButton\n            onClick={() => {\n              const card: KanbanCard = {\n                id: Date.now(),\n                title: \"\", //\"Card \" + column.cards.length,\n                description: t(\"general/empty\"),\n              };\n              if (column) {\n                column.cards.push(card);\n              }\n              props.refreshBoard(board);\n            }}\n          >\n            <CardPlus></CardPlus>\n          </IconButton>\n          <IconButton\n            onClick={() => {\n              board.columns = board.columns.filter((l) => column.id !== l.id);\n              props.refreshBoard(board);\n            }}\n          >\n            <Close></Close>\n          </IconButton>\n        </Box>\n      )}\n    </Box>\n  );\n}\n\ninterface KanbanCardProps {\n  card: KanbanCard;\n  board: KanbanBoard;\n  refreshBoard: (board: Board) => void;\n  isPreview: boolean;\n}\nfunction KanbanCardDisplay(props: KanbanCardProps) {\n  const classes = useStyles(props);\n  const board = props.board;\n  const card = props.card;\n  const isPreview = props.isPreview;\n  const note = globalContainers.crossnoteContainer.selectedNote;\n  const [textAreaElement, setTextAreaElement] = useState<HTMLTextAreaElement>(\n    null,\n  );\n  const [previewElement, setPreviewElement] = React.useState<HTMLElement>(null);\n\n  const [editor, setEditor] = useState<CodeMirrorEditor>(null);\n  const [description, setDescription] = useState<string>(card.description);\n  const [editorDialogOpen, setEditDialogOpen] = useState<boolean>(false);\n  const [editImageElement, setEditImageElement] = useState<HTMLImageElement>(\n    null,\n  );\n  const [editImageTextMarker, setEditImageTextMarker] = useState<TextMarker>(\n    null,\n  );\n  const [editImageDialogOpen, setEditImageDialogOpen] = useState<boolean>(\n    false,\n  );\n\n  const { t } = useTranslation();\n\n  useEffect(() => {\n    setDescription(card.description);\n  }, [card.description]);\n\n  useEffect(() => {\n    if (textAreaElement) {\n      const editor: CodeMirrorEditor = VickyMD.fromTextArea(textAreaElement, {\n        mode: {\n          name: \"hypermd\",\n          hashtag: true,\n        },\n        // inputStyle: \"textarea\",\n        // autofocus: false\n        keyMap: globalContainers.settingsContainer.keyMap,\n        showCursorWhenSelecting: true,\n        inputStyle: \"contenteditable\",\n      });\n      editor.setValue(card.description);\n      editor.setOption(\"lineNumbers\", false);\n      editor.setOption(\"foldGutter\", false);\n      editor.setOption(\"autofocus\", false);\n      if (isPreview) {\n        editor.setOption(\"readOnly\", \"nocursor\");\n      }\n      editor.on(\"changes\", () => {\n        setDescription(editor.getValue());\n      });\n      editor.focus();\n      /*\n      // Cause save not working\n      editor.on(\"blur\", () => {\n        setClickedPreview(false);\n        setEditor(null);\n      });\n      */\n      // editor.display.input.blur();\n      setEditor(editor);\n    }\n  }, [textAreaElement]);\n\n  useEffect(() => {\n    if (editor && globalContainers.settingsContainer.theme) {\n      setTheme({\n        editor,\n        themeName: globalContainers.settingsContainer.theme.name,\n      });\n    }\n  }, [editor]);\n\n  useEffect(() => {\n    if (previewElement) {\n      renderPreview(previewElement, card.description);\n      postprocessPreview(\n        previewElement,\n        globalContainers.crossnoteContainer.selectedNote,\n      );\n    }\n  }, [previewElement, card.description]);\n\n  useEffect(() => {\n    if (!editor) {\n      return;\n    }\n\n    const linkIconClickedHandler = (args: any) => {\n      // TODO:\n      const url = args.element.getAttribute(\"data-url\");\n      openURL(url || \"\", note);\n    };\n    editor.on(\"linkIconClicked\", linkIconClickedHandler);\n\n    const imageClickedHandler = (args: any) => {\n      const marker: TextMarker = args.marker;\n      const imageElement: HTMLImageElement = args.element;\n      imageElement.setAttribute(\n        \"data-marker-position\",\n        JSON.stringify(marker.find()),\n      );\n      setEditImageElement(imageElement);\n      setEditImageTextMarker(marker);\n      setEditImageDialogOpen(true);\n    };\n    editor.on(\"imageClicked\", imageClickedHandler);\n\n    const loadImage = async (args: any) => {\n      const element = args.element;\n      const imageSrc = element.getAttribute(\"data-src\");\n      element.setAttribute(\"src\", await resolveNoteImageSrc(note, imageSrc));\n    };\n    editor.on(\"imageReadyToLoad\", loadImage);\n\n    return () => {\n      editor.off(\"linkIconClicked\", linkIconClickedHandler);\n      editor.off(\"imageClicked\", imageClickedHandler);\n      editor.off(\"imageReadyToLoad\", loadImage);\n    };\n  }, [editor, note]);\n\n  return (\n    <Card className={clsx(classes.kanbanCard)}>\n      <div\n        className={clsx(\"preview\", classes.preview)}\n        ref={(element: HTMLElement) => {\n          setPreviewElement(element);\n        }}\n      ></div>\n      {!isPreview && (\n        <Box style={{ position: \"absolute\", top: \"0\", right: \"0\", zIndex: 99 }}>\n          <IconButton onClick={() => setEditDialogOpen(true)}>\n            <Pencil></Pencil>\n          </IconButton>\n          <IconButton\n            onClick={() => {\n              board.columns.forEach((column) => {\n                column.cards = column.cards.filter((c) => c.id !== card.id);\n              });\n              props.refreshBoard(board);\n            }}\n          >\n            <Close></Close>\n          </IconButton>\n        </Box>\n      )}\n      <Dialog\n        open={editorDialogOpen}\n        onClose={() => setEditDialogOpen(false)}\n        style={{ zIndex: 3000 }}\n      >\n        <DialogContent>\n          <Box\n            className={clsx(classes.editorWrapper)}\n            style={{ minWidth: \"300px\", maxWidth: \"100%\" }}\n          >\n            <textarea\n              className={classes.textarea}\n              ref={(element: HTMLTextAreaElement) => {\n                setTextAreaElement(element);\n              }}\n            ></textarea>\n          </Box>\n        </DialogContent>\n        <DialogActions>\n          <IconButton\n            onClick={() => {\n              card.description = description;\n              props.refreshBoard(props.board);\n              setEditDialogOpen(false);\n            }}\n          >\n            <ContentSave></ContentSave>\n          </IconButton>\n          <IconButton\n            onClick={() => {\n              if (editor) {\n                editor.setValue(card.description);\n              }\n              setDescription(card.description);\n              setEditDialogOpen(false);\n            }}\n          >\n            <Cancel></Cancel>\n          </IconButton>\n        </DialogActions>\n      </Dialog>\n\n      <EditImageDialog\n        open={editImageDialogOpen}\n        onClose={() => setEditImageDialogOpen(false)}\n        editor={editor}\n        imageElement={editImageElement}\n        marker={editImageTextMarker}\n        note={note}\n      ></EditImageDialog>\n    </Card>\n  );\n}\n\nfunction KanbanWidget(props: WidgetArgs) {\n  const classes = useStyles(props);\n  const { t } = useTranslation();\n  const [board, setBoard] = useState<KanbanBoard>(\n    props.attributes[\"board\"] || {\n      columns: [],\n    },\n  );\n\n  if (\"lanes\" in (board as any)) {\n    board.columns = (board as any).lanes;\n  }\n\n  const refreshBoard = (board: KanbanBoard) => {\n    const newBoard = Object.assign({}, board);\n    props.setAttributes({ board: newBoard });\n    setBoard(newBoard as KanbanBoard);\n  };\n\n  return (\n    <div>\n      <Board\n        renderColumnHeader={(column: kanbanColumn) => (\n          <KanbanColumnHeaderDisplay\n            column={column}\n            board={board}\n            refreshBoard={refreshBoard}\n            isPreview={props.isPreview}\n          ></KanbanColumnHeaderDisplay>\n        )}\n        renderCard={(card: KanbanCard, { dragging }: { dragging: boolean }) => {\n          return (\n            <KanbanCardDisplay\n              card={card}\n              board={board}\n              refreshBoard={refreshBoard}\n              isPreview={props.isPreview}\n            ></KanbanCardDisplay>\n          );\n        }}\n        allowAddColumn={!props.isPreview}\n        allowAddCard={!props.isPreview}\n        renderColumnAdder={(): any => {\n          return (\n            <Box style={{ marginLeft: \"16px\", marginTop: \"16px\" }}>\n              <Button\n                color={\"primary\"}\n                variant={\"outlined\"}\n                onClick={() => {\n                  board.columns.push({\n                    id: Date.now(),\n                    title: t(\"general/untitled\"),\n                    cards: [],\n                    wip: false,\n                  });\n                  refreshBoard(board);\n                }}\n              >\n                <Plus></Plus>\n                {t(\"widget/crossnote.kanban/add-column\")}\n              </Button>\n              <Button color={\"primary\"} onClick={() => props.removeSelf()}>\n                <TrashCan></TrashCan>\n              </Button>\n            </Box>\n          );\n          // return <ColumnAdder addColumn={addColumn} />;\n        }}\n        onNewColumnConfirm={(newColumn: any) => {\n          board.columns.push({ id: Date.now(), ...newColumn });\n          refreshBoard(board);\n        }}\n        disableCardDrag={props.isPreview}\n        disableColumnDrag={props.isPreview}\n        onCardDragEnd={(\n          card: KanbanCard,\n          source: { fromPosition: number; fromColumnId: number },\n          destination: { toPosition: number; toColumnId: number },\n        ) => {\n          const { fromPosition, fromColumnId } = source;\n          let { toPosition, toColumnId } = destination;\n          const fromColumn = board.columns.filter(\n            (l) => l.id === fromColumnId,\n          )[0];\n          const toColumn = board.columns.filter((l) => l.id === toColumnId)[0];\n          fromColumn.cards.splice(fromPosition, 1);\n          toColumn.cards = [\n            ...toColumn.cards.slice(0, toPosition),\n            card,\n            ...toColumn.cards.slice(toPosition, toColumn.cards.length),\n          ];\n\n          refreshBoard(board);\n        }}\n        onColumnDragEnd={(\n          b: KanbanBoard,\n          source: { fromPosition: number },\n          destination: { toPosition: number },\n        ) => {\n          const fromPosition: number = source.fromPosition;\n          const toPosition: number = destination.toPosition;\n          const fromColumn = board.columns[fromPosition];\n          const toColumn = board.columns[toPosition];\n          board.columns[toPosition] = fromColumn;\n          board.columns[fromPosition] = toColumn;\n          refreshBoard(board);\n        }}\n      >\n        {board}\n      </Board>\n    </div>\n  );\n}\n\nexport const KanbanWidgetCreator: WidgetCreator = (args) => {\n  const el = document.createElement(\"span\");\n  ReactDOM.render(\n    <ThemeProvider theme={globalContainers.settingsContainer.theme.muiTheme}>\n      <KanbanWidget {...args}></KanbanWidget>\n    </ThemeProvider>,\n    el,\n  );\n  return el;\n};\n","import gql from 'graphql-tag';\nimport * as React from 'react';\nimport * as Urql from 'urql';\nexport type Maybe<T> = T | null;\nexport type Omit<T, K extends keyof T> = Pick<T, Exclude<keyof T, K>>;\n/** All built-in and custom scalars, mapped to their actual values */\nexport interface Scalars {\n  ID: string;\n  String: string;\n  Boolean: boolean;\n  Int: number;\n  Float: number;\n  Time: any;\n  UUID: any;\n  Upload: any;\n}\n\nexport interface NotificationEventCommentWidgetMessagePosting  extends NotificationEvent {\n   __typename?: 'NotificationEventCommentWidgetMessagePosting';\n  type: NotificationEventType;\n  message: CommentWidgetMessage;\n}\n\nexport interface LinkWithGitHubAccount {\n  code: Scalars['String'];\n}\n\nexport interface GitHubUser {\n   __typename?: 'GitHubUser';\n  login: Scalars['String'];\n  avatar: Scalars['String'];\n  email: Scalars['String'];\n}\n\nexport interface WidgetInstance {\n  type: WidgetType;\n}\n\nexport interface AuthReturn {\n   __typename?: 'AuthReturn';\n  /** JSON Web Token */\n  token: Scalars['String'];\n  /** User */\n  user: User;\n}\n\nexport interface SendEmailVerificationCode {\n  email: Scalars['String'];\n}\n\nexport interface UnsubscribeFromCommentWidget {\n  widgetID: Scalars['UUID'];\n}\n\nexport interface NotificationEvent {\n  type: NotificationEventType;\n}\n\nexport interface Widget {\n   __typename?: 'Widget';\n  id: Scalars['UUID'];\n  instance: WidgetInstance;\n  owner: User;\n  description: Scalars['String'];\n  source: Scalars['String'];\n  canConfigure: Scalars['Boolean'];\n}\n\nexport interface NotificationConnection {\n   __typename?: 'NotificationConnection';\n  totalCount: Scalars['Int'];\n  pageInfo: PageInfo;\n  edges: Array<NotificationEdge>;\n}\n\nexport interface ResetPassword {\n  email: Scalars['String'];\n  verificationCode: Scalars['String'];\n  password: Scalars['String'];\n}\n\nexport interface UpdateCommentWidgetMessage {\n  messageID: Scalars['UUID'];\n  markdown: Scalars['String'];\n}\n\nexport interface StarNotebook {\n  notebookID: Scalars['UUID'];\n}\n\nexport enum NotificationEventType {\n  UserFollowing = 'USER_FOLLOWING',\n  CommentWidgetMessagePosting = 'COMMENT_WIDGET_MESSAGE_POSTING'\n}\n\nexport interface UserWidget {\n   __typename?: 'UserWidget';\n  type: WidgetType;\n  count: Scalars['Int'];\n}\n\nexport interface SignUpWithGitHubAccount {\n  username: Scalars['String'];\n  email: Scalars['String'];\n  accessToken: Scalars['String'];\n}\n\nexport interface Query {\n   __typename?: 'Query';\n  test: Scalars['String'];\n  widget: Widget;\n  notebooks: Array<Notebook>;\n  viewer: User;\n  user: User;\n  stats: Stats;\n}\n\n\nexport interface QueryWidgetArgs {\n  id: Scalars['UUID'];\n}\n\n\nexport interface QueryNotebooksArgs {\n  orderBy?: Maybe<NotebookOrderBy>;\n  query?: Maybe<Scalars['String']>;\n  page?: Maybe<Scalars['Int']>;\n  perPage?: Maybe<Scalars['Int']>;\n}\n\n\nexport interface QueryUserArgs {\n  id?: Maybe<Scalars['UUID']>;\n  username?: Maybe<Scalars['String']>;\n}\n\nexport enum WidgetType {\n  Comment = 'COMMENT'\n}\n\nexport interface PublishNotebook {\n  gitURL: Scalars['String'];\n  gitBranch: Scalars['String'];\n}\n\nexport interface PageInfo {\n   __typename?: 'PageInfo';\n  startCursor: Scalars['UUID'];\n  endCursor: Scalars['UUID'];\n  hasPreviousPage: Scalars['Boolean'];\n  hasNextPage: Scalars['Boolean'];\n}\n\nexport interface WidgetConnection {\n   __typename?: 'WidgetConnection';\n  /** Identifies the total count of items in the connection. */\n  totalCount: Scalars['Int'];\n  /** Information to aid in pagination. */\n  pageInfo: PageInfo;\n  /** A list of edges. */\n  edges: Array<WidgetEdge>;\n}\n\nexport interface CommentWidgetMessageReaction {\n   __typename?: 'CommentWidgetMessageReaction';\n  message: CommentWidgetMessage;\n  user: User;\n  reaction: Scalars['String'];\n}\n\nexport interface CommentWidgetMessage {\n   __typename?: 'CommentWidgetMessage';\n  /** Comment message ID */\n  id: Scalars['UUID'];\n  /** The comment widget that this comment belongs to */\n  widget: Widget;\n  /** Author of this comment message */\n  author: User;\n  /** Comment message (markdown content) */\n  markdown: Scalars['String'];\n  /** Created At */\n  createdAt: Scalars['Time'];\n  /** updatedAt at */\n  updatedAt: Scalars['Time'];\n  /** Reaction summaries */\n  reactionSummaries: Array<ReactionSummary>;\n}\n\n\nexport interface CommentWidgetMessageReactionSummariesArgs {\n  size?: Maybe<Scalars['Int']>;\n}\n\nexport interface Notification {\n   __typename?: 'Notification';\n  id: Scalars['UUID'];\n  createdAt: Scalars['Time'];\n  event: NotificationEvent;\n  meta: Scalars['String'];\n  receiver: User;\n  origin: User;\n}\n\nexport interface SetUserInfo {\n  name: Scalars['String'];\n  avatar: Scalars['String'];\n  cover: Scalars['String'];\n  bio: Scalars['String'];\n  location: Scalars['String'];\n  language: Scalars['String'];\n  editorCursorColor: Scalars['String'];\n}\n\nexport interface FollowUser {\n  userID: Scalars['UUID'];\n}\n\nexport interface SignInWithGitHubAccount {\n  code: Scalars['String'];\n}\n\nexport interface UpdateNotebook {\n  notebookID: Scalars['UUID'];\n  gitURL: Scalars['String'];\n  gitBranch: Scalars['String'];\n}\n\nexport interface NotificationEventUserFollowing  extends NotificationEvent {\n   __typename?: 'NotificationEventUserFollowing';\n  type: NotificationEventType;\n}\n\nexport interface NotificationEdge {\n   __typename?: 'NotificationEdge';\n  cursor: Scalars['UUID'];\n  node: Notification;\n}\n\nexport interface Stats {\n   __typename?: 'Stats';\n  numUsers: Scalars['Int'];\n  numNotebooks: Scalars['Int'];\n}\n\nexport enum NotebookOrderBy {\n  TotalStarsCount = 'TOTAL_STARS_COUNT',\n  DailyStarsCount = 'DAILY_STARS_COUNT',\n  WeeklyStarsCount = 'WEEKLY_STARS_COUNT',\n  MonthlyStarsCount = 'MONTHLY_STARS_COUNT'\n}\n\nexport interface CommentWidgetMessageEdge {\n   __typename?: 'CommentWidgetMessageEdge';\n  /** A cursor for use in pagination. */\n  cursor: Scalars['UUID'];\n  /** The item at the end of the edge. */\n  node: CommentWidgetMessage;\n}\n\nexport interface CommentWidgetMessageConnection {\n   __typename?: 'CommentWidgetMessageConnection';\n  /** Identifies the total count of items in the connection. */\n  totalCount: Scalars['Int'];\n  /** Information to aid in pagination. */\n  pageInfo: PageInfo;\n  /** A list of edges. */\n  edges: Array<CommentWidgetMessageEdge>;\n}\n\nexport interface AddReactionToCommentWidget {\n  widgetID: Scalars['UUID'];\n  reaction: Scalars['String'];\n}\n\nexport interface NotebookConnection {\n   __typename?: 'NotebookConnection';\n  totalCount: Scalars['Int'];\n  pageInfo: PageInfo;\n  edges: Array<NotebookEdge>;\n}\n\nexport interface DeleteNotification {\n  notificationID: Scalars['UUID'];\n}\n\nexport interface ReactionSummary {\n   __typename?: 'ReactionSummary';\n  count: Scalars['Int'];\n  reaction: Scalars['String'];\n  selfAuthored: Scalars['Boolean'];\n}\n\nexport interface CommentWidget {\n   __typename?: 'CommentWidget';\n  /** Widget ID */\n  id: Scalars['UUID'];\n  /** Widget creation time */\n  createdAt: Scalars['Time'];\n  /** Widget update time */\n  updatedAt: Scalars['Time'];\n  /** Count of messages in this comment widget */\n  messagesCount: Scalars['Int'];\n  /** Count of reactions in this comment widget */\n  reactionsCount: Scalars['Int'];\n  /** Check if the viewer subscribed to the comment widget */\n  subscribed: Scalars['Boolean'];\n  /** Comment messages */\n  messages: CommentWidgetMessageConnection;\n  /** Reaction summaries */\n  reactionSummaries: Array<ReactionSummary>;\n}\n\n\nexport interface CommentWidgetMessagesArgs {\n  before?: Maybe<Scalars['UUID']>;\n  after?: Maybe<Scalars['UUID']>;\n  first?: Maybe<Scalars['Int']>;\n  last?: Maybe<Scalars['Int']>;\n}\n\n\nexport interface CommentWidgetReactionSummariesArgs {\n  size?: Maybe<Scalars['Int']>;\n}\n\n\nexport interface SignInInput {\n  /** Email */\n  email: Scalars['String'];\n  /** Password */\n  password: Scalars['String'];\n}\n\nexport interface PostCommentWidgetMessage {\n  widgetID: Scalars['UUID'];\n  markdown: Scalars['String'];\n  notifyUsers: Array<Maybe<Scalars['String']>>;\n}\n\nexport interface NotebookEdge {\n   __typename?: 'NotebookEdge';\n  cursor: Scalars['UUID'];\n  node: Notebook;\n}\n\nexport interface UpdateWidget {\n  id: Scalars['UUID'];\n  description: Scalars['String'];\n  source: Scalars['String'];\n}\n\nexport interface SignUpInput {\n  /** Username */\n  username: Scalars['String'];\n  /** Email */\n  email: Scalars['String'];\n  /** Password */\n  password: Scalars['String'];\n}\n\nexport interface RemoveReactionFromCommentWidgetMessage {\n  messageID: Scalars['UUID'];\n  reaction: Scalars['String'];\n}\n\nexport interface UnpublishNotebook {\n  notebookID: Scalars['UUID'];\n}\n\n\nexport interface CommentWidgetInstance  extends WidgetInstance {\n   __typename?: 'CommentWidgetInstance';\n  type: WidgetType;\n  commentWidget: CommentWidget;\n}\n\nexport interface WidgetEdge {\n   __typename?: 'WidgetEdge';\n  /** A cursor for use in pagination. */\n  cursor: Scalars['UUID'];\n  /** The item at the end of the edge. */\n  node: Widget;\n}\n\nexport interface CommentWidgetReaction {\n   __typename?: 'CommentWidgetReaction';\n  widget: Widget;\n  user: User;\n  reaction: Scalars['String'];\n}\n\nexport interface Notebook {\n   __typename?: 'Notebook';\n  id: Scalars['UUID'];\n  createdAt: Scalars['Time'];\n  updatedAt: Scalars['Time'];\n  owner: User;\n  gitURL: Scalars['String'];\n  gitBranch: Scalars['String'];\n  markdown: Scalars['String'];\n  starsCount: Scalars['Int'];\n  dailyStarsCount: Maybe<Scalars['Int']>;\n  weeklyStarsCount: Maybe<Scalars['Int']>;\n  monthlyStarsCount: Maybe<Scalars['Int']>;\n  isStarred: Scalars['Boolean'];\n}\n\n\nexport interface VerifyEmail {\n  email: Scalars['String'];\n  verificationCode: Scalars['String'];\n}\n\nexport interface User {\n   __typename?: 'User';\n  id: Scalars['UUID'];\n  name: Maybe<Scalars['String']>;\n  username: Maybe<Scalars['String']>;\n  email: Maybe<Scalars['String']>;\n  verifiedEmail: Maybe<Scalars['String']>;\n  avatar: Maybe<Scalars['String']>;\n  cover: Maybe<Scalars['String']>;\n  bio: Maybe<Scalars['String']>;\n  location: Maybe<Scalars['String']>;\n  language: Maybe<Scalars['String']>;\n  createdAt: Maybe<Scalars['Time']>;\n  updatedAt: Maybe<Scalars['Time']>;\n  deletedAt: Maybe<Scalars['Time']>;\n  followingsCount: Maybe<Scalars['Int']>;\n  followersCount: Maybe<Scalars['Int']>;\n  widgetsCount: Maybe<Scalars['Int']>;\n  notebooksCount: Maybe<Scalars['Int']>;\n  starredNotebooksCount: Maybe<Scalars['Int']>;\n  isFollowing: Maybe<Scalars['Boolean']>;\n  areFriends: Maybe<Scalars['Boolean']>;\n  followings: Maybe<Array<User>>;\n  followers: Maybe<Array<User>>;\n  widgetSummaries: Array<UserWidget>;\n  widgets: WidgetConnection;\n  notifications: NotificationConnection;\n  /** Get user owned notebooks */\n  notebooks: NotebookConnection;\n  /** Get user starred notebooks */\n  starredNotebooks: NotebookConnection;\n  editorCursorColor: Maybe<Scalars['String']>;\n  githubUser: Maybe<GitHubUser>;\n}\n\n\nexport interface UserWidgetsArgs {\n  type: WidgetType;\n  before?: Maybe<Scalars['UUID']>;\n  after?: Maybe<Scalars['UUID']>;\n  first?: Maybe<Scalars['Int']>;\n  last?: Maybe<Scalars['Int']>;\n}\n\n\nexport interface UserNotificationsArgs {\n  before?: Maybe<Scalars['UUID']>;\n  after?: Maybe<Scalars['UUID']>;\n  first?: Maybe<Scalars['Int']>;\n  last?: Maybe<Scalars['Int']>;\n}\n\n\nexport interface UserNotebooksArgs {\n  before?: Maybe<Scalars['UUID']>;\n  after?: Maybe<Scalars['UUID']>;\n  first?: Maybe<Scalars['Int']>;\n  last?: Maybe<Scalars['Int']>;\n}\n\n\nexport interface UserStarredNotebooksArgs {\n  before?: Maybe<Scalars['UUID']>;\n  after?: Maybe<Scalars['UUID']>;\n  first?: Maybe<Scalars['Int']>;\n  last?: Maybe<Scalars['Int']>;\n}\n\nexport interface CreateWidget {\n  type: WidgetType;\n  description: Scalars['String'];\n  source: Scalars['String'];\n}\n\nexport interface DeleteWidget {\n  id: Scalars['UUID'];\n}\n\nexport interface RemoveReactionFromCommentWidget {\n  widgetID: Scalars['UUID'];\n  reaction: Scalars['String'];\n}\n\nexport interface AddReactionToCommentWidgetMessage {\n  messageID: Scalars['UUID'];\n  reaction: Scalars['String'];\n}\n\nexport interface SubscribeToCommentWidget {\n  widgetID: Scalars['UUID'];\n}\n\nexport interface Mutation {\n   __typename?: 'Mutation';\n  signUp: AuthReturn;\n  signIn: AuthReturn;\n  signUpWithGitHubAccount: AuthReturn;\n  signInWithGitHubAccount: AuthReturn;\n  deleteNotification: Scalars['Boolean'];\n  deleteAllNotifications: Scalars['Boolean'];\n  setUserInfo: User;\n  followUser: Scalars['Boolean'];\n  unfollowUser: Scalars['Boolean'];\n  sendEmailVerificationCode: Scalars['Boolean'];\n  resetPassword: Scalars['Boolean'];\n  verifyEmail: Scalars['Boolean'];\n  linkWithGitHubAccount: Scalars['Boolean'];\n  unlinkGitHubAccount: Scalars['Boolean'];\n  publishNotebook: Notebook;\n  unpublishNotebook: Scalars['Boolean'];\n  updateNotebook: Notebook;\n  starNotebook: Scalars['Boolean'];\n  unstarNotebook: Scalars['Boolean'];\n  createWidget: Widget;\n  updateWidget: Scalars['Boolean'];\n  deleteWidget: Scalars['Boolean'];\n  postCommentWidgetMessage: CommentWidgetMessage;\n  updateCommentWidgetMessage: CommentWidgetMessage;\n  addReactionToCommentWidget: Scalars['Boolean'];\n  removeReactionFromCommentWidget: Scalars['Boolean'];\n  addReactionToCommentWidgetMessage: Scalars['Boolean'];\n  removeReactionFromCommentWidgetMessage: Scalars['Boolean'];\n  subscribeToCommentWidget: Scalars['Boolean'];\n  unsubscribeFromCommentWidget: Scalars['Boolean'];\n}\n\n\nexport interface MutationSignUpArgs {\n  input: SignUpInput;\n}\n\n\nexport interface MutationSignInArgs {\n  input: SignInInput;\n}\n\n\nexport interface MutationSignUpWithGitHubAccountArgs {\n  input: SignUpWithGitHubAccount;\n}\n\n\nexport interface MutationSignInWithGitHubAccountArgs {\n  input: SignInWithGitHubAccount;\n}\n\n\nexport interface MutationDeleteNotificationArgs {\n  input: DeleteNotification;\n}\n\n\nexport interface MutationSetUserInfoArgs {\n  input: SetUserInfo;\n}\n\n\nexport interface MutationFollowUserArgs {\n  input: FollowUser;\n}\n\n\nexport interface MutationUnfollowUserArgs {\n  input: UnfollowUser;\n}\n\n\nexport interface MutationSendEmailVerificationCodeArgs {\n  input: Maybe<SendEmailVerificationCode>;\n}\n\n\nexport interface MutationResetPasswordArgs {\n  input: Maybe<ResetPassword>;\n}\n\n\nexport interface MutationVerifyEmailArgs {\n  input: Maybe<VerifyEmail>;\n}\n\n\nexport interface MutationLinkWithGitHubAccountArgs {\n  input: Maybe<LinkWithGitHubAccount>;\n}\n\n\nexport interface MutationPublishNotebookArgs {\n  input: PublishNotebook;\n}\n\n\nexport interface MutationUnpublishNotebookArgs {\n  input: UnpublishNotebook;\n}\n\n\nexport interface MutationUpdateNotebookArgs {\n  input: UpdateNotebook;\n}\n\n\nexport interface MutationStarNotebookArgs {\n  input: StarNotebook;\n}\n\n\nexport interface MutationUnstarNotebookArgs {\n  input: UnstarNotebook;\n}\n\n\nexport interface MutationCreateWidgetArgs {\n  input: Maybe<CreateWidget>;\n}\n\n\nexport interface MutationUpdateWidgetArgs {\n  input: Maybe<UpdateWidget>;\n}\n\n\nexport interface MutationDeleteWidgetArgs {\n  input: Maybe<DeleteWidget>;\n}\n\n\nexport interface MutationPostCommentWidgetMessageArgs {\n  input: PostCommentWidgetMessage;\n}\n\n\nexport interface MutationUpdateCommentWidgetMessageArgs {\n  input: UpdateCommentWidgetMessage;\n}\n\n\nexport interface MutationAddReactionToCommentWidgetArgs {\n  input: Maybe<AddReactionToCommentWidget>;\n}\n\n\nexport interface MutationRemoveReactionFromCommentWidgetArgs {\n  input: Maybe<RemoveReactionFromCommentWidget>;\n}\n\n\nexport interface MutationAddReactionToCommentWidgetMessageArgs {\n  input: Maybe<AddReactionToCommentWidgetMessage>;\n}\n\n\nexport interface MutationRemoveReactionFromCommentWidgetMessageArgs {\n  input: Maybe<RemoveReactionFromCommentWidgetMessage>;\n}\n\n\nexport interface MutationSubscribeToCommentWidgetArgs {\n  input: Maybe<SubscribeToCommentWidget>;\n}\n\n\nexport interface MutationUnsubscribeFromCommentWidgetArgs {\n  input: Maybe<UnsubscribeFromCommentWidget>;\n}\n\nexport interface UnfollowUser {\n  userID: Scalars['UUID'];\n}\n\nexport interface UnstarNotebook {\n  notebookID: Scalars['UUID'];\n}\n\nexport type SignUpMutationVariables = {\n  username: Scalars['String'];\n  email: Scalars['String'];\n  password: Scalars['String'];\n};\n\n\nexport type SignUpMutation = (\n  { __typename?: 'Mutation' }\n  & { signUp: (\n    { __typename?: 'AuthReturn' }\n    & Pick<AuthReturn, 'token'>\n    & { user: (\n      { __typename?: 'User' }\n      & Pick<User, 'id'>\n    ) }\n  ) }\n);\n\nexport type SignInMutationVariables = {\n  email: Scalars['String'];\n  password: Scalars['String'];\n};\n\n\nexport type SignInMutation = (\n  { __typename?: 'Mutation' }\n  & { signIn: (\n    { __typename?: 'AuthReturn' }\n    & Pick<AuthReturn, 'token'>\n    & { user: (\n      { __typename?: 'User' }\n      & Pick<User, 'id'>\n    ) }\n  ) }\n);\n\nexport type SignUpWithGitHubAccountMutationVariables = {\n  username: Scalars['String'];\n  email: Scalars['String'];\n  accessToken: Scalars['String'];\n};\n\n\nexport type SignUpWithGitHubAccountMutation = (\n  { __typename?: 'Mutation' }\n  & { signUpWithGitHubAccount: (\n    { __typename?: 'AuthReturn' }\n    & Pick<AuthReturn, 'token'>\n    & { user: (\n      { __typename?: 'User' }\n      & Pick<User, 'id'>\n    ) }\n  ) }\n);\n\nexport type SignInWithGitHubAccountMutationVariables = {\n  code: Scalars['String'];\n};\n\n\nexport type SignInWithGitHubAccountMutation = (\n  { __typename?: 'Mutation' }\n  & { signInWithGitHubAccount: (\n    { __typename?: 'AuthReturn' }\n    & Pick<AuthReturn, 'token'>\n    & { user: (\n      { __typename?: 'User' }\n      & Pick<User, 'id' | 'username' | 'email'>\n    ) }\n  ) }\n);\n\nexport type SendEmailVerificationCodeMutationVariables = {\n  email: Scalars['String'];\n};\n\n\nexport type SendEmailVerificationCodeMutation = (\n  { __typename?: 'Mutation' }\n  & Pick<Mutation, 'sendEmailVerificationCode'>\n);\n\nexport type ResetPasswordMutationVariables = {\n  email: Scalars['String'];\n  verificationCode: Scalars['String'];\n  password: Scalars['String'];\n};\n\n\nexport type ResetPasswordMutation = (\n  { __typename?: 'Mutation' }\n  & Pick<Mutation, 'resetPassword'>\n);\n\nexport type VerifyEmailMutationVariables = {\n  email: Scalars['String'];\n  verificationCode: Scalars['String'];\n};\n\n\nexport type VerifyEmailMutation = (\n  { __typename?: 'Mutation' }\n  & Pick<Mutation, 'verifyEmail'>\n);\n\nexport type CreateCommentWidgetMutationVariables = {\n  description: Scalars['String'];\n  source: Scalars['String'];\n};\n\n\nexport type CreateCommentWidgetMutation = (\n  { __typename?: 'Mutation' }\n  & { createWidget: (\n    { __typename?: 'Widget' }\n    & Pick<Widget, 'id'>\n  ) }\n);\n\nexport type PostCommentWidgetMessageMutationVariables = {\n  widgetID: Scalars['UUID'];\n  markdown: Scalars['String'];\n  notifyUsers: Array<Scalars['String']>;\n};\n\n\nexport type PostCommentWidgetMessageMutation = (\n  { __typename?: 'Mutation' }\n  & { postCommentWidgetMessage: (\n    { __typename?: 'CommentWidgetMessage' }\n    & CommentWidgetMessageFieldsFragment\n  ) }\n);\n\nexport type UpdateCommentWidgetMessageMutationVariables = {\n  messageID: Scalars['UUID'];\n  markdown: Scalars['String'];\n};\n\n\nexport type UpdateCommentWidgetMessageMutation = (\n  { __typename?: 'Mutation' }\n  & { updateCommentWidgetMessage: (\n    { __typename?: 'CommentWidgetMessage' }\n    & CommentWidgetMessageFieldsFragment\n  ) }\n);\n\nexport type AddReactionToCommentWidgetMutationVariables = {\n  widgetID: Scalars['UUID'];\n  reaction: Scalars['String'];\n};\n\n\nexport type AddReactionToCommentWidgetMutation = (\n  { __typename?: 'Mutation' }\n  & Pick<Mutation, 'addReactionToCommentWidget'>\n);\n\nexport type RemoveReactionFromCommentWidgetMutationVariables = {\n  widgetID: Scalars['UUID'];\n  reaction: Scalars['String'];\n};\n\n\nexport type RemoveReactionFromCommentWidgetMutation = (\n  { __typename?: 'Mutation' }\n  & Pick<Mutation, 'removeReactionFromCommentWidget'>\n);\n\nexport type AddReactionToCommentWidgetMessageMutationVariables = {\n  messageID: Scalars['UUID'];\n  reaction: Scalars['String'];\n};\n\n\nexport type AddReactionToCommentWidgetMessageMutation = (\n  { __typename?: 'Mutation' }\n  & Pick<Mutation, 'addReactionToCommentWidgetMessage'>\n);\n\nexport type RemoveReactionFromCommentWidgetMessageMutationVariables = {\n  messageID: Scalars['UUID'];\n  reaction: Scalars['String'];\n};\n\n\nexport type RemoveReactionFromCommentWidgetMessageMutation = (\n  { __typename?: 'Mutation' }\n  & Pick<Mutation, 'removeReactionFromCommentWidgetMessage'>\n);\n\nexport type SubscribeToCommentWidgetMutationVariables = {\n  widgetID: Scalars['UUID'];\n};\n\n\nexport type SubscribeToCommentWidgetMutation = (\n  { __typename?: 'Mutation' }\n  & Pick<Mutation, 'subscribeToCommentWidget'>\n);\n\nexport type UnsubscribeFromCommentWidgetMutationVariables = {\n  widgetID: Scalars['UUID'];\n};\n\n\nexport type UnsubscribeFromCommentWidgetMutation = (\n  { __typename?: 'Mutation' }\n  & Pick<Mutation, 'unsubscribeFromCommentWidget'>\n);\n\nexport type LinkWithGitHubAccountMutationVariables = {\n  code: Scalars['String'];\n};\n\n\nexport type LinkWithGitHubAccountMutation = (\n  { __typename?: 'Mutation' }\n  & Pick<Mutation, 'linkWithGitHubAccount'>\n);\n\nexport type UnlinkGitHubAccountMutationVariables = {};\n\n\nexport type UnlinkGitHubAccountMutation = (\n  { __typename?: 'Mutation' }\n  & Pick<Mutation, 'unlinkGitHubAccount'>\n);\n\nexport type PublishNotebookMutationVariables = {\n  gitURL: Scalars['String'];\n  gitBranch: Scalars['String'];\n};\n\n\nexport type PublishNotebookMutation = (\n  { __typename?: 'Mutation' }\n  & { publishNotebook: (\n    { __typename?: 'Notebook' }\n    & NotebookFieldsFragment\n  ) }\n);\n\nexport type UnpublishNotebookMutationVariables = {\n  notebookID: Scalars['UUID'];\n};\n\n\nexport type UnpublishNotebookMutation = (\n  { __typename?: 'Mutation' }\n  & Pick<Mutation, 'unpublishNotebook'>\n);\n\nexport type UpdateNotebookMutationVariables = {\n  notebookID: Scalars['UUID'];\n  gitURL: Scalars['String'];\n  gitBranch: Scalars['String'];\n};\n\n\nexport type UpdateNotebookMutation = (\n  { __typename?: 'Mutation' }\n  & { updateNotebook: (\n    { __typename?: 'Notebook' }\n    & NotebookFieldsFragment\n  ) }\n);\n\nexport type StarNotebookMutationVariables = {\n  notebookID: Scalars['UUID'];\n};\n\n\nexport type StarNotebookMutation = (\n  { __typename?: 'Mutation' }\n  & Pick<Mutation, 'starNotebook'>\n);\n\nexport type UnstarNotebookMutationVariables = {\n  notebookID: Scalars['UUID'];\n};\n\n\nexport type UnstarNotebookMutation = (\n  { __typename?: 'Mutation' }\n  & Pick<Mutation, 'unstarNotebook'>\n);\n\nexport type DeleteNotificationMutationVariables = {\n  notificationID: Scalars['UUID'];\n};\n\n\nexport type DeleteNotificationMutation = (\n  { __typename?: 'Mutation' }\n  & Pick<Mutation, 'deleteNotification'>\n);\n\nexport type DeleteAllNotificationsMutationVariables = {};\n\n\nexport type DeleteAllNotificationsMutation = (\n  { __typename?: 'Mutation' }\n  & Pick<Mutation, 'deleteAllNotifications'>\n);\n\nexport type SetUserInfoMutationVariables = {\n  cover: Scalars['String'];\n  bio: Scalars['String'];\n  location: Scalars['String'];\n  language: Scalars['String'];\n  name: Scalars['String'];\n  avatar: Scalars['String'];\n  editorCursorColor: Scalars['String'];\n};\n\n\nexport type SetUserInfoMutation = (\n  { __typename?: 'Mutation' }\n  & { setUserInfo: (\n    { __typename?: 'User' }\n    & ViewerFieldsFragment\n  ) }\n);\n\nexport type DeleteWidgetMutationVariables = {\n  id: Scalars['UUID'];\n};\n\n\nexport type DeleteWidgetMutation = (\n  { __typename?: 'Mutation' }\n  & Pick<Mutation, 'deleteWidget'>\n);\n\nexport type UpdateWidgetMutationVariables = {\n  id: Scalars['UUID'];\n  description: Scalars['String'];\n  source: Scalars['String'];\n};\n\n\nexport type UpdateWidgetMutation = (\n  { __typename?: 'Mutation' }\n  & Pick<Mutation, 'updateWidget'>\n);\n\nexport type CommentWidgetMessageFieldsFragment = (\n  { __typename?: 'CommentWidgetMessage' }\n  & Pick<CommentWidgetMessage, 'id' | 'markdown' | 'createdAt' | 'updatedAt'>\n  & { author: (\n    { __typename?: 'User' }\n    & Pick<User, 'id' | 'username' | 'avatar'>\n  ), reactionSummaries: Array<(\n    { __typename?: 'ReactionSummary' }\n    & Pick<ReactionSummary, 'count' | 'reaction' | 'selfAuthored'>\n  )> }\n);\n\nexport type CommentWidgetMessageConnectionFieldsFragment = (\n  { __typename?: 'CommentWidgetMessageConnection' }\n  & { pageInfo: (\n    { __typename?: 'PageInfo' }\n    & PageInfoFieldsFragment\n  ), edges: Array<(\n    { __typename?: 'CommentWidgetMessageEdge' }\n    & Pick<CommentWidgetMessageEdge, 'cursor'>\n    & { node: (\n      { __typename?: 'CommentWidgetMessage' }\n      & CommentWidgetMessageFieldsFragment\n    ) }\n  )> }\n);\n\nexport type CommentWidgetFieldsFragment = (\n  { __typename?: 'Widget' }\n  & Pick<Widget, 'id' | 'description' | 'source' | 'canConfigure'>\n  & { owner: (\n    { __typename?: 'User' }\n    & Pick<User, 'id' | 'username' | 'avatar'>\n  ), instance: (\n    { __typename?: 'CommentWidgetInstance' }\n    & Pick<CommentWidgetInstance, 'type'>\n    & { commentWidget: (\n      { __typename?: 'CommentWidget' }\n      & Pick<CommentWidget, 'id' | 'createdAt' | 'updatedAt' | 'messagesCount' | 'reactionsCount' | 'subscribed'>\n      & { reactionSummaries: Array<(\n        { __typename?: 'ReactionSummary' }\n        & Pick<ReactionSummary, 'count' | 'reaction' | 'selfAuthored'>\n      )>, messages: (\n        { __typename?: 'CommentWidgetMessageConnection' }\n        & CommentWidgetMessageConnectionFieldsFragment\n      ) }\n    ) }\n  ) }\n);\n\nexport type CommentWidgetQueryVariables = {\n  widgetID: Scalars['UUID'];\n};\n\n\nexport type CommentWidgetQuery = (\n  { __typename?: 'Query' }\n  & { widget: (\n    { __typename?: 'Widget' }\n    & CommentWidgetFieldsFragment\n  ) }\n);\n\nexport type CommentWidgetMessagesQueryVariables = {\n  widgetID: Scalars['UUID'];\n  before: Scalars['UUID'];\n  after: Scalars['UUID'];\n  first: Scalars['Int'];\n  last: Scalars['Int'];\n};\n\n\nexport type CommentWidgetMessagesQuery = (\n  { __typename?: 'Query' }\n  & { widget: (\n    { __typename?: 'Widget' }\n    & { instance: (\n      { __typename?: 'CommentWidgetInstance' }\n      & Pick<CommentWidgetInstance, 'type'>\n      & { commentWidget: (\n        { __typename?: 'CommentWidget' }\n        & { messages: (\n          { __typename?: 'CommentWidgetMessageConnection' }\n          & CommentWidgetMessageConnectionFieldsFragment\n        ) }\n      ) }\n    ) }\n  ) }\n);\n\nexport type GitHubUserQueryVariables = {};\n\n\nexport type GitHubUserQuery = (\n  { __typename?: 'Query' }\n  & { viewer: (\n    { __typename?: 'User' }\n    & { githubUser: Maybe<(\n      { __typename?: 'GitHubUser' }\n      & Pick<GitHubUser, 'login' | 'avatar' | 'email'>\n    )> }\n  ) }\n);\n\nexport type NotebookFieldsFragment = (\n  { __typename?: 'Notebook' }\n  & Pick<Notebook, 'id' | 'createdAt' | 'updatedAt' | 'gitURL' | 'gitBranch' | 'markdown' | 'starsCount' | 'isStarred'>\n  & { owner: (\n    { __typename?: 'User' }\n    & Pick<User, 'id' | 'avatar' | 'username'>\n  ) }\n);\n\nexport type NotebooksQueryVariables = {\n  query?: Maybe<Scalars['String']>;\n  orderBy?: Maybe<NotebookOrderBy>;\n  page?: Maybe<Scalars['Int']>;\n  perPage?: Maybe<Scalars['Int']>;\n};\n\n\nexport type NotebooksQuery = (\n  { __typename?: 'Query' }\n  & { notebooks: Array<(\n    { __typename?: 'Notebook' }\n    & NotebookFieldsFragment\n  )> }\n);\n\nexport type NotificationFieldsFragment = (\n  { __typename?: 'Notification' }\n  & Pick<Notification, 'id' | 'createdAt' | 'meta'>\n  & { origin: (\n    { __typename?: 'User' }\n    & Pick<User, 'id' | 'username' | 'avatar'>\n  ), receiver: (\n    { __typename?: 'User' }\n    & Pick<User, 'id' | 'username' | 'avatar'>\n  ), event: (\n    { __typename?: 'NotificationEventCommentWidgetMessagePosting' }\n    & Pick<NotificationEventCommentWidgetMessagePosting, 'type'>\n    & { message: (\n      { __typename?: 'CommentWidgetMessage' }\n      & Pick<CommentWidgetMessage, 'id' | 'markdown' | 'createdAt'>\n      & { widget: (\n        { __typename?: 'Widget' }\n        & Pick<Widget, 'description' | 'source'>\n        & { owner: (\n          { __typename?: 'User' }\n          & Pick<User, 'id' | 'username' | 'avatar'>\n        ) }\n      ) }\n    ) }\n  ) | (\n    { __typename?: 'NotificationEventUserFollowing' }\n    & Pick<NotificationEventUserFollowing, 'type'>\n  ) }\n);\n\nexport type NotificationsQueryVariables = {\n  before: Scalars['UUID'];\n  after: Scalars['UUID'];\n  first: Maybe<Scalars['Int']>;\n  last: Maybe<Scalars['Int']>;\n};\n\n\nexport type NotificationsQuery = (\n  { __typename?: 'Query' }\n  & { viewer: (\n    { __typename?: 'User' }\n    & { notifications: (\n      { __typename?: 'NotificationConnection' }\n      & { pageInfo: (\n        { __typename?: 'PageInfo' }\n        & PageInfoFieldsFragment\n      ), edges: Array<(\n        { __typename?: 'NotificationEdge' }\n        & Pick<NotificationEdge, 'cursor'>\n        & { node: (\n          { __typename?: 'Notification' }\n          & NotificationFieldsFragment\n        ) }\n      )> }\n    ) }\n  ) }\n);\n\nexport type PageInfoFieldsFragment = (\n  { __typename?: 'PageInfo' }\n  & Pick<PageInfo, 'startCursor' | 'endCursor' | 'hasNextPage' | 'hasPreviousPage'>\n);\n\nexport type ViewerFieldsFragment = (\n  { __typename?: 'User' }\n  & Pick<User, 'avatar' | 'bio' | 'cover' | 'createdAt' | 'deletedAt' | 'id' | 'language' | 'name' | 'username' | 'email' | 'verifiedEmail' | 'updatedAt' | 'widgetsCount' | 'notebooksCount' | 'starredNotebooksCount' | 'editorCursorColor'>\n  & { notifications: (\n    { __typename?: 'NotificationConnection' }\n    & Pick<NotificationConnection, 'totalCount'>\n  ) }\n);\n\nexport type ViewerQueryVariables = {};\n\n\nexport type ViewerQuery = (\n  { __typename?: 'Query' }\n  & { viewer: (\n    { __typename?: 'User' }\n    & ViewerFieldsFragment\n  ) }\n);\n\nexport const PageInfoFieldsFragmentDoc = gql`\n    fragment PageInfoFields on PageInfo {\n  startCursor\n  endCursor\n  hasNextPage\n  hasPreviousPage\n}\n    `;\nexport const CommentWidgetMessageFieldsFragmentDoc = gql`\n    fragment CommentWidgetMessageFields on CommentWidgetMessage {\n  id\n  author {\n    id\n    username\n    avatar\n  }\n  markdown\n  createdAt\n  updatedAt\n  reactionSummaries {\n    count\n    reaction\n    selfAuthored\n  }\n}\n    `;\nexport const CommentWidgetMessageConnectionFieldsFragmentDoc = gql`\n    fragment CommentWidgetMessageConnectionFields on CommentWidgetMessageConnection {\n  pageInfo {\n    ...PageInfoFields\n  }\n  edges {\n    cursor\n    node {\n      ...CommentWidgetMessageFields\n    }\n  }\n}\n    ${PageInfoFieldsFragmentDoc}\n${CommentWidgetMessageFieldsFragmentDoc}`;\nexport const CommentWidgetFieldsFragmentDoc = gql`\n    fragment CommentWidgetFields on Widget {\n  id\n  owner {\n    id\n    username\n    avatar\n  }\n  description\n  source\n  canConfigure\n  instance {\n    type\n    ... on CommentWidgetInstance {\n      type\n      commentWidget {\n        id\n        createdAt\n        updatedAt\n        messagesCount\n        reactionsCount\n        subscribed\n        reactionSummaries {\n          count\n          reaction\n          selfAuthored\n        }\n        messages(first: 20) {\n          ...CommentWidgetMessageConnectionFields\n        }\n      }\n    }\n  }\n}\n    ${CommentWidgetMessageConnectionFieldsFragmentDoc}`;\nexport const NotebookFieldsFragmentDoc = gql`\n    fragment NotebookFields on Notebook {\n  id\n  createdAt\n  updatedAt\n  owner {\n    id\n    avatar\n    username\n  }\n  gitURL\n  gitBranch\n  markdown\n  starsCount\n  isStarred\n}\n    `;\nexport const NotificationFieldsFragmentDoc = gql`\n    fragment NotificationFields on Notification {\n  id\n  createdAt\n  origin {\n    id\n    username\n    avatar\n  }\n  receiver {\n    id\n    username\n    avatar\n  }\n  meta\n  event {\n    type\n    ... on NotificationEventUserFollowing {\n      type\n    }\n    ... on NotificationEventCommentWidgetMessagePosting {\n      type\n      message {\n        id\n        markdown\n        createdAt\n        widget {\n          owner {\n            id\n            username\n            avatar\n          }\n          description\n          source\n        }\n      }\n    }\n  }\n}\n    `;\nexport const ViewerFieldsFragmentDoc = gql`\n    fragment ViewerFields on User {\n  avatar\n  bio\n  cover\n  createdAt\n  deletedAt\n  id\n  language\n  name\n  username\n  email\n  verifiedEmail\n  updatedAt\n  widgetsCount\n  notebooksCount\n  starredNotebooksCount\n  notifications(last: 1) {\n    totalCount\n  }\n  editorCursorColor\n}\n    `;\nexport const SignUpDocument = gql`\n    mutation SignUp($username: String!, $email: String!, $password: String!) {\n  signUp(input: {username: $username, email: $email, password: $password}) {\n    token\n    user {\n      id\n    }\n  }\n}\n    `;\n\nexport const SignUpComponent = (props: Omit<Urql.MutationProps<SignUpMutation, SignUpMutationVariables>, 'query'> & { variables?: SignUpMutationVariables }) => (\n  <Urql.Mutation {...props} query={SignUpDocument} />\n);\n\n\nexport function useSignUpMutation() {\n  return Urql.useMutation<SignUpMutation, SignUpMutationVariables>(SignUpDocument);\n};\nexport const SignInDocument = gql`\n    mutation SignIn($email: String!, $password: String!) {\n  signIn(input: {email: $email, password: $password}) {\n    token\n    user {\n      id\n    }\n  }\n}\n    `;\n\nexport const SignInComponent = (props: Omit<Urql.MutationProps<SignInMutation, SignInMutationVariables>, 'query'> & { variables?: SignInMutationVariables }) => (\n  <Urql.Mutation {...props} query={SignInDocument} />\n);\n\n\nexport function useSignInMutation() {\n  return Urql.useMutation<SignInMutation, SignInMutationVariables>(SignInDocument);\n};\nexport const SignUpWithGitHubAccountDocument = gql`\n    mutation SignUpWithGitHubAccount($username: String!, $email: String!, $accessToken: String!) {\n  signUpWithGitHubAccount(input: {username: $username, email: $email, accessToken: $accessToken}) {\n    token\n    user {\n      id\n    }\n  }\n}\n    `;\n\nexport const SignUpWithGitHubAccountComponent = (props: Omit<Urql.MutationProps<SignUpWithGitHubAccountMutation, SignUpWithGitHubAccountMutationVariables>, 'query'> & { variables?: SignUpWithGitHubAccountMutationVariables }) => (\n  <Urql.Mutation {...props} query={SignUpWithGitHubAccountDocument} />\n);\n\n\nexport function useSignUpWithGitHubAccountMutation() {\n  return Urql.useMutation<SignUpWithGitHubAccountMutation, SignUpWithGitHubAccountMutationVariables>(SignUpWithGitHubAccountDocument);\n};\nexport const SignInWithGitHubAccountDocument = gql`\n    mutation SignInWithGitHubAccount($code: String!) {\n  signInWithGitHubAccount(input: {code: $code}) {\n    token\n    user {\n      id\n      username\n      email\n    }\n  }\n}\n    `;\n\nexport const SignInWithGitHubAccountComponent = (props: Omit<Urql.MutationProps<SignInWithGitHubAccountMutation, SignInWithGitHubAccountMutationVariables>, 'query'> & { variables?: SignInWithGitHubAccountMutationVariables }) => (\n  <Urql.Mutation {...props} query={SignInWithGitHubAccountDocument} />\n);\n\n\nexport function useSignInWithGitHubAccountMutation() {\n  return Urql.useMutation<SignInWithGitHubAccountMutation, SignInWithGitHubAccountMutationVariables>(SignInWithGitHubAccountDocument);\n};\nexport const SendEmailVerificationCodeDocument = gql`\n    mutation SendEmailVerificationCode($email: String!) {\n  sendEmailVerificationCode(input: {email: $email})\n}\n    `;\n\nexport const SendEmailVerificationCodeComponent = (props: Omit<Urql.MutationProps<SendEmailVerificationCodeMutation, SendEmailVerificationCodeMutationVariables>, 'query'> & { variables?: SendEmailVerificationCodeMutationVariables }) => (\n  <Urql.Mutation {...props} query={SendEmailVerificationCodeDocument} />\n);\n\n\nexport function useSendEmailVerificationCodeMutation() {\n  return Urql.useMutation<SendEmailVerificationCodeMutation, SendEmailVerificationCodeMutationVariables>(SendEmailVerificationCodeDocument);\n};\nexport const ResetPasswordDocument = gql`\n    mutation ResetPassword($email: String!, $verificationCode: String!, $password: String!) {\n  resetPassword(input: {email: $email, verificationCode: $verificationCode, password: $password})\n}\n    `;\n\nexport const ResetPasswordComponent = (props: Omit<Urql.MutationProps<ResetPasswordMutation, ResetPasswordMutationVariables>, 'query'> & { variables?: ResetPasswordMutationVariables }) => (\n  <Urql.Mutation {...props} query={ResetPasswordDocument} />\n);\n\n\nexport function useResetPasswordMutation() {\n  return Urql.useMutation<ResetPasswordMutation, ResetPasswordMutationVariables>(ResetPasswordDocument);\n};\nexport const VerifyEmailDocument = gql`\n    mutation VerifyEmail($email: String!, $verificationCode: String!) {\n  verifyEmail(input: {email: $email, verificationCode: $verificationCode})\n}\n    `;\n\nexport const VerifyEmailComponent = (props: Omit<Urql.MutationProps<VerifyEmailMutation, VerifyEmailMutationVariables>, 'query'> & { variables?: VerifyEmailMutationVariables }) => (\n  <Urql.Mutation {...props} query={VerifyEmailDocument} />\n);\n\n\nexport function useVerifyEmailMutation() {\n  return Urql.useMutation<VerifyEmailMutation, VerifyEmailMutationVariables>(VerifyEmailDocument);\n};\nexport const CreateCommentWidgetDocument = gql`\n    mutation CreateCommentWidget($description: String!, $source: String!) {\n  createWidget(input: {description: $description, source: $source, type: COMMENT}) {\n    id\n  }\n}\n    `;\n\nexport const CreateCommentWidgetComponent = (props: Omit<Urql.MutationProps<CreateCommentWidgetMutation, CreateCommentWidgetMutationVariables>, 'query'> & { variables?: CreateCommentWidgetMutationVariables }) => (\n  <Urql.Mutation {...props} query={CreateCommentWidgetDocument} />\n);\n\n\nexport function useCreateCommentWidgetMutation() {\n  return Urql.useMutation<CreateCommentWidgetMutation, CreateCommentWidgetMutationVariables>(CreateCommentWidgetDocument);\n};\nexport const PostCommentWidgetMessageDocument = gql`\n    mutation PostCommentWidgetMessage($widgetID: UUID!, $markdown: String!, $notifyUsers: [String!]!) {\n  postCommentWidgetMessage(input: {widgetID: $widgetID, markdown: $markdown, notifyUsers: $notifyUsers}) {\n    ...CommentWidgetMessageFields\n  }\n}\n    ${CommentWidgetMessageFieldsFragmentDoc}`;\n\nexport const PostCommentWidgetMessageComponent = (props: Omit<Urql.MutationProps<PostCommentWidgetMessageMutation, PostCommentWidgetMessageMutationVariables>, 'query'> & { variables?: PostCommentWidgetMessageMutationVariables }) => (\n  <Urql.Mutation {...props} query={PostCommentWidgetMessageDocument} />\n);\n\n\nexport function usePostCommentWidgetMessageMutation() {\n  return Urql.useMutation<PostCommentWidgetMessageMutation, PostCommentWidgetMessageMutationVariables>(PostCommentWidgetMessageDocument);\n};\nexport const UpdateCommentWidgetMessageDocument = gql`\n    mutation UpdateCommentWidgetMessage($messageID: UUID!, $markdown: String!) {\n  updateCommentWidgetMessage(input: {messageID: $messageID, markdown: $markdown}) {\n    ...CommentWidgetMessageFields\n  }\n}\n    ${CommentWidgetMessageFieldsFragmentDoc}`;\n\nexport const UpdateCommentWidgetMessageComponent = (props: Omit<Urql.MutationProps<UpdateCommentWidgetMessageMutation, UpdateCommentWidgetMessageMutationVariables>, 'query'> & { variables?: UpdateCommentWidgetMessageMutationVariables }) => (\n  <Urql.Mutation {...props} query={UpdateCommentWidgetMessageDocument} />\n);\n\n\nexport function useUpdateCommentWidgetMessageMutation() {\n  return Urql.useMutation<UpdateCommentWidgetMessageMutation, UpdateCommentWidgetMessageMutationVariables>(UpdateCommentWidgetMessageDocument);\n};\nexport const AddReactionToCommentWidgetDocument = gql`\n    mutation AddReactionToCommentWidget($widgetID: UUID!, $reaction: String!) {\n  addReactionToCommentWidget(input: {widgetID: $widgetID, reaction: $reaction})\n}\n    `;\n\nexport const AddReactionToCommentWidgetComponent = (props: Omit<Urql.MutationProps<AddReactionToCommentWidgetMutation, AddReactionToCommentWidgetMutationVariables>, 'query'> & { variables?: AddReactionToCommentWidgetMutationVariables }) => (\n  <Urql.Mutation {...props} query={AddReactionToCommentWidgetDocument} />\n);\n\n\nexport function useAddReactionToCommentWidgetMutation() {\n  return Urql.useMutation<AddReactionToCommentWidgetMutation, AddReactionToCommentWidgetMutationVariables>(AddReactionToCommentWidgetDocument);\n};\nexport const RemoveReactionFromCommentWidgetDocument = gql`\n    mutation RemoveReactionFromCommentWidget($widgetID: UUID!, $reaction: String!) {\n  removeReactionFromCommentWidget(input: {widgetID: $widgetID, reaction: $reaction})\n}\n    `;\n\nexport const RemoveReactionFromCommentWidgetComponent = (props: Omit<Urql.MutationProps<RemoveReactionFromCommentWidgetMutation, RemoveReactionFromCommentWidgetMutationVariables>, 'query'> & { variables?: RemoveReactionFromCommentWidgetMutationVariables }) => (\n  <Urql.Mutation {...props} query={RemoveReactionFromCommentWidgetDocument} />\n);\n\n\nexport function useRemoveReactionFromCommentWidgetMutation() {\n  return Urql.useMutation<RemoveReactionFromCommentWidgetMutation, RemoveReactionFromCommentWidgetMutationVariables>(RemoveReactionFromCommentWidgetDocument);\n};\nexport const AddReactionToCommentWidgetMessageDocument = gql`\n    mutation AddReactionToCommentWidgetMessage($messageID: UUID!, $reaction: String!) {\n  addReactionToCommentWidgetMessage(input: {messageID: $messageID, reaction: $reaction})\n}\n    `;\n\nexport const AddReactionToCommentWidgetMessageComponent = (props: Omit<Urql.MutationProps<AddReactionToCommentWidgetMessageMutation, AddReactionToCommentWidgetMessageMutationVariables>, 'query'> & { variables?: AddReactionToCommentWidgetMessageMutationVariables }) => (\n  <Urql.Mutation {...props} query={AddReactionToCommentWidgetMessageDocument} />\n);\n\n\nexport function useAddReactionToCommentWidgetMessageMutation() {\n  return Urql.useMutation<AddReactionToCommentWidgetMessageMutation, AddReactionToCommentWidgetMessageMutationVariables>(AddReactionToCommentWidgetMessageDocument);\n};\nexport const RemoveReactionFromCommentWidgetMessageDocument = gql`\n    mutation RemoveReactionFromCommentWidgetMessage($messageID: UUID!, $reaction: String!) {\n  removeReactionFromCommentWidgetMessage(input: {messageID: $messageID, reaction: $reaction})\n}\n    `;\n\nexport const RemoveReactionFromCommentWidgetMessageComponent = (props: Omit<Urql.MutationProps<RemoveReactionFromCommentWidgetMessageMutation, RemoveReactionFromCommentWidgetMessageMutationVariables>, 'query'> & { variables?: RemoveReactionFromCommentWidgetMessageMutationVariables }) => (\n  <Urql.Mutation {...props} query={RemoveReactionFromCommentWidgetMessageDocument} />\n);\n\n\nexport function useRemoveReactionFromCommentWidgetMessageMutation() {\n  return Urql.useMutation<RemoveReactionFromCommentWidgetMessageMutation, RemoveReactionFromCommentWidgetMessageMutationVariables>(RemoveReactionFromCommentWidgetMessageDocument);\n};\nexport const SubscribeToCommentWidgetDocument = gql`\n    mutation SubscribeToCommentWidget($widgetID: UUID!) {\n  subscribeToCommentWidget(input: {widgetID: $widgetID})\n}\n    `;\n\nexport const SubscribeToCommentWidgetComponent = (props: Omit<Urql.MutationProps<SubscribeToCommentWidgetMutation, SubscribeToCommentWidgetMutationVariables>, 'query'> & { variables?: SubscribeToCommentWidgetMutationVariables }) => (\n  <Urql.Mutation {...props} query={SubscribeToCommentWidgetDocument} />\n);\n\n\nexport function useSubscribeToCommentWidgetMutation() {\n  return Urql.useMutation<SubscribeToCommentWidgetMutation, SubscribeToCommentWidgetMutationVariables>(SubscribeToCommentWidgetDocument);\n};\nexport const UnsubscribeFromCommentWidgetDocument = gql`\n    mutation UnsubscribeFromCommentWidget($widgetID: UUID!) {\n  unsubscribeFromCommentWidget(input: {widgetID: $widgetID})\n}\n    `;\n\nexport const UnsubscribeFromCommentWidgetComponent = (props: Omit<Urql.MutationProps<UnsubscribeFromCommentWidgetMutation, UnsubscribeFromCommentWidgetMutationVariables>, 'query'> & { variables?: UnsubscribeFromCommentWidgetMutationVariables }) => (\n  <Urql.Mutation {...props} query={UnsubscribeFromCommentWidgetDocument} />\n);\n\n\nexport function useUnsubscribeFromCommentWidgetMutation() {\n  return Urql.useMutation<UnsubscribeFromCommentWidgetMutation, UnsubscribeFromCommentWidgetMutationVariables>(UnsubscribeFromCommentWidgetDocument);\n};\nexport const LinkWithGitHubAccountDocument = gql`\n    mutation LinkWithGitHubAccount($code: String!) {\n  linkWithGitHubAccount(input: {code: $code})\n}\n    `;\n\nexport const LinkWithGitHubAccountComponent = (props: Omit<Urql.MutationProps<LinkWithGitHubAccountMutation, LinkWithGitHubAccountMutationVariables>, 'query'> & { variables?: LinkWithGitHubAccountMutationVariables }) => (\n  <Urql.Mutation {...props} query={LinkWithGitHubAccountDocument} />\n);\n\n\nexport function useLinkWithGitHubAccountMutation() {\n  return Urql.useMutation<LinkWithGitHubAccountMutation, LinkWithGitHubAccountMutationVariables>(LinkWithGitHubAccountDocument);\n};\nexport const UnlinkGitHubAccountDocument = gql`\n    mutation UnlinkGitHubAccount {\n  unlinkGitHubAccount\n}\n    `;\n\nexport const UnlinkGitHubAccountComponent = (props: Omit<Urql.MutationProps<UnlinkGitHubAccountMutation, UnlinkGitHubAccountMutationVariables>, 'query'> & { variables?: UnlinkGitHubAccountMutationVariables }) => (\n  <Urql.Mutation {...props} query={UnlinkGitHubAccountDocument} />\n);\n\n\nexport function useUnlinkGitHubAccountMutation() {\n  return Urql.useMutation<UnlinkGitHubAccountMutation, UnlinkGitHubAccountMutationVariables>(UnlinkGitHubAccountDocument);\n};\nexport const PublishNotebookDocument = gql`\n    mutation PublishNotebook($gitURL: String!, $gitBranch: String!) {\n  publishNotebook(input: {gitURL: $gitURL, gitBranch: $gitBranch}) {\n    ...NotebookFields\n  }\n}\n    ${NotebookFieldsFragmentDoc}`;\n\nexport const PublishNotebookComponent = (props: Omit<Urql.MutationProps<PublishNotebookMutation, PublishNotebookMutationVariables>, 'query'> & { variables?: PublishNotebookMutationVariables }) => (\n  <Urql.Mutation {...props} query={PublishNotebookDocument} />\n);\n\n\nexport function usePublishNotebookMutation() {\n  return Urql.useMutation<PublishNotebookMutation, PublishNotebookMutationVariables>(PublishNotebookDocument);\n};\nexport const UnpublishNotebookDocument = gql`\n    mutation UnpublishNotebook($notebookID: UUID!) {\n  unpublishNotebook(input: {notebookID: $notebookID})\n}\n    `;\n\nexport const UnpublishNotebookComponent = (props: Omit<Urql.MutationProps<UnpublishNotebookMutation, UnpublishNotebookMutationVariables>, 'query'> & { variables?: UnpublishNotebookMutationVariables }) => (\n  <Urql.Mutation {...props} query={UnpublishNotebookDocument} />\n);\n\n\nexport function useUnpublishNotebookMutation() {\n  return Urql.useMutation<UnpublishNotebookMutation, UnpublishNotebookMutationVariables>(UnpublishNotebookDocument);\n};\nexport const UpdateNotebookDocument = gql`\n    mutation UpdateNotebook($notebookID: UUID!, $gitURL: String!, $gitBranch: String!) {\n  updateNotebook(input: {notebookID: $notebookID, gitURL: $gitURL, gitBranch: $gitBranch}) {\n    ...NotebookFields\n  }\n}\n    ${NotebookFieldsFragmentDoc}`;\n\nexport const UpdateNotebookComponent = (props: Omit<Urql.MutationProps<UpdateNotebookMutation, UpdateNotebookMutationVariables>, 'query'> & { variables?: UpdateNotebookMutationVariables }) => (\n  <Urql.Mutation {...props} query={UpdateNotebookDocument} />\n);\n\n\nexport function useUpdateNotebookMutation() {\n  return Urql.useMutation<UpdateNotebookMutation, UpdateNotebookMutationVariables>(UpdateNotebookDocument);\n};\nexport const StarNotebookDocument = gql`\n    mutation StarNotebook($notebookID: UUID!) {\n  starNotebook(input: {notebookID: $notebookID})\n}\n    `;\n\nexport const StarNotebookComponent = (props: Omit<Urql.MutationProps<StarNotebookMutation, StarNotebookMutationVariables>, 'query'> & { variables?: StarNotebookMutationVariables }) => (\n  <Urql.Mutation {...props} query={StarNotebookDocument} />\n);\n\n\nexport function useStarNotebookMutation() {\n  return Urql.useMutation<StarNotebookMutation, StarNotebookMutationVariables>(StarNotebookDocument);\n};\nexport const UnstarNotebookDocument = gql`\n    mutation UnstarNotebook($notebookID: UUID!) {\n  unstarNotebook(input: {notebookID: $notebookID})\n}\n    `;\n\nexport const UnstarNotebookComponent = (props: Omit<Urql.MutationProps<UnstarNotebookMutation, UnstarNotebookMutationVariables>, 'query'> & { variables?: UnstarNotebookMutationVariables }) => (\n  <Urql.Mutation {...props} query={UnstarNotebookDocument} />\n);\n\n\nexport function useUnstarNotebookMutation() {\n  return Urql.useMutation<UnstarNotebookMutation, UnstarNotebookMutationVariables>(UnstarNotebookDocument);\n};\nexport const DeleteNotificationDocument = gql`\n    mutation DeleteNotification($notificationID: UUID!) {\n  deleteNotification(input: {notificationID: $notificationID})\n}\n    `;\n\nexport const DeleteNotificationComponent = (props: Omit<Urql.MutationProps<DeleteNotificationMutation, DeleteNotificationMutationVariables>, 'query'> & { variables?: DeleteNotificationMutationVariables }) => (\n  <Urql.Mutation {...props} query={DeleteNotificationDocument} />\n);\n\n\nexport function useDeleteNotificationMutation() {\n  return Urql.useMutation<DeleteNotificationMutation, DeleteNotificationMutationVariables>(DeleteNotificationDocument);\n};\nexport const DeleteAllNotificationsDocument = gql`\n    mutation DeleteAllNotifications {\n  deleteAllNotifications\n}\n    `;\n\nexport const DeleteAllNotificationsComponent = (props: Omit<Urql.MutationProps<DeleteAllNotificationsMutation, DeleteAllNotificationsMutationVariables>, 'query'> & { variables?: DeleteAllNotificationsMutationVariables }) => (\n  <Urql.Mutation {...props} query={DeleteAllNotificationsDocument} />\n);\n\n\nexport function useDeleteAllNotificationsMutation() {\n  return Urql.useMutation<DeleteAllNotificationsMutation, DeleteAllNotificationsMutationVariables>(DeleteAllNotificationsDocument);\n};\nexport const SetUserInfoDocument = gql`\n    mutation SetUserInfo($cover: String!, $bio: String!, $location: String!, $language: String!, $name: String!, $avatar: String!, $editorCursorColor: String!) {\n  setUserInfo(input: {cover: $cover, bio: $bio, location: $location, language: $language, name: $name, avatar: $avatar, editorCursorColor: $editorCursorColor}) {\n    ...ViewerFields\n  }\n}\n    ${ViewerFieldsFragmentDoc}`;\n\nexport const SetUserInfoComponent = (props: Omit<Urql.MutationProps<SetUserInfoMutation, SetUserInfoMutationVariables>, 'query'> & { variables?: SetUserInfoMutationVariables }) => (\n  <Urql.Mutation {...props} query={SetUserInfoDocument} />\n);\n\n\nexport function useSetUserInfoMutation() {\n  return Urql.useMutation<SetUserInfoMutation, SetUserInfoMutationVariables>(SetUserInfoDocument);\n};\nexport const DeleteWidgetDocument = gql`\n    mutation DeleteWidget($id: UUID!) {\n  deleteWidget(input: {id: $id})\n}\n    `;\n\nexport const DeleteWidgetComponent = (props: Omit<Urql.MutationProps<DeleteWidgetMutation, DeleteWidgetMutationVariables>, 'query'> & { variables?: DeleteWidgetMutationVariables }) => (\n  <Urql.Mutation {...props} query={DeleteWidgetDocument} />\n);\n\n\nexport function useDeleteWidgetMutation() {\n  return Urql.useMutation<DeleteWidgetMutation, DeleteWidgetMutationVariables>(DeleteWidgetDocument);\n};\nexport const UpdateWidgetDocument = gql`\n    mutation UpdateWidget($id: UUID!, $description: String!, $source: String!) {\n  updateWidget(input: {id: $id, description: $description, source: $source})\n}\n    `;\n\nexport const UpdateWidgetComponent = (props: Omit<Urql.MutationProps<UpdateWidgetMutation, UpdateWidgetMutationVariables>, 'query'> & { variables?: UpdateWidgetMutationVariables }) => (\n  <Urql.Mutation {...props} query={UpdateWidgetDocument} />\n);\n\n\nexport function useUpdateWidgetMutation() {\n  return Urql.useMutation<UpdateWidgetMutation, UpdateWidgetMutationVariables>(UpdateWidgetDocument);\n};\nexport const CommentWidgetDocument = gql`\n    query CommentWidget($widgetID: UUID!) {\n  widget(id: $widgetID) {\n    ...CommentWidgetFields\n  }\n}\n    ${CommentWidgetFieldsFragmentDoc}`;\n\nexport const CommentWidgetComponent = (props: Omit<Urql.QueryProps<CommentWidgetQuery, CommentWidgetQueryVariables>, 'query'> & { variables: CommentWidgetQueryVariables }) => (\n  <Urql.Query {...props} query={CommentWidgetDocument} />\n);\n\n\nexport function useCommentWidgetQuery(options: Omit<Urql.UseQueryArgs<CommentWidgetQueryVariables>, 'query'> = {}) {\n  return Urql.useQuery<CommentWidgetQuery>({ query: CommentWidgetDocument, ...options });\n};\nexport const CommentWidgetMessagesDocument = gql`\n    query CommentWidgetMessages($widgetID: UUID!, $before: UUID!, $after: UUID!, $first: Int!, $last: Int!) {\n  widget(id: $widgetID) {\n    instance {\n      type\n      ... on CommentWidgetInstance {\n        type\n        commentWidget {\n          messages(before: $before, after: $after, first: $first, last: $last) {\n            ...CommentWidgetMessageConnectionFields\n          }\n        }\n      }\n    }\n  }\n}\n    ${CommentWidgetMessageConnectionFieldsFragmentDoc}`;\n\nexport const CommentWidgetMessagesComponent = (props: Omit<Urql.QueryProps<CommentWidgetMessagesQuery, CommentWidgetMessagesQueryVariables>, 'query'> & { variables: CommentWidgetMessagesQueryVariables }) => (\n  <Urql.Query {...props} query={CommentWidgetMessagesDocument} />\n);\n\n\nexport function useCommentWidgetMessagesQuery(options: Omit<Urql.UseQueryArgs<CommentWidgetMessagesQueryVariables>, 'query'> = {}) {\n  return Urql.useQuery<CommentWidgetMessagesQuery>({ query: CommentWidgetMessagesDocument, ...options });\n};\nexport const GitHubUserDocument = gql`\n    query GitHubUser {\n  viewer {\n    githubUser {\n      login\n      avatar\n      email\n    }\n  }\n}\n    `;\n\nexport const GitHubUserComponent = (props: Omit<Urql.QueryProps<GitHubUserQuery, GitHubUserQueryVariables>, 'query'> & { variables?: GitHubUserQueryVariables }) => (\n  <Urql.Query {...props} query={GitHubUserDocument} />\n);\n\n\nexport function useGitHubUserQuery(options: Omit<Urql.UseQueryArgs<GitHubUserQueryVariables>, 'query'> = {}) {\n  return Urql.useQuery<GitHubUserQuery>({ query: GitHubUserDocument, ...options });\n};\nexport const NotebooksDocument = gql`\n    query Notebooks($query: String = \"\", $orderBy: NotebookOrderBy = TOTAL_STARS_COUNT, $page: Int = 0, $perPage: Int = 10) {\n  notebooks(query: $query, orderBy: $orderBy, page: $page, perPage: $perPage) {\n    ...NotebookFields\n  }\n}\n    ${NotebookFieldsFragmentDoc}`;\n\nexport const NotebooksComponent = (props: Omit<Urql.QueryProps<NotebooksQuery, NotebooksQueryVariables>, 'query'> & { variables?: NotebooksQueryVariables }) => (\n  <Urql.Query {...props} query={NotebooksDocument} />\n);\n\n\nexport function useNotebooksQuery(options: Omit<Urql.UseQueryArgs<NotebooksQueryVariables>, 'query'> = {}) {\n  return Urql.useQuery<NotebooksQuery>({ query: NotebooksDocument, ...options });\n};\nexport const NotificationsDocument = gql`\n    query Notifications($before: UUID!, $after: UUID!, $first: Int, $last: Int) {\n  viewer {\n    notifications(before: $before, after: $after, first: $first, last: $last) {\n      pageInfo {\n        ...PageInfoFields\n      }\n      edges {\n        cursor\n        node {\n          ...NotificationFields\n        }\n      }\n    }\n  }\n}\n    ${PageInfoFieldsFragmentDoc}\n${NotificationFieldsFragmentDoc}`;\n\nexport const NotificationsComponent = (props: Omit<Urql.QueryProps<NotificationsQuery, NotificationsQueryVariables>, 'query'> & { variables: NotificationsQueryVariables }) => (\n  <Urql.Query {...props} query={NotificationsDocument} />\n);\n\n\nexport function useNotificationsQuery(options: Omit<Urql.UseQueryArgs<NotificationsQueryVariables>, 'query'> = {}) {\n  return Urql.useQuery<NotificationsQuery>({ query: NotificationsDocument, ...options });\n};\nexport const ViewerDocument = gql`\n    query Viewer {\n  viewer {\n    ...ViewerFields\n  }\n}\n    ${ViewerFieldsFragmentDoc}`;\n\nexport const ViewerComponent = (props: Omit<Urql.QueryProps<ViewerQuery, ViewerQueryVariables>, 'query'> & { variables?: ViewerQueryVariables }) => (\n  <Urql.Query {...props} query={ViewerDocument} />\n);\n\n\nexport function useViewerQuery(options: Omit<Urql.UseQueryArgs<ViewerQueryVariables>, 'query'> = {}) {\n  return Urql.useQuery<ViewerQuery>({ query: ViewerDocument, ...options });\n};","import { createClient, defaultExchanges, subscriptionExchange } from \"urql\";\nimport { getGraphQLEndpoint } from \"./utils\";\n// import { SubscriptionClient } from \"subscriptions-transport-ws\";\n\n/*\nconst subscriptionClient = new SubscriptionClient(\n  getGraphQLEndpoint().replace(/^http/, \"ws\"),\n  {\n    connectionParams: () => {\n      const auth = { Authorization: `Bearer ${localStorage.getItem(\"token\")}` };\n      return auth;\n    },\n    reconnect: true\n  }\n);\n*/\n\nexport const GraphQLClient = createClient({\n  url: getGraphQLEndpoint(),\n  exchanges: [\n    ...defaultExchanges,\n    // Disable subscriptions for now\n    /*\n    subscriptionExchange({\n      forwardSubscription: operation => subscriptionClient.request(operation)\n    })*/\n  ],\n  fetchOptions: {\n    cache: \"no-cache\",\n    headers: {\n      Authorization: `Bearer ${localStorage.getItem(\"token\")}`,\n    },\n  },\n});\n","import {\n  Avatar,\n  Box,\n  Typography,\n  Card,\n  IconButton,\n  Popover,\n  Chip,\n  Dialog,\n  Tooltip,\n} from \"@material-ui/core\";\nimport { createStyles, makeStyles, Theme } from \"@material-ui/core/styles\";\nimport clsx from \"clsx\";\nimport { formatRelative } from \"date-fns/esm\";\nimport Identicon from \"identicon.js\";\nimport { sha256 } from \"js-sha256\";\nimport React, { useState, useEffect } from \"react\";\nimport { Emoji, Picker as EmojiPicker } from \"emoji-mart\";\nimport \"emoji-mart/css/emoji-mart.css\";\nimport { Reply, StickerEmoji, FileEditOutline } from \"mdi-material-ui\";\nimport Noty from \"noty\";\nimport { useTranslation } from \"react-i18next\";\nimport { renderPreview } from \"vickymd/preview\";\nimport { languageCodeToDateFNSLocale } from \"../../../i18n/i18n\";\nimport {\n  useAddReactionToCommentWidgetMessageMutation,\n  useRemoveReactionFromCommentWidgetMessageMutation,\n  CommentWidgetFieldsFragment,\n  CommentWidgetMessageFieldsFragment,\n} from \"../../../generated/graphql\";\nimport { globalContainers } from \"../../../containers/global\";\nimport { postprocessPreview } from \"../../../utilities/preview\";\n\nconst messageMarginLeft = 48;\nconst useStyles = makeStyles((theme: Theme) =>\n  createStyles({\n    chatMessage: {\n      \"width\": \"100%\",\n      \"paddingLeft\": theme.spacing(2),\n      \"paddingRight\": theme.spacing(2),\n      \"boxSizing\": \"border-box\",\n      \"cursor\": \"pointer\",\n      \"&:first-child\": {\n        marginTop: theme.spacing(2),\n      },\n      /*\n      \"&:hover\": {\n        backgroundColor: \"#f6f6f6\",\n      },\n      \"&:hover .preview\": {\n        backgroundColor: \"#f6f6f6 !important\",\n      },\n      */\n    },\n    avatarPanel: {\n      display: \"grid\",\n      gridTemplateAreas: `\"avatar username\"\n                          \"avatar time\"`,\n      justifyContent: \"start\",\n      alignItems: \"center\",\n      gridColumnGap: theme.spacing(2),\n    },\n    avatar: {\n      borderRadius: \"4px\",\n      width: \"32px\",\n      height: \"32px\",\n      gridArea: \"avatar\",\n      cursor: \"pointer\",\n    },\n    username: {\n      gridArea: \"username\",\n    },\n    time: {\n      gridArea: \"time\",\n    },\n    message: {\n      marginLeft: `${messageMarginLeft}px`,\n      cursor: \"pointer\",\n      backgroundColor: \"inherit !important\",\n      /*\n      \"&:hover\": {\n        backgroundColor: \"#f6f6f6 !important\",\n      },\n      */\n    },\n    reactions: {\n      marginLeft: `${messageMarginLeft}px`,\n      marginBottom: theme.spacing(2),\n    },\n    singleTime: {\n      marginLeft: `${messageMarginLeft}px`,\n    },\n    modifiedCaption: {\n      marginLeft: `${messageMarginLeft}px`,\n    },\n    reactionChip: {\n      \"marginBottom\": \"2px\",\n      \"&:hover\": {\n        cursor: \"pointer\",\n      },\n    },\n  }),\n);\n\nconst actionBtnClass = {\n  width: \"20px\",\n  height: \"20px\",\n};\n\ninterface Props {\n  commentWidget: CommentWidgetFieldsFragment;\n  message: CommentWidgetMessageFieldsFragment;\n  previousMessage?: CommentWidgetMessageFieldsFragment;\n  mentionUser: (username: string) => void;\n  onModifyChatMessage: (chatMessageID: string) => void;\n}\nexport function CommentMessage(props: Props) {\n  const classes = useStyles(props);\n  const message = props.message;\n  const previousMessage = props.previousMessage;\n  const [anchorEl, setAnchorEl] = React.useState<null | HTMLElement>(null);\n  const [emojiPickerOpen, setEmojiPickerOpen] = useState<boolean>(false);\n  const [\n    resAddReactionToCommentWidgetMessage,\n    executeAddReactionToCommentWidgetMessageMutation,\n  ] = useAddReactionToCommentWidgetMessageMutation();\n  const [\n    resRemoveReactionFromCommentWidgetMessage,\n    executeRemoveReactionFromCommentWidgetMessageMutation,\n  ] = useRemoveReactionFromCommentWidgetMessageMutation();\n  const [forceUpdate, setForceUpdate] = useState<number>(Date.now());\n  const { t } = useTranslation();\n  const [previewElement, setPreviewElement] = React.useState<HTMLElement>(null);\n\n  useEffect(() => {\n    if (resAddReactionToCommentWidgetMessage.error) {\n      new Noty({\n        type: \"error\",\n        text: resAddReactionToCommentWidgetMessage.error.message,\n        layout: \"topRight\",\n        theme: \"relax\",\n        timeout: 2000,\n      }).show();\n    }\n  }, [resAddReactionToCommentWidgetMessage]);\n\n  useEffect(() => {\n    if (resRemoveReactionFromCommentWidgetMessage.error) {\n      new Noty({\n        type: \"error\",\n        text: resRemoveReactionFromCommentWidgetMessage.error.message,\n        layout: \"topRight\",\n        theme: \"relax\",\n        timeout: 2000,\n      }).show();\n    }\n  }, [resRemoveReactionFromCommentWidgetMessage]);\n\n  useEffect(() => {\n    if (previewElement) {\n      renderPreview(previewElement, message.markdown);\n      postprocessPreview(\n        previewElement,\n        globalContainers.crossnoteContainer.selectedNote,\n      );\n    }\n  }, [previewElement, message.markdown]);\n\n  const handleClick = (event: React.MouseEvent<HTMLElement>) => {\n    setAnchorEl(anchorEl ? null : (event.target as any));\n  };\n  const handleClose = () => {\n    setAnchorEl(null);\n  };\n  const handleReply = () => {\n    props.mentionUser(message.author.username);\n    handleClose();\n  };\n  const openPopper = Boolean(anchorEl);\n  const modified = message.createdAt !== message.updatedAt;\n\n  function updateReactionSummaries(reaction: string) {\n    let found = false;\n    for (let i = 0; i < message.reactionSummaries.length; i++) {\n      if (message.reactionSummaries[i].reaction === reaction) {\n        found = true;\n        message.reactionSummaries[i].count += 1;\n        message.reactionSummaries[i].selfAuthored = true;\n        break;\n      }\n    }\n    if (!found) {\n      message.reactionSummaries = [\n        {\n          reaction: reaction,\n          count: 1,\n          selfAuthored: true,\n        },\n        ...message.reactionSummaries,\n      ];\n    }\n    setForceUpdate(Date.now());\n  }\n  return (\n    <Box className={clsx(classes.chatMessage)} onClick={handleClick}>\n      {previousMessage &&\n      previousMessage.author.id === message.author.id &&\n      previousMessage.author.username === message.author.username ? null : (\n        <Box className={clsx(classes.avatarPanel)}>\n          <Avatar\n            onClick={() => {\n              /*\n              if (message.authorVisibility !== AuthorVisibility.Anonymous) {\n                window.open(\n                  `${CROSSNOTE_CONFIG.homePage}/user/${chatMessage.author.username}`\n                );\n              }\n              */\n            }}\n            variant={\"rounded\"}\n            className={clsx(classes.avatar)}\n            src={\n              message.author.avatar ||\n              \"data:image/png;base64,\" +\n                new Identicon(sha256(message.author.username), 80).toString()\n            }\n          ></Avatar>\n          <Typography className={clsx(classes.username)}>\n            {message.author.username}\n          </Typography>\n          <Typography\n            className={clsx(classes.time)}\n            variant=\"body2\"\n            color={\"textSecondary\"}\n          >\n            {formatRelative(new Date(message.createdAt), new Date(), {\n              locale: languageCodeToDateFNSLocale(\n                globalContainers.settingsContainer.language,\n              ),\n            })}\n          </Typography>\n        </Box>\n      )}\n      {previousMessage &&\n      previousMessage.author.id === message.author.id &&\n      previousMessage.author.username === message.author.username &&\n      new Date(message.createdAt).getTime() -\n        new Date(previousMessage.createdAt).getTime() >=\n        1000 * 60 ? (\n        <Typography\n          className={clsx(classes.time, classes.singleTime)}\n          variant=\"body2\"\n          color={\"textSecondary\"}\n        >\n          {formatRelative(new Date(message.createdAt), new Date(), {\n            locale: languageCodeToDateFNSLocale(\n              globalContainers.settingsContainer.language,\n            ),\n          })}\n        </Typography>\n      ) : null}\n      {modified && (\n        <Typography\n          variant={\"caption\"}\n          color={\"textSecondary\"}\n          className={clsx(classes.modifiedCaption)}\n        >\n          {t(\"widget/crossnote.comment/modified-comment\")}\n        </Typography>\n      )}\n      <div\n        className={clsx(classes.message) + \" preview\"}\n        ref={(element: HTMLElement) => {\n          setPreviewElement(element);\n        }}\n      ></div>\n      <Box className={clsx(classes.reactions)}>\n        {message.reactionSummaries\n          .sort((x, y) => {\n            let weightX = 1;\n            let weightY = 1;\n            if (x.selfAuthored) {\n              weightX = 100;\n            }\n            if (y.selfAuthored) {\n              weightY = 100;\n            }\n            return x.count * weightX - y.count * weightY;\n          })\n          .map((reactionSummary) => {\n            return (\n              <Chip\n                variant={reactionSummary.selfAuthored ? \"default\" : \"outlined\"}\n                size=\"medium\"\n                label={reactionSummary.count.toString()}\n                color={\"primary\"}\n                key={reactionSummary.reaction}\n                style={{ marginRight: \"8px\" }}\n                className={clsx(classes.reactionChip)}\n                onClick={() => {\n                  if (!globalContainers.cloudContainer.loggedIn) {\n                    globalContainers.cloudContainer.setAuthDialogOpen(true);\n                  } else if (reactionSummary.selfAuthored) {\n                    executeRemoveReactionFromCommentWidgetMessageMutation({\n                      messageID: message.id,\n                      reaction: reactionSummary.reaction,\n                    });\n                    reactionSummary.selfAuthored = false;\n                    reactionSummary.count -= 1; // TODO: Should we remove the reaction if it reaches 0?\n                    setForceUpdate(Date.now());\n                  } else {\n                    executeAddReactionToCommentWidgetMessageMutation({\n                      messageID: message.id,\n                      reaction: reactionSummary.reaction,\n                    });\n                    updateReactionSummaries(reactionSummary.reaction);\n                  }\n                }}\n                avatar={\n                  <Avatar>\n                    <Emoji emoji={reactionSummary.reaction} size={16}></Emoji>\n                  </Avatar>\n                }\n              />\n            );\n          })}\n      </Box>\n\n      <Popover\n        open={openPopper}\n        anchorEl={anchorEl}\n        onClose={handleClose}\n        anchorOrigin={{\n          vertical: \"bottom\",\n          horizontal: \"center\",\n        }}\n        transformOrigin={{\n          vertical: \"top\",\n          horizontal: \"center\",\n        }}\n      >\n        <Card>\n          <Tooltip title={t(\"widget/crossnote.comment/reply-to-this-user\")}>\n            <IconButton onClick={handleReply}>\n              <Reply style={actionBtnClass}></Reply>\n            </IconButton>\n          </Tooltip>\n          <Tooltip\n            title={t(\"widget/crossnote.comment/add-reaction-to-this-comment\")}\n          >\n            <IconButton onClick={() => setEmojiPickerOpen(true)}>\n              <StickerEmoji style={actionBtnClass}></StickerEmoji>\n            </IconButton>\n          </Tooltip>\n          {globalContainers.cloudContainer.loggedIn &&\n            message.author.id === globalContainers.cloudContainer.viewer.id && (\n              <Tooltip title={t(\"widget/crossnote.comment/edit-this-message\")}>\n                <IconButton\n                  onClick={() => props.onModifyChatMessage(message.id)}\n                >\n                  <FileEditOutline style={actionBtnClass}></FileEditOutline>\n                </IconButton>\n              </Tooltip>\n            )}\n        </Card>\n      </Popover>\n\n      <Dialog open={emojiPickerOpen} onClose={() => setEmojiPickerOpen(false)}>\n        <EmojiPicker\n          emoji={\"\"}\n          showSkinTones={false /* Disable skin for now */}\n          onSelect={(data) => {\n            if (!globalContainers.cloudContainer.loggedIn) {\n              setEmojiPickerOpen(false);\n              globalContainers.cloudContainer.setAuthDialogOpen(true);\n            } else {\n              setEmojiPickerOpen(false);\n              executeAddReactionToCommentWidgetMessageMutation({\n                messageID: message.id,\n                reaction: data.colons,\n              });\n              updateReactionSummaries(data.colons);\n              handleClose();\n            }\n          }}\n        />\n      </Dialog>\n      <Box style={{ display: \"none\" }}>{forceUpdate}</Box>\n    </Box>\n  );\n}\n","import React, { useState, useEffect, useCallback } from \"react\";\nimport {\n  makeStyles,\n  createStyles,\n  Theme,\n  Button,\n  Box,\n  Card,\n  Typography,\n  darken,\n} from \"@material-ui/core\";\nimport clsx from \"clsx\";\nimport { useTranslation } from \"react-i18next\";\nimport { Editor as CodeMirrorEditor, TextMarker } from \"codemirror\";\nimport { globalContainers } from \"../../../containers/global\";\nimport { setTheme } from \"../../../themes/manager\";\nimport { resolveNoteImageSrc } from \"../../../utilities/image\";\nimport EditImageDialog from \"../../../components/EditImageDialog\";\nimport { openURL } from \"../../../utilities/preview\";\nconst VickyMD = require(\"vickymd/core\");\n\nexport const ChatMessageEditorHeight = \"150\";\nconst useStyles = makeStyles((theme: Theme) =>\n  createStyles({\n    root: {\n      width: \"100%\",\n      height: `${ChatMessageEditorHeight}px`,\n      display: \"flex\",\n      flexDirection: \"column\",\n      // position: \"absolute\",\n      bottom: \"0\",\n    },\n    toolbar: {\n      display: \"flex\",\n      overflow: \"hidden\",\n      alignItems: \"center\",\n      flexDirection: \"row\",\n      justifyContent: \"flex-end\",\n      padding: \"1px 4px 1px 4px\",\n      backgroundColor: darken(theme.palette.background.paper, 0.05),\n    },\n    toolbarLeft: {\n      display: \"flex\",\n      alignItems: \"center\",\n    },\n    editorWrapper: {\n      \"height\": \"160px\",\n      // border: \"2px solid #96c3e6\",\n      \"& .CodeMirror-gutters\": {\n        display: \"none\",\n      },\n    },\n    textarea: {\n      width: \"100%\",\n      height: \"100%\",\n    },\n    sendButton: {\n      width: \"100px\",\n    },\n  }),\n);\ninterface Props {\n  sendMessage: (message: string) => void;\n  sendingMessage?: boolean;\n  updateMessage: (chatMessageID: string, message: string) => void;\n  updateMessageID?: string;\n  updateMessageMarkdown?: string;\n  cancelUpdatingMessage: () => void;\n  updatingMessage?: boolean;\n  setEditor: (editor: CodeMirrorEditor) => void;\n}\n\nexport function CommentEditor(props: Props) {\n  const classes = useStyles(props);\n  const note = globalContainers.crossnoteContainer.selectedNote;\n  const [textAreaElement, setTextAreaElement] = useState<HTMLTextAreaElement>(\n    null,\n  );\n  const [editor, setEditor] = useState<CodeMirrorEditor>(null);\n  const [editImageElement, setEditImageElement] = useState<HTMLImageElement>(\n    null,\n  );\n  const [editImageTextMarker, setEditImageTextMarker] = useState<TextMarker>(\n    null,\n  );\n  const [editImageDialogOpen, setEditImageDialogOpen] = useState<boolean>(\n    false,\n  );\n  const { t } = useTranslation();\n\n  useEffect(() => {\n    if (textAreaElement) {\n      const editor: CodeMirrorEditor = VickyMD.fromTextArea(textAreaElement, {\n        mode: {\n          name: \"hypermd\",\n          hashtag: true,\n        },\n        // inputStyle: \"textarea\",\n        keyMap: globalContainers.settingsContainer.keyMap,\n        showCursorWhenSelecting: true,\n        inputStyle: \"contenteditable\",\n      });\n      editor.setValue(\"\");\n      editor.setOption(\"lineNumbers\", false);\n      editor.focus();\n      setEditor(editor);\n    }\n  }, [textAreaElement]);\n\n  useEffect(() => {\n    if (editor && globalContainers.settingsContainer.theme) {\n      setTheme({\n        editor,\n        themeName: globalContainers.settingsContainer.theme.name,\n      });\n    }\n  }, [editor]);\n\n  useEffect(() => {\n    props.setEditor(editor);\n  }, [editor, props]);\n\n  useEffect(() => {\n    if (!editor) {\n      return;\n    }\n\n    const linkIconClickedHandler = (args: any) => {\n      // TODO:\n      const url = args.element.getAttribute(\"data-url\");\n      openURL(url || \"\", note);\n    };\n    editor.on(\"linkIconClicked\", linkIconClickedHandler);\n\n    const imageClickedHandler = (args: any) => {\n      const marker: TextMarker = args.marker;\n      const imageElement: HTMLImageElement = args.element;\n      imageElement.setAttribute(\n        \"data-marker-position\",\n        JSON.stringify(marker.find()),\n      );\n      setEditImageElement(imageElement);\n      setEditImageTextMarker(marker);\n      setEditImageDialogOpen(true);\n    };\n    editor.on(\"imageClicked\", imageClickedHandler);\n\n    const loadImage = async (args: any) => {\n      const element = args.element;\n      const imageSrc = element.getAttribute(\"data-src\");\n      element.setAttribute(\"src\", await resolveNoteImageSrc(note, imageSrc));\n    };\n    editor.on(\"imageReadyToLoad\", loadImage);\n\n    return () => {\n      editor.off(\"linkIconClicked\", linkIconClickedHandler);\n      editor.off(\"imageClicked\", imageClickedHandler);\n      editor.off(\"imageReadyToLoad\", loadImage);\n    };\n  }, [editor, note]);\n\n  useEffect(() => {\n    if (props.updateMessageID && props.updateMessageMarkdown) {\n      editor.setValue(props.updateMessageMarkdown);\n    }\n  }, [props.updateMessageID, props.updateMessageMarkdown, editor]);\n\n  return (\n    <Box className={clsx(classes.root)}>\n      <Box className={clsx(classes.toolbar)}>\n        {props.updateMessageID ? (\n          <Box>\n            <Button\n              variant={\"contained\"}\n              color={\"secondary\"}\n              onClick={() => {\n                props.cancelUpdatingMessage();\n              }}\n            >\n              {t(\"general/cancel\")}\n            </Button>\n            <Button\n              variant={\"contained\"}\n              color={\"primary\"}\n              onClick={() => {\n                if (editor) {\n                  props.updateMessage(\n                    props.updateMessageID,\n                    editor.getValue() || \"\",\n                  );\n                }\n              }}\n              disabled={props.updatingMessage}\n              style={{ marginLeft: \"8px\" }}\n            >\n              {props.updatingMessage\n                ? t(\"general/updating\")\n                : t(\"general/update\")}\n            </Button>\n          </Box>\n        ) : (\n          <Box>\n            {globalContainers.cloudContainer.loggedIn ? (\n              <Button\n                variant=\"contained\"\n                color=\"primary\"\n                onClick={() => {\n                  if (editor) {\n                    props.sendMessage(editor.getValue() || \"\");\n                    editor.setValue(\"\");\n                  }\n                }}\n                disabled={props.sendingMessage}\n                className={clsx(classes.sendButton)}\n              >\n                {props.sendingMessage\n                  ? t(\"general/sending\")\n                  : t(\"general/send\")}\n              </Button>\n            ) : (\n              <Button\n                variant={\"contained\"}\n                color={\"primary\"}\n                onClick={() => {\n                  globalContainers.cloudContainer.setAuthDialogOpen(true);\n                }}\n              >\n                <Typography variant={\"body2\"}>{\"Log in\"}</Typography>\n              </Button>\n            )}\n          </Box>\n        )}\n      </Box>\n      <Card className={clsx(classes.editorWrapper)} elevation={4}>\n        <textarea\n          id=\"outlined-multiline-flexible\"\n          className={classes.textarea}\n          ref={(element: HTMLTextAreaElement) => {\n            setTextAreaElement(element);\n          }}\n        />\n      </Card>\n\n      <EditImageDialog\n        open={editImageDialogOpen}\n        onClose={() => setEditImageDialogOpen(false)}\n        editor={editor}\n        imageElement={editImageElement}\n        marker={editImageTextMarker}\n        note={note}\n      ></EditImageDialog>\n    </Box>\n  );\n}\n","import React, { useState, useEffect, useCallback } from \"react\";\nimport {\n  Dialog,\n  DialogContent,\n  Typography,\n  DialogTitle,\n  Box,\n  IconButton,\n  DialogActions,\n  Button,\n  useMediaQuery,\n  Tooltip,\n} from \"@material-ui/core\";\nimport {\n  createStyles,\n  makeStyles,\n  Theme,\n  useTheme,\n} from \"@material-ui/core/styles\";\nimport clsx from \"clsx\";\nimport {\n  CommentWidgetFieldsFragment,\n  CommentWidgetMessageFieldsFragment,\n  PageInfo,\n  useCommentWidgetMessagesQuery,\n  usePostCommentWidgetMessageMutation,\n  useUpdateCommentWidgetMessageMutation,\n  useSubscribeToCommentWidgetMutation,\n  useUnsubscribeFromCommentWidgetMutation,\n} from \"../../../generated/graphql\";\nimport { useTranslation } from \"react-i18next\";\nimport {\n  EmptyPageInfo,\n  getMentionsFromMarkdown,\n} from \"../../../utilities/note\";\nimport { UUIDNil } from \"../../../utilities/utils\";\nimport { BellOutline, Bell, Close } from \"mdi-material-ui\";\nimport { CommentMessage } from \"./CommentMessages\";\nimport { Editor as CodeMirrorEditor } from \"codemirror\";\nimport { CommentEditor } from \"./CommentEditor\";\nimport Noty from \"noty\";\n\nconst useStyles = makeStyles((theme: Theme) =>\n  createStyles({\n    topBar: {\n      display: \"flex\",\n      flexDirection: \"row\",\n      alignItems: \"center\",\n      justifyContent: \"space-between\",\n    },\n    row: {\n      display: \"flex\",\n      flexDirection: \"row\",\n      alignItems: \"center\",\n    },\n    commentWrapper: {\n      padding: \"0\",\n    },\n    messages: {},\n  }),\n);\n\ninterface Props {\n  open: boolean;\n  onClose: () => void;\n  commentWidget: CommentWidgetFieldsFragment;\n}\nexport function CommentDialog(props: Props) {\n  const classes = useStyles(props);\n  const theme = useTheme();\n  const fullScreen = useMediaQuery(theme.breakpoints.down(\"xs\"));\n  const commentWidget = props.commentWidget;\n  const { t } = useTranslation();\n  const [editor, setEditor] = useState<CodeMirrorEditor>(null);\n  const [messages, setMessages] = useState<\n    CommentWidgetMessageFieldsFragment[]\n  >(\n    commentWidget.instance.commentWidget.messages.edges.map(\n      (edge) => edge.node,\n    ),\n  );\n  const [messagesElement, setMessagesElement] = useState<HTMLDivElement>(null);\n  const [\n    latestPulledMessagePageInfo,\n    setLatestPulledMessagePageInfo,\n  ] = useState<PageInfo>(\n    commentWidget.instance.commentWidget.messages.pageInfo,\n  );\n  const [updateMessageID, setUpdateMessageID] = useState<string>(\"\");\n  const [\n    resMessagesAfter,\n    executeMessagesAfterQuery,\n  ] = useCommentWidgetMessagesQuery({\n    variables: {\n      widgetID: commentWidget.id,\n      before: UUIDNil,\n      after: latestPulledMessagePageInfo.endCursor,\n      first: 20,\n      last: 0,\n    },\n    requestPolicy: \"network-only\",\n    pause: true,\n  });\n  const [\n    resPostMessage,\n    executePostMessageMutation,\n  ] = usePostCommentWidgetMessageMutation();\n  const [\n    resUpdateMessage,\n    executeUpdateMessageMutation,\n  ] = useUpdateCommentWidgetMessageMutation();\n  const [\n    resSubscribeToCommentWidget,\n    executeSubscribeToCommentWidgetMutation,\n  ] = useSubscribeToCommentWidgetMutation();\n  const [\n    resUnsubscribeFromCommentWidget,\n    executeUnsubscribeFromCommentWidgetMutation,\n  ] = useUnsubscribeFromCommentWidgetMutation();\n\n  const mentionUser = useCallback(\n    (username: string) => {\n      if (editor) {\n        editor.focus();\n        editor.replaceSelection(`@${username} `);\n        editor.focus();\n      }\n    },\n    [editor],\n  );\n\n  const subscribeToChatGroup = useCallback(() => {\n    if (commentWidget) {\n      commentWidget.instance.commentWidget.subscribed = true;\n      executeSubscribeToCommentWidgetMutation({\n        widgetID: commentWidget.id,\n      });\n    }\n  }, [commentWidget, executeSubscribeToCommentWidgetMutation]);\n\n  const unsubscribeFromChatGroup = useCallback(() => {\n    if (commentWidget) {\n      commentWidget.instance.commentWidget.subscribed = false;\n      executeUnsubscribeFromCommentWidgetMutation({\n        widgetID: commentWidget.id,\n      });\n    }\n  }, [commentWidget, executeUnsubscribeFromCommentWidgetMutation]);\n\n  const sendMessage = useCallback(\n    (message: string = \"\") => {\n      if (!commentWidget || !message.trim().length) {\n        return;\n      }\n      executePostMessageMutation({\n        widgetID: commentWidget.id,\n        markdown: message,\n        notifyUsers: getMentionsFromMarkdown(message),\n      });\n    },\n    [commentWidget, executePostMessageMutation],\n  );\n\n  const updateMessage = useCallback(\n    (messageID: string, message: string) => {\n      if (!commentWidget || !message.trim().length) {\n        return;\n      }\n      executeUpdateMessageMutation({\n        messageID: messageID,\n        markdown: message,\n      });\n    },\n    [commentWidget, executeUpdateMessageMutation],\n  );\n\n  const addMessage = useCallback(\n    (message: CommentWidgetMessageFieldsFragment) => {\n      setMessages((messages) =>\n        [message, ...messages]\n          .filter(\n            (message, index, self) =>\n              index === self.findIndex((m) => m.id === message.id),\n          )\n          .sort((x, y) => {\n            const xC = new Date(x.createdAt);\n            const yC = new Date(y.createdAt);\n            return xC.getTime() - yC.getTime();\n          }),\n      );\n    },\n    [],\n  );\n\n  const scrollMessagesToBottom = useCallback(() => {\n    if (messagesElement) {\n      messagesElement.scrollTop = messagesElement.scrollHeight * 10;\n    }\n  }, [messagesElement]);\n\n  const fetchPreviousMessages = useCallback(() => {\n    if (latestPulledMessagePageInfo.hasNextPage) {\n      executeMessagesAfterQuery({\n        requestPolicy: \"network-only\",\n      });\n    }\n  }, [executeMessagesAfterQuery, latestPulledMessagePageInfo]);\n\n  useEffect(() => {\n    if (resSubscribeToCommentWidget.error) {\n      // console.log(resSubscribeToCommentWidget.error);\n      /*\n      new Noty({\n        type: \"error\",\n        text: t(\"error/failed-to-subscribe-to-comment-widget\"),\n        layout: \"topRight\",\n        theme: \"relax\",\n        timeout: 2000\n      }).show();\n      */\n    }\n  }, [resSubscribeToCommentWidget, t]);\n\n  useEffect(() => {\n    if (resUnsubscribeFromCommentWidget.error) {\n      // console.log(resUnsubscribeFromCommentWidget.error);\n      /*\n      new Noty({\n        type: \"error\",\n        text: t(\"error/failed-to-unsubscribe-from-comment-widget\"),\n        layout: \"topRight\",\n        theme: \"relax\",\n        timeout: 2000\n      }).show();\n      */\n    }\n  }, [resUnsubscribeFromCommentWidget, t]);\n\n  useEffect(() => {\n    if (resPostMessage.fetching) {\n    } else if (resPostMessage.error) {\n      new Noty({\n        type: \"error\",\n        text: t(\"widget/crossnote.comment/post-comment-failure\"),\n        layout: \"topRight\",\n        theme: \"relax\",\n        timeout: 2000,\n      }).show();\n    } else if (resPostMessage.data) {\n      const message = resPostMessage.data.postCommentWidgetMessage;\n      addMessage(message);\n      scrollMessagesToBottom();\n    }\n  }, [resPostMessage, addMessage, scrollMessagesToBottom, t]);\n\n  useEffect(() => {\n    if (resUpdateMessage.data) {\n      const message = resUpdateMessage.data.updateCommentWidgetMessage;\n      addMessage(message);\n      setUpdateMessageID(\"\");\n      if (editor) {\n        editor.setValue(\"\");\n      }\n    }\n  }, [resUpdateMessage, addMessage, editor]);\n\n  useEffect(() => {\n    if (resMessagesAfter.fetching) {\n    } else if (resMessagesAfter.error) {\n    } else if (resMessagesAfter.data) {\n      const connection =\n        resMessagesAfter.data.widget.instance.commentWidget.messages;\n      setLatestPulledMessagePageInfo(connection.pageInfo);\n      if (!connection.edges.length) {\n        return;\n      }\n      setMessages((messages) =>\n        [...connection.edges.map((edge) => edge.node), ...messages]\n          .filter(\n            (message, index, self) =>\n              index === self.findIndex((m) => m.id === message.id),\n          )\n          .sort((x, y) => {\n            const xC = new Date(x.createdAt);\n            const yC = new Date(y.createdAt);\n            return xC.getTime() - yC.getTime();\n          }),\n      );\n    }\n  }, [resMessagesAfter]);\n\n  return (\n    <Dialog\n      open={props.open}\n      onClose={props.onClose}\n      fullWidth={true}\n      fullScreen={fullScreen}\n    >\n      <DialogTitle style={{ paddingBottom: \"0\" }}>\n        <Box className={classes.topBar}>\n          <Box className={classes.row}>\n            {fullScreen && (\n              <IconButton onClick={() => props.onClose()}>\n                <Close></Close>\n              </IconButton>\n            )}\n            <Typography>{t(\"general/Comments\")}</Typography>\n          </Box>\n          <Tooltip\n            title={\n              commentWidget.instance.commentWidget.subscribed\n                ? t(\"widget/crossnote.comment/unsubscribe-info\")\n                : t(\"widget/crossnote.comment/subscribe-info\")\n            }\n          >\n            <IconButton\n              color={\"primary\"}\n              onClick={() => {\n                if (commentWidget.instance.commentWidget.subscribed) {\n                  unsubscribeFromChatGroup();\n                } else {\n                  subscribeToChatGroup();\n                }\n              }}\n            >\n              {commentWidget.instance.commentWidget.subscribed ? (\n                <Bell></Bell>\n              ) : (\n                <BellOutline></BellOutline>\n              )}\n            </IconButton>\n          </Tooltip>\n        </Box>\n      </DialogTitle>\n      <DialogContent className={clsx(classes.commentWrapper)}>\n        <div\n          className={clsx(classes.messages)}\n          ref={(element: HTMLDivElement) => {\n            setMessagesElement(element);\n          }}\n        >\n          {messages.map((message, index) => {\n            const commentMessage = (\n              <CommentMessage\n                commentWidget={commentWidget}\n                message={message}\n                previousMessage={index > 0 ? messages[index - 1] : null}\n                mentionUser={mentionUser}\n                key={message.id}\n                onModifyChatMessage={(messageID: string) => {\n                  setUpdateMessageID(messageID);\n                }}\n              ></CommentMessage>\n            );\n            if (\n              latestPulledMessagePageInfo.hasNextPage &&\n              latestPulledMessagePageInfo.endCursor === message.id\n            ) {\n              return (\n                <Box key={message.id}>\n                  {commentMessage}\n                  <Box\n                    style={{\n                      textAlign: \"center\",\n                      padding: \"16px\",\n                      marginBottom: \"16px\",\n                    }}\n                  >\n                    <Button\n                      variant={\"outlined\"}\n                      color={\"secondary\"}\n                      onClick={fetchPreviousMessages}\n                      disabled={resMessagesAfter.fetching}\n                    >\n                      {t(\"widget/crossnote.comment/view-more-comments\")}\n                    </Button>\n                  </Box>\n                </Box>\n              );\n            } else {\n              return commentMessage;\n            }\n          })}\n        </div>\n      </DialogContent>\n      <DialogActions style={{ padding: \"0\" }}>\n        <CommentEditor\n          sendMessage={(message) => {\n            sendMessage(message);\n          }}\n          sendingMessage={resPostMessage.fetching}\n          updateMessage={(messageID, message) => {\n            updateMessage(messageID, message);\n          }}\n          cancelUpdatingMessage={() => {\n            setUpdateMessageID(\"\");\n          }}\n          updateMessageID={updateMessageID}\n          updateMessageMarkdown={\n            updateMessageID\n              ? messages.filter((message) => message.id === updateMessageID)[0]\n                  .markdown\n              : \"\"\n          }\n          updatingMessage={resUpdateMessage.fetching}\n          setEditor={setEditor}\n        ></CommentEditor>\n      </DialogActions>\n    </Dialog>\n  );\n}\n","import React, { useState, useEffect, useCallback } from \"react\";\nimport { createStyles, makeStyles, Theme } from \"@material-ui/core/styles\";\nimport clsx from \"clsx\";\nimport Identicon from \"identicon.js\";\nimport { sha256 } from \"js-sha256\";\nimport {\n  useDeleteWidgetMutation,\n  useUpdateWidgetMutation,\n} from \"../../../generated/graphql\";\nimport Noty from \"noty\";\nimport { useTranslation } from \"react-i18next\";\nimport { Editor as CodeMirrorEditor } from \"codemirror\";\nimport {\n  Box,\n  Avatar,\n  Tooltip,\n  IconButton,\n  Dialog,\n  DialogContent,\n  DialogActions,\n  Link,\n  TextField,\n  Typography,\n} from \"@material-ui/core\";\nimport {\n  TrashCanOutline,\n  Pencil,\n  ContentSave,\n  Cancel,\n  LinkVariant,\n} from \"mdi-material-ui\";\nimport { renderPreview } from \"vickymd/preview\";\nimport { Widget } from \"../../../generated/graphql\";\nimport { browserHistory } from \"../../../utilities/history\";\nimport { globalContainers } from \"../../../containers/global\";\nimport { setTheme } from \"../../../themes/manager\";\nconst VickyMD = require(\"vickymd/core\");\n\nconst useStyles = makeStyles((theme: Theme) =>\n  createStyles({\n    topPanel: {\n      position: \"relative\",\n      display: \"flex\",\n      flexDirection: \"row\",\n      alignItems: \"center\",\n      width: \"100%\",\n    },\n    avatar: {\n      width: \"24px\",\n      height: \"24px\",\n      borderRadius: \"4px\",\n    },\n    widgetTitle: {\n      marginLeft: `${theme.spacing(1)}px !important`,\n    },\n    widgetSourceLink: {\n      marginTop: `8px`,\n      marginLeft: theme.spacing(0.5),\n    },\n    actionButtons: {\n      position: \"absolute\",\n      right: \"0\",\n      top: \"0\",\n      display: \"flex\",\n      flexDirection: \"row\",\n      alignItems: \"center\",\n    },\n    editorWrapper: {\n      \"marginTop\": theme.spacing(2),\n      // height: \"160px\",\n      // border: \"2px solid #96c3e6\",\n      \"& .CodeMirror-gutters\": {\n        display: \"none\",\n      },\n    },\n    textarea: {\n      width: \"100%\",\n      height: \"100%\",\n    },\n    preview: {\n      \"backgroundColor\": \"inherit !important\",\n      \"paddingTop\": theme.spacing(1),\n      \"paddingBottom\": theme.spacing(1),\n      \"& p:last-child\": {\n        marginBottom: \"0 !important\",\n      },\n      \"& br\": {\n        // display: \"none\"\n      },\n    },\n  }),\n);\n\ninterface Props {\n  widget: Widget;\n  removeSelf?: () => void;\n  isPreview: Boolean;\n}\n\nexport function WidgetTopPanel(props: Props) {\n  const classes = useStyles(props);\n  const widget = props.widget;\n  const { t } = useTranslation();\n  const [previewElement, setPreviewElement] = useState<HTMLElement>(null);\n  const [textAreaElement, setTextAreaElement] = useState<HTMLTextAreaElement>(\n    null,\n  );\n  const [editor, setEditor] = useState<CodeMirrorEditor>(null);\n  const [editorDialogOpen, setEditDialogOpen] = useState<boolean>(false);\n\n  const [\n    resDeleteWidget,\n    executeDeleteWidgetMutation,\n  ] = useDeleteWidgetMutation();\n  const [\n    resUpdateWidget,\n    executeUpdateWidgetMutation,\n  ] = useUpdateWidgetMutation();\n  const [forceUpdate, setForceUpdate] = useState<number>(Date.now());\n  const [widgetSource, setWidgetSource] = useState<string>(\"\");\n\n  const deleteWidget = useCallback(() => {\n    if (widget && widget.id) {\n      executeDeleteWidgetMutation({\n        id: widget.id,\n      });\n    }\n  }, [widget, executeDeleteWidgetMutation]);\n\n  const updateWidget = useCallback(() => {\n    if (editor && widget) {\n      const description = editor.getValue() || widget.description;\n      executeUpdateWidgetMutation({\n        id: widget.id,\n        description,\n        source: widgetSource,\n      });\n      widget.description = description;\n      widget.source = widgetSource;\n      setForceUpdate(Date.now());\n    }\n    setEditDialogOpen(false);\n  }, [editor, widget, executeUpdateWidgetMutation, widgetSource]);\n\n  const closeEditDialog = useCallback(() => {\n    if (widget) {\n      setWidgetSource(widget.source);\n    }\n    setEditDialogOpen(false);\n  }, [widget]);\n\n  // Delete widget\n  useEffect(() => {\n    if (!widget.id) {\n      return;\n    }\n    const err = () => {\n      new Noty({\n        type: \"error\",\n        text: t(\"error/failed-to-delete-widget\"),\n        layout: \"topRight\",\n        theme: \"relax\",\n        timeout: 5000,\n      }).show();\n    };\n    if (resDeleteWidget.error) {\n      err();\n    } else if (resDeleteWidget.data) {\n      if (resDeleteWidget.data.deleteWidget) {\n        resDeleteWidget.data = null;\n        if (props.removeSelf) {\n          props.removeSelf();\n        }\n      } else {\n        err();\n      }\n    }\n  }, [resDeleteWidget, t, widget, props]);\n\n  useEffect(() => {\n    if (widget && previewElement) {\n      renderPreview(previewElement, widget.description);\n    }\n  }, [widget, previewElement, forceUpdate]);\n\n  useEffect(() => {\n    if (!widget) {\n      return;\n    }\n\n    if (textAreaElement) {\n      const editor: CodeMirrorEditor = VickyMD.fromTextArea(textAreaElement, {\n        mode: {\n          name: \"hypermd\",\n          hashtag: true,\n        },\n        // inputStyle: \"textarea\",\n        // autofocus: false\n        keyMap: globalContainers.settingsContainer.keyMap,\n        showCursorWhenSelecting: true,\n        inputStyle: \"contenteditable\",\n      });\n      editor.setValue(widget.description);\n      editor.setOption(\"lineNumbers\", false);\n      editor.setOption(\"foldGutter\", false);\n      editor.setOption(\"autofocus\", false);\n      editor.focus();\n      setEditor(editor);\n\n      return () => {\n        setEditor(null);\n        setTextAreaElement(null);\n      };\n    }\n  }, [textAreaElement, widget]);\n\n  useEffect(() => {\n    if (editor && globalContainers.settingsContainer.theme) {\n      setTheme({\n        editor,\n        themeName: globalContainers.settingsContainer.theme.name,\n      });\n    }\n  }, [editor]);\n\n  useEffect(() => {\n    if (widget) {\n      setWidgetSource(widget.source);\n    } else {\n      setWidgetSource(\"\");\n    }\n  }, [widget]);\n\n  return (\n    <Box className={clsx(classes.topPanel)}>\n      <div\n        className={clsx(classes.preview, \"preview\")}\n        style={{ whiteSpace: \"normal\" }}\n        ref={(element: HTMLElement) => {\n          setPreviewElement(element);\n        }}\n      ></div>\n\n      <Box className={clsx(classes.actionButtons)}>\n        {widget.source && (\n          <Tooltip title={t(\"general/Source\")}>\n            <Link\n              href={widget.source}\n              onClick={(event: any) => {\n                event.preventDefault();\n                if (widget.source.startsWith(window.location.origin)) {\n                  browserHistory.push(\n                    widget.source.replace(window.location.origin, \"\"),\n                  );\n                } else {\n                  window.open(widget.source, \"_blank\");\n                }\n              }}\n            >\n              <IconButton>\n                <LinkVariant></LinkVariant>\n              </IconButton>\n            </Link>\n          </Tooltip>\n        )}\n        <Tooltip title={widget.owner.username}>\n          <IconButton>\n            <Avatar\n              className={clsx(classes.avatar)}\n              variant={\"rounded\"}\n              src={\n                widget.owner.avatar ||\n                \"data:image/png;base64,\" +\n                  new Identicon(sha256(widget.owner.username), 80).toString()\n              }\n            ></Avatar>\n          </IconButton>\n        </Tooltip>\n        {!props.isPreview && widget.canConfigure && (\n          <Tooltip title={t(\"general/Edit\")}>\n            <IconButton onClick={() => setEditDialogOpen(true)}>\n              <Pencil></Pencil>\n            </IconButton>\n          </Tooltip>\n        )}\n        {!props.isPreview && widget.canConfigure && (\n          <Tooltip title={t(\"general/Delete\")}>\n            <IconButton onClick={deleteWidget}>\n              <TrashCanOutline></TrashCanOutline>\n            </IconButton>\n          </Tooltip>\n        )}\n      </Box>\n      <Dialog open={editorDialogOpen} onClose={closeEditDialog}>\n        <DialogContent>\n          <TextField\n            label={t(\"general/Source\")}\n            value={widgetSource}\n            onChange={(event) => setWidgetSource(event.target.value)}\n            fullWidth={true}\n          ></TextField>\n          <Box\n            className={clsx(classes.editorWrapper)}\n            style={{ minWidth: \"300px\", maxWidth: \"100%\" }}\n          >\n            <Typography variant={\"caption\"} color={\"textSecondary\"}>\n              {t(\"general/Description\")}\n            </Typography>\n            <textarea\n              className={classes.textarea}\n              ref={(element: HTMLTextAreaElement) => {\n                setTextAreaElement(element);\n              }}\n            ></textarea>\n          </Box>\n        </DialogContent>\n        <DialogActions>\n          <IconButton onClick={updateWidget}>\n            <ContentSave></ContentSave>\n          </IconButton>\n          <IconButton onClick={closeEditDialog}>\n            <Cancel></Cancel>\n          </IconButton>\n        </DialogActions>\n      </Dialog>\n    </Box>\n  );\n}\n","import { WidgetCreator, WidgetArgs } from \"vickymd/widget\";\nimport React, { useState, useEffect, useCallback } from \"react\";\nimport ReactDOM from \"react-dom\";\nimport {\n  createStyles,\n  makeStyles,\n  Theme,\n  ThemeProvider,\n  darken,\n} from \"@material-ui/core/styles\";\nimport clsx from \"clsx\";\nimport {\n  useCreateCommentWidgetMutation,\n  useCommentWidgetQuery,\n  CommentWidgetFieldsFragment,\n  useAddReactionToCommentWidgetMutation,\n  useRemoveReactionFromCommentWidgetMutation,\n} from \"../../../generated/graphql\";\nimport Noty from \"noty\";\nimport { useTranslation } from \"react-i18next\";\nimport { getHeaderFromMarkdown } from \"../../../utilities/note\";\nimport { Provider } from \"urql\";\nimport { GraphQLClient } from \"../../../utilities/client\";\nimport {\n  Button,\n  Box,\n  Typography,\n  Avatar,\n  Tooltip,\n  Badge,\n  Dialog,\n  Chip,\n} from \"@material-ui/core\";\nimport { CommentOutline, StickerEmoji } from \"mdi-material-ui\";\nimport { Emoji, Picker as EmojiPicker } from \"emoji-mart\";\nimport \"emoji-mart/css/emoji-mart.css\";\nimport { globalContainers } from \"../../../containers/global\";\nimport { CommentDialog } from \"./CommentDialog\";\nimport { WidgetTopPanel } from \"../widget/WidgetTopPanel\";\n\nconst useStyles = makeStyles((theme: Theme) =>\n  createStyles({\n    commentWidget: {\n      position: \"relative\",\n      // backgroundColor: theme.palette.grey[100],\n      backgroundColor: darken(theme.palette.background.paper, 0.05),\n    },\n    topPanel: {\n      paddingLeft: theme.spacing(2),\n      paddingRight: theme.spacing(1),\n    },\n    interactionPanel: {\n      display: \"flex\",\n      flexDirection: \"row\",\n      alignItems: \"center\",\n    },\n    button: {},\n    reactionChip: {\n      \"marginBottom\": \"2px\",\n      \"&:hover\": {\n        cursor: \"pointer\",\n      },\n    },\n  }),\n);\n\nfunction CommentWidget(props: WidgetArgs) {\n  const classes = useStyles(props);\n  const widgetID = props.attributes[\"id\"];\n  const editor = props.editor;\n  const { t } = useTranslation();\n  const [emojiPickerOpen, setEmojiPickerOpen] = useState<boolean>(false);\n  const [commentDialogOpen, setCommentDialogOpen] = useState<boolean>(false);\n  const [forceUpdate, setForceUpdate] = useState<number>(Date.now());\n  const [\n    resCreateCommentWidget,\n    executeCreateCommentWidgetMutation,\n  ] = useCreateCommentWidgetMutation();\n  const [resCommentWidget, executeCommentWidgetQuery] = useCommentWidgetQuery({\n    requestPolicy: \"network-only\",\n    pause: true,\n    variables: {\n      widgetID,\n    },\n  });\n  const [\n    resAddReactionToCommentWidget,\n    executeAddReactionToCommentWidgetMutation,\n  ] = useAddReactionToCommentWidgetMutation();\n  const [\n    resRemoveReactionFromCommentWidget,\n    executeRemoveReactionFromCommentWidgetMutation,\n  ] = useRemoveReactionFromCommentWidgetMutation();\n  const [commentWidget, setCommentWidget] = useState<\n    CommentWidgetFieldsFragment\n  >(null);\n\n  const updateReactionSummaries = useCallback(\n    (reaction: string) => {\n      if (!commentWidget) {\n        return;\n      }\n      let found = false;\n      for (\n        let i = 0;\n        i < commentWidget.instance.commentWidget.reactionSummaries.length;\n        i++\n      ) {\n        if (\n          commentWidget.instance.commentWidget.reactionSummaries[i].reaction ===\n          reaction\n        ) {\n          found = true;\n          commentWidget.instance.commentWidget.reactionSummaries[i].count += 1;\n          commentWidget.instance.commentWidget.reactionSummaries[\n            i\n          ].selfAuthored = true;\n          break;\n        }\n      }\n      if (!found) {\n        commentWidget.instance.commentWidget.reactionSummaries = [\n          {\n            reaction: reaction,\n            count: 1,\n            selfAuthored: true,\n          },\n          ...commentWidget.instance.commentWidget.reactionSummaries,\n        ];\n        commentWidget.instance.commentWidget.reactionsCount += 1;\n      }\n      setForceUpdate(Date.now());\n    },\n    [commentWidget],\n  );\n\n  // Create comment widget\n  useEffect(() => {\n    if (widgetID || props.isPreview) {\n      return;\n    }\n    if (resCreateCommentWidget.error) {\n      // TODO: Either user not logged in or server failed to create the widget\n      new Noty({\n        type: \"error\",\n        text: t(\"error/failed-to-create-widget\"),\n        layout: \"topRight\",\n        theme: \"relax\",\n        timeout: 5000,\n      }).show();\n\n      if (!globalContainers.cloudContainer.loggedIn) {\n        new Noty({\n          type: \"info\",\n          text: t(\"general/please-sign-in-first\"),\n          layout: \"topRight\",\n          theme: \"relax\",\n          timeout: 5000,\n        }).show();\n        globalContainers.cloudContainer.setAuthDialogOpen(true);\n      }\n\n      props.removeSelf();\n    } else if (resCreateCommentWidget.data) {\n      const id = resCreateCommentWidget.data.createWidget.id;\n      props.setAttributes(Object.assign(props.attributes, { id }));\n    }\n  }, [resCreateCommentWidget, t, props, widgetID]);\n\n  useEffect(() => {\n    if (resCommentWidget.error) {\n      // TODO: This part has issue if we delete a widget and create a new one. The error will repeatly occur.\n      /*\n      console.log(resCommentWidget.error);\n      new Noty({\n        type: \"error\",\n        text: t(\"error/failed-to-fetch-widget\"),\n        layout: \"topRight\",\n        theme: \"relax\",\n        timeout: 5000\n      }).show();\n      */\n      setCommentWidget(null);\n    } else if (resCommentWidget.data) {\n      setCommentWidget(resCommentWidget.data.widget);\n      resCommentWidget.data = null;\n    }\n  }, [resCommentWidget, t]);\n\n  // Create widget\n  useEffect(() => {\n    if (\n      !widgetID &&\n      !resCreateCommentWidget.fetching &&\n      !resCreateCommentWidget.error &&\n      !resCreateCommentWidget.data &&\n      editor\n    ) {\n      const title =\n        getHeaderFromMarkdown(editor.getValue()) || t(\"general/Untitled\");\n      const source = window.location.href;\n      const description = `💬  **${title}**`;\n      executeCreateCommentWidgetMutation({\n        description,\n        source,\n      });\n    }\n  }, [\n    widgetID,\n    resCreateCommentWidget,\n    editor,\n    t,\n    executeCreateCommentWidgetMutation,\n  ]);\n\n  // Query created widget\n  useEffect(() => {\n    if (widgetID && executeCommentWidgetQuery) {\n      executeCommentWidgetQuery({\n        requestPolicy: \"network-only\",\n      });\n    }\n  }, [widgetID, executeCommentWidgetQuery]);\n\n  if (resCommentWidget.error) {\n    return <Box>{t(\"error/failed-to-load-widget\")}</Box>;\n  }\n\n  if (!widgetID) {\n    return <Box>{t(\"widget/creating-widget\")}</Box>;\n  }\n\n  if (!commentWidget) {\n    return <Box>{t(\"widget/loading-widget\")}</Box>;\n  }\n\n  return (\n    <Box\n      className={clsx(classes.commentWidget)}\n      style={{ marginBottom: props.isPreview ? \"16px\" : \"0\" }}\n    >\n      <Box className={clsx(classes.topPanel)}>\n        <WidgetTopPanel\n          widget={commentWidget as any}\n          removeSelf={props.removeSelf}\n          isPreview={props.isPreview}\n        ></WidgetTopPanel>\n      </Box>\n      <Box className={clsx(classes.interactionPanel)}>\n        <Tooltip title={t(\"interaction-panel/add-comment\")}>\n          <Button\n            className={clsx(classes.button)}\n            onClick={() => {\n              setCommentDialogOpen(true);\n            }}\n          >\n            <CommentOutline></CommentOutline>\n            {commentWidget.instance.commentWidget.messagesCount > 0 ? (\n              <Typography style={{ marginLeft: \"4px\", marginBottom: \"0\" }}>\n                {commentWidget.instance.commentWidget.messagesCount}\n              </Typography>\n            ) : null}\n          </Button>\n        </Tooltip>\n        <Tooltip title={t(\"interaction-panel/add-reaction\")}>\n          <Button\n            className={clsx(classes.button)}\n            onClick={() => setEmojiPickerOpen(true)}\n          >\n            <Badge style={{ zIndex: 0 }} color={\"secondary\"}>\n              {/* badgeContent={(note.reactions || \"+\").toString()} */}\n              <StickerEmoji />\n              {commentWidget.instance.commentWidget.reactionsCount > 0 ? (\n                <Typography style={{ marginLeft: \"4px\", marginBottom: \"0\" }}>\n                  {commentWidget.instance.commentWidget.reactionsCount}\n                </Typography>\n              ) : null}\n            </Badge>\n          </Button>\n        </Tooltip>\n        <Box>\n          {commentWidget.instance.commentWidget.reactionSummaries\n            .sort((x, y) => {\n              let weightX = 1;\n              let weightY = 1;\n              if (x.selfAuthored) {\n                weightX = 100;\n              }\n              if (y.selfAuthored) {\n                weightY = 100;\n              }\n              return x.count * weightX - y.count * weightY;\n            })\n            .map((reactionSummary) => {\n              return (\n                <Chip\n                  variant={\n                    reactionSummary.selfAuthored ? \"default\" : \"outlined\"\n                  }\n                  size=\"medium\"\n                  label={reactionSummary.count.toString()}\n                  color={\"primary\"}\n                  key={reactionSummary.reaction}\n                  style={{ marginRight: \"8px\" }}\n                  className={clsx(classes.reactionChip)}\n                  onClick={() => {\n                    if (!globalContainers.cloudContainer.loggedIn) {\n                      globalContainers.cloudContainer.setAuthDialogOpen(true);\n                    } else if (reactionSummary.selfAuthored) {\n                      executeRemoveReactionFromCommentWidgetMutation({\n                        widgetID: commentWidget.id,\n                        reaction: reactionSummary.reaction,\n                      });\n                      reactionSummary.selfAuthored = false;\n                      reactionSummary.count -= 1;\n                      commentWidget.instance.commentWidget.reactionsCount -= 1;\n                      if (reactionSummary.count <= 0) {\n                        commentWidget.instance.commentWidget.reactionSummaries = commentWidget.instance.commentWidget.reactionSummaries.filter(\n                          (summary) =>\n                            summary.reaction !== reactionSummary.reaction,\n                        );\n                        setForceUpdate(Date.now());\n                      }\n                    } else {\n                      executeAddReactionToCommentWidgetMutation({\n                        widgetID: commentWidget.id,\n                        reaction: reactionSummary.reaction,\n                      });\n                      updateReactionSummaries(reactionSummary.reaction);\n                    }\n                  }}\n                  avatar={\n                    <Avatar>\n                      <Emoji emoji={reactionSummary.reaction} size={16}></Emoji>\n                    </Avatar>\n                  }\n                />\n              );\n            })}\n        </Box>\n      </Box>\n\n      <Dialog open={emojiPickerOpen} onClose={() => setEmojiPickerOpen(false)}>\n        <EmojiPicker\n          emoji={\"\"}\n          showSkinTones={false}\n          onSelect={(data) => {\n            if (!globalContainers.cloudContainer.loggedIn) {\n              setEmojiPickerOpen(false);\n              globalContainers.cloudContainer.setAuthDialogOpen(true);\n            } else {\n              setEmojiPickerOpen(false);\n              executeAddReactionToCommentWidgetMutation({\n                widgetID: commentWidget.id,\n                reaction: data.colons,\n              });\n              updateReactionSummaries(data.colons);\n            }\n          }}\n        ></EmojiPicker>\n      </Dialog>\n      <CommentDialog\n        open={commentDialogOpen}\n        onClose={() => setCommentDialogOpen(false)}\n        commentWidget={commentWidget}\n      ></CommentDialog>\n    </Box>\n  );\n}\n\nexport const CommentWidgetCreator: WidgetCreator = (args) => {\n  const el = document.createElement(\"span\");\n  ReactDOM.render(\n    <Provider value={GraphQLClient}>\n      <ThemeProvider theme={globalContainers.settingsContainer.theme.muiTheme}>\n        <CommentWidget {...args}></CommentWidget>\n      </ThemeProvider>\n    </Provider>,\n    el,\n  );\n  return el;\n};\n","import { WidgetCreator, WidgetArgs } from \"vickymd/widget\";\nimport React, { useState, useCallback, useEffect } from \"react\";\nimport ReactDOM from \"react-dom\";\nimport {\n  Card,\n  Typography,\n  IconButton,\n  Box,\n  TextField,\n  Tooltip,\n} from \"@material-ui/core\";\nimport {\n  createStyles,\n  makeStyles,\n  Theme,\n  ThemeProvider,\n} from \"@material-ui/core/styles\";\nimport clsx from \"clsx\";\n// @ts-ignore\nimport Gist from \"super-react-gist\"; // <-- import the library\nimport { TrashCanOutline, TrashCan } from \"mdi-material-ui\";\nimport { useTranslation } from \"react-i18next\";\nimport { globalContainers } from \"../../../containers/global\";\n\nconst useStyles = makeStyles((theme: Theme) =>\n  createStyles({\n    card: {\n      padding: theme.spacing(2),\n      position: \"relative\",\n    },\n    actionButtonsGroup: {\n      position: \"absolute\",\n      top: \"0\",\n      right: \"0\",\n      display: \"flex\",\n      alignItems: \"center\",\n    },\n  }),\n);\n\nfunction GitHubGistWidget(props: WidgetArgs) {\n  const classes = useStyles(props);\n  const { t } = useTranslation();\n  const [url, setURL] = useState<string>(\"\");\n\n  const setGistURL = useCallback(\n    (url: string) => {\n      try {\n        const location = new URL(url);\n        if (location.host !== \"gist.github.com\") {\n          return;\n        } else {\n          props.setAttributes({\n            url: location.origin + location.pathname,\n          });\n        }\n      } catch (error) {}\n    },\n    [props],\n  );\n\n  if (props.attributes[\"url\"]) {\n    return (\n      <Box className={\"preview github-gist\"} style={{ whiteSpace: \"normal\" }}>\n        <Gist url={props.attributes[\"url\"]}></Gist>\n        {!props.isPreview && (\n          <Box className={clsx(classes.actionButtonsGroup)}>\n            <IconButton onClick={() => props.removeSelf()}>\n              <TrashCanOutline></TrashCanOutline>\n            </IconButton>\n          </Box>\n        )}\n      </Box>\n    );\n  }\n\n  if (props.isPreview) {\n    return null;\n  }\n\n  return (\n    <Card elevation={2} className={clsx(classes.card)}>\n      <Typography variant={\"h5\"}>\n        {t(\"widget/crossnote.github_gist/title\")}\n      </Typography>\n      <TextField\n        label={t(\"widget/crossnote/github_gist/enter-github-gist-url\")}\n        placeholder={\"https://gist.github.com/...\"}\n        value={url}\n        onChange={(event) => setURL(event.target.value)}\n        fullWidth={true}\n        onKeyUp={(event) => {\n          if (event.which === 13) {\n            setGistURL(url);\n          }\n        }}\n      ></TextField>\n      <Box className={clsx(classes.actionButtonsGroup)}>\n        <Tooltip title={t(\"general/Delete\")}>\n          <IconButton onClick={() => props.removeSelf()}>\n            <TrashCan></TrashCan>\n          </IconButton>\n        </Tooltip>\n      </Box>\n    </Card>\n  );\n}\n\nexport const GitHubGistWidgetCreator: WidgetCreator = (args) => {\n  const el = document.createElement(\"span\");\n  ReactDOM.render(\n    <ThemeProvider theme={globalContainers.settingsContainer.theme.muiTheme}>\n      <GitHubGistWidget {...args}></GitHubGistWidget>\n    </ThemeProvider>,\n    el,\n  );\n  return el;\n};\n","// Import VickyMD related modules\n// VickyMD\nimport \"codemirror\";\n// Load these modes if you want highlighting ...\nimport \"codemirror/lib/codemirror.css\";\nimport \"codemirror/addon/dialog/dialog.css\";\nimport \"codemirror/mode/htmlmixed/htmlmixed\"; // for embedded HTML\nimport \"codemirror/mode/markdown/markdown\";\nimport \"codemirror/mode/stex/stex\"; // for Math TeX Formular\nimport \"codemirror/mode/yaml/yaml\"; // for Front Matters\nimport \"codemirror/mode/javascript/javascript\"; // eg. javascript\nimport \"codemirror/mode/python/python\";\nimport \"codemirror/addon/display/placeholder\";\nimport \"codemirror/addon/hint/show-hint\";\nimport \"codemirror/keymap/vim\";\nimport \"codemirror/keymap/emacs\";\n\n// Essential\nimport \"vickymd\"; // ESSENTIAL\n// Widgets\n// Load PowerPacks if you want to utilize 3rd-party libs\nimport \"vickymd/powerpack/fold-math-with-katex\";\nimport \"vickymd/powerpack/fold-code-with-mermaid\";\nimport \"vickymd/powerpack/fold-code-with-plantuml\";\nimport \"vickymd/powerpack/fold-code-with-echarts\";\nimport \"vickymd/powerpack/fold-code-with-wavedrom\";\nimport \"vickymd/powerpack/hover-with-marked\";\nimport { registerWidgetCreator } from \"vickymd/widget\";\nimport { TimerWidgetCreator } from \"./widgets/timer\";\nimport { ImageWidgetCreator } from \"./widgets/image\";\nimport { AudioWidgetCreator } from \"./widgets/audio\";\n// import { NeteaseMusicWidgetCreator } from \"./widgets/netease_music\";\nimport { VideoWidgetCreator } from \"./widgets/video\";\nimport { BilibiliWidgetCreator } from \"./widgets/bilibili\";\nimport { YoutubeWidgetCreator } from \"./widgets/youtube\";\nimport { OCRWidgetCreator } from \"./widgets/ocr\";\nimport { KanbanWidgetCreator } from \"./widgets/kanban\";\n// import { ABCWidgetCreator } from \"./widgets/abc\";\nimport { CommentWidgetCreator } from \"./widgets/comment\";\nimport { GitHubGistWidgetCreator } from \"./widgets/github_gist\";\n\n// Set necessary window scope variables\nwindow[\"CodeMirror\"] = require(\"codemirror\");\n\n// Register widget creators\nregisterWidgetCreator(\"timer\", TimerWidgetCreator);\nregisterWidgetCreator(\"crossnote.image\", ImageWidgetCreator);\nregisterWidgetCreator(\"crossnote.audio\", AudioWidgetCreator);\n// registerWidgetCreator(\"crossnote.netease_music\", NeteaseMusicWidgetCreator);\nregisterWidgetCreator(\"crossnote.video\", VideoWidgetCreator);\nregisterWidgetCreator(\"crossnote.bilibili\", BilibiliWidgetCreator);\nregisterWidgetCreator(\"crossnote.youtube\", YoutubeWidgetCreator);\nregisterWidgetCreator(\"crossnote.ocr\", OCRWidgetCreator);\nregisterWidgetCreator(\"crossnote.kanban\", KanbanWidgetCreator);\n// registerWidgetCreator(\"crossnote.abc\", ABCWidgetCreator);\nregisterWidgetCreator(\"crossnote.comment\", CommentWidgetCreator);\nregisterWidgetCreator(\"crossnote.github_gist\", GitHubGistWidgetCreator);\n\nconst packageJSON = require(\"../../package.json\");\nexport const VickyMDVersion: string = packageJSON.dependencies.vickymd;\n","import { CrossnoteTheme } from \"./theme\";\nimport { LightTheme } from \"./light\";\nimport { DarkTheme } from \"./dark\";\nimport { OneDarkTheme } from \"./one-dark\";\nimport { SolarizedLight } from \"./solarized-light\";\nimport { setTheme as VickyMDSetTheme, ThemeName } from \"vickymd/theme\";\nimport { Editor } from \"codemirror\";\nimport { VickyMDVersion } from \"../editor\";\n\nexport function setTheme({\n  editor,\n  themeName,\n}: {\n  editor?: Editor;\n  themeName: ThemeName;\n}) {\n  return VickyMDSetTheme({\n    editor,\n    themeName,\n    baseUri: `./styles/vickymd@${VickyMDVersion}/`,\n  });\n}\n\nexport class ThemeManager {\n  public themes: CrossnoteTheme[] = [];\n  public selectedTheme: CrossnoteTheme = null;\n  public addTheme(theme: CrossnoteTheme) {\n    this.themes.push(theme);\n    if (!this.selectedTheme) {\n      this.selectTheme(theme.name);\n    }\n  }\n\n  public getTheme(name: string) {\n    return this.themes.find((theme) => theme.name === name);\n  }\n\n  public selectTheme(name: string) {\n    if (!name) {\n      return;\n    }\n    const theme = this.themes.find((t) => t.name === name);\n    if (!theme) {\n      return;\n    }\n    this.selectedTheme = theme;\n    setTheme({\n      themeName: theme.name,\n    });\n  }\n}\n\nconst _themeManager = new ThemeManager();\n_themeManager.addTheme(LightTheme);\n_themeManager.addTheme(DarkTheme);\n_themeManager.addTheme(OneDarkTheme);\n_themeManager.addTheme(SolarizedLight);\n\nexport const themeManager = _themeManager;\n","export enum KeyMap {\n  \"DEFAULT\" = \"hypermd\",\n  \"VIM\" = \"vim\",\n  \"EMACS\" = \"emacs\",\n}\n\nexport function getKeyMap(v: string): KeyMap {\n  if (v === \"hypermd\") {\n    return KeyMap.DEFAULT;\n  } else if (v === \"vim\") {\n    return KeyMap.VIM;\n  } else if (v === \"emacs\") {\n    return KeyMap.EMACS;\n  } else {\n    return KeyMap.DEFAULT;\n  }\n}\n","import { createContainer } from \"unstated-next\";\nimport { useState, useCallback, useEffect } from \"react\";\nimport { useTranslation } from \"react-i18next\";\nimport { CrossnoteTheme } from \"../themes/theme\";\nimport { themeManager } from \"../themes/manager\";\nimport { ThemeName } from \"vickymd/theme\";\nimport { KeyMap, getKeyMap } from \"../lib/keymap\";\n\ninterface InitialState {}\n\nfunction useSettingsContainer(initialState: InitialState) {\n  const [language, setLanguage] = useState<string>(\n    localStorage.getItem(\"settings/language\") || \"en-US\",\n  );\n  const [editorCursorColor, setEditorCursorColor] = useState<string>(\n    localStorage.getItem(\"settings/editorCursorColor\") ||\n      \"rgba(74, 144, 226, 1)\",\n  );\n  const [authorName, setAuthorName] = useState<string>(\n    localStorage.getItem(\"settings/authorName\") || \"Anonymous\",\n  );\n  const [authorEmail, setAuthorEmail] = useState<string>(\n    localStorage.getItem(\"settings/authorEmail\") || \"anonymous@crossnote.app\",\n  );\n  const [theme, setTheme] = useState<CrossnoteTheme>(\n    themeManager.getTheme(localStorage.getItem(\"settings/theme\")) ||\n      themeManager.selectedTheme,\n  );\n  const [keyMap, setKeyMap] = useState<KeyMap>(\n    getKeyMap(localStorage.getItem(\"settings/keyMap\")) || KeyMap.DEFAULT,\n  );\n\n  const { t, i18n } = useTranslation();\n\n  const _setLanguage = useCallback(\n    (language: string) => {\n      if (\n        language === \"en-US\" ||\n        language === \"zh-CN\" ||\n        language === \"zh-TW\" ||\n        language === \"ja-JP\"\n      ) {\n        localStorage.setItem(\"settings/language\", language);\n        setLanguage(language);\n        i18n.changeLanguage(language);\n      } else {\n        localStorage.setItem(\"settings/language\", \"en-US\");\n        setLanguage(\"en-US\");\n        i18n.changeLanguage(\"en-US\");\n      }\n    },\n    [i18n],\n  );\n\n  const _setEditorCursorColor = useCallback((editorCursorColor: string) => {\n    editorCursorColor = editorCursorColor || \"rgba(74, 144, 226, 1)\";\n    localStorage.setItem(\"settings/editorCursorColor\", editorCursorColor);\n    setEditorCursorColor(editorCursorColor);\n  }, []);\n\n  const _setAuthorName = useCallback((authorName: string) => {\n    localStorage.setItem(\"settings/authorName\", authorName);\n    setAuthorName(authorName);\n  }, []);\n\n  const _setAuthorEmail = useCallback((authorEmail: string) => {\n    localStorage.setItem(\"settings/authorEmail\", authorEmail);\n    setAuthorEmail(authorEmail);\n  }, []);\n\n  const _setTheme = useCallback((themeName: string) => {\n    themeManager.selectTheme(themeName);\n    localStorage.setItem(\"settings/theme\", themeManager.selectedTheme.name);\n    setTheme(themeManager.selectedTheme);\n  }, []);\n\n  const _setKeyMap = useCallback((keyMap: KeyMap) => {\n    localStorage.setItem(\"settings/keyMap\", keyMap);\n    setKeyMap(keyMap);\n  }, []);\n\n  useEffect(() => {\n    const themeName = localStorage.getItem(\"settings/theme\") as ThemeName;\n    if (themeName) {\n      _setTheme(themeName);\n    }\n  }, [_setTheme]);\n\n  return {\n    language,\n    setLanguage: _setLanguage,\n    editorCursorColor,\n    setEditorCursorColor: _setEditorCursorColor,\n    authorName,\n    setAuthorName: _setAuthorName,\n    authorEmail,\n    setAuthorEmail: _setAuthorEmail,\n    theme,\n    setTheme: _setTheme,\n    keyMap,\n    setKeyMap: _setKeyMap,\n  };\n}\n\nexport const SettingsContainer = createContainer(useSettingsContainer);\n","import React, { useState, useEffect, useCallback } from \"react\";\nimport {\n  Dialog,\n  DialogTitle,\n  DialogContent,\n  DialogActions,\n  Button,\n  TextField,\n  Typography,\n  Box,\n} from \"@material-ui/core\";\nimport {\n  fade,\n  createStyles,\n  makeStyles,\n  Theme,\n} from \"@material-ui/core/styles\";\nimport clsx from \"clsx\";\nimport { CrossnoteContainer } from \"../containers/crossnote\";\nimport { Notebook } from \"../lib/crossnote\";\nimport Noty from \"noty\";\nimport { useTranslation } from \"react-i18next\";\nimport { SettingsContainer } from \"../containers/settings\";\n\nconst useStyles = makeStyles((theme: Theme) =>\n  createStyles({\n    textField: {\n      marginBottom: theme.spacing(2),\n    },\n  }),\n);\n\ninterface Props {\n  open: boolean;\n  onClose: () => void;\n  notebook: Notebook;\n}\n\nexport default function PushNotebookDialog(props: Props) {\n  const classes = useStyles(props);\n  const notebook = props.notebook;\n  const [gitUsername, setGitUsername] = useState<string>(notebook.gitUsername);\n  const [gitPassword, setGitPassword] = useState<string>(notebook.gitPassword);\n  const [commitMessage, setCommitMessage] = useState<string>(\n    \"doc: Updated docs\",\n  );\n  const { t } = useTranslation();\n  const crossnoteContainer = CrossnoteContainer.useContainer();\n  const settingsContainer = SettingsContainer.useContainer();\n\n  const pushNotebook = useCallback(() => {\n    crossnoteContainer\n      .pushNotebook({\n        notebook,\n        authorName: settingsContainer.authorEmail,\n        authorEmail: settingsContainer.authorEmail,\n        username: gitUsername,\n        password: gitPassword,\n        message: commitMessage,\n        onAuthFailure: () => {\n          new Noty({\n            type: \"error\",\n            text: t(\"error/authentication-failed\"),\n            layout: \"topRight\",\n            theme: \"relax\",\n            timeout: 5000,\n          }).show();\n        },\n      })\n      .then(() => {\n        props.onClose();\n        new Noty({\n          type: \"success\",\n          text: t(\"success/notebook-uploaded\"),\n          layout: \"topRight\",\n          theme: \"relax\",\n          timeout: 2000,\n        }).show();\n      })\n      .catch((error: Error) => {\n        console.log(error);\n        props.onClose();\n        new Noty({\n          type: \"error\",\n          text: error.message.match(/^error\\//)\n            ? t(error.message)\n            : t(\"error/failed-to-upload-notebook\"),\n          layout: \"topRight\",\n          theme: \"relax\",\n          timeout: 2000,\n        }).show();\n      });\n  }, [\n    settingsContainer.authorName,\n    settingsContainer.authorEmail,\n    gitUsername,\n    gitPassword,\n    notebook,\n    commitMessage,\n    props,\n    t,\n    crossnoteContainer.pushNotebook,\n  ]);\n\n  useEffect(() => {\n    setGitUsername(notebook.gitUsername);\n  }, [notebook.gitUsername, props.open]);\n\n  useEffect(() => {\n    setGitPassword(notebook.gitPassword);\n  }, [notebook.gitPassword, props.open]);\n\n  return (\n    <Dialog\n      open={props.open}\n      onClose={() => {\n        if (!crossnoteContainer.isPushingNotebook) {\n          props.onClose();\n        }\n      }}\n    >\n      <DialogTitle>\n        {`${t(\"general/upload-notebook\")} \"${notebook.name}\"`}\n        <Box>\n          <Typography variant={\"caption\"}>\n            {notebook.gitURL + \":\" + notebook.gitBranch}\n          </Typography>\n        </Box>\n      </DialogTitle>\n      <DialogContent>\n        <TextField\n          className={clsx(classes.textField)}\n          label={t(\"settings/author-name\")}\n          fullWidth={true}\n          value={settingsContainer.authorName}\n          onChange={(event) =>\n            settingsContainer.setAuthorName(event.target.value)\n          }\n        ></TextField>\n        <TextField\n          className={clsx(classes.textField)}\n          label={t(\"settings/author-email\")}\n          fullWidth={true}\n          value={settingsContainer.authorEmail}\n          onChange={(event) =>\n            settingsContainer.setAuthorEmail(event.target.value)\n          }\n        ></TextField>\n        <TextField\n          className={clsx(classes.textField)}\n          label={t(\"general/commit-message\")}\n          fullWidth={true}\n          value={commitMessage}\n          onChange={(event) => setCommitMessage(event.target.value)}\n        ></TextField>\n        <TextField\n          className={clsx(classes.textField)}\n          label={`${t(\"general/git-repository\")} ${t(\"general/Username\")} (${t(\n            \"general/optional\",\n          )})`}\n          placeholder={`${t(\"general/git-repository\")} ${t(\n            \"general/Username\",\n          )} (${t(\"general/optional\")})`}\n          fullWidth={true}\n          value={gitUsername}\n          onChange={(event) => setGitUsername(event.target.value)}\n        ></TextField>\n        <TextField\n          className={clsx(classes.textField)}\n          label={`${t(\"general/git-repository\")} ${t(\"general/Password\")} (${t(\n            \"general/optional\",\n          )})`}\n          placeholder={`${t(\"general/git-repository\")} ${t(\n            \"general/Password\",\n          )} (${t(\"general/optional\")})`}\n          type={\"password\"}\n          fullWidth={true}\n          value={gitPassword}\n          onChange={(event) => setGitPassword(event.target.value)}\n        ></TextField>\n      </DialogContent>\n      <DialogActions>\n        <Button\n          variant={\"contained\"}\n          color={\"primary\"}\n          disabled={crossnoteContainer.isPushingNotebook}\n          onClick={pushNotebook}\n        >\n          {crossnoteContainer.isPushingNotebook\n            ? t(\"general/Uploading\")\n            : t(\"general/Upload\")}\n        </Button>\n        <Button onClick={props.onClose}>{t(\"general/cancel\")}</Button>\n      </DialogActions>\n    </Dialog>\n  );\n}\n","import React, { useState, useEffect, useCallback } from \"react\";\nimport {\n  Dialog,\n  DialogTitle,\n  DialogContent,\n  TextField,\n  DialogActions,\n  Button,\n} from \"@material-ui/core\";\nimport { CrossnoteContainer } from \"../containers/crossnote\";\nimport { Note } from \"../lib/crossnote\";\nimport { useTranslation } from \"react-i18next\";\n\ninterface Props {\n  open: boolean;\n  onClose: () => void;\n  note: Note;\n}\n\nexport default function ChangeFilePathDialog(props: Props) {\n  const crossnoteContainer = CrossnoteContainer.useContainer();\n  const note = props.note;\n  const [inputEl, setInputEl] = useState<HTMLInputElement>(null);\n  const [newFilePath, setNewFilePath] = useState<string>(\n    (note && note.filePath) || \"\",\n  );\n  const { t } = useTranslation();\n\n  const changeFilePath = useCallback(\n    (newFilePath: string) => {\n      if (!note) return;\n      (async () => {\n        newFilePath = newFilePath.replace(/^\\/+/, \"\");\n        if (!newFilePath.endsWith(\".md\")) {\n          newFilePath = newFilePath + \".md\";\n        }\n        if (note.filePath !== newFilePath) {\n          await crossnoteContainer.changeNoteFilePath(note, newFilePath);\n        }\n        props.onClose();\n      })();\n    },\n    [note, props.onClose, props],\n  );\n\n  useEffect(() => {\n    return () => {\n      setInputEl(null);\n    };\n  }, []);\n\n  useEffect(() => {\n    if (note) {\n      setNewFilePath(note.filePath);\n    }\n  }, [note, props.open]);\n\n  useEffect(() => {\n    if (!inputEl) return;\n    inputEl.focus();\n    if (inputEl.setSelectionRange) {\n      const start = inputEl.value.lastIndexOf(\"/\") + 1;\n      let end = inputEl.value.lastIndexOf(\".md\");\n      if (end < 0) {\n        end = inputEl.value.length;\n      }\n      inputEl.setSelectionRange(start, end);\n    }\n  }, [inputEl]);\n\n  return (\n    <Dialog open={props.open} onClose={props.onClose}>\n      <DialogTitle>{t(\"general/change-file-path\")}</DialogTitle>\n      <DialogContent style={{ width: \"400px\", maxWidth: \"100%\" }}>\n        <TextField\n          value={newFilePath}\n          autoFocus={true}\n          onChange={(event) => setNewFilePath(event.target.value)}\n          onKeyUp={(event) => {\n            if (event.which === 13) {\n              changeFilePath(newFilePath);\n            }\n          }}\n          inputRef={(input: HTMLInputElement) => {\n            setInputEl(input);\n          }}\n          fullWidth={true}\n        ></TextField>\n      </DialogContent>\n      <DialogActions>\n        <Button\n          variant={\"contained\"}\n          color={\"primary\"}\n          onClick={() => changeFilePath(newFilePath)}\n        >\n          {t(\"general/Save\")}\n        </Button>\n        <Button onClick={props.onClose}>{t(\"general/cancel\")}</Button>\n      </DialogActions>\n    </Dialog>\n  );\n}\n","export class FloatWin {\n  private el: HTMLElement;\n  public closeBtn: HTMLElement;\n  public visible: boolean;\n\n  constructor(id: string) {\n    const win = document.getElementById(id);\n    if (!win) {\n      return;\n    }\n\n    /** @type {HTMLDivElement} */\n    const titlebar = win.querySelector(\".float-win-title\") as HTMLElement;\n    titlebar.addEventListener(\n      \"selectstart\",\n      function () {\n        return false;\n      },\n      false,\n    );\n\n    /** @type {HTMLButtonElement} */\n    const closeBtn = win.querySelector(\".float-win-close\") as HTMLElement;\n    if (closeBtn) {\n      closeBtn.addEventListener(\n        \"click\",\n        () => {\n          this.hide();\n        },\n        false,\n      );\n      win.addEventListener(\n        \"keyup\",\n        (ev) => {\n          if (ev.keyCode === 27) this.hide(); // ESC\n        },\n        false,\n      );\n    }\n\n    let boxX: number,\n      boxY: number,\n      mouseX: number,\n      mouseY: number,\n      offsetX: number,\n      offsetY: number;\n\n    titlebar.addEventListener(\n      \"mousedown\",\n      function (e) {\n        if (e.target === closeBtn) return;\n\n        boxX = win.offsetLeft;\n        boxY = win.offsetTop;\n        mouseX = getMouseXY(e).x;\n        mouseY = getMouseXY(e).y;\n        offsetX = mouseX - boxX;\n        offsetY = mouseY - boxY;\n\n        document.addEventListener(\"mousemove\", move, false);\n        document.addEventListener(\"mouseup\", up, false);\n      },\n      false,\n    );\n\n    function move(e: any) {\n      var x = getMouseXY(e).x - offsetX;\n      var y = getMouseXY(e).y - offsetY;\n      var width = document.documentElement.clientWidth - titlebar.offsetWidth;\n      var height =\n        document.documentElement.clientHeight - titlebar.offsetHeight;\n\n      x = Math.min(Math.max(0, x), width);\n      y = Math.min(Math.max(0, y), height);\n\n      win.style.left = x + \"px\";\n      win.style.top = y + \"px\";\n    }\n\n    function up(e: any) {\n      document.removeEventListener(\"mousemove\", move, false);\n      document.removeEventListener(\"mouseup\", up, false);\n    }\n\n    function getMouseXY(e: any) {\n      var x = 0,\n        y = 0;\n      e = e || window.event;\n      if (e.pageX) {\n        x = e.pageX;\n        y = e.pageY;\n      } else {\n        x = e.clientX + document.body.scrollLeft - document.body.clientLeft;\n        y = e.clientY + document.body.scrollTop - document.body.clientTop;\n      }\n      return {\n        x: x,\n        y: y,\n      };\n    }\n\n    this.el = win;\n    this.closeBtn = closeBtn;\n    this.visible = !/float-win-hidden/.test(win.className);\n  }\n\n  public show(moveToCenter?: boolean) {\n    if (this.visible) return;\n    var el = this.el;\n\n    this.visible = true;\n    el.className = this.el.className.replace(/\\s*(float-win-hidden\\s*)+/g, \" \");\n    el.style.display = \"block\";\n\n    if (moveToCenter) {\n      setTimeout(() => {\n        this.moveTo(\n          (window.innerWidth - el.offsetWidth) / 2,\n          (window.innerHeight - el.offsetHeight) / 2,\n        );\n      }, 0);\n    }\n  }\n\n  public hide() {\n    if (!this.visible) return;\n    this.visible = false;\n    this.el.className += \" float-win-hidden\";\n    this.el.style.display = \"none\";\n  }\n\n  public moveTo(x: number, y: number) {\n    var s = this.el.style;\n    s.left = x + \"px\";\n    s.top = y + \"px\";\n  }\n}\n","import React from \"react\";\nimport { Note } from \"../lib/crossnote\";\nimport { useTranslation } from \"react-i18next\";\nimport { CrossnoteContainer } from \"../containers/crossnote\";\nimport {\n  Dialog,\n  DialogTitle,\n  DialogContent,\n  DialogContentText,\n  DialogActions,\n  Button,\n} from \"@material-ui/core\";\n\ninterface Props {\n  open: boolean;\n  onClose: () => void;\n  note: Note;\n}\n\nexport function DeleteNoteDialog(props: Props) {\n  const { t } = useTranslation();\n  const note = props.note;\n  const crossnoteContainer = CrossnoteContainer.useContainer();\n\n  return (\n    <Dialog open={props.open} onClose={props.onClose}>\n      <DialogTitle>{t(\"delete-note-dialog/title\")}</DialogTitle>\n      <DialogContent>\n        <DialogContentText>\n          {t(\"delete-note-dialog/subtitle\")}\n        </DialogContentText>\n      </DialogContent>\n      <DialogActions>\n        <Button\n          style={{ color: \"red\" }}\n          onClick={() => {\n            crossnoteContainer.deleteNote(note);\n            props.onClose();\n          }}\n        >\n          {t(\"general/Delete\")}\n        </Button>\n        <Button onClick={props.onClose}>{t(\"general/cancel\")}</Button>\n      </DialogActions>\n    </Dialog>\n  );\n}\n","import React, { useState, useCallback, useEffect } from \"react\";\nimport {\n  Popover,\n  List,\n  ListItem,\n  TextField,\n  Box,\n  Typography,\n  IconButton,\n} from \"@material-ui/core\";\nimport { TrashCan } from \"mdi-material-ui\";\nimport { createStyles, makeStyles, Theme } from \"@material-ui/core/styles\";\nimport clsx from \"clsx\";\nimport { useTranslation } from \"react-i18next\";\nimport { TagNode } from \"../lib/crossnote\";\nimport { CrossnoteContainer } from \"../containers/crossnote\";\nimport { Autocomplete } from \"@material-ui/lab\";\n\nconst useStyles = makeStyles((theme: Theme) =>\n  createStyles({\n    menuItemOverride: {\n      \"cursor\": \"default\",\n      \"padding\": `0 0 0 ${theme.spacing(2)}px`,\n      \"&:hover\": {\n        backgroundColor: \"inherit\",\n      },\n    },\n    menuItemTextField: {\n      paddingRight: theme.spacing(2),\n    },\n  }),\n);\ninterface Props {\n  anchorElement: HTMLElement;\n  onClose: () => void;\n  addTag: (tagName: string) => void;\n  deleteTag: (tagName: string) => void;\n  tagNames: string[];\n}\nexport function TagsMenuPopover(props: Props) {\n  const classes = useStyles(props);\n  const { t } = useTranslation();\n  const [tagName, setTagName] = useState<string>(\"\");\n  const [options, setOptions] = useState<string[]>([]);\n  const crossnoteContainer = CrossnoteContainer.useContainer();\n\n  const addTag = useCallback(\n    (tagName: string) => {\n      if (!tagName || tagName.trim().length === 0) {\n        return;\n      }\n      props.addTag(tagName);\n      setTagName(\"\");\n    },\n    [props],\n  );\n\n  useEffect(() => {\n    setTagName(\"\");\n  }, [props.anchorElement]);\n\n  useEffect(() => {\n    if (!props.anchorElement) {\n      return;\n    }\n    let options: string[] = [];\n    const helper = (children: TagNode[]) => {\n      if (!children || !children.length) {\n        return;\n      }\n      for (let i = 0; i < children.length; i++) {\n        const tag = children[i].path;\n        options.push(tag);\n        helper(children[i].children);\n      }\n    };\n    helper(crossnoteContainer.notebookTagNode.children);\n    setOptions(options);\n  }, [crossnoteContainer.notebookTagNode, props]);\n\n  return (\n    <Popover\n      open={Boolean(props.anchorElement)}\n      anchorEl={props.anchorElement}\n      keepMounted\n      onClose={props.onClose}\n    >\n      <List>\n        <ListItem\n          className={clsx(classes.menuItemOverride, classes.menuItemTextField)}\n        >\n          <Autocomplete\n            inputValue={tagName}\n            onInputChange={(event, newInputValue) => {\n              setTagName(newInputValue);\n            }}\n            options={(tagName.trim().length > 0 &&\n            options.findIndex((x) => x === tagName.trim()) < 0\n              ? [tagName, ...options]\n              : options\n            ).map((opt) => \"＋  \" + opt)}\n            style={{ width: 300, maxWidth: \"100%\" }}\n            value={\"\"}\n            onChange={(event: any, newValue: string = \"\") => {\n              if (newValue) {\n                addTag(newValue.replace(/^＋/, \"\").trim());\n              }\n            }}\n            renderInput={(params) => (\n              <TextField\n                placeholder={t(\"general/add-a-tag\")}\n                fullWidth={true}\n                autoFocus={true}\n                onKeyUp={(event) => {\n                  if (event.which === 13) {\n                    addTag(tagName);\n                  }\n                }}\n                {...params}\n              ></TextField>\n            )}\n            noOptionsText={t(\"general/no-tags\")}\n            openText={t(\"general/Open\")}\n            closeText={t(\"general/close\")}\n            loadingText={t(\"general/loading\")}\n            clearText={t(\"general/clear-all\")}\n          ></Autocomplete>\n        </ListItem>\n        {props.tagNames.length > 0 ? (\n          props.tagNames.map((tagName) => {\n            return (\n              <ListItem\n                key={tagName}\n                className={clsx(classes.menuItemOverride)}\n              >\n                <Box\n                  style={{\n                    display: \"flex\",\n                    flexDirection: \"row\",\n                    alignItems: \"center\",\n                    justifyContent: \"space-between\",\n                    width: \"100%\",\n                  }}\n                >\n                  <Typography>{tagName}</Typography>\n                  <IconButton onClick={() => props.deleteTag(tagName)}>\n                    <TrashCan></TrashCan>\n                  </IconButton>\n                </Box>\n              </ListItem>\n            );\n          })\n        ) : (\n          <ListItem className={clsx(classes.menuItemOverride)}>\n            <Typography style={{ margin: \"8px 0\" }}>\n              {t(\"general/no-tags\")}\n            </Typography>\n          </ListItem>\n        )}\n      </List>\n    </Popover>\n  );\n}\n","import React, { useState, useCallback, useEffect } from \"react\";\nimport { env }  from \"../env\";\nimport {\n  createStyles,\n  makeStyles,\n  Theme,\n  useTheme,\n} from \"@material-ui/core/styles\";\nimport clsx from \"clsx\";\nimport { Note, TagNode } from \"../lib/crossnote\";\nimport {\n  CrossnoteContainer,\n  EditorMode,\n  SelectedSectionType,\n} from \"../containers/crossnote\";\nimport { useTranslation } from \"react-i18next\";\nimport * as CryptoJS from \"crypto-js\";\nimport {\n  Box,\n  Typography,\n  Dialog,\n  DialogTitle,\n  DialogContent,\n  DialogActions,\n  Button,\n  Tooltip,\n  TextField,\n  ButtonGroup,\n  IconButton,\n  Popover,\n  Hidden,\n  Breadcrumbs,\n  Card,\n} from \"@material-ui/core\";\nimport {\n  Editor as CodeMirrorEditor,\n  EditorChangeLinkedList,\n  TextMarker,\n  Position,\n} from \"codemirror\";\nimport {\n  RenameBox,\n  Delete,\n  FilePresentationBox,\n  Pencil,\n  CodeTags,\n  CloudUploadOutline,\n  CloudDownloadOutline,\n  Restore,\n  Fullscreen,\n  FullscreenExit,\n  ChevronLeft,\n  Close,\n  Pin,\n  PinOutline,\n  LockOpenOutline,\n  Lock,\n  LockOpen,\n  TagOutline,\n  Printer,\n  Tag,\n  ContentDuplicate,\n  ShareVariant,\n  ContentCopy,\n  ViewSplitVertical,\n} from \"mdi-material-ui\";\nimport { renderPreview } from \"vickymd/preview\";\nimport PushNotebookDialog from \"./PushNotebookDialog\";\nimport EditImageDialog from \"./EditImageDialog\";\nimport Noty from \"noty\";\nimport { formatDistance } from \"date-fns\";\nimport { getHeaderFromMarkdown } from \"../utilities/note\";\nimport {\n  printPreview,\n  postprocessPreview as previewPostprocessPreview,\n  openURL,\n} from \"../utilities/preview\";\nimport ChangeFilePathDialog from \"./ChangeFilePathDialog\";\nimport { SettingsContainer } from \"../containers/settings\";\nimport { initMathPreview } from \"../editor/views/math-preview\";\nimport EmojiDefinitions from \"vickymd/addon/emoji\";\nimport { TagStopRegExp, sanitizeTag } from \"../utilities/markdown\";\nimport { resolveNoteImageSrc } from \"../utilities/image\";\nimport { DeleteNoteDialog } from \"./DeleteNoteDialog\";\nimport { ThemeName } from \"vickymd/theme\";\nimport { copyToClipboard } from \"../utilities/utils\";\nimport { setTheme } from \"../themes/manager\";\nimport { TagsMenuPopover } from \"./TagsMenuPopover\";\n\nconst VickyMD = require(\"vickymd/core\");\nconst is = require(\"is_js\");\n\nconst HMDFold = {\n  image: true,\n  link: true,\n  math: true,\n  html: true, // maybe dangerous\n  emoji: true,\n  widget: true,\n  code: true,\n};\n\ninterface CommandHint {\n  text: string;\n  command: string;\n  description: string;\n  icon?: string;\n  render: (element: HTMLElement, data: any, current: CommandHint) => void;\n}\n\nconst previewZIndex = 99;\nconst useStyles = makeStyles((theme: Theme) =>\n  createStyles({\n    editorPanel: {\n      width: \"100%\",\n      height: \"100%\",\n      display: \"flex\",\n      flexDirection: \"column\",\n      borderRadius: 0,\n    },\n    topPanel: {\n      position: \"relative\",\n      padding: theme.spacing(0.5, 1), // theme.spacing(0.5, 1),\n      display: \"flex\",\n      alignItems: \"center\",\n      justifyContent: \"space-between\",\n      // borderBottom: \"1px solid #eee\",\n      overflow: \"auto\",\n      backgroundColor: theme.palette.background.paper,\n    },\n    bottomPanel: {\n      position: \"relative\",\n      padding: theme.spacing(0.5, 1),\n      display: \"flex\",\n      alignItems: \"center\",\n      justifyContent: \"space-between\",\n      backgroundColor: theme.palette.background.paper,\n      // borderTop: \"1px solid #eee\",\n      // color: theme.palette.primary.contrastText,\n      // backgroundColor: theme.palette.primary.main\n    },\n    controlBtn: {\n      padding: theme.spacing(0.5, 0),\n      color: theme.palette.text.secondary,\n    },\n    controlBtnSelected: {\n      color: theme.palette.primary.main,\n    },\n    controlBtnSelectedSecondary: {\n      color: theme.palette.secondary.main,\n    },\n    row: {\n      display: \"flex\",\n      flexDirection: \"row\",\n      alignItems: \"center\",\n    },\n    cursorPositionInfo: {\n      // position: \"absolute\",\n      // right: \"16px\",\n      // bottom: \"16px\",\n      zIndex: 150,\n    },\n    editorWrapper: {\n      \"flex\": 1,\n      \"overflow\": \"auto\",\n      \"backgroundColor\": theme.palette.background.paper,\n      \"& .CodeMirror-gutters\": {\n        display: \"none\",\n      },\n      \"& .CodeMirror-code\": {\n        width: \"100%\",\n      },\n      \"& .CodeMirror\": {\n        height: \"100%\",\n        padding: theme.spacing(0, 2),\n        [theme.breakpoints.down(\"sm\")]: {\n          padding: theme.spacing(1),\n        },\n      },\n      \"& .CodeMirror-vscrollbar\": {\n        // display: \"none !important\",\n      },\n      \"& .CodeMirror-placeholder\": {\n        color: `${theme.palette.action.disabled} !important`,\n      },\n      /*\n      [theme.breakpoints.down(\"sm\")]: {\n        padding: theme.spacing(1),\n      },\n      */\n    },\n    presentation: {\n      padding: \"0 !important\",\n    },\n    fullScreen: {\n      position: \"fixed\",\n      width: \"100%\",\n      height: \"100%\",\n      left: \"0\",\n      top: \"0\",\n      zIndex: 2000,\n      overflow: \"auto\",\n      padding: \"0\",\n    },\n\n    editor: {\n      width: \"100%\",\n      height: \"100%\",\n      backgroundColor: theme.palette.background.default,\n      border: \"none\",\n    },\n    preview: {\n      position: \"relative\",\n      left: \"0\",\n      top: \"0\",\n      width: \"100%\",\n      height: \"100%\",\n      border: \"none\",\n      overflow: \"auto !important\",\n      padding: theme.spacing(1, 2),\n      zIndex: previewZIndex,\n      [theme.breakpoints.down(\"sm\")]: {\n        padding: theme.spacing(1),\n      },\n    },\n    splitView: {\n      \"display\": \"flex\",\n      \"flexDirection\": \"row\",\n      \"& .CodeMirror.CodeMirror\": {\n        width: \"50%\",\n      },\n      \"& $preview\": {\n        position: \"relative\",\n        width: \"50%\",\n        borderLeft: `1px solid ${theme.palette.divider}`,\n      },\n    },\n    backBtn: {\n      marginRight: \"8px\",\n      [theme.breakpoints.up(\"sm\")]: {\n        display: \"none\",\n      },\n    },\n    // math\n    floatWin: {\n      position: \"fixed\",\n      zIndex: 100,\n      background: theme.palette.background.paper,\n      borderRadius: \"5px\",\n      overflow: \"hidden\",\n      minWidth: \"200px\",\n      maxWidth: \"70%\",\n    },\n    floatWinHidden: {\n      display: \"none\",\n    },\n    floatWinTitle: {\n      display: \"flex\",\n      alignItems: \"center\",\n      background: \"#579\",\n      color: \"#eee\",\n    },\n    floatWinContent: {\n      maxHeight: \"80vh\",\n      overflow: \"auto\",\n      padding: \"10px 20px\",\n    },\n    floatWinClose: {\n      color: \"#eee\",\n    },\n  }),\n);\n\ninterface CursorPosition {\n  ch: number;\n  line: number;\n}\ninterface TimerText {\n  text: string;\n  line: number;\n  date: Date;\n}\ninterface Props {\n  note: Note;\n}\nexport default function Editor(props: Props) {\n  const note = props.note;\n  const classes = useStyles(props);\n  const theme = useTheme();\n  const [textAreaElement, setTextAreaElement] = useState<HTMLTextAreaElement>(\n    null,\n  );\n  const [editor, setEditor] = useState<CodeMirrorEditor>(null);\n  const [cursorPosition, setCursorPosition] = useState<CursorPosition>({\n    line: 0,\n    ch: 0,\n  });\n  const [deleteNoteDialogOpen, setDeleteNoteDialogOpen] = useState<boolean>(\n    false,\n  );\n  const [filePathDialogOpen, setFilePathDialogOpen] = useState<boolean>(false);\n  const [pushDialogOpen, setPushDialogOpen] = useState<boolean>(false);\n  const [previewElement, setPreviewElement] = useState<HTMLElement>(null);\n  const [previewIsPresentation, setPreviewIsPresentation] = useState<boolean>(\n    false,\n  );\n  const [gitStatus, setGitStatus] = useState<string>(\"\");\n  const [fullScreenMode, setFullScreenMode] = useState<boolean>(false);\n  const [tagsMenuAnchorEl, setTagsMenuAnchorEl] = useState<HTMLElement>(null);\n  const [tagNames, setTagNames] = useState<string[]>([]);\n  const [shareAnchorEl, setShareAnchorEl] = useState<HTMLElement>(null);\n  const [toggleEncryptionDialogOpen, setToggleEncryptionDialogOpen] = useState<\n    boolean\n  >(false);\n  const [toggleEncryptionPassword, setToggleEncryptionPassword] = useState<\n    string\n  >(\"\");\n  const [decryptionDialogOpen, setDecryptionDialogOpen] = useState<boolean>(\n    false,\n  );\n  const [decryptionPassword, setDecryptionPassword] = useState<string>(\"\");\n  const [isDecrypted, setIsDecrypted] = useState<boolean>(false);\n  const [needsToPrint, setNeedsToPrint] = useState<boolean>(false);\n  const [editImageElement, setEditImageElement] = useState<HTMLImageElement>(\n    null,\n  );\n  const [editImageTextMarker, setEditImageTextMarker] = useState<TextMarker>(\n    null,\n  );\n  const [editImageDialogOpen, setEditImageDialogOpen] = useState<boolean>(\n    false,\n  );\n  const [forceUpdate, setForceUpdate] = useState<number>(Date.now());\n\n  const crossnoteContainer = CrossnoteContainer.useContainer();\n  const settingsContainer = SettingsContainer.useContainer();\n\n  const { t } = useTranslation();\n\n  const closeFilePathDialog = useCallback(() => {\n    if (!note) return;\n    setFilePathDialogOpen(false);\n  }, [note]);\n\n  const closeEncryptionDialog = useCallback(() => {\n    setToggleEncryptionPassword(\"\");\n    setToggleEncryptionDialogOpen(false);\n  }, []);\n\n  const closeDecryptionDialog = useCallback(() => {\n    setDecryptionPassword(\"\");\n    setDecryptionDialogOpen(false);\n  }, []);\n\n  const pullNotebook = useCallback(() => {\n    new Noty({\n      type: \"info\",\n      text: t(\"info/downloading-notebook\"),\n      layout: \"topRight\",\n      theme: \"relax\",\n      timeout: 2000,\n    }).show();\n    if (!note) return;\n    crossnoteContainer\n      .pullNotebook({\n        notebook: note.notebook,\n        onAuthFailure: () => {\n          new Noty({\n            type: \"error\",\n            text: t(\"error/authentication-failed\"),\n            layout: \"topRight\",\n            theme: \"relax\",\n            timeout: 5000,\n          }).show();\n        },\n      })\n      .then(() => {\n        new Noty({\n          type: \"success\",\n          text: t(\"success/notebook-downloaded\"),\n          layout: \"topRight\",\n          theme: \"relax\",\n          timeout: 2000,\n        }).show();\n      })\n      .catch((error) => {\n        console.log(error);\n        new Noty({\n          type: \"error\",\n          text: t(\"error/failed-to-download-notebook\"),\n          layout: \"topRight\",\n          theme: \"relax\",\n          timeout: 2000,\n        }).show();\n      });\n  }, [note]);\n\n  const checkoutNote = useCallback(() => {\n    if (!note) return;\n    crossnoteContainer.checkoutNote(note);\n  }, [note]);\n\n  const addTag = useCallback(\n    (tagName: string) => {\n      if (!note || !editor || !isDecrypted) {\n        return;\n      }\n      const tag = sanitizeTag(tagName);\n      if (!tag.length) {\n        return;\n      }\n      setTagNames((tagNames) => {\n        const newTagNames =\n          tagNames.indexOf(tag) >= 0 ? [...tagNames] : [tag, ...tagNames];\n        note.config.tags = newTagNames.sort((x, y) => x.localeCompare(y));\n        crossnoteContainer.updateNoteMarkdown(\n          note,\n          editor.getValue(),\n          note.config.encryption ? decryptionPassword : \"\",\n          (status) => {\n            setGitStatus(status);\n          },\n        );\n        crossnoteContainer.updateNotebookTagNode();\n        return newTagNames;\n      });\n    },\n    [note, editor, decryptionPassword, isDecrypted],\n  );\n\n  const deleteTag = useCallback(\n    (tagName: string) => {\n      if (note && editor && isDecrypted) {\n        setTagNames((tagNames) => {\n          const newTagNames = tagNames.filter((t) => t !== tagName);\n          note.config.tags = newTagNames.sort((x, y) => x.localeCompare(y));\n          crossnoteContainer.updateNoteMarkdown(\n            note,\n            editor.getValue(),\n            note.config.encryption ? decryptionPassword : \"\",\n            (status) => {\n              setGitStatus(status);\n            },\n          );\n          crossnoteContainer.updateNotebookTagNode();\n          return newTagNames;\n        });\n      }\n    },\n    [note, editor, decryptionPassword, isDecrypted],\n  );\n\n  const toggleEncryption = useCallback(() => {\n    if (note && editor) {\n      const markdown = editor.getValue();\n      if (note.config.encryption) {\n        // Disable encryption\n        // Check if the password is correct\n        crossnoteContainer\n          .getNote(note.notebook, note.filePath)\n          .then((n) => {\n            try {\n              const bytes = CryptoJS.AES.decrypt(\n                n.markdown.trim(),\n                toggleEncryptionPassword,\n              );\n              const json = JSON.parse(bytes.toString(CryptoJS.enc.Utf8));\n              // Disable encryption\n              note.config.encryption = null;\n              delete note.config.encryption;\n              crossnoteContainer.updateNoteMarkdown(\n                note,\n                json.markdown,\n                \"\",\n                (status) => {\n                  setGitStatus(status);\n                  setDecryptionPassword(\"\");\n                  setIsDecrypted(true);\n                  closeEncryptionDialog();\n                  editor.setValue(json.markdown);\n                  editor.setOption(\"readOnly\", false);\n                },\n              );\n            } catch (error) {\n              new Noty({\n                type: \"error\",\n                text: t(\"error/failed-to-disable-encryption\"),\n                layout: \"topRight\",\n                theme: \"relax\",\n                timeout: 5000,\n              }).show();\n            }\n          })\n          .catch((error) => {\n            new Noty({\n              type: \"error\",\n              text: t(\"error/failed-to-disable-encryption\"),\n              layout: \"topRight\",\n              theme: \"relax\",\n              timeout: 5000,\n            }).show();\n          });\n      } else {\n        // Enable encryption\n        note.config.encryption = {\n          title: getHeaderFromMarkdown(markdown),\n        };\n        crossnoteContainer.updateNoteMarkdown(\n          note,\n          editor.getValue(),\n          toggleEncryptionPassword,\n          (status) => {\n            setDecryptionPassword(toggleEncryptionPassword);\n            setIsDecrypted(true);\n            setGitStatus(status);\n            closeEncryptionDialog();\n          },\n        );\n      }\n    }\n  }, [note, editor, closeEncryptionDialog, toggleEncryptionPassword]);\n\n  const decryptNote = useCallback(() => {\n    if (note && editor) {\n      crossnoteContainer\n        .getNote(note.notebook, note.filePath)\n        .then((n) => {\n          // Decrypt\n          try {\n            const bytes = CryptoJS.AES.decrypt(\n              n.markdown.trim(),\n              decryptionPassword,\n            );\n            const json = JSON.parse(bytes.toString(CryptoJS.enc.Utf8));\n            editor.setOption(\"readOnly\", false);\n            editor.setValue(json.markdown);\n            setIsDecrypted(true);\n            setDecryptionDialogOpen(false); // Don't clear decryptionPassword\n          } catch (error) {\n            new Noty({\n              type: \"error\",\n              text: t(\"error/decryption-failed\"),\n              layout: \"topRight\",\n              theme: \"relax\",\n              timeout: 5000,\n            }).show();\n            setIsDecrypted(false);\n          }\n        })\n        .catch((error) => {\n          setIsDecrypted(false);\n          console.log(error);\n        });\n    }\n  }, [note, editor, decryptionPassword, closeDecryptionDialog]);\n\n  const togglePin = useCallback(() => {\n    if (note && editor && isDecrypted) {\n      note.config.pinned = !note.config.pinned;\n      if (!note.config.pinned) {\n        delete note.config.pinned;\n      }\n      crossnoteContainer.updateNoteMarkdown(\n        note,\n        editor.getValue(),\n        note.config.encryption ? decryptionPassword : \"\",\n        (status) => {\n          setGitStatus(status);\n          setForceUpdate(Date.now());\n        },\n      );\n    }\n  }, [note, editor, decryptionPassword, isDecrypted]);\n\n  const postprocessPreview = useCallback(\n    (previewElement: HTMLElement) => {\n      previewPostprocessPreview(previewElement, note, (flag) => {\n        setPreviewIsPresentation(flag);\n      });\n    },\n    [note],\n  );\n\n  useEffect(() => {\n    if (!note) {\n      return () => {\n        setEditor(null);\n        setTextAreaElement(null);\n        setPreviewElement(null);\n      };\n    }\n  }, [note]);\n\n  // Initialize cursor color\n  useEffect(() => {\n    const styleID = \"codemirror-cursor-style\";\n    let style = document.getElementById(styleID);\n    if (!style) {\n      style = document.createElement(\"style\");\n      style.id = styleID;\n      document.body.appendChild(style);\n    }\n    style.innerText = `\n.CodeMirror-cursor.CodeMirror-cursor {\n  border-left: 2px solid ${settingsContainer.editorCursorColor || \"#333\"};\n}\n.cm-fat-cursor-mark.cm-fat-cursor-mark {\n  background-color: ${settingsContainer.editorCursorColor || \"#333\"};\n}\n  `;\n  }, [settingsContainer.editorCursorColor]);\n\n  useEffect(() => {\n    if (note) {\n      crossnoteContainer.crossnote\n        .getStatus(note.notebook, note.filePath)\n        .then((status) => {\n          setGitStatus(status);\n        });\n    }\n  }, [note, crossnoteContainer.crossnote]);\n\n  // Decryption\n  useEffect(() => {\n    if (!editor || !note) return;\n    if (note.config.encryption) {\n      setIsDecrypted(false);\n      setDecryptionPassword(\"\");\n      editor.setOption(\"readOnly\", true);\n      editor.setValue(`🔐 ${t(\"general/encrypted\")}`);\n      setDecryptionDialogOpen(true);\n    } else {\n      setIsDecrypted(true);\n      setDecryptionPassword(\"\");\n      editor.setOption(\"readOnly\", false);\n      editor.setValue(note.markdown);\n\n      if (note.markdown.length === 0) {\n        setTimeout(() => {\n          editor.refresh();\n        }, 50);\n      }\n    }\n  }, [editor, note]);\n\n  useEffect(() => {\n    if (textAreaElement && !editor && note) {\n      const editor: CodeMirrorEditor = VickyMD.fromTextArea(textAreaElement, {\n        mode: {\n          name: \"hypermd\",\n          hashtag: true,\n        },\n        // inputStyle: \"textarea\", // Break mobile device paste functionality\n        hmdFold: HMDFold,\n        keyMap: settingsContainer.keyMap,\n        showCursorWhenSelecting: true,\n        inputStyle: \"contenteditable\",\n        hmdClick: (info: any, cm: CodeMirrorEditor) => {\n          let { text, url } = info;\n          if (info.type === \"link\" || info.type === \"url\") {\n            const footnoteRef = text.match(/\\[[^[\\]]+\\](?:\\[\\])?$/); // bare link, footref or [foot][] . assume no escaping char inside\n            if (!footnoteRef && (info.ctrlKey || info.altKey) && url) {\n              // just open URL\n              openURL(url, note);\n              return false; // Prevent default click event\n            }\n          }\n        },\n      });\n      editor.setOption(\"lineNumbers\", false);\n      editor.setOption(\"foldGutter\", false);\n      editor.setValue(note.markdown || \"\");\n      editor.on(\"cursorActivity\", (instance) => {\n        const cursor = instance.getCursor();\n        if (cursor) {\n          setCursorPosition({\n            line: cursor.line,\n            ch: cursor.ch,\n          });\n        }\n      });\n      setEditor(editor);\n      initMathPreview(editor);\n    }\n  }, [textAreaElement, note, editor]);\n\n  // Change theme\n  useEffect(() => {\n    if (editor && settingsContainer.theme) {\n      setTheme({\n        editor,\n        themeName: settingsContainer.theme.name,\n      });\n    }\n  }, [settingsContainer.theme, editor]);\n\n  useEffect(() => {\n    if (editor && note) {\n      setTagNames(note.config.tags || []);\n      const changesHandler = () => {\n        if (editor.getOption(\"readOnly\") || !isDecrypted) {\n          // This line is necessary for decryption...\n          return;\n        }\n        const markdown = editor.getValue();\n\n        if (!note.config.encryption && markdown === note.markdown) {\n          return;\n        }\n        crossnoteContainer.updateNoteMarkdown(\n          note,\n          markdown,\n          note.config.encryption ? decryptionPassword : \"\",\n          (status) => {\n            setGitStatus(status);\n            setTagNames(note.config.tags || []); // After resolve conflicts\n          },\n        );\n      };\n      editor.on(\"changes\", changesHandler);\n\n      const keyupHandler = () => {\n        if (!isDecrypted && note.config.encryption) {\n          setDecryptionDialogOpen(true);\n        }\n      };\n      editor.on(\"keyup\", keyupHandler);\n\n      const imageClickedHandler = (args: any) => {\n        const marker: TextMarker = args.marker;\n        const imageElement: HTMLImageElement = args.element;\n        imageElement.setAttribute(\n          \"data-marker-position\",\n          JSON.stringify(marker.find()),\n        );\n        setEditImageElement(imageElement);\n        setEditImageTextMarker(marker);\n        setEditImageDialogOpen(true);\n      };\n      editor.on(\"imageClicked\", imageClickedHandler);\n\n      const loadImage = async (args: any) => {\n        const element = args.element;\n        const imageSrc = element.getAttribute(\"data-src\");\n        element.setAttribute(\"src\", await resolveNoteImageSrc(note, imageSrc));\n      };\n      editor.on(\"imageReadyToLoad\", loadImage);\n\n      return () => {\n        editor.off(\"changes\", changesHandler);\n        editor.off(\"keyup\", keyupHandler);\n        editor.off(\"imageClicked\", imageClickedHandler);\n        editor.off(\"imageReadyToLoad\", loadImage);\n      };\n    }\n  }, [editor, note, decryptionPassword, isDecrypted]);\n\n  useEffect(() => {\n    // Hack: for update after crossnoteContainer.renameTag\n    setTagNames(note?.config.tags || []);\n  }, [note?.config.tags]);\n\n  useEffect(() => {\n    if (!editor || !note) return;\n    if (crossnoteContainer.editorMode === EditorMode.VickyMD) {\n      VickyMD.switchToHyperMD(editor);\n      editor.setOption(\"hmdFold\", HMDFold);\n      editor.getWrapperElement().style.display = \"block\";\n      editor.refresh();\n    } else if (crossnoteContainer.editorMode === EditorMode.SourceCode) {\n      VickyMD.switchToNormal(editor);\n      editor.getWrapperElement().style.display = \"block\";\n      editor.refresh();\n    } else if (crossnoteContainer.editorMode === EditorMode.Preview) {\n      editor.getWrapperElement().style.display = \"none\";\n    } else if (crossnoteContainer.editorMode === EditorMode.SplitView) {\n      VickyMD.switchToNormal(editor);\n      editor.getWrapperElement().style.display = \"block\";\n      editor.refresh();\n    }\n  }, [crossnoteContainer.editorMode, editor, note, isDecrypted]);\n\n  // Render Preview\n  useEffect(() => {\n    if (\n      (crossnoteContainer.editorMode === EditorMode.Preview ||\n        crossnoteContainer.editorMode === EditorMode.SplitView) &&\n      editor &&\n      note &&\n      previewElement\n    ) {\n      if (isDecrypted) {\n        try {\n          renderPreview(previewElement, editor.getValue());\n          postprocessPreview(previewElement);\n          previewElement.scrollTop = 0;\n        } catch (error) {\n          previewElement.innerText = error;\n        }\n      } else {\n        previewElement.innerHTML = `🔐 ${t(\"general/encrypted\")}`;\n        const clickHandler = () => {\n          setDecryptionDialogOpen(true);\n        };\n        previewElement.addEventListener(\"click\", clickHandler);\n        return () => {\n          previewElement.removeEventListener(\"click\", clickHandler);\n        };\n      }\n    }\n  }, [\n    crossnoteContainer.editorMode,\n    editor,\n    previewElement,\n    note,\n    isDecrypted,\n    postprocessPreview,\n    t,\n  ]);\n\n  // Command\n  useEffect(() => {\n    if (!editor || !note) return;\n    const onChangeHandler = (\n      instance: CodeMirrorEditor,\n      changeObject: EditorChangeLinkedList,\n    ) => {\n      // Check commands\n      if (changeObject.text.length === 1 && changeObject.text[0] === \"/\") {\n        const aheadStr = editor\n          .getLine(changeObject.from.line)\n          .slice(0, changeObject.from.ch + 1);\n        if (!aheadStr.match(/#[^\\s]+?\\/$/)) {\n          // Not `/` inside a tag\n          editor.showHint({\n            closeOnUnfocus: false,\n            completeSingle: false,\n            hint: () => {\n              const cursor = editor.getCursor();\n              const token = editor.getTokenAt(cursor);\n              const line = cursor.line;\n              const lineStr = editor.getLine(line);\n              const end: number = cursor.ch;\n              let start = token.start;\n              if (lineStr[start] !== \"/\") {\n                start = start - 1;\n              }\n              const currentWord: string = lineStr\n                .slice(start, end)\n                .replace(/^\\//, \"\");\n\n              const render = (\n                element: HTMLElement,\n                data: CommandHint[],\n                cur: CommandHint,\n              ) => {\n                const wrapper = document.createElement(\"div\");\n                wrapper.style.padding = \"6px 0\";\n                wrapper.style.display = \"flex\";\n                wrapper.style.flexDirection = \"row\";\n                wrapper.style.alignItems = \"flex-start\";\n                wrapper.style.maxWidth = \"100%\";\n                wrapper.style.minWidth = \"200px\";\n\n                const leftPanel = document.createElement(\"div\");\n                const iconWrapper = document.createElement(\"div\");\n                iconWrapper.style.padding = \"0 6px\";\n                iconWrapper.style.marginRight = \"6px\";\n                iconWrapper.style.fontSize = \"1rem\";\n\n                const iconElement = document.createElement(\"span\");\n                iconElement.classList.add(\"mdi\");\n                iconElement.classList.add(\n                  cur.icon || \"mdi-help-circle-outline\",\n                );\n                iconWrapper.appendChild(iconElement);\n                leftPanel.appendChild(iconWrapper);\n\n                const rightPanel = document.createElement(\"div\");\n\n                const descriptionElement = document.createElement(\"p\");\n                descriptionElement.innerText = cur.description;\n                descriptionElement.style.margin = \"2px 0\";\n                descriptionElement.style.padding = \"0\";\n\n                const commandElement = document.createElement(\"p\");\n                commandElement.innerText = cur.command;\n                commandElement.style.margin = \"0\";\n                commandElement.style.padding = \"0\";\n                commandElement.style.fontSize = \"0.7rem\";\n\n                rightPanel.appendChild(descriptionElement);\n                rightPanel.appendChild(commandElement);\n\n                wrapper.appendChild(leftPanel);\n                wrapper.appendChild(rightPanel);\n                element.appendChild(wrapper);\n              };\n\n              const commands: CommandHint[] = [\n                {\n                  text: \"# \",\n                  command: \"/h1\",\n                  description: t(\"editor/toolbar/insert-header-1\"),\n                  icon: \"mdi-format-header-1\",\n                  render,\n                },\n                {\n                  text: \"## \",\n                  command: \"/h2\",\n                  description: t(\"editor/toolbar/insert-header-2\"),\n                  icon: \"mdi-format-header-2\",\n                  render,\n                },\n                {\n                  text: \"### \",\n                  command: \"/h3\",\n                  description: t(\"editor/toolbar/insert-header-3\"),\n                  icon: \"mdi-format-header-3\",\n                  render,\n                },\n                {\n                  text: \"#### \",\n                  command: \"/h4\",\n                  description: t(\"editor/toolbar/insert-header-4\"),\n                  icon: \"mdi-format-header-4\",\n                  render,\n                },\n                {\n                  text: \"##### \",\n                  command: \"/h5\",\n                  description: t(\"editor/toolbar/insert-header-5\"),\n                  icon: \"mdi-format-header-5\",\n                  render,\n                },\n                {\n                  text: \"###### \",\n                  command: \"/h6\",\n                  description: t(\"editor/toolbar/insert-header-6\"),\n                  icon: \"mdi-format-header-6\",\n                  render,\n                },\n                {\n                  text: \"> \",\n                  command: \"/blockquote\",\n                  description: t(\"editor/toolbar/insert-blockquote\"),\n                  icon: \"mdi-format-quote-open\",\n                  render,\n                },\n                {\n                  text: \"* \",\n                  command: \"/ul\",\n                  description: t(\"editor/toolbar/insert-unordered-list\"),\n                  icon: \"mdi-format-list-bulleted\",\n                  render,\n                },\n                {\n                  text: \"1. \",\n                  command: \"/ol\",\n                  description: t(\"editor/toolbar/insert-ordered-list\"),\n                  icon: \"mdi-format-list-numbered\",\n                  render,\n                },\n                {\n                  text: \"<!-- @crossnote.image -->\\n\",\n                  command: \"/image\",\n                  description: t(\"editor/toolbar/insert-image\"),\n                  icon: \"mdi-image\",\n                  render,\n                },\n                {\n                  text: `|   |   |\n|---|---|\n|   |   |\n`,\n                  command: \"/table\",\n                  description: t(\"editor/toolbar/insert-table\"),\n                  icon: \"mdi-table\",\n                  render,\n                },\n                {\n                  text:\n                    \"<!-- @timer \" +\n                    JSON.stringify({ date: new Date().toString() })\n                      .replace(/^{/, \"\")\n                      .replace(/}$/, \"\") +\n                    \" -->\\n\",\n                  command: \"/timer\",\n                  description: t(\"editor/toolbar/insert-clock\"),\n                  icon: \"mdi-timer\",\n                  render,\n                },\n                {\n                  text: \"<!-- @crossnote.audio -->  \\n\",\n                  command: \"/audio\",\n                  description: t(\"editor/toolbar/insert-audio\"),\n                  icon: \"mdi-music\",\n                  render,\n                },\n                /*\n                {\n                  text: \"<!-- @crossnote.netease_music -->  \\n\",\n                  displayText: `/netease - ${t(\n                    \"editor/toolbar/netease-music\",\n                  )}`,\n                },\n                */\n                {\n                  text: \"<!-- @crossnote.video -->  \\n\",\n                  command: \"/video\",\n                  description: t(\"editor/toolbar/insert-video\"),\n                  icon: \"mdi-video\",\n                  render,\n                },\n                {\n                  text: \"<!-- @crossnote.youtube -->  \\n\",\n                  command: \"/youtube\",\n                  description: t(\"editor/toolbar/insert-youtube\"),\n                  icon: \"mdi-youtube\",\n                  render,\n                },\n                {\n                  text: \"<!-- @crossnote.bilibili -->  \\n\",\n                  command: \"/bilibili\",\n                  description: t(\"editor/toolbar/insert-bilibili\"),\n                  icon: \"mdi-television-classic\",\n                  render,\n                },\n                {\n                  text: \"<!-- slide -->  \\n\",\n                  command: \"/slide\",\n                  description: t(\"editor/toolbar/insert-slide\"),\n                  icon: \"mdi-presentation\",\n                  render,\n                },\n                {\n                  text: \"<!-- @crossnote.ocr -->  \\n\",\n                  command: \"/ocr\",\n                  description: t(\"editor/toolbar/insert-ocr\"),\n                  icon: \"mdi-ocr\",\n                  render,\n                },\n                {\n                  text:\n                    '<!-- @crossnote.kanban \"v\":2,\"board\":{\"columns\":[]} -->  \\n',\n                  command: \"/kanban\",\n                  description: `${t(\"editor/toolbar/insert-kanban\")} (beta)`,\n                  icon: \"mdi-developer-board\",\n                  render,\n                },\n                /*\n                {\n                  text: \"<!-- @crossnote.abc -->  \\n\",\n                  displayText: `/abc - ${t(\n                    \"editor/toolbar/insert-abc-notation\",\n                  )}`,\n                },\n                */\n                {\n                  text: \"<!-- @crossnote.github_gist -->  \\n\",\n                  command: \"/github_gist\",\n                  description: t(\"editor/toolbar/insert-github-gist\"),\n                  icon: \"mdi-github\",\n                  render,\n                },\n                {\n                  text: \"<!-- @crossnote.comment -->  \\n\",\n                  command: \"/crossnote.comment\",\n                  description: t(\"editor/toolbar/insert-comment\"),\n                  icon: \"mdi-comment-multiple\",\n                  render,\n                },\n              ];\n              const filtered = commands.filter(\n                (item) =>\n                  (item.command + item.description)\n                    .toLocaleLowerCase()\n                    .indexOf(currentWord.toLowerCase()) >= 0,\n              );\n              return {\n                list: filtered.length ? filtered : commands,\n                from: { line, ch: start },\n                to: { line, ch: end },\n              };\n            },\n          });\n        }\n      }\n\n      // Check emoji\n      if (\n        changeObject.text.length === 1 &&\n        changeObject.text[0].length > 0 &&\n        changeObject.text[0] !== \" \" &&\n        changeObject.text[0] !== \":\" &&\n        changeObject.from.ch > 0 &&\n        editor.getLine(changeObject.from.line)[changeObject.from.ch - 1] === \":\"\n      ) {\n        editor.showHint({\n          closeOnUnfocus: true,\n          completeSingle: false,\n          hint: () => {\n            const cursor = editor.getCursor();\n            const token = editor.getTokenAt(cursor);\n            const line = cursor.line;\n            const lineStr = editor.getLine(line);\n            const end: number = cursor.ch;\n            let start = token.start;\n            let doubleSemiColon = false;\n            if (lineStr[start] !== \":\") {\n              start = start - 1;\n            }\n            if (start > 0 && lineStr[start - 1] === \":\") {\n              start = start - 1;\n              doubleSemiColon = true;\n            }\n            const currentWord: string = lineStr\n              .slice(start, end)\n              .replace(/^:+/, \"\");\n\n            const commands: { text: string; displayText: string }[] = [];\n            for (const def in EmojiDefinitions) {\n              const emoji = EmojiDefinitions[def];\n              commands.push({\n                text: doubleSemiColon ? `:${def}: ` : `${emoji} `,\n                displayText: `:${def}: ${emoji}`,\n              });\n            }\n            const filtered = commands.filter(\n              (item) =>\n                item.displayText\n                  .toLocaleLowerCase()\n                  .indexOf(currentWord.toLowerCase()) >= 0,\n            );\n            return {\n              list: filtered.length ? filtered : commands,\n              from: { line, ch: start },\n              to: { line, ch: end },\n            };\n          },\n        });\n      }\n\n      // Check tag\n      if (\n        changeObject.text.length === 1 &&\n        changeObject.text[0] !== \" \" &&\n        changeObject.from.ch > 0 &&\n        editor.getLine(changeObject.from.line)[changeObject.from.ch - 1] === \"#\"\n      ) {\n        editor.showHint({\n          closeOnUnfocus: true,\n          completeSingle: false,\n          hint: () => {\n            const cursor = editor.getCursor();\n            const token = editor.getTokenAt(cursor);\n            const line = cursor.line;\n            const lineStr = editor.getLine(line);\n            const end: number = cursor.ch;\n            let start = token.start;\n            if (lineStr[start] !== \"#\") {\n              start = start - 1;\n            }\n            const currentWord: string = lineStr\n              .slice(start, end)\n              .replace(TagStopRegExp, \"\");\n            const commands: { text: string; displayText: string }[] = [];\n            if (currentWord.trim().length > 0) {\n              commands.push({\n                text: `#${currentWord} `,\n                displayText: `+ #${currentWord}`,\n              });\n            }\n            const helper = (children: TagNode[]) => {\n              if (!children || !children.length) return;\n              for (let i = 0; i < children.length; i++) {\n                const tag = children[i].path;\n                commands.push({\n                  text: `#${tag} `,\n                  displayText: `+ #${tag}`,\n                });\n                helper(children[i].children);\n              }\n            };\n            helper(crossnoteContainer.notebookTagNode.children);\n            const filtered = commands.filter(\n              (item) => item.text.toLocaleLowerCase().indexOf(currentWord) >= 0,\n            );\n\n            return {\n              list: filtered.length ? filtered : commands,\n              from: { line, ch: start },\n              to: { line, ch: end },\n            };\n          },\n        });\n      }\n\n      // Timer\n      if (\n        changeObject.text.length > 0 &&\n        changeObject.text[0].startsWith(\"<!-- @timer \") &&\n        changeObject.removed.length > 0 &&\n        changeObject.removed[0].startsWith(\"/\")\n      ) {\n        // Calcuate date time\n        const lines = editor.getValue().split(\"\\n\");\n        const timerTexts: TimerText[] = [];\n        for (let i = 0; i < lines.length; i++) {\n          const match = lines[i].match(/^`@timer\\s.+`/);\n          if (match) {\n            const text = match[0];\n            const dataMatch = text.match(/^`@timer\\s+(.+)`/);\n            if (!dataMatch || !dataMatch.length) {\n              continue;\n            }\n            const dataStr = dataMatch[1];\n            try {\n              const data = JSON.parse(`{${dataStr}}`);\n              const datetime = data[\"date\"];\n              if (datetime) {\n                timerTexts.push({\n                  text: text,\n                  line: i,\n                  date: new Date(datetime),\n                });\n              }\n            } catch (error) {\n              continue;\n            }\n          }\n        }\n        for (let i = 1; i < timerTexts.length; i++) {\n          const currentTimerText = timerTexts[i];\n          const previousTimerText = timerTexts[i - 1];\n          const duration = formatDistance(\n            currentTimerText.date,\n            previousTimerText.date,\n            { includeSeconds: true },\n          );\n          const newText = `\\`@timer ${JSON.stringify({\n            date: currentTimerText.date.toString(),\n            duration,\n          })\n            .replace(/^{/, \"\")\n            .replace(/}$/, \"\")}\\``;\n          editor.replaceRange(\n            newText,\n            { line: currentTimerText.line, ch: 0 },\n            { line: currentTimerText.line, ch: currentTimerText.text.length },\n          );\n        }\n      }\n\n      // Add Tag\n      if (\n        changeObject.origin === \"complete\" &&\n        changeObject.removed[0] &&\n        changeObject.removed[0].match(/^#[^\\s]/) &&\n        changeObject.text[0] &&\n        changeObject.text[0].match(/^#[^\\s]/)\n      ) {\n        addTag(changeObject.text[0].replace(/^#/, \"\"));\n      }\n    };\n    editor.on(\"change\", onChangeHandler);\n\n    const onCursorActivityHandler = (instance: CodeMirrorEditor) => {\n      // console.log(\"cursorActivity\", editor.getCursor());\n      // console.log(\"selection: \", editor.getSelection());\n      return;\n    };\n    editor.on(\"cursorActivity\", onCursorActivityHandler);\n\n    return () => {\n      editor.off(\"change\", onChangeHandler);\n      editor.off(\"cursorActivity\", onCursorActivityHandler);\n    };\n  }, [editor, note, crossnoteContainer.notebookTagNode, addTag /*t*/]);\n\n  // Split view\n  useEffect(() => {\n    if (\n      !editor ||\n      !note ||\n      !previewElement ||\n      crossnoteContainer.editorMode !== EditorMode.SplitView\n    ) {\n      return;\n    }\n    let onChangeCallback: any = null;\n    let onCursorActivityCallback: any = null;\n    let onScrollCallback: any = null;\n    let onWindowResizeCallback: any = null;\n    let scrollMap: any = null;\n    let scrollTimeout: NodeJS.Timeout = null;\n    let previewScrollDelay = Date.now();\n    let editorScrollDelay = Date.now();\n    let currentLine: number = -1;\n    let editorClientWidth = editor.getScrollInfo().clientWidth;\n    let editorClientHeight = editor.getScrollInfo().clientHeight;\n    let lastCursorPosition: Position = null;\n\n    const totalLineCount = editor.lineCount();\n    const buildScrollMap = () => {\n      if (!totalLineCount) {\n        return null;\n      }\n      const scrollMap = [];\n      const nonEmptyList = [];\n\n      for (let i = 0; i < totalLineCount; i++) {\n        scrollMap.push(-1);\n      }\n\n      nonEmptyList.push(0);\n      scrollMap[0] = 0;\n\n      // write down the offsetTop of element that has 'data-line' property to scrollMap\n      const lineElements = previewElement.getElementsByClassName(\"sync-line\");\n\n      for (let i = 0; i < lineElements.length; i++) {\n        let el = lineElements[i] as HTMLElement;\n        let t: any = el.getAttribute(\"data-line\");\n        if (!t) {\n          continue;\n        }\n\n        t = parseInt(t, 10);\n        if (!t) {\n          continue;\n        }\n\n        // this is for ignoring footnote scroll match\n        if (t < nonEmptyList[nonEmptyList.length - 1]) {\n          el.removeAttribute(\"data-line\");\n        } else {\n          nonEmptyList.push(t);\n\n          let offsetTop = 0;\n          while (el && el !== previewElement) {\n            offsetTop += el.offsetTop;\n            el = el.offsetParent as HTMLElement;\n          }\n\n          scrollMap[t] = Math.round(offsetTop);\n        }\n      }\n\n      nonEmptyList.push(totalLineCount);\n      scrollMap.push(previewElement.scrollHeight);\n\n      let pos = 0;\n      for (let i = 0; i < totalLineCount; i++) {\n        if (scrollMap[i] !== -1) {\n          pos++;\n          continue;\n        }\n\n        const a = nonEmptyList[pos - 1];\n        const b = nonEmptyList[pos];\n        scrollMap[i] = Math.round(\n          (scrollMap[b] * (i - a) + scrollMap[a] * (b - i)) / (b - a),\n        );\n      }\n\n      return scrollMap; // scrollMap's length == screenLineCount (vscode can't get screenLineCount... sad)\n    };\n    const scrollToPos = (scrollTop: number) => {\n      if (scrollTimeout) {\n        clearTimeout(scrollTimeout);\n        scrollTimeout = null;\n      }\n\n      if (scrollTop < 0) {\n        return;\n      }\n\n      const delay = 10;\n\n      const helper = (duration = 0) => {\n        scrollTimeout = setTimeout(() => {\n          if (duration <= 0) {\n            previewScrollDelay = Date.now() + 500;\n            previewElement.scrollTop = scrollTop;\n            return;\n          }\n\n          const difference = scrollTop - previewElement.scrollTop;\n\n          const perTick = (difference / duration) * delay;\n\n          // disable preview onscroll\n          previewScrollDelay = Date.now() + 500;\n\n          previewElement.scrollTop += perTick;\n          if (previewElement.scrollTop === scrollTop) {\n            return;\n          }\n\n          helper(duration - delay);\n        }, delay);\n      };\n\n      const scrollDuration = 120;\n      helper(scrollDuration);\n    };\n    const scrollToRevealSourceLine = (line: number, topRatio = 0.372) => {\n      if (line === currentLine) {\n        return;\n      } else {\n        currentLine = line;\n      }\n\n      // disable preview onscroll\n      previewScrollDelay = Date.now() + 500;\n\n      /*\n        if (presentationMode) {\n          scrollSyncToSlide(line);\n        } else {\n          scrollSyncToLine(line, topRatio);\n        }\n        */\n      scrollSyncToLine(line, topRatio);\n    };\n    const scrollSyncToLine = (line: number, topRatio: number = 0.372) => {\n      if (!scrollMap) {\n        scrollMap = buildScrollMap();\n      }\n      if (!scrollMap || line >= scrollMap.length) {\n        return;\n      }\n\n      if (line + 1 === totalLineCount) {\n        // last line\n        scrollToPos(previewElement.scrollHeight);\n      } else {\n        /**\n         * Since I am not able to access the viewport of the editor\n         * I used `golden section` (0.372) here for scrollTop.\n         */\n        scrollToPos(\n          Math.max(scrollMap[line] - previewElement.offsetHeight * topRatio, 0),\n        );\n      }\n    };\n    const revealEditorLine = (line: number) => {\n      const scrollInfo = editor.getScrollInfo();\n      editor.scrollIntoView({ line: line, ch: 0 }, scrollInfo.clientHeight / 2);\n      editorScrollDelay = Date.now() + 500;\n      if (\n        scrollInfo.clientHeight !== editorClientHeight ||\n        scrollInfo.clientWidth !== editorClientWidth\n      ) {\n        editorClientHeight = scrollInfo.clientHeight;\n        editorClientWidth = scrollInfo.clientWidth;\n        scrollMap = null;\n      }\n    };\n    const previewSyncSource = () => {\n      let scrollToLine;\n\n      if (previewElement.scrollTop === 0) {\n        // editorScrollDelay = Date.now() + 100\n        scrollToLine = 0;\n\n        revealEditorLine(scrollToLine);\n        return;\n      }\n\n      const top = previewElement.scrollTop + previewElement.offsetHeight / 2;\n\n      // try to find corresponding screen buffer row\n      if (!scrollMap) {\n        scrollMap = buildScrollMap();\n      }\n\n      let i = 0;\n      let j = scrollMap.length - 1;\n      let count = 0;\n      let screenRow = -1; // the screenRow is the bufferRow in vscode.\n      let mid;\n\n      while (count < 20) {\n        if (Math.abs(top - scrollMap[i]) < 20) {\n          screenRow = i;\n          break;\n        } else if (Math.abs(top - scrollMap[j]) < 20) {\n          screenRow = j;\n          break;\n        } else {\n          mid = Math.floor((i + j) / 2);\n          if (top > scrollMap[mid]) {\n            i = mid;\n          } else {\n            j = mid;\n          }\n        }\n        count++;\n      }\n\n      if (screenRow === -1) {\n        screenRow = mid;\n      }\n\n      scrollToLine = screenRow;\n      revealEditorLine(scrollToLine);\n      // @scrollToPos(screenRow * @editor.getLineHeightInPixels() - @previewElement.offsetHeight / 2, @editor.getElement())\n      // # @editor.getElement().setScrollTop\n\n      // track currnet time to disable onDidChangeScrollTop\n      // editorScrollDelay = Date.now() + 100\n    };\n\n    onChangeCallback = () => {\n      try {\n        const markdown = editor.getValue();\n        setTimeout(() => {\n          const newMarkdown = editor.getValue();\n          if (markdown === newMarkdown) {\n            renderPreview(previewElement, newMarkdown);\n            postprocessPreview(previewElement);\n          }\n        }, 300);\n      } catch (error) {\n        previewElement.innerText = error;\n      }\n      // Reset scrollMap\n      scrollMap = null;\n    };\n    onCursorActivityCallback = () => {\n      const cursor = editor.getCursor();\n      const scrollInfo = editor.getScrollInfo();\n      const firstLine = editor.lineAtHeight(scrollInfo.top, \"local\");\n      const lastLine = editor.lineAtHeight(\n        scrollInfo.top + scrollInfo.clientHeight,\n        \"local\",\n      );\n      if (!lastCursorPosition || lastCursorPosition.line !== cursor.line) {\n        scrollSyncToLine(\n          cursor.line,\n          (cursor.line - firstLine) / (lastLine - firstLine),\n        );\n      }\n      lastCursorPosition = cursor;\n    };\n    onScrollCallback = () => {\n      // console.log(\"scroll editor: \", editor.getScrollInfo());\n      // console.log(\"viewport: \", editor.getViewport());\n      const scrollInfo = editor.getScrollInfo();\n      if (\n        scrollInfo.clientHeight !== editorClientHeight ||\n        scrollInfo.clientWidth !== editorClientWidth\n      ) {\n        editorClientHeight = scrollInfo.clientHeight;\n        editorClientWidth = scrollInfo.clientWidth;\n        scrollMap = null;\n      }\n\n      if (Date.now() < editorScrollDelay) {\n        return;\n      }\n      const topLine = editor.lineAtHeight(scrollInfo.top, \"local\");\n      const bottomLine = editor.lineAtHeight(\n        scrollInfo.top + scrollInfo.clientHeight,\n        \"local\",\n      );\n      let midLine;\n      if (topLine === 0) {\n        midLine = 0;\n      } else if (bottomLine === totalLineCount - 1) {\n        midLine = bottomLine;\n      } else {\n        midLine = Math.floor((topLine + bottomLine) / 2);\n      }\n      scrollSyncToLine(midLine);\n    };\n    onWindowResizeCallback = () => {\n      const scrollInfo = editor.getScrollInfo();\n      editorClientHeight = scrollInfo.clientHeight;\n      editorClientWidth = scrollInfo.clientWidth;\n      scrollMap = null;\n    };\n\n    editor.on(\"changes\", onChangeCallback);\n    onChangeCallback();\n\n    editor.on(\"cursorActivity\", onCursorActivityCallback);\n    editor.on(\"scroll\", onScrollCallback);\n    previewElement.onscroll = () => {\n      // console.log(\"scroll preview: \", previewElement.scrollTop);\n      if (Date.now() < previewScrollDelay) {\n        return;\n      }\n      previewSyncSource();\n    };\n    window.addEventListener(\"resize\", onWindowResizeCallback);\n\n    return () => {\n      if (onChangeCallback) {\n        editor.off(\"changes\", onChangeCallback);\n      }\n      if (onCursorActivityCallback) {\n        editor.off(\"cursorActivity\", onCursorActivityCallback);\n      }\n      if (onScrollCallback) {\n        editor.off(\"scroll\", onScrollCallback);\n      }\n      if (onWindowResizeCallback) {\n        window.removeEventListener(\"resize\", onWindowResizeCallback);\n      }\n    };\n  }, [\n    editor,\n    note,\n    previewElement,\n    crossnoteContainer.editorMode,\n    fullScreenMode,\n    postprocessPreview,\n  ]);\n\n  // Print preview\n  useEffect(() => {\n    if (!note || !editor || !needsToPrint) {\n      return;\n    }\n    if (\n      crossnoteContainer.editorMode === EditorMode.Preview &&\n      previewElement\n    ) {\n      const tempPreviewElement = document.createElement(\"div\");\n      tempPreviewElement.classList.add(\"preview\");\n      tempPreviewElement.style.zIndex = \"999999\";\n      document.body.appendChild(tempPreviewElement);\n\n      const bannerElement = document.createElement(\"div\");\n      bannerElement.style.position = \"fixed\";\n      bannerElement.style.width = \"100%\";\n      bannerElement.style.height = \"100%\";\n      bannerElement.style.top = \"0\";\n      bannerElement.style.left = \"0\";\n      bannerElement.style.textAlign = \"center\";\n      bannerElement.style.backgroundColor = theme.palette.background.default;\n      bannerElement.style.color = theme.palette.text.primary;\n      bannerElement.style.zIndex = \"9999\";\n      bannerElement.innerHTML = `<p>${t(\"general/please-wait\")}</p>`;\n\n      const currentTheme = editor.getOption(\"theme\") as ThemeName;\n      setTheme({\n        editor: null,\n        themeName: \"light\",\n      });\n      const printDone = () => {\n        tempPreviewElement.remove();\n        setTheme({\n          editor: null,\n          themeName: currentTheme,\n        });\n        setNeedsToPrint(false);\n      };\n      renderPreview(\n        tempPreviewElement,\n        editor.getValue(),\n        previewIsPresentation,\n      )\n        .then(() => {\n          printPreview(tempPreviewElement, bannerElement)\n            .then(() => {\n              printDone();\n            })\n            .catch(() => {\n              printDone();\n            });\n        })\n        .catch(() => {\n          printDone();\n        });\n    } else {\n      crossnoteContainer.setEditorMode(EditorMode.Preview);\n    }\n  }, [\n    needsToPrint,\n    crossnoteContainer.editorMode,\n    note,\n    editor,\n    previewElement,\n    previewIsPresentation,\n  ]);\n\n  // Wiki TOC Render\n  useEffect(() => {\n    if (\n      note &&\n      editor &&\n      note.filePath === \"SUMMARY.md\" &&\n      crossnoteContainer.wikiTOCElement\n    ) {\n      const onChangesHandler = () => {\n        renderPreview(crossnoteContainer.wikiTOCElement, editor.getValue());\n        postprocessPreview(crossnoteContainer.wikiTOCElement);\n      };\n      editor.on(\"changes\", onChangesHandler);\n      renderPreview(crossnoteContainer.wikiTOCElement, editor.getValue());\n      postprocessPreview(crossnoteContainer.wikiTOCElement);\n      return () => {\n        editor.off(\"changes\", onChangesHandler);\n      };\n    }\n  }, [note, editor, crossnoteContainer.wikiTOCElement]);\n\n  if (!note) {\n    return (\n      <Box className={clsx(classes.editorPanel, \"editor-panel\")}>\n        <Hidden smUp>\n          <Box className={clsx(classes.topPanel)}>\n            <Box className={clsx(classes.row)}>\n              <ButtonGroup className={clsx(classes.backBtn)}>\n                <Button\n                  className={clsx(classes.controlBtn)}\n                  onClick={() => {\n                    crossnoteContainer.setDisplayMobileEditor(false);\n                    crossnoteContainer.setEditorMode(EditorMode.Preview);\n                  }}\n                >\n                  <ChevronLeft></ChevronLeft>\n                </Button>\n              </ButtonGroup>\n            </Box>\n          </Box>\n        </Hidden>\n        <Button\n          style={{\n            margin: \"0 auto\",\n            top: \"50%\",\n            position: \"relative\",\n          }}\n          onClick={() =>\n            crossnoteContainer.createNewNote(\n              crossnoteContainer.selectedNotebook,\n            )\n          }\n          disabled={\n            !crossnoteContainer.initialized ||\n            crossnoteContainer.isLoadingNotebook\n          }\n          variant={\"outlined\"}\n        >\n          <Typography>{`📝 ${t(\"general/add-a-note\")}`}</Typography>\n        </Button>\n      </Box>\n    );\n  }\n\n  return (\n    <Box className={clsx(classes.editorPanel, \"editor-panel\")}>\n      <Box className={clsx(classes.topPanel, \"editor-toolbar\")}>\n        <Box className={clsx(classes.row)}>\n          <ButtonGroup className={clsx(classes.backBtn)}>\n            <Button\n              className={clsx(classes.controlBtn)}\n              onClick={() => {\n                crossnoteContainer.setDisplayMobileEditor(false);\n                crossnoteContainer.setEditorMode(EditorMode.Preview);\n              }}\n            >\n              <ChevronLeft></ChevronLeft>\n            </Button>\n          </ButtonGroup>\n          <ButtonGroup\n            variant={\"outlined\"}\n            color=\"default\"\n            aria-label=\"editor mode\"\n          >\n            <Tooltip title={t(\"general/vickymd\")}>\n              <Button\n                className={clsx(\n                  classes.controlBtn,\n                  crossnoteContainer.editorMode === EditorMode.VickyMD &&\n                    classes.controlBtnSelected,\n                )}\n                color={\n                  crossnoteContainer.editorMode === EditorMode.VickyMD\n                    ? \"primary\"\n                    : \"default\"\n                }\n                onClick={() =>\n                  crossnoteContainer.setEditorMode(EditorMode.VickyMD)\n                }\n              >\n                <Pencil></Pencil>\n              </Button>\n            </Tooltip>\n            <Tooltip title={t(\"editor/note-control/source-code\")}>\n              <Button\n                className={clsx(\n                  classes.controlBtn,\n                  crossnoteContainer.editorMode === EditorMode.SourceCode &&\n                    classes.controlBtnSelected,\n                )}\n                color={\n                  crossnoteContainer.editorMode === EditorMode.SourceCode\n                    ? \"primary\"\n                    : \"default\"\n                }\n                onClick={() =>\n                  crossnoteContainer.setEditorMode(EditorMode.SourceCode)\n                }\n              >\n                <CodeTags></CodeTags>\n              </Button>\n            </Tooltip>\n            <Tooltip title={t(\"editor/note-control/split-view\")}>\n              <Button\n                className={clsx(\n                  classes.controlBtn,\n                  crossnoteContainer.editorMode === EditorMode.SplitView &&\n                    classes.controlBtnSelected,\n                )}\n                color={\n                  crossnoteContainer.editorMode === EditorMode.SplitView\n                    ? \"primary\"\n                    : \"default\"\n                }\n                onClick={() =>\n                  crossnoteContainer.setEditorMode(EditorMode.SplitView)\n                }\n              >\n                <ViewSplitVertical></ViewSplitVertical>\n              </Button>\n            </Tooltip>\n            <Tooltip title={t(\"editor/note-control/preview\")}>\n              <Button\n                className={clsx(\n                  classes.controlBtn,\n                  crossnoteContainer.editorMode === EditorMode.Preview &&\n                    classes.controlBtnSelected,\n                )}\n                color={\n                  crossnoteContainer.editorMode === EditorMode.Preview\n                    ? \"primary\"\n                    : \"default\"\n                }\n                onClick={() =>\n                  crossnoteContainer.setEditorMode(EditorMode.Preview)\n                }\n              >\n                <FilePresentationBox></FilePresentationBox>\n              </Button>\n            </Tooltip>\n          </ButtonGroup>\n          <ButtonGroup style={{ marginLeft: \"8px\" }}>\n            <Tooltip title={t(\"general/Fullscreen\")}>\n              <Button\n                className={clsx(classes.controlBtn)}\n                onClick={() => setFullScreenMode(true)}\n              >\n                <Fullscreen></Fullscreen>\n              </Button>\n            </Tooltip>\n          </ButtonGroup>\n          <ButtonGroup style={{ marginLeft: \"8px\" }}>\n            {isDecrypted && (\n              <Tooltip title={t(\"general/tags\")}>\n                <Button\n                  className={clsx(\n                    classes.controlBtn,\n                    note.config.tags &&\n                      note.config.tags.length > 0 &&\n                      classes.controlBtnSelectedSecondary,\n                  )}\n                  onClick={(event) => setTagsMenuAnchorEl(event.currentTarget)}\n                >\n                  {note.config.tags && note.config.tags.length > 0 ? (\n                    <Tag></Tag>\n                  ) : (\n                    <TagOutline></TagOutline>\n                  )}\n                </Button>\n              </Tooltip>\n            )}\n            {isDecrypted && (\n              <Tooltip title={t(\"general/Pin\")}>\n                <Button\n                  className={clsx(\n                    classes.controlBtn,\n                    note.config.pinned && classes.controlBtnSelectedSecondary,\n                  )}\n                  onClick={togglePin}\n                >\n                  {note.config.pinned ? <Pin></Pin> : <PinOutline></PinOutline>}\n                </Button>\n              </Tooltip>\n            )}\n            <Tooltip title={t(\"general/Encryption\")}>\n              <Button\n                className={clsx(\n                  classes.controlBtn,\n                  note.config.encryption && classes.controlBtnSelectedSecondary,\n                )}\n                onClick={() => setToggleEncryptionDialogOpen(true)}\n              >\n                {note.config.encryption ? (\n                  <Lock></Lock>\n                ) : (\n                  <LockOpenOutline></LockOpenOutline>\n                )}\n              </Button>\n            </Tooltip>\n          </ButtonGroup>\n          <ButtonGroup style={{ marginLeft: \"8px\" }}>\n            <Tooltip title={t(\"general/change-file-path\")}>\n              <Button\n                className={clsx(classes.controlBtn)}\n                onClick={() => setFilePathDialogOpen(true)}\n              >\n                <RenameBox></RenameBox>\n              </Button>\n            </Tooltip>\n            <Tooltip title={t(\"general/Delete\")}>\n              <Button\n                className={clsx(classes.controlBtn)}\n                onClick={() => setDeleteNoteDialogOpen(true)}\n              >\n                <Delete></Delete>\n              </Button>\n            </Tooltip>\n            {!note.config.encryption && (\n              <Tooltip title={t(\"general/create-a-copy\")}>\n                <Button\n                  className={clsx(classes.controlBtn)}\n                  onClick={() => crossnoteContainer.duplicateNote(note)}\n                >\n                  <ContentDuplicate></ContentDuplicate>\n                </Button>\n              </Tooltip>\n            )}\n            {is.desktop() && (\n              <Tooltip title={t(\"general/Print\")}>\n                <Button\n                  className={clsx(classes.controlBtn)}\n                  onClick={() => setNeedsToPrint(true)}\n                >\n                  <Printer></Printer>\n                </Button>\n              </Tooltip>\n            )}\n            <Tooltip title={t(\"general/Share\")}>\n              <Button\n                className={clsx(classes.controlBtn)}\n                onClick={(event) => setShareAnchorEl(event.currentTarget)}\n              >\n                <ShareVariant></ShareVariant>\n              </Button>\n            </Tooltip>\n          </ButtonGroup>\n          {note.notebook.gitURL && ( // If no git url set, then don't allow push/pull\n            <ButtonGroup style={{ marginLeft: \"8px\" }}>\n              <Tooltip title={t(\"general/restore-checkout\")}>\n                <Button\n                  className={clsx(classes.controlBtn)}\n                  onClick={checkoutNote}\n                >\n                  <Restore></Restore>\n                </Button>\n              </Tooltip>\n              <Tooltip title={t(\"general/upload-push\")}>\n                <Button\n                  className={clsx(classes.controlBtn)}\n                  onClick={() => setPushDialogOpen(true)}\n                  disabled={\n                    crossnoteContainer.isPullingNotebook ||\n                    crossnoteContainer.isPushingNotebook\n                  }\n                >\n                  <CloudUploadOutline></CloudUploadOutline>\n                </Button>\n              </Tooltip>\n              <Tooltip title={t(\"general/download-pull\")}>\n                <Button\n                  className={clsx(classes.controlBtn)}\n                  onClick={pullNotebook}\n                  disabled={\n                    crossnoteContainer.isPullingNotebook ||\n                    crossnoteContainer.isPushingNotebook\n                  }\n                >\n                  <CloudDownloadOutline></CloudDownloadOutline>\n                </Button>\n              </Tooltip>\n            </ButtonGroup>\n          )}\n          <TagsMenuPopover\n            anchorElement={tagsMenuAnchorEl}\n            onClose={() => setTagsMenuAnchorEl(null)}\n            addTag={addTag}\n            deleteTag={deleteTag}\n            tagNames={tagNames}\n          ></TagsMenuPopover>\n          <Popover\n            open={Boolean(shareAnchorEl)}\n            anchorEl={shareAnchorEl}\n            keepMounted\n            onClose={() => setShareAnchorEl(null)}\n          >\n            <Box style={{ padding: theme.spacing(1) }}>\n              <Typography variant={\"subtitle2\"}>\n                {t(\"editor/note-control/shareable-link\")}\n              </Typography>\n              <Box className={clsx(classes.row)}>\n                <Tooltip\n                  title={t(\"editor/note-control/copy-to-clipboard\")}\n                  onClick={() => {\n                    copyToClipboard(\n                      note.notebook.gitURL\n                        ? `${window.location.origin}${env.approot}/?repo=${encodeURIComponent(\n                            note.notebook.gitURL,\n                          )}&branch=${encodeURIComponent(\n                            note.notebook.gitBranch || \"master\",\n                          )}&filePath=${encodeURIComponent(note.filePath)}`\n                        : `${window.location.origin}${env.approot}/?notebookID=${\n                            note.notebook._id\n                          }&filePath=${encodeURIComponent(note.filePath)}`,\n                    );\n                  }}\n                >\n                  <IconButton>\n                    <ContentCopy></ContentCopy>\n                  </IconButton>\n                </Tooltip>\n                <TextField\n                  onChange={(event) => event.preventDefault()}\n                  value={\n                    note.notebook.gitURL\n                      ? `/?repo=${encodeURIComponent(\n                          note.notebook.gitURL,\n                        )}&branch=${encodeURIComponent(\n                          note.notebook.gitBranch || \"master\",\n                        )}&filePath=${encodeURIComponent(note.filePath)}`\n                      : `/?notebookID=${\n                          note.notebook._id\n                        }&filePath=${encodeURIComponent(note.filePath)}`\n                  }\n                  inputRef={(input: HTMLInputElement) => {\n                    if (input) {\n                      input.focus();\n                      if (input.setSelectionRange) {\n                        input.setSelectionRange(0, input.value.length);\n                      }\n                    }\n                  }}\n                ></TextField>\n              </Box>\n            </Box>\n          </Popover>\n        </Box>\n      </Box>\n      <Box\n        className={clsx(\n          classes.editorWrapper,\n          fullScreenMode ? classes.fullScreen : null,\n          crossnoteContainer.editorMode === EditorMode.SplitView\n            ? classes.splitView\n            : null,\n        )}\n      >\n        <textarea\n          className={clsx(classes.editor, \"editor-textarea\")}\n          placeholder={t(\"editor/placeholder\")}\n          ref={(element: HTMLTextAreaElement) => {\n            setTextAreaElement(element);\n          }}\n        ></textarea>\n        {(crossnoteContainer.editorMode === EditorMode.Preview ||\n          crossnoteContainer.editorMode === EditorMode.SplitView) &&\n        editor ? (\n          <div\n            className={clsx(\n              classes.preview,\n              \"preview\",\n              previewIsPresentation ? classes.presentation : null,\n            )}\n            ref={(element: HTMLElement) => {\n              setPreviewElement(element);\n            }}\n          ></div>\n        ) : null}\n        {fullScreenMode && (\n          <IconButton\n            style={{\n              position: \"fixed\",\n              right: \"0\",\n              top: \"0\",\n              zIndex: 2001,\n            }}\n            onClick={() => setFullScreenMode(false)}\n          >\n            <FullscreenExit></FullscreenExit>\n          </IconButton>\n        )}\n      </Box>\n      <Box className={clsx(classes.bottomPanel, \"editor-bottom-panel\")}>\n        <Box className={clsx(classes.row)}>\n          <Breadcrumbs aria-label={\"File path\"} maxItems={4}>\n            {note.filePath.split(\"/\").map((path, offset, arr) => {\n              return (\n                <Typography\n                  variant={\"caption\"}\n                  style={{ cursor: \"pointer\" }}\n                  color={\"textPrimary\"}\n                  key={`${offset}-${path}`}\n                  onClick={() => {\n                    if (offset === arr.length - 1) {\n                      setFilePathDialogOpen(true);\n                    } else {\n                      crossnoteContainer.setSelectedSection({\n                        type: SelectedSectionType.Directory,\n                        path: arr.slice(0, offset + 1).join(\"/\"),\n                      });\n                    }\n                  }}\n                >\n                  {path}\n                </Typography>\n              );\n            })}\n          </Breadcrumbs>\n          <Typography\n            variant={\"caption\"}\n            style={{ marginLeft: \"4px\", marginTop: \"3px\" }}\n            color={\"textPrimary\"}\n          >\n            {\"- \" + t(`git/status/${gitStatus}`)}\n          </Typography>\n        </Box>\n        <Box className={clsx(classes.cursorPositionInfo)}>\n          <Typography variant={\"caption\"} color={\"textPrimary\"}>\n            {`${t(\"editor/ln\")} ${cursorPosition.line + 1}, ${t(\n              \"editor/col\",\n            )} ${cursorPosition.ch}`}\n          </Typography>\n        </Box>\n      </Box>\n      <DeleteNoteDialog\n        open={deleteNoteDialogOpen}\n        onClose={() => setDeleteNoteDialogOpen(false)}\n        note={note}\n      ></DeleteNoteDialog>\n      <ChangeFilePathDialog\n        note={note}\n        open={filePathDialogOpen}\n        onClose={closeFilePathDialog}\n      ></ChangeFilePathDialog>\n      <Dialog open={toggleEncryptionDialogOpen} onClose={closeEncryptionDialog}>\n        <DialogTitle>\n          {note.config.encryption\n            ? t(\"general/disable-the-encryption-on-this-note\")\n            : t(\"general/encrypt-this-note-with-password\")}\n        </DialogTitle>\n        <DialogContent>\n          <TextField\n            value={toggleEncryptionPassword}\n            autoFocus={true}\n            onChange={(event) =>\n              setToggleEncryptionPassword(event.target.value)\n            }\n            onKeyUp={(event) => {\n              if (event.which === 13) {\n                toggleEncryption();\n              }\n            }}\n            placeholder={t(\"general/Password\")}\n            type={\"password\"}\n          ></TextField>\n        </DialogContent>\n        <DialogActions>\n          <Button\n            variant={\"contained\"}\n            color={\"primary\"}\n            onClick={toggleEncryption}\n          >\n            {note.config.encryption ? <Lock></Lock> : <LockOpen></LockOpen>}\n            {note.config.encryption\n              ? t(\"general/disable-encryption\")\n              : t(\"general/encrypt\")}\n          </Button>\n          <Button onClick={closeEncryptionDialog}>{t(\"general/cancel\")}</Button>\n        </DialogActions>\n      </Dialog>\n      <Dialog open={decryptionDialogOpen} onClose={closeDecryptionDialog}>\n        <DialogTitle>{t(\"general/decrypt-this-note\")}</DialogTitle>\n        <DialogContent>\n          <TextField\n            value={decryptionPassword}\n            autoFocus={true}\n            onChange={(event) => setDecryptionPassword(event.target.value)}\n            placeholder={t(\"general/Password\")}\n            type={\"password\"}\n            onKeyUp={(event) => {\n              if (event.which === 13) {\n                decryptNote();\n              }\n            }}\n          ></TextField>\n        </DialogContent>\n        <DialogActions>\n          <Button variant={\"contained\"} color={\"primary\"} onClick={decryptNote}>\n            {t(\"general/decrypt\")}\n          </Button>\n          <Button onClick={closeDecryptionDialog}>{t(\"general/cancel\")}</Button>\n        </DialogActions>\n      </Dialog>\n      <PushNotebookDialog\n        open={pushDialogOpen}\n        onClose={() => setPushDialogOpen(false)}\n        notebook={note.notebook}\n      ></PushNotebookDialog>\n      <EditImageDialog\n        open={editImageDialogOpen}\n        onClose={() => setEditImageDialogOpen(false)}\n        editor={editor}\n        imageElement={editImageElement}\n        marker={editImageTextMarker}\n        note={note}\n      ></EditImageDialog>\n\n      <Card\n        id=\"math-preview\"\n        className={clsx(classes.floatWin, \"float-win\", \"float-win-hidden\")}\n      >\n        <Box className={clsx(classes.floatWinTitle, \"float-win-title\")}>\n          <IconButton\n            className={clsx(classes.floatWinClose, \"float-win-close\")}\n          >\n            <Close></Close>\n          </IconButton>\n          <Typography>{t(\"general/math-preview\")}</Typography>\n        </Box>\n        <Box\n          className={clsx(classes.floatWinContent, \"float-win-content\")}\n          id=\"math-preview-content\"\n        ></Box>\n      </Card>\n    </Box>\n  );\n}\n","import { FloatWin } from \"./float-win\";\n\nexport function initMathPreview(cm: CodeMirror.Editor) {\n  let mathRenderer: any = null;\n  const win = new FloatWin(\"math-preview\");\n  var supressed = false;\n\n  win.closeBtn.addEventListener(\n    \"click\",\n    function () {\n      supressed = true; // for current TeX block\n    },\n    false,\n  );\n\n  function updatePreview(expr: string) {\n    if (supressed) return;\n\n    if (!mathRenderer) {\n      // initialize renderer and preview window\n      mathRenderer = cm.hmd.FoldMath.createRenderer(\n        document.getElementById(\"math-preview-content\"),\n        \"display\",\n      );\n      mathRenderer.onChanged = function () {\n        // finished rendering. show the window\n        if (!win.visible) {\n          var cursorPos = cm.charCoords(cm.getCursor(), \"window\");\n          win.moveTo(cursorPos.left, cursorPos.bottom);\n        }\n        win.show();\n      };\n    }\n\n    // console.log(\"[MathPreview] \" + expr);\n\n    if (!mathRenderer.isReady()) return;\n    mathRenderer.startRender(expr);\n  }\n\n  function hidePreview() {\n    // console.log(\"[MathPreview] (exit)\");\n\n    win.hide();\n    supressed = false;\n  }\n\n  cm.setOption(\"hmdFoldMath\", {\n    onPreview: updatePreview,\n    onPreviewEnd: hidePreview,\n  });\n}\n","import React, { useState, useCallback, useEffect } from \"react\";\nimport {\n  Dialog,\n  DialogTitle,\n  DialogContent,\n  TextField,\n  Box,\n  Typography,\n  DialogActions,\n  Button,\n  Link,\n  FormControlLabel,\n  Checkbox,\n  ExpansionPanel,\n  ExpansionPanelDetails,\n  ExpansionPanelSummary,\n} from \"@material-ui/core\";\nimport { ChevronDown } from \"mdi-material-ui\";\nimport { CrossnoteContainer } from \"../containers/crossnote\";\nimport Noty from \"noty\";\nimport { useTranslation } from \"react-i18next\";\n\ninterface Props {\n  open: boolean;\n  onClose: () => void;\n  canCancel: boolean;\n\n  notebookName?: string;\n  gitURL?: string;\n  gitBranch?: string;\n}\n\nexport default function AddNotebookDialog(props: Props) {\n  const crossnoteContainer = CrossnoteContainer.useContainer();\n  const [notebookName, setNotebookName] = useState<string>(\"\");\n  const [expanded, setExpanded] = useState<boolean>(false);\n  const [gitURL, setGitURL] = useState<string>(props.gitURL || \"\");\n  const [gitBranch, setGitBranch] = useState<string>(props.gitBranch || \"\");\n  const [gitUsername, setGitUsername] = useState<string>(\"\");\n  const [gitPassword, setGitPassword] = useState<string>(\"\");\n  const [gitCorsProxy, setGitCorsProxy] = useState<string>(\n    \"https://crossnote.app/cors/\",\n  );\n  const [rememberCredentialsChecked, setRememberCredentialsChecked] = useState<\n    boolean\n  >(false);\n  const { t } = useTranslation();\n\n  const close = useCallback(() => {\n    setNotebookName(\"\");\n    setGitURL(\"\");\n    setGitBranch(\"\");\n    setGitUsername(\"\");\n    setGitPassword(\"\");\n    setExpanded(false);\n    props.onClose();\n  }, [props]);\n\n  const addNotebook = useCallback(async () => {\n    try {\n      if (gitURL.trim().length) {\n        new Noty({\n          type: \"info\",\n          text: t(\"info/downloading-notebook\"),\n          layout: \"topRight\",\n          theme: \"relax\",\n          timeout: 2000,\n        }).show();\n      }\n      close();\n      await crossnoteContainer.addNotebook(\n        notebookName,\n        gitURL.trim(),\n        gitBranch.trim() || \"master\",\n        gitUsername,\n        gitPassword,\n        rememberCredentialsChecked,\n        gitCorsProxy,\n      );\n    } catch (error) {\n      new Noty({\n        type: \"error\",\n        text: error.message,\n        layout: \"topRight\",\n        theme: \"relax\",\n        timeout: 2000,\n      }).show();\n      close();\n    }\n  }, [\n    props,\n    notebookName,\n    gitURL,\n    gitBranch,\n    gitUsername,\n    gitPassword,\n    rememberCredentialsChecked,\n    gitCorsProxy,\n  ]);\n\n  useEffect(() => {\n    const i = props.gitURL.lastIndexOf(\"/\");\n    const name = props.gitURL.slice(i + 1).replace(/\\.git/, \"\");\n\n    setNotebookName(props.notebookName || name);\n    setGitURL(props.gitURL);\n    setGitBranch(props.gitBranch);\n    setExpanded(true);\n  }, [props.gitURL, props.gitBranch, props.notebookName]);\n\n  return (\n    <Dialog\n      open={props.open}\n      onClose={() => {\n        if (!crossnoteContainer.isAddingNotebook) {\n          props.onClose();\n        }\n      }}\n    >\n      <DialogTitle>{t(\"general/add-a-notebook\")}</DialogTitle>\n      <DialogContent>\n        <Typography variant={\"caption\"}>\n          {\"* \" + t(\"add-notebook-dialog/disclaimer\")}\n        </Typography>\n        <TextField\n          label={t(\"general/notebook-name\")}\n          value={notebookName}\n          fullWidth={true}\n          onChange={(event) => {\n            setNotebookName(event.target.value);\n          }}\n          style={{ marginBottom: \"16px\" }}\n          autoComplete={\"off\"}\n          autoCorrect={\"off\"}\n        ></TextField>\n        <ExpansionPanel\n          elevation={2}\n          expanded={expanded}\n          onChange={() => setExpanded(!expanded)}\n        >\n          <ExpansionPanelSummary expandIcon={<ChevronDown></ChevronDown>}>\n            <Typography>{`${t(\"general/git-repository\")} (${t(\n              \"general/optional\",\n            )})`}</Typography>\n          </ExpansionPanelSummary>\n          <ExpansionPanelDetails>\n            <Box>\n              <TextField\n                label={t(\"general/url\")}\n                placeholder={\"https://github.com/0xGG/crossnote.git\"}\n                fullWidth={true}\n                value={gitURL}\n                onChange={(event) => setGitURL(event.target.value)}\n              ></TextField>\n              <TextField\n                label={t(\"general/branch\")}\n                placeholder={\"master\"}\n                fullWidth={true}\n                value={gitBranch}\n                onChange={(event) => setGitBranch(event.target.value)}\n              ></TextField>\n              <TextField\n                label={`${t(\"general/Username\")} (${t(\"general/optional\")})`}\n                placeholder={`${t(\"general/Username\")} (${t(\n                  \"general/optional\",\n                )})`}\n                fullWidth={true}\n                value={gitUsername}\n                onChange={(event) => setGitUsername(event.target.value)}\n              ></TextField>\n              <TextField\n                label={`${t(\"general/Password\")} (${t(\"general/optional\")})`}\n                placeholder={`${t(\"general/Password\")} (${t(\n                  \"general/optional\",\n                )})`}\n                type={\"password\"}\n                fullWidth={true}\n                value={gitPassword}\n                onChange={(event) => setGitPassword(event.target.value)}\n              ></TextField>\n              <FormControlLabel\n                control={\n                  <Checkbox\n                    checked={rememberCredentialsChecked}\n                    onChange={() =>\n                      setRememberCredentialsChecked(!rememberCredentialsChecked)\n                    }\n                    value={rememberCredentialsChecked}\n                  />\n                }\n                label={\n                  <Typography>\n                    {t(\"general/remember-username-and-password\") +\n                      \" \" +\n                      (rememberCredentialsChecked\n                        ? `(${t(\"general/stored-locally\")})`\n                        : \"\")}\n                  </Typography>\n                }\n              />\n              <TextField\n                label={t(\"general/cors-proxy\")}\n                placeholder={\"https://crossnote.app/cors/\"}\n                fullWidth={true}\n                value={gitCorsProxy}\n                onChange={(event) => setGitCorsProxy(event.target.value)}\n              ></TextField>\n              <Link\n                href={\n                  \"https://github.com/isomorphic-git/isomorphic-git#cors-support\"\n                }\n                target={\"_blank\"}\n              >\n                {t(\"general/why-cors-proxy\")}\n              </Link>\n            </Box>\n          </ExpansionPanelDetails>\n        </ExpansionPanel>\n      </DialogContent>\n      <DialogActions>\n        <Button\n          variant={\"contained\"}\n          color={\"primary\"}\n          onClick={addNotebook}\n          disabled={crossnoteContainer.isAddingNotebook}\n        >\n          {crossnoteContainer.isAddingNotebook\n            ? `${t(\"general/adding\")}...`\n            : t(\"general/add\")}\n        </Button>\n        {props.canCancel && (\n          <Button onClick={props.onClose}>{t(\"general/cancel\")}</Button>\n        )}\n      </DialogActions>\n    </Dialog>\n  );\n}\n","import { TreeView, TreeItem } from \"@material-ui/lab\";\nimport {\n  createStyles,\n  makeStyles,\n  Theme,\n  darken,\n  fade,\n} from \"@material-ui/core/styles\";\nimport clsx from \"clsx\";\nimport React, { useState, useCallback, useEffect } from \"react\";\nimport { IconButton, Box, Typography } from \"@material-ui/core\";\nimport { ChevronRight, ChevronDown } from \"mdi-material-ui\";\nimport {\n  CrossnoteContainer,\n  SelectedSectionType,\n  HomeSection,\n} from \"../containers/crossnote\";\nimport { useTranslation } from \"react-i18next\";\nimport { Directory, Notebook, TagNode } from \"../lib/crossnote\";\n\nconst useStyles = makeStyles((theme: Theme) =>\n  createStyles({\n    treeItemRoot: {\n      \"paddingLeft\": \"4px\",\n      // color: theme.palette.text.secondary,\n      \"&:focus > $treeItemContent\": {\n        color: theme.palette.text.primary,\n        backgroundColor: darken(theme.palette.background.paper, 0.05),\n      },\n      \"&:focus > $treeItemLabelIcon\": {\n        color: theme.palette.text.primary,\n      },\n    },\n    treeItemContent: {\n      \"cursor\": \"default\",\n      \"color\": theme.palette.text.primary,\n      // paddingLeft: theme.spacing(1),\n      // paddingRight: theme.spacing(1),\n      \"userSelect\": \"none\",\n      \"fontWeight\": theme.typography.fontWeightMedium,\n      \"$treeItemExpanded > &\": {\n        fontWeight: theme.typography.fontWeightRegular,\n      },\n    },\n    treeItemGroup: {\n      \"marginLeft\": 0,\n      \"& $treeItemContent\": {\n        // paddingLeft: theme.spacing(2)\n      },\n    },\n    treeItemExpanded: {},\n    treeItemLabel: {\n      fontWeight: \"inherit\",\n      color: \"inherit\",\n      backgroundColor: \"transparent !important\",\n    },\n    treeItemLabelRoot: {\n      display: \"flex\",\n      alignItems: \"center\",\n      padding: theme.spacing(1, 0),\n    },\n    treeItemLabelIcon: {},\n    treeItemLabelText: {\n      paddingLeft: \"12px\",\n      flexGrow: 1,\n    },\n  }),\n);\n\ninterface Props {\n  notebook: Notebook;\n}\nexport default function NotebookTreeView(props: Props) {\n  const classes = useStyles();\n  const [expanded, setExpanded] = useState<string[]>([]);\n  const crossnoteContainer = CrossnoteContainer.useContainer();\n  const { t } = useTranslation();\n\n  useEffect(() => {\n    if (crossnoteContainer.homeSection !== HomeSection.Notebooks) {\n      setExpanded([]);\n    }\n  }, [crossnoteContainer.homeSection]);\n\n  const handleChange = useCallback(\n    (event: React.ChangeEvent<{}>, nodes: string[]) => {\n      event.stopPropagation();\n      const element = event.target as HTMLElement;\n      if (\n        element &&\n        element.tagName &&\n        element.tagName.toUpperCase().match(/^(SVG|PATH|BUTTON)$/)\n      ) {\n        crossnoteContainer.setSelectedNotebook(props.notebook);\n        setExpanded(nodes);\n      }\n    },\n    [props.notebook],\n  );\n\n  const constructDirectoryTreeItems: (directory: Directory) => any = (\n    directory: Directory,\n  ) => {\n    if (directory.name === \".\") {\n      if (directory.children.length === 0) {\n        return null;\n      }\n      return (\n        <>{directory.children.map((dir) => constructDirectoryTreeItems(dir))}</>\n      );\n    } else {\n      return (\n        <TreeItem\n          nodeId={directory.name}\n          classes={{\n            root: classes.treeItemRoot,\n            content: classes.treeItemContent,\n            expanded: classes.treeItemExpanded,\n            group: classes.treeItemGroup,\n            label: classes.treeItemLabel,\n          }}\n          endIcon={<div style={{ width: 24 }}></div>}\n          key={directory.name}\n          label={\n            <Box\n              onClick={() => {\n                crossnoteContainer.setSelectedSection({\n                  type: SelectedSectionType.Directory,\n                  path: directory.path,\n                });\n              }}\n              className={clsx(classes.treeItemLabelRoot)}\n            >\n              <span role=\"img\" aria-label=\"folder\">\n                {\"📁\"}\n              </span>\n              <Typography\n                color={\"inherit\"}\n                variant={\"body1\"}\n                className={clsx(classes.treeItemLabelText)}\n              >\n                {directory.name}\n              </Typography>\n            </Box>\n          }\n        >\n          {directory.children.map((dir) => constructDirectoryTreeItems(dir))}\n        </TreeItem>\n      );\n    }\n  };\n\n  const constructTagNodeTreeItems: (tagNode: TagNode) => any = (\n    tagNode: TagNode,\n  ) => {\n    if (tagNode.name === \".\") {\n      if (tagNode.children.length === 0) {\n        return null;\n      }\n      return (\n        <>{tagNode.children.map((node) => constructTagNodeTreeItems(node))}</>\n      );\n    } else {\n      return (\n        <TreeItem\n          nodeId={tagNode.path}\n          classes={{\n            root: classes.treeItemRoot,\n            content: classes.treeItemContent,\n            expanded: classes.treeItemExpanded,\n            group: classes.treeItemGroup,\n            label: classes.treeItemLabel,\n          }}\n          endIcon={<div style={{ width: 24 }}></div>}\n          key={tagNode.path}\n          label={\n            <Box\n              onClick={() => {\n                crossnoteContainer.setSelectedSection({\n                  type: SelectedSectionType.Tag,\n                  path: tagNode.path,\n                });\n              }}\n              className={clsx(classes.treeItemLabelRoot)}\n            >\n              <span role=\"img\" aria-label=\"folder\">\n                {\"🏷️\"}\n              </span>\n              <Typography\n                color={\"inherit\"}\n                variant={\"body1\"}\n                className={clsx(classes.treeItemLabelText)}\n              >\n                {tagNode.name}\n              </Typography>\n            </Box>\n          }\n        >\n          {tagNode.children.map((dir) => constructTagNodeTreeItems(dir))}\n        </TreeItem>\n      );\n    }\n  };\n\n  useEffect(() => {\n    if (crossnoteContainer.selectedNotebook !== props.notebook) {\n      setExpanded([]);\n    }\n  }, [crossnoteContainer.selectedNotebook, props.notebook]);\n\n  return (\n    <TreeView\n      defaultExpandIcon={\n        <IconButton\n          disableFocusRipple={true}\n          disableRipple={true}\n          size={\"medium\"}\n        >\n          <ChevronRight></ChevronRight>\n        </IconButton>\n      }\n      defaultCollapseIcon={\n        <IconButton\n          disableFocusRipple={true}\n          disableRipple={true}\n          size={\"medium\"}\n        >\n          <ChevronDown></ChevronDown>\n        </IconButton>\n      }\n      defaultEndIcon={<div style={{ width: 24 }} />}\n      expanded={expanded}\n      onNodeToggle={handleChange}\n      style={{ width: \"100%\" }}\n    >\n      <TreeItem\n        nodeId={\"notes\"}\n        classes={{\n          root: classes.treeItemRoot,\n          content: classes.treeItemContent,\n          expanded: classes.treeItemExpanded,\n          group: classes.treeItemGroup,\n          label: classes.treeItemLabel,\n        }}\n        label={\n          <Box\n            onClick={() => {\n              crossnoteContainer.setSelectedNotebook(props.notebook);\n              crossnoteContainer.setSelectedSection({\n                type: SelectedSectionType.Notes,\n              });\n            }}\n            className={clsx(classes.treeItemLabelRoot)}\n          >\n            <Typography\n              color={\"inherit\"}\n              variant={\"body1\"}\n              className={clsx(classes.treeItemLabelText)}\n            >\n              {props.notebook.name +\n                (props.notebook.localSha === props.notebook.remoteSha\n                  ? \"\"\n                  : \" 🔔\")}\n            </Typography>\n          </Box>\n        }\n      >\n        <TreeItem\n          nodeId={\"today-notes\"}\n          classes={{\n            root: classes.treeItemRoot,\n            content: classes.treeItemContent,\n            expanded: classes.treeItemExpanded,\n            group: classes.treeItemGroup,\n            label: classes.treeItemLabel,\n          }}\n          label={\n            <Box\n              onClick={() => {\n                crossnoteContainer.setSelectedSection({\n                  type: SelectedSectionType.Today,\n                });\n              }}\n              className={clsx(classes.treeItemLabelRoot)}\n            >\n              <span role=\"img\" aria-label=\"today-notes\">\n                {\"📅\"}\n              </span>\n              <Typography className={clsx(classes.treeItemLabelText)}>\n                {t(\"general/today\")}\n              </Typography>\n            </Box>\n          }\n        ></TreeItem>\n        <TreeItem\n          nodeId={\"todo-notes\"}\n          classes={{\n            root: classes.treeItemRoot,\n            content: classes.treeItemContent,\n            expanded: classes.treeItemExpanded,\n            group: classes.treeItemGroup,\n            label: classes.treeItemLabel,\n          }}\n          label={\n            <Box\n              onClick={() => {\n                crossnoteContainer.setSelectedSection({\n                  type: SelectedSectionType.Todo,\n                });\n              }}\n              className={clsx(classes.treeItemLabelRoot)}\n            >\n              <span role=\"img\" aria-label=\"todo-notes\">\n                {\"☑️\"}\n              </span>\n              <Typography className={clsx(classes.treeItemLabelText)}>\n                {t(\"general/todo\")}\n              </Typography>\n            </Box>\n          }\n        ></TreeItem>\n        <TreeItem\n          nodeId={\"directories\"}\n          classes={{\n            root: classes.treeItemRoot,\n            content: classes.treeItemContent,\n            expanded: classes.treeItemExpanded,\n            group: classes.treeItemGroup,\n            label: classes.treeItemLabel,\n          }}\n          label={\n            <Box\n              onClick={() => {\n                crossnoteContainer.setSelectedSection({\n                  type: SelectedSectionType.Notes,\n                });\n              }}\n              className={clsx(classes.treeItemLabelRoot)}\n            >\n              <span role=\"img\" aria-label=\"directories\">\n                {\"📁\"}\n              </span>\n              <Typography className={clsx(classes.treeItemLabelText)}>\n                {t(\"general/notes\")}\n              </Typography>\n            </Box>\n          }\n        >\n          {constructDirectoryTreeItems(crossnoteContainer.notebookDirectories)}\n        </TreeItem>\n        {crossnoteContainer.hasSummaryMD ? (\n          <TreeItem\n            nodeId={\"wiki\"}\n            classes={{\n              root: classes.treeItemRoot,\n              content: classes.treeItemContent,\n              expanded: classes.treeItemExpanded,\n              group: classes.treeItemGroup,\n              label: classes.treeItemLabel,\n            }}\n            label={\n              <Box\n                onClick={() => {\n                  crossnoteContainer.setSelectedSection({\n                    type: SelectedSectionType.Wiki,\n                  });\n                }}\n                className={clsx(classes.treeItemLabelRoot)}\n              >\n                <span role=\"img\" aria-label=\"wiki\">\n                  {\"📖\"}\n                </span>\n                <Typography className={clsx(classes.treeItemLabelText)}>\n                  {t(\"general/wiki\")}\n                </Typography>\n              </Box>\n            }\n          ></TreeItem>\n        ) : (\n          <TreeItem nodeId={\"wiki\"}></TreeItem>\n        )}\n        <TreeItem\n          nodeId={\"tagged-notes\"}\n          classes={{\n            root: classes.treeItemRoot,\n            content: classes.treeItemContent,\n            expanded: classes.treeItemExpanded,\n            group: classes.treeItemGroup,\n            label: classes.treeItemLabel,\n          }}\n          label={\n            <Box\n              onClick={() => {\n                crossnoteContainer.setSelectedSection({\n                  type: SelectedSectionType.Tagged,\n                });\n              }}\n              className={clsx(classes.treeItemLabelRoot)}\n            >\n              <span role=\"img\" aria-label=\"tagged-notes\">\n                {\"🏷️\"}\n              </span>\n              <Typography className={clsx(classes.treeItemLabelText)}>\n                {t(\"general/tagged\")}\n              </Typography>\n            </Box>\n          }\n        >\n          {constructTagNodeTreeItems(crossnoteContainer.notebookTagNode)}\n        </TreeItem>\n        <TreeItem\n          nodeId={\"untagged-notes\"}\n          classes={{\n            root: classes.treeItemRoot,\n            content: classes.treeItemContent,\n            expanded: classes.treeItemExpanded,\n            group: classes.treeItemGroup,\n            label: classes.treeItemLabel,\n          }}\n          label={\n            <Box\n              onClick={() => {\n                crossnoteContainer.setSelectedSection({\n                  type: SelectedSectionType.Untagged,\n                });\n              }}\n              className={clsx(classes.treeItemLabelRoot)}\n            >\n              <span role=\"img\" aria-label=\"untagged-notes\">\n                {\"🈚\"}\n              </span>\n              <Typography className={clsx(classes.treeItemLabelText)}>\n                {t(\"general/untagged\")}\n              </Typography>\n            </Box>\n          }\n        ></TreeItem>\n        <TreeItem\n          nodeId={\"encrypted-notes\"}\n          classes={{\n            root: classes.treeItemRoot,\n            content: classes.treeItemContent,\n            expanded: classes.treeItemExpanded,\n            group: classes.treeItemGroup,\n            label: classes.treeItemLabel,\n          }}\n          label={\n            <Box\n              onClick={() => {\n                crossnoteContainer.setSelectedSection({\n                  type: SelectedSectionType.Encrypted,\n                });\n              }}\n              className={clsx(classes.treeItemLabelRoot)}\n            >\n              <span role=\"img\" aria-label=\"encrypted-notes\">\n                {\"🔐\"}\n              </span>\n              <Typography className={clsx(classes.treeItemLabelText)}>\n                {t(\"general/encrypted\")}\n              </Typography>\n            </Box>\n          }\n        ></TreeItem>\n        <TreeItem\n          nodeId={\"attachments\"}\n          classes={{\n            root: classes.treeItemRoot,\n            content: classes.treeItemContent,\n            expanded: classes.treeItemExpanded,\n            group: classes.treeItemGroup,\n            label: classes.treeItemLabel,\n          }}\n          label={\n            <Box\n              onClick={() => {\n                crossnoteContainer.setSelectedSection({\n                  type: SelectedSectionType.Attachments,\n                });\n              }}\n              className={clsx(classes.treeItemLabelRoot)}\n            >\n              <span role=\"img\" aria-label=\"attachments\">\n                {\"📎\"}\n              </span>\n              <Typography className={clsx(classes.treeItemLabelText)}>\n                {t(\"general/attachments\")}\n              </Typography>\n            </Box>\n          }\n        ></TreeItem>\n        <TreeItem\n          nodeId={\"conflicted-notes\"}\n          classes={{\n            root: classes.treeItemRoot,\n            content: classes.treeItemContent,\n            expanded: classes.treeItemExpanded,\n            group: classes.treeItemGroup,\n            label: classes.treeItemLabel,\n          }}\n          label={\n            <Box\n              onClick={() => {\n                crossnoteContainer.setSelectedSection({\n                  type: SelectedSectionType.Conflicted,\n                });\n              }}\n              className={clsx(classes.treeItemLabelRoot)}\n            >\n              <span role=\"img\" aria-label=\"conflicted-notes\">\n                {\"⚠️\"}\n              </span>\n              <Typography className={clsx(classes.treeItemLabelText)}>\n                {t(\"general/conflicted\")}\n              </Typography>\n            </Box>\n          }\n        ></TreeItem>\n      </TreeItem>\n    </TreeView>\n  );\n}\n","import React, { useState, useEffect, useCallback } from \"react\";\nimport {\n  Dialog,\n  DialogTitle,\n  DialogContent,\n  TextField,\n  Box,\n  Typography,\n  DialogActions,\n  Button,\n  Link,\n  ExpansionPanel,\n  ExpansionPanelDetails,\n  ExpansionPanelSummary,\n  Input,\n  InputAdornment,\n} from \"@material-ui/core\";\nimport { ChevronDown } from \"mdi-material-ui\";\nimport { CrossnoteContainer } from \"../containers/crossnote\";\nimport { Notebook } from \"../lib/crossnote\";\nimport { useTranslation } from \"react-i18next\";\n\ninterface Props {\n  open: boolean;\n  onClose: () => void;\n  notebook: Notebook;\n}\n\nconst MaxClickDeleteCount = 3;\nexport default function ConfigureNotebookDialog(props: Props) {\n  const crossnoteContainer = CrossnoteContainer.useContainer();\n  const [notebookName, setNotebookName] = useState<string>(\"\");\n  const [expanded, setExpanded] = useState<boolean>(false);\n  const [gitURL, setGitURL] = useState<string>(\"\");\n  const [gitBranch, setGitBranch] = useState<string>(\"\");\n  const [gitUsername, setGitUsername] = useState<string>(\"\");\n  const [gitPassword, setGitPassword] = useState<string>(\"\");\n  const [gitCorsProxy, setGitCorsProxy] = useState<string>(\n    \"https://crossnote.app/cors/\",\n  );\n  const [autoFetchPeriod, setAutoFetchPeriod] = useState<number>(0);\n  const [clickDeleteCount, setClickDeleteCount] = useState<number>(\n    MaxClickDeleteCount,\n  );\n  const [clickHardResetCount, setClickHardResetCount] = useState<number>(\n    MaxClickDeleteCount,\n  );\n  const { t } = useTranslation();\n\n  useEffect(() => {\n    setClickDeleteCount(MaxClickDeleteCount);\n    setClickHardResetCount(MaxClickDeleteCount);\n  }, [props.open]);\n\n  useEffect(() => {\n    const notebook = props.notebook;\n    if (!notebook) {\n      return;\n    }\n    setNotebookName(notebook.name);\n    setGitURL(notebook.gitURL);\n    setGitBranch(notebook.gitBranch || \"master\");\n    setGitUsername(notebook.gitUsername);\n    setGitPassword(notebook.gitPassword);\n    setGitCorsProxy(notebook.gitCorsProxy);\n    setAutoFetchPeriod(notebook.autoFetchPeriod / 60000);\n  }, [props.notebook]);\n\n  const updateNotebook = useCallback(async () => {\n    const notebook = props.notebook;\n    if (!notebook) {\n      props.onClose();\n      return;\n    }\n    notebook.name = notebookName.trim();\n    notebook.gitURL = gitURL.trim();\n    notebook.gitBranch = gitBranch.trim();\n    notebook.gitUsername = gitUsername.trim();\n    notebook.gitPassword = gitPassword;\n    notebook.gitCorsProxy = gitCorsProxy.trim();\n    notebook.autoFetchPeriod = Math.max(autoFetchPeriod * 60000, 0);\n    try {\n      await crossnoteContainer.updateNotebook(notebook);\n    } catch (error) {}\n    props.onClose();\n  }, [\n    props,\n    props.notebook,\n    notebookName,\n    gitURL,\n    gitBranch,\n    gitUsername,\n    gitPassword,\n    gitCorsProxy,\n    autoFetchPeriod,\n  ]);\n\n  const deleteNotebook = useCallback(async () => {\n    const notebook = props.notebook;\n    try {\n      await crossnoteContainer.deleteNotebook(notebook);\n    } catch (error) {}\n    props.onClose();\n  }, [props.notebook]);\n\n  const hardResetNotebook = useCallback(async () => {\n    const notebook = props.notebook;\n    try {\n      await crossnoteContainer.hardResetNotebook(notebook);\n    } catch (error) {}\n    props.onClose();\n  }, [props.notebook]);\n\n  useEffect(() => {\n    setClickDeleteCount(MaxClickDeleteCount);\n  }, [props.notebook]);\n\n  return (\n    <Dialog\n      open={props.open}\n      onClose={!clickDeleteCount ? null : props.onClose}\n    >\n      <DialogTitle>{t(\"general/configure-the-notebook\")}</DialogTitle>\n      <DialogContent>\n        <TextField\n          label={t(\"general/notebook-name\")}\n          value={notebookName}\n          fullWidth={true}\n          onChange={(event) => {\n            setNotebookName(event.target.value);\n          }}\n          style={{ marginBottom: \"16px\" }}\n          autoComplete={\"off\"}\n          autoCorrect={\"off\"}\n        ></TextField>\n        <ExpansionPanel\n          elevation={2}\n          expanded={expanded}\n          onChange={() => setExpanded(!expanded)}\n        >\n          <ExpansionPanelSummary expandIcon={<ChevronDown></ChevronDown>}>\n            <Typography>{`${t(\"general/git-repository\")} (${t(\n              \"general/optional\",\n            )})`}</Typography>\n          </ExpansionPanelSummary>\n          <ExpansionPanelDetails>\n            <Box>\n              <TextField\n                label={t(\"general/url\")}\n                placeholder={\"https://abc/def.git\"}\n                disabled={true}\n                fullWidth={true}\n                value={gitURL}\n                onChange={(event) => setGitURL(event.target.value)}\n              ></TextField>\n              <TextField\n                label={t(\"general/branch\")}\n                placeholder={\"master\"}\n                disabled={true}\n                fullWidth={true}\n                value={gitBranch}\n                onChange={(event) => setGitBranch(event.target.value)}\n              ></TextField>\n              <TextField\n                label={`${t(\"general/Username\")} (${t(\"general/optional\")})`}\n                placeholder={`${t(\"general/Username\")} (${t(\n                  \"general/optional\",\n                )})`}\n                fullWidth={true}\n                value={gitUsername}\n                onChange={(event) => setGitUsername(event.target.value)}\n              ></TextField>\n              <TextField\n                label={`${t(\"general/Password\")} (${t(\"general/optional\")})`}\n                placeholder={`${t(\"general/Password\")} (${t(\n                  \"general/optional\",\n                )})`}\n                type={\"password\"}\n                fullWidth={true}\n                value={gitPassword}\n                onChange={(event) => setGitPassword(event.target.value)}\n              ></TextField>\n              <TextField\n                label={t(\"general/cors-proxy\")}\n                placeholder={\"https://crossnote.app/cors/\"}\n                fullWidth={true}\n                value={gitCorsProxy}\n                onChange={(event) => setGitCorsProxy(event.target.value)}\n              ></TextField>\n              <Link\n                href={\n                  \"https://github.com/isomorphic-git/isomorphic-git#cors-support\"\n                }\n                target={\"_blank\"}\n              >\n                {t(\"general/why-cors-proxy\")}\n              </Link>\n              {props.notebook && props.notebook.gitURL ? (\n                <Box style={{ marginTop: \"16px\" }}>\n                  <Typography>\n                    {t(\"general/check-notebook-updates-periodically\")}\n                  </Typography>\n                  <Input\n                    value={autoFetchPeriod}\n                    onChange={(event) => {\n                      try {\n                        const value = parseFloat(event.target.value || \"0\");\n                        if (!isNaN(value)) {\n                          setAutoFetchPeriod(value);\n                        }\n                      } catch (error) {}\n                    }}\n                    endAdornment={\n                      <InputAdornment position=\"end\">\n                        {t(\"general/minutes\")}\n                      </InputAdornment>\n                    }\n                  ></Input>\n                </Box>\n              ) : null}\n            </Box>\n          </ExpansionPanelDetails>\n        </ExpansionPanel>\n      </DialogContent>\n      <DialogActions>\n        {crossnoteContainer.notebooks.length > 1 && (\n          <Button\n            variant={\"contained\"}\n            color={\"secondary\"}\n            disabled={!clickDeleteCount}\n            onClick={() => {\n              if (clickDeleteCount === 1) {\n                deleteNotebook();\n                setClickDeleteCount(clickDeleteCount - 1);\n              } else {\n                setClickDeleteCount(clickDeleteCount - 1);\n              }\n            }}\n          >\n            {t(\"general/Delete\") +\n              (clickDeleteCount < MaxClickDeleteCount\n                ? ` ${clickDeleteCount}`\n                : \"\")}\n          </Button>\n        )}\n        {props.notebook && props.notebook.gitURL.length > 0 && (\n          <Button\n            variant={\"contained\"}\n            color={\"secondary\"}\n            disabled={!clickHardResetCount || !clickDeleteCount}\n            onClick={() => {\n              if (clickHardResetCount === 1) {\n                hardResetNotebook();\n                setClickHardResetCount(clickHardResetCount - 1);\n              } else {\n                setClickHardResetCount(clickHardResetCount - 1);\n              }\n            }}\n          >\n            {t(\"general/hard-reset\") +\n              (clickHardResetCount < MaxClickDeleteCount\n                ? ` ${clickHardResetCount}`\n                : \"\")}\n          </Button>\n        )}\n        <Button\n          variant={\"contained\"}\n          color={\"primary\"}\n          onClick={updateNotebook}\n          disabled={!clickDeleteCount}\n        >\n          {t(\"general/Save\")}\n        </Button>\n        <Button onClick={props.onClose} disabled={!clickDeleteCount}>\n          {t(\"general/cancel\")}\n        </Button>\n      </DialogActions>\n    </Dialog>\n  );\n}\n","import React, { useState, useEffect } from \"react\";\nimport { createStyles, makeStyles, Theme } from \"@material-ui/core/styles\";\nimport clsx from \"clsx\";\nimport { CrossnoteContainer } from \"../containers/crossnote\";\nimport { Box, Typography, ButtonBase, Tooltip } from \"@material-ui/core\";\nimport { Note } from \"../lib/crossnote\";\nimport {\n  getHeaderFromMarkdown,\n  generateSummaryFromMarkdown,\n  Summary,\n} from \"../utilities/note\";\nimport { formatDistanceStrict } from \"date-fns/esm\";\nimport { useTranslation } from \"react-i18next\";\nimport { Pin } from \"mdi-material-ui\";\nimport { formatRelative } from \"date-fns\";\nimport { basename } from \"path\";\nimport { SettingsContainer } from \"../containers/settings\";\nimport { languageCodeToDateFNSLocale } from \"../i18n/i18n\";\nimport { resolveNoteImageSrc } from \"../utilities/image\";\n\nconst useStyles = makeStyles((theme: Theme) =>\n  createStyles({\n    noteCard: {\n      width: \"100%\",\n      display: \"flex\",\n      flexDirection: \"row\",\n      alignItems: \"flex-start\",\n      padding: theme.spacing(2, 0.5, 0),\n      textAlign: \"left\",\n      cursor: \"default\",\n      backgroundColor: theme.palette.background.paper,\n    },\n    selected: {\n      borderLeft: `4px solid ${theme.palette.primary.main}`,\n    },\n    unselected: {\n      borderLeft: `4px solid rgba(0, 0, 0, 0)`,\n    },\n    leftPanel: {\n      width: \"48px\",\n      paddingLeft: theme.spacing(0.5),\n    },\n    duration: {\n      color: theme.palette.text.secondary,\n    },\n    rightPanel: {\n      width: \"calc(100% - 48px)\",\n      borderBottom: `1px solid ${theme.palette.divider}`,\n    },\n    header: {\n      marginBottom: theme.spacing(1),\n      wordBreak: \"break-all\",\n    },\n    summary: {\n      \"color\": theme.palette.text.secondary,\n      \"marginBottom\": theme.spacing(1),\n      \"paddingRight\": theme.spacing(2),\n      \"display\": \"-webkit-box\",\n      \"lineHeight\": \"1.3rem !important\",\n      \"textOverflow\": \"ellipsis !important\",\n      \"overflow\": \"hidden !important\",\n      \"maxWidth\": \"100%\",\n      \"maxHeight\": \"2.6rem\", // lineHeight x -website-line-clamp\n      \"-webkit-line-clamp\": 2,\n      \"-webkit-box-orient\": \"vertical\",\n      \"wordBreak\": \"break-all\",\n    },\n    filePath: {\n      wordBreak: \"break-all\",\n    },\n    images: {\n      display: \"flex\",\n      width: \"100%\",\n      overflow: \"hidden\",\n      position: \"relative\",\n      marginBottom: theme.spacing(1),\n    },\n    imagesWrapper: {\n      display: \"flex\",\n      alignItems: \"center\",\n      flexDirection: \"row\",\n    },\n    image: {\n      width: \"128px\",\n      height: \"80px\",\n      marginRight: theme.spacing(1),\n      position: \"relative\",\n      backgroundSize: \"cover\",\n      backgroundPosition: \"center\",\n      display: \"block\",\n      borderRadius: \"6px\",\n    },\n    pin: {\n      color: theme.palette.secondary.main,\n      marginTop: theme.spacing(1),\n    },\n  }),\n);\n\ninterface Props {\n  note: Note;\n}\n\nexport default function NoteCard(props: Props) {\n  const classes = useStyles(props);\n  const note = props.note;\n  const crossnoteContainer = CrossnoteContainer.useContainer();\n  const settingsContainer = SettingsContainer.useContainer();\n  const [header, setHeader] = useState<string>(\"\");\n  const [summary, setSummary] = useState<Summary>(null);\n  const [images, setImages] = useState<string[]>([]);\n  const [gitStatus, setGitStatus] = useState<string>(\"\");\n  const { t } = useTranslation();\n  const duration = formatDistanceStrict(note.config.modifiedAt, Date.now())\n    .replace(/\\sseconds?/, \"s\")\n    .replace(/\\sminutes?/, \"m\")\n    .replace(/\\shours?/, \"h\")\n    .replace(/\\sdays?/, \"d\")\n    .replace(/\\sweeks?/, \"w\")\n    .replace(/\\smonths?/, \"mo\")\n    .replace(/\\syears?/, \"y\");\n\n  useEffect(() => {\n    setHeader(\n      (note.config.encryption && note.config.encryption.title) ||\n        getHeaderFromMarkdown(note.markdown),\n    );\n    generateSummaryFromMarkdown(\n      note.config.encryption\n        ? `🔐 ${t(\"general/encrypted\")}`\n        : note.markdown.trim() || t(\"general/this-note-is-empty\"),\n    )\n      .then((summary) => {\n        setSummary(summary);\n\n        // render images\n        const imagePromises = Promise.all(\n          summary.images.map((image) => resolveNoteImageSrc(note, image)),\n        );\n        imagePromises\n          .then((imageSrcs) => {\n            imageSrcs = imageSrcs.filter((x) => x).slice(0, 3);\n            setImages(imageSrcs || []);\n          })\n          .catch((error) => {\n            setImages([]);\n          });\n      })\n      .catch((error) => {});\n  }, [\n    note.markdown,\n    note.config.encryption,\n    note,\n    crossnoteContainer.crossnote,\n    t,\n  ]);\n\n  useEffect(() => {\n    crossnoteContainer.crossnote\n      .getStatus(note.notebook, note.filePath)\n      .then((status) => {\n        setGitStatus(status);\n      });\n  }, [\n    note.markdown,\n    note.config.modifiedAt,\n    note,\n    crossnoteContainer.crossnote,\n  ]);\n\n  return (\n    <ButtonBase\n      className={clsx(\n        classes.noteCard,\n        crossnoteContainer.selectedNote &&\n          crossnoteContainer.selectedNote.filePath === note.filePath\n          ? classes.selected\n          : classes.unselected,\n      )}\n      onClick={() => {\n        crossnoteContainer.setSelectedNote(note);\n        crossnoteContainer.setDisplayMobileEditor(true);\n      }}\n    >\n      <Box className={clsx(classes.leftPanel)}>\n        <Tooltip\n          title={\n            <>\n              <p>\n                {t(\"general/created-at\") +\n                  \" \" +\n                  formatRelative(new Date(note.config.createdAt), new Date(), {\n                    locale: languageCodeToDateFNSLocale(\n                      settingsContainer.language,\n                    ),\n                  })}\n              </p>\n              <p>\n                {t(\"general/modified-at\") +\n                  \" \" +\n                  formatRelative(new Date(note.config.modifiedAt), new Date(), {\n                    locale: languageCodeToDateFNSLocale(\n                      settingsContainer.language,\n                    ),\n                  })}\n              </p>\n            </>\n          }\n          arrow\n        >\n          <Typography className={clsx(classes.duration)}>{duration}</Typography>\n        </Tooltip>\n\n        {note.config.pinned && <Pin className={clsx(classes.pin)}></Pin>}\n      </Box>\n      <Box className={clsx(classes.rightPanel)}>\n        {header && (\n          <Typography\n            style={{ fontWeight: \"bold\" }}\n            variant={\"body1\"}\n            className={clsx(classes.header)}\n          >\n            {header}\n          </Typography>\n        )}\n        {summary && summary.summary.trim().length > 0 && (\n          <Typography className={clsx(classes.summary)}>\n            {summary && summary.summary.slice(0, 200)}\n          </Typography>\n        )}\n        {images.length > 0 && (\n          <Box className={clsx(classes.images)}>\n            <Box className={clsx(classes.imagesWrapper)}>\n              {images.map((image, offset) => (\n                <div\n                  key={`${image}-${offset}`}\n                  className={clsx(classes.image)}\n                  style={{\n                    backgroundImage: `url(${image})`,\n                  }}\n                ></div>\n              ))}\n            </Box>\n          </Box>\n        )}\n        <Typography variant={\"caption\"} className={clsx(classes.filePath)}>\n          {basename(note.filePath).startsWith(\"unnamed_\")\n            ? t(`git/status/${gitStatus}`)\n            : note.filePath + \" - \" + t(`git/status/${gitStatus}`)}\n        </Typography>\n      </Box>\n    </ButtonBase>\n  );\n}\n","import React, { useState, useEffect, useCallback } from \"react\";\nimport LazyLoad from \"react-lazyload\";\nimport { createStyles, makeStyles, Theme } from \"@material-ui/core/styles\";\nimport clsx from \"clsx\";\nimport { CrossnoteContainer } from \"../containers/crossnote\";\nimport { Box, Typography, Button } from \"@material-ui/core\";\nimport NoteCard from \"./NoteCard\";\nimport { useTranslation } from \"react-i18next\";\nimport { Note } from \"../lib/crossnote\";\nimport useInterval from \"@use-it/interval\";\nimport { CloudDownloadOutline } from \"mdi-material-ui\";\nimport Noty from \"noty\";\nimport { Skeleton } from \"@material-ui/lab\";\n\nconst lazyLoadPlaceholderHeight = 92;\n\nconst useStyles = makeStyles((theme: Theme) =>\n  createStyles({\n    notesList: {\n      position: \"relative\",\n      flex: \"1\",\n      overflowY: \"auto\",\n      paddingBottom: theme.spacing(12),\n      marginTop: theme.spacing(0.5),\n    },\n    updatePanel: {\n      padding: theme.spacing(2),\n      textAlign: \"center\",\n      borderBottom: `1px solid ${theme.palette.divider}`,\n      backgroundColor: theme.palette.background.paper,\n    },\n  }),\n);\n\ninterface Props {\n  searchValue: string;\n}\n\nexport default function Notes(props: Props) {\n  const classes = useStyles(props);\n  const { t } = useTranslation();\n  const crossnoteContainer = CrossnoteContainer.useContainer();\n  const [notes, setNotes] = useState<Note[]>([]);\n  const [notesListElement, setNotesListElement] = useState<HTMLElement>(null);\n  const [forceUpdate, setForceUpdate] = useState<number>(Date.now());\n  const searchValue = props.searchValue;\n\n  const pullNotebook = useCallback(() => {\n    const notebook = crossnoteContainer.selectedNotebook;\n    if (!notebook) {\n      return;\n    }\n    crossnoteContainer\n      .pullNotebook({\n        notebook: notebook,\n        onAuthFailure: () => {\n          new Noty({\n            type: \"error\",\n            text: t(\"error/authentication-failed\"),\n            layout: \"topRight\",\n            theme: \"relax\",\n            timeout: 5000,\n          }).show();\n        },\n      })\n      .then(() => {\n        new Noty({\n          type: \"success\",\n          text: t(\"success/notebook-downloaded\"),\n          layout: \"topRight\",\n          theme: \"relax\",\n          timeout: 2000,\n        }).show();\n      })\n      .catch((error) => {\n        console.log(error);\n        new Noty({\n          type: \"error\",\n          text: t(\"error/failed-to-download-notebook\"),\n          layout: \"topRight\",\n          theme: \"relax\",\n          timeout: 2000,\n        }).show();\n      });\n  }, [crossnoteContainer.selectedNotebook, t]);\n\n  useEffect(() => {\n    const pinned: Note[] = [];\n    const unpinned: Note[] = [];\n    crossnoteContainer.notes.forEach((note) => {\n      if (searchValue.trim().length) {\n        const regexp = new RegExp(\n          \"(\" +\n            searchValue\n              .trim()\n              .split(/\\s+/g)\n              .map((s) => s.replace(/[.!@#$%^&*()_+\\-=[\\]]/g, (x) => `\\\\${x}`)) // escape special regexp characters\n              .join(\"|\") +\n            \")\",\n          \"i\",\n        );\n\n        if (note.markdown.match(regexp) || note.filePath.match(regexp)) {\n          if (note.config.pinned) {\n            pinned.push(note);\n          } else {\n            unpinned.push(note);\n          }\n        }\n      } else {\n        if (note.config.pinned) {\n          pinned.push(note);\n        } else {\n          unpinned.push(note);\n        }\n      }\n    });\n\n    setNotes([...pinned, ...unpinned]);\n  }, [crossnoteContainer.notes, searchValue]);\n\n  useEffect(() => {\n    if (notesListElement) {\n      const keyDownHandler = (event: KeyboardEvent) => {\n        const selectedNote = crossnoteContainer.selectedNote;\n        if (!selectedNote || !notes.length) {\n          return;\n        }\n        const currentIndex = notes.findIndex(\n          (n) => n.filePath === selectedNote.filePath,\n        );\n        if (currentIndex < 0) {\n          crossnoteContainer.setSelectedNote(notes[0]);\n        } else if (event.which === 40) {\n          // Up\n          if (currentIndex >= 0 && currentIndex < notes.length - 1) {\n            crossnoteContainer.setSelectedNote(notes[currentIndex + 1]);\n          }\n        } else if (event.which === 38) {\n          // Down\n          if (currentIndex > 0 && currentIndex < notes.length) {\n            crossnoteContainer.setSelectedNote(notes[currentIndex - 1]);\n          }\n        }\n      };\n      notesListElement.addEventListener(\"keydown\", keyDownHandler);\n      return () => {\n        notesListElement.removeEventListener(\"keydown\", keyDownHandler);\n      };\n    }\n  }, [notesListElement, notes, crossnoteContainer.selectedNote]);\n\n  useEffect(() => {\n    if (notesListElement) {\n      // Hack: fix note cards not displaying bug when searchValue is not empty\n      const hack = () => {\n        const initialHeight = notesListElement.style.height;\n        const initialFlex = notesListElement.style.flex;\n        notesListElement.style.flex = \"initial\";\n        notesListElement.style.height = \"10px\";\n        notesListElement.scrollTop += 1;\n        notesListElement.scrollTop -= 1;\n        notesListElement.style.height = initialHeight;\n        notesListElement.style.flex = initialFlex;\n      };\n      window.addEventListener(\"resize\", hack);\n      hack();\n      return () => {\n        window.removeEventListener(\"resize\", hack);\n      };\n    }\n  }, [notes, notesListElement]);\n\n  useInterval(() => {\n    if (crossnoteContainer.needsToRefreshNotes) {\n      crossnoteContainer.setNeedsToRefreshNotes(false);\n      setForceUpdate(Date.now());\n    }\n  }, 15000);\n\n  return (\n    <div\n      className={clsx(classes.notesList)}\n      ref={(element: HTMLElement) => {\n        setNotesListElement(element);\n      }}\n    >\n      {crossnoteContainer.selectedNotebook &&\n        crossnoteContainer.selectedNotebook.localSha !==\n          crossnoteContainer.selectedNotebook.remoteSha && (\n          <Box className={clsx(classes.updatePanel)}>\n            <Typography style={{ marginBottom: \"8px\" }}>\n              {\"🔔  \" + t(\"general/notebook-updates-found\")}\n            </Typography>\n            <Button\n              color={\"primary\"}\n              variant={\"outlined\"}\n              onClick={pullNotebook}\n              disabled={\n                crossnoteContainer.isPullingNotebook ||\n                crossnoteContainer.isPushingNotebook\n              }\n            >\n              <CloudDownloadOutline\n                style={{ marginRight: \"8px\" }}\n              ></CloudDownloadOutline>\n              {t(\"general/update-the-notebook\")}\n            </Button>\n          </Box>\n        )}\n      {(notes || []).map((note) => {\n        return (\n          <LazyLoad\n            key={\"lazy-load-note-card-\" + note.filePath}\n            placeholder={\n              <Box\n                style={{\n                  textAlign: \"center\",\n                  height: `${lazyLoadPlaceholderHeight}px`,\n                  paddingTop: \"16px\",\n                  paddingBottom: \"16px\",\n                  boxSizing: \"border-box\",\n                }}\n              >\n                <Skeleton />\n                <Skeleton animation={false} />\n                <Skeleton animation=\"wave\" />\n              </Box>\n            }\n            height={lazyLoadPlaceholderHeight}\n            overflow={true}\n            once={true}\n            scrollContainer={notesListElement}\n            resize={true}\n          >\n            <NoteCard key={\"note-card-\" + note.filePath} note={note}></NoteCard>\n          </LazyLoad>\n        );\n      })}\n      {crossnoteContainer.initialized &&\n        !crossnoteContainer.isLoadingNotebook &&\n        notes.length === 0 && (\n          <Typography\n            style={{\n              textAlign: \"center\",\n              marginTop: \"32px\",\n            }}\n            variant={\"body2\"}\n          >\n            {\"🧐 \" + t(\"general/no-notes-found\")}\n          </Typography>\n        )}\n    </div>\n  );\n}\n","import React, { useState, useEffect, useCallback } from \"react\";\nimport {\n  Dialog,\n  DialogTitle,\n  DialogContent,\n  TextField,\n  DialogActions,\n  Button,\n} from \"@material-ui/core\";\nimport { useTranslation } from \"react-i18next\";\nimport { CrossnoteContainer } from \"../containers/crossnote\";\n\ninterface Props {\n  open: boolean;\n  onClose: () => void;\n  directory: string;\n}\nexport function RenameDirectoryDialog(props: Props) {\n  const { t } = useTranslation();\n  const crossnoteContainer = CrossnoteContainer.useContainer();\n  const [directory, setDirectory] = useState<string>(\"\");\n\n  const renameDirectory = useCallback(() => {\n    crossnoteContainer\n      .renameDirectory(props.directory, directory)\n      .then(() => {\n        props.onClose();\n      })\n      .catch((error) => {\n        console.log(error);\n        props.onClose();\n      });\n  }, [props, directory]);\n\n  useEffect(() => {\n    setDirectory(props.directory);\n  }, [props.directory, props.open]);\n\n  return (\n    <Dialog open={props.open} onClose={props.onClose}>\n      <DialogTitle>{t(\"general/rename-directory\")}</DialogTitle>\n      <DialogContent>\n        <TextField\n          placeholder={t(\"general/Directory\")}\n          value={directory}\n          onChange={(event) => setDirectory(event.target.value)}\n          fullWidth={true}\n          onKeyUp={(event) => {\n            if (event.which === 13) {\n              renameDirectory();\n            }\n          }}\n          autoFocus={true}\n        ></TextField>\n      </DialogContent>\n      <DialogActions>\n        <Button\n          variant={\"contained\"}\n          color={\"primary\"}\n          onClick={renameDirectory}\n        >\n          {t(\"general/Update\")}\n        </Button>\n        <Button onClick={props.onClose}>{t(\"general/cancel\")}</Button>\n      </DialogActions>\n    </Dialog>\n  );\n}\n","import React, { useState, useEffect, useCallback } from \"react\";\nimport {\n  Dialog,\n  DialogTitle,\n  DialogContent,\n  TextField,\n  DialogActions,\n  Button,\n} from \"@material-ui/core\";\nimport { useTranslation } from \"react-i18next\";\nimport { CrossnoteContainer } from \"../containers/crossnote\";\n\ninterface Props {\n  open: boolean;\n  onClose: () => void;\n  tag: string;\n}\nexport function RenameTagDialog(props: Props) {\n  const { t } = useTranslation();\n  const crossnoteContainer = CrossnoteContainer.useContainer();\n  const [tag, setTag] = useState<string>(\"\");\n\n  const renameTag = useCallback(() => {\n    crossnoteContainer\n      .renameTag(props.tag, tag)\n      .then(() => {\n        props.onClose();\n      })\n      .catch(() => {\n        props.onClose();\n      });\n  }, [props, tag]);\n\n  useEffect(() => {\n    setTag(props.tag);\n  }, [props.tag, props.open]);\n\n  return (\n    <Dialog open={props.open} onClose={props.onClose}>\n      <DialogTitle>{t(\"general/rename-tag\")}</DialogTitle>\n      <DialogContent>\n        <TextField\n          placeholder={t(\"general/Tag\")}\n          value={tag}\n          onChange={(event) => setTag(event.target.value)}\n          fullWidth={true}\n          onKeyUp={(event) => {\n            if (event.which === 13) {\n              renameTag();\n            }\n          }}\n          autoFocus={true}\n        ></TextField>\n      </DialogContent>\n      <DialogActions>\n        <Button variant={\"contained\"} color={\"primary\"} onClick={renameTag}>\n          {t(\"general/Update\")}\n        </Button>\n        <Button onClick={props.onClose}>{t(\"general/cancel\")}</Button>\n      </DialogActions>\n    </Dialog>\n  );\n}\n","import React from \"react\";\nimport { useTranslation } from \"react-i18next\";\nimport { CrossnoteContainer } from \"../containers/crossnote\";\nimport {\n  Dialog,\n  DialogTitle,\n  DialogContent,\n  DialogContentText,\n  DialogActions,\n  Button,\n} from \"@material-ui/core\";\n\ninterface Props {\n  open: boolean;\n  onClose: () => void;\n  directory: string;\n}\n\nexport function DeleteDirectoryDialog(props: Props) {\n  const { t } = useTranslation();\n  const crossnoteContainer = CrossnoteContainer.useContainer();\n\n  return (\n    <Dialog open={props.open} onClose={props.onClose}>\n      <DialogTitle>{t(\"delete-directory-dialog/title\")}</DialogTitle>\n      <DialogContent>\n        <DialogContentText>\n          {t(\"delete-directory-dialog/subtitle\")}\n        </DialogContentText>\n      </DialogContent>\n      <DialogActions>\n        <Button\n          style={{ color: \"red\" }}\n          onClick={() => {\n            crossnoteContainer.deleteDirectory(props.directory);\n            props.onClose();\n          }}\n        >\n          {t(\"general/Delete\")}\n        </Button>\n        <Button onClick={props.onClose}>{t(\"general/cancel\")}</Button>\n      </DialogActions>\n    </Dialog>\n  );\n}\n","import React from \"react\";\nimport { useTranslation } from \"react-i18next\";\nimport { CrossnoteContainer } from \"../containers/crossnote\";\nimport {\n  Dialog,\n  DialogTitle,\n  DialogContent,\n  DialogContentText,\n  DialogActions,\n  Button,\n} from \"@material-ui/core\";\n\ninterface Props {\n  open: boolean;\n  onClose: () => void;\n  tag: string;\n}\n\nexport function DeleteTagDialog(props: Props) {\n  const { t } = useTranslation();\n  const crossnoteContainer = CrossnoteContainer.useContainer();\n\n  return (\n    <Dialog open={props.open} onClose={props.onClose}>\n      <DialogTitle>{t(\"delete-tag-dialog/title\")}</DialogTitle>\n      <DialogContent>\n        <DialogContentText>{t(\"delete-tag-dialog/subtitle\")}</DialogContentText>\n      </DialogContent>\n      <DialogActions>\n        <Button\n          style={{ color: \"red\" }}\n          onClick={() => {\n            crossnoteContainer.deleteTag(props.tag);\n            props.onClose();\n          }}\n        >\n          {t(\"general/Delete\")}\n        </Button>\n        <Button onClick={props.onClose}>{t(\"general/cancel\")}</Button>\n      </DialogActions>\n    </Dialog>\n  );\n}\n","import React, { useState, useCallback, useEffect } from \"react\";\nimport {\n  fade,\n  createStyles,\n  makeStyles,\n  Theme,\n} from \"@material-ui/core/styles\";\nimport clsx from \"clsx\";\nimport {\n  CrossnoteContainer,\n  SelectedSectionType,\n  OrderBy,\n  OrderDirection,\n} from \"../containers/crossnote\";\nimport {\n  Box,\n  InputBase,\n  Card,\n  IconButton,\n  Typography,\n  Hidden,\n  CircularProgress,\n  Popover,\n  List,\n  ListItem,\n  ListItemText,\n  ListItemIcon,\n  Divider,\n  Tooltip,\n} from \"@material-ui/core\";\nimport {\n  Magnify,\n  FileEditOutline,\n  Cog,\n  Menu as MenuIcon,\n  SortVariant,\n  SortDescending,\n  SortAscending,\n  Pencil,\n  ChevronDown,\n  TrashCan,\n} from \"mdi-material-ui\";\nimport { useTranslation } from \"react-i18next\";\nimport ConfigureNotebookDialog from \"./ConfigureNotebookDialog\";\nimport Notes from \"./Notes\";\nimport { RenameDirectoryDialog } from \"./RenameDirectoryDialog\";\nimport { RenameTagDialog } from \"./RenameTagDialog\";\nimport { DeleteDirectoryDialog } from \"./DeleteDirectoryDialog\";\nimport { DeleteTagDialog } from \"./DeleteTagDialog\";\n\nconst useStyles = makeStyles((theme: Theme) =>\n  createStyles({\n    notesPanel: {\n      position: \"relative\",\n      display: \"flex\",\n      flexDirection: \"column\",\n      height: \"100%\",\n      backgroundColor: theme.palette.background.default,\n    },\n    topPanel: {\n      padding: theme.spacing(0, 1),\n      borderRadius: 0,\n      backgroundColor: theme.palette.background.paper,\n    },\n    row: {\n      display: \"flex\",\n      alignItems: \"center\",\n    },\n    sectionName: {\n      marginLeft: theme.spacing(1),\n    },\n    search: {\n      \"position\": \"relative\",\n      \"borderRadius\": theme.shape.borderRadius,\n      \"backgroundColor\": fade(theme.palette.common.white, 0.15),\n      \"&:hover\": {\n        backgroundColor: fade(theme.palette.common.white, 0.25),\n      },\n      \"marginRight\": 0, // theme.spacing(2),\n      \"marginLeft\": 0,\n      \"width\": \"100%\",\n      [theme.breakpoints.up(\"sm\")]: {\n        // marginLeft: theme.spacing(3),\n        // width: \"auto\"\n      },\n    },\n    searchIcon: {\n      width: theme.spacing(7),\n      height: \"100%\",\n      position: \"absolute\",\n      pointerEvents: \"none\",\n      display: \"flex\",\n      alignItems: \"center\",\n      justifyContent: \"center\",\n    },\n    inputRoot: {\n      color: \"inherit\",\n      border: \"1px solid #bbb\",\n      borderRadius: \"4px\",\n      width: \"100%\",\n    },\n    inputInput: {\n      padding: theme.spacing(1, 1, 1, 7),\n      transition: theme.transitions.create(\"width\"),\n      width: \"100%\",\n      [theme.breakpoints.up(\"md\")]: {\n        // width: 200\n      },\n    },\n    loading: {\n      position: \"absolute\",\n      top: \"40%\",\n      left: \"50%\",\n      transform: \"translateX(-50%)\",\n    },\n    sortSelected: {\n      \"color\": theme.palette.primary.main,\n      \"& svg\": {\n        color: theme.palette.primary.main,\n      },\n    },\n  }),\n);\n\ninterface Props {\n  toggleDrawer: () => void;\n}\n\nexport default function NotesPanel(props: Props) {\n  const classes = useStyles(props);\n  const { t } = useTranslation();\n  const [sortMenuAnchorEl, setSortMenuAnchorEl] = useState<HTMLElement>(null);\n  const [isCreatingNote, setIsCreatingNote] = useState<boolean>(false);\n  const [directoryActionsAnchorEl, setDirectoryActionsAnchorEl] = useState<\n    HTMLElement\n  >(null);\n  const [tagActionsAnchorEl, setTagActionsAnchorEl] = useState<HTMLElement>(\n    null,\n  );\n  const [renameDirectoryDialogOpen, setRenameDirectoryDialogOpen] = useState<\n    boolean\n  >(false);\n  const [deleteDirectoryDialogOpen, setDeleteDirectoryDialogOpen] = useState<\n    boolean\n  >(false);\n  const [renameTagDialogOpen, setRenameTagDialogOpen] = useState<boolean>(\n    false,\n  );\n  const [deleteTagDialogOpen, setDeleteTagDialogOpen] = useState<boolean>(\n    false,\n  );\n\n  const crossnoteContainer = CrossnoteContainer.useContainer();\n\n  // Search\n  const [searchValue, setSearchValue] = useState<string>(\"\");\n  const [searchValueInputTimeout, setSearchValueInputTimeout] = useState<\n    NodeJS.Timeout\n  >(null);\n  const [finalSearchValue, setFinalSearchValue] = useState<string>(\"\");\n\n  const [\n    notebookConfigurationDialogOpen,\n    setNotebookConfigurationDialogOpen,\n  ] = useState<boolean>(false);\n\n  const createNewNote = useCallback(() => {\n    setIsCreatingNote(true);\n    crossnoteContainer\n      .createNewNote(crossnoteContainer.selectedNotebook)\n      .then(() => {\n        setIsCreatingNote(false);\n      })\n      .catch(() => {\n        setIsCreatingNote(false);\n      });\n  }, [crossnoteContainer]);\n\n  const onChangeSearchValue = useCallback(\n    (event: React.ChangeEvent<HTMLTextAreaElement | HTMLInputElement>) => {\n      const value = event.target.value;\n      setSearchValue(value);\n      if (searchValueInputTimeout) {\n        clearTimeout(searchValueInputTimeout);\n      }\n      const timeout = setTimeout(() => {\n        setFinalSearchValue(value);\n      }, 400);\n      setSearchValueInputTimeout(timeout);\n    },\n    [searchValueInputTimeout],\n  );\n\n  useEffect(() => {\n    setSearchValue(\"\");\n    setFinalSearchValue(\"\");\n  }, [crossnoteContainer.selectedNotebook]);\n\n  return (\n    <Box className={clsx(classes.notesPanel)}>\n      <Card className={clsx(classes.topPanel)}>\n        <Box className={clsx(classes.row)}>\n          <Hidden smUp implementation=\"css\">\n            <IconButton onClick={props.toggleDrawer}>\n              <MenuIcon></MenuIcon>\n            </IconButton>\n          </Hidden>\n          <div className={classes.search}>\n            <div className={classes.searchIcon}>\n              <Magnify />\n            </div>\n            <InputBase\n              placeholder={t(\"search/notes\")}\n              classes={{\n                root: classes.inputRoot,\n                input: classes.inputInput,\n              }}\n              value={searchValue}\n              inputProps={{ \"aria-label\": \"search\" }}\n              onChange={onChangeSearchValue}\n              autoComplete={\"off\"}\n              autoCorrect={\"off\"}\n            />\n          </div>\n          <IconButton\n            onClick={createNewNote}\n            disabled={!crossnoteContainer.initialized || isCreatingNote}\n          >\n            <Tooltip title={t(\"general/new-note\")}>\n              <FileEditOutline></FileEditOutline>\n            </Tooltip>\n          </IconButton>\n        </Box>\n        <Box\n          className={clsx(classes.row)}\n          style={{ justifyContent: \"space-between\" }}\n        >\n          {crossnoteContainer.selectedSection.type ===\n          SelectedSectionType.Notes ? (\n            <Box className={clsx(classes.row)}>\n              <span role=\"img\" aria-label=\"notes\">\n                {\"📒\"}\n              </span>\n              <Typography className={clsx(classes.sectionName)}>\n                {crossnoteContainer.selectedNotebook &&\n                  crossnoteContainer.selectedNotebook.name}\n              </Typography>\n            </Box>\n          ) : crossnoteContainer.selectedSection.type ===\n            SelectedSectionType.Today ? (\n            <Box className={clsx(classes.row)}>\n              <span role=\"img\" aria-label=\"today-notes\">\n                {\"📅\"}\n              </span>\n              <Typography className={clsx(classes.sectionName)}>\n                {t(\"general/today\")}\n              </Typography>\n            </Box>\n          ) : crossnoteContainer.selectedSection.type ===\n            SelectedSectionType.Todo ? (\n            <Box className={clsx(classes.row)}>\n              <span role=\"img\" aria-label=\"todo-notes\">\n                {\"☑️\"}\n              </span>\n              <Typography className={clsx(classes.sectionName)}>\n                {t(\"general/todo\")}\n              </Typography>\n            </Box>\n          ) : crossnoteContainer.selectedSection.type ===\n            SelectedSectionType.Tagged ? (\n            <Box className={clsx(classes.row)}>\n              <span role=\"img\" aria-label=\"tagged-notes\">\n                {\"🏷️\"}\n              </span>\n              <Typography className={clsx(classes.sectionName)}>\n                {t(\"general/tagged\")}\n              </Typography>\n            </Box>\n          ) : crossnoteContainer.selectedSection.type ===\n            SelectedSectionType.Untagged ? (\n            <Box className={clsx(classes.row)}>\n              <span role=\"img\" aria-label=\"untagged-notes\">\n                {\"🈚\"}\n              </span>\n              <Typography className={clsx(classes.sectionName)}>\n                {t(\"general/untagged\")}\n              </Typography>\n            </Box>\n          ) : crossnoteContainer.selectedSection.type ===\n            SelectedSectionType.Tag ? (\n            <Box\n              className={clsx(classes.row)}\n              style={{ cursor: \"pointer\" }}\n              onClick={(event) => setTagActionsAnchorEl(event.currentTarget)}\n            >\n              <span role=\"img\" aria-label=\"tag\">\n                {\"🏷️\"}\n              </span>\n              <Typography className={clsx(classes.sectionName)}>\n                {crossnoteContainer.selectedSection.path}\n              </Typography>\n              <ChevronDown></ChevronDown>\n            </Box>\n          ) : crossnoteContainer.selectedSection.type ===\n            SelectedSectionType.Encrypted ? (\n            <Box className={clsx(classes.row)}>\n              <span role=\"img\" aria-label=\"encrypted-notes\">\n                {\"🔐\"}\n              </span>\n              <Typography className={clsx(classes.sectionName)}>\n                {t(\"general/encrypted\")}\n              </Typography>\n            </Box>\n          ) : crossnoteContainer.selectedSection.type ===\n            SelectedSectionType.Conflicted ? (\n            <Box className={clsx(classes.row)}>\n              <span role=\"img\" aria-label=\"conflicted-notes\">\n                ⚠️\n              </span>\n              <Typography className={clsx(classes.sectionName)}>\n                {t(\"general/conflicted\")}\n              </Typography>\n            </Box>\n          ) : (\n            crossnoteContainer.selectedSection.type ===\n              SelectedSectionType.Directory && (\n              <Box\n                className={clsx(classes.row)}\n                style={{ cursor: \"pointer\" }}\n                onClick={(event) =>\n                  setDirectoryActionsAnchorEl(event.currentTarget)\n                }\n              >\n                <span role=\"img\" aria-label=\"folder\">\n                  {\"📁\"}\n                </span>\n                <Typography className={clsx(classes.sectionName)}>\n                  {crossnoteContainer.selectedSection.path}\n                </Typography>\n                <ChevronDown></ChevronDown>\n              </Box>\n            )\n          )}\n\n          <Box>\n            {\n              /*crossnoteContainer.selectedSection.type ===\n              SelectedSectionType.Notes && (*/\n              <IconButton\n                onClick={() => setNotebookConfigurationDialogOpen(true)}\n              >\n                <Tooltip title={t(\"general/configure-the-notebook\")}>\n                  <Cog></Cog>\n                </Tooltip>\n              </IconButton>\n              /*)*/\n            }\n            <IconButton\n              onClick={(event) => setSortMenuAnchorEl(event.currentTarget)}\n            >\n              <SortVariant></SortVariant>\n            </IconButton>\n            <Popover\n              anchorEl={sortMenuAnchorEl}\n              keepMounted\n              open={Boolean(sortMenuAnchorEl)}\n              onClose={() => setSortMenuAnchorEl(null)}\n            >\n              <List>\n                <ListItem\n                  button\n                  onClick={() =>\n                    crossnoteContainer.setOrderBy(OrderBy.ModifiedAt)\n                  }\n                  className={clsx(\n                    crossnoteContainer.orderBy === OrderBy.ModifiedAt &&\n                      classes.sortSelected,\n                  )}\n                >\n                  <ListItemText\n                    primary={t(\"general/date-modified\")}\n                  ></ListItemText>\n                </ListItem>\n                <ListItem\n                  button\n                  onClick={() =>\n                    crossnoteContainer.setOrderBy(OrderBy.CreatedAt)\n                  }\n                  className={clsx(\n                    crossnoteContainer.orderBy === OrderBy.CreatedAt &&\n                      classes.sortSelected,\n                  )}\n                >\n                  <ListItemText\n                    primary={t(\"general/date-created\")}\n                  ></ListItemText>\n                </ListItem>\n                <ListItem\n                  button\n                  onClick={() => crossnoteContainer.setOrderBy(OrderBy.Title)}\n                  className={clsx(\n                    crossnoteContainer.orderBy === OrderBy.Title &&\n                      classes.sortSelected,\n                  )}\n                >\n                  <ListItemText primary={t(\"general/title\")}></ListItemText>\n                </ListItem>\n                <Divider></Divider>\n                <ListItem\n                  button\n                  onClick={() =>\n                    crossnoteContainer.setOrderDirection(OrderDirection.DESC)\n                  }\n                  className={clsx(\n                    crossnoteContainer.orderDirection === OrderDirection.DESC &&\n                      classes.sortSelected,\n                  )}\n                >\n                  <ListItemText primary={t(\"general/Desc\")}></ListItemText>\n                  <ListItemIcon style={{ marginLeft: \"8px\" }}>\n                    <SortDescending></SortDescending>\n                  </ListItemIcon>\n                </ListItem>\n                <ListItem\n                  button\n                  onClick={() =>\n                    crossnoteContainer.setOrderDirection(OrderDirection.ASC)\n                  }\n                  className={clsx(\n                    crossnoteContainer.orderDirection === OrderDirection.ASC &&\n                      classes.sortSelected,\n                  )}\n                >\n                  <ListItemText primary={t(\"general/Asc\")}></ListItemText>\n                  <ListItemIcon style={{ marginLeft: \"8px\" }}>\n                    <SortAscending></SortAscending>\n                  </ListItemIcon>\n                </ListItem>\n              </List>\n            </Popover>\n          </Box>\n        </Box>\n      </Card>\n\n      <ConfigureNotebookDialog\n        open={notebookConfigurationDialogOpen}\n        onClose={() => setNotebookConfigurationDialogOpen(false)}\n        notebook={crossnoteContainer.selectedNotebook}\n      ></ConfigureNotebookDialog>\n\n      <Popover\n        open={Boolean(directoryActionsAnchorEl)}\n        anchorEl={directoryActionsAnchorEl}\n        keepMounted\n        onClose={() => setDirectoryActionsAnchorEl(null)}\n      >\n        <List>\n          <ListItem\n            button={true}\n            onClick={() => {\n              setDirectoryActionsAnchorEl(null);\n              setRenameDirectoryDialogOpen(true);\n            }}\n          >\n            <ListItemIcon>\n              <Pencil></Pencil>\n            </ListItemIcon>\n            <ListItemText>{t(\"general/rename-directory\")}</ListItemText>\n          </ListItem>\n          <ListItem\n            button={true}\n            onClick={() => {\n              setDirectoryActionsAnchorEl(null);\n              setDeleteDirectoryDialogOpen(true);\n            }}\n          >\n            <ListItemIcon>\n              <TrashCan></TrashCan>\n            </ListItemIcon>\n            <ListItemText>{t(\"general/delete-directory\")}</ListItemText>\n          </ListItem>\n        </List>\n      </Popover>\n\n      <Popover\n        open={Boolean(tagActionsAnchorEl)}\n        anchorEl={tagActionsAnchorEl}\n        keepMounted\n        onClose={() => setTagActionsAnchorEl(null)}\n      >\n        <List>\n          <ListItem\n            button={true}\n            onClick={() => {\n              setTagActionsAnchorEl(null);\n              setRenameTagDialogOpen(true);\n            }}\n          >\n            <ListItemIcon>\n              <Pencil></Pencil>\n            </ListItemIcon>\n            <ListItemText>{t(\"general/rename-tag\")}</ListItemText>\n          </ListItem>\n          <ListItem\n            button={true}\n            onClick={() => {\n              setTagActionsAnchorEl(null);\n              setDeleteTagDialogOpen(true);\n            }}\n          >\n            <ListItemIcon>\n              <TrashCan></TrashCan>\n            </ListItemIcon>\n            <ListItemText>{t(\"general/delete-tag\")}</ListItemText>\n          </ListItem>\n        </List>\n      </Popover>\n\n      <RenameDirectoryDialog\n        open={renameDirectoryDialogOpen}\n        onClose={() => setRenameDirectoryDialogOpen(false)}\n        directory={crossnoteContainer.selectedSection.path}\n      ></RenameDirectoryDialog>\n\n      <DeleteDirectoryDialog\n        open={deleteDirectoryDialogOpen}\n        onClose={() => setDeleteDirectoryDialogOpen(false)}\n        directory={crossnoteContainer.selectedSection.path}\n      ></DeleteDirectoryDialog>\n\n      <RenameTagDialog\n        open={renameTagDialogOpen}\n        onClose={() => setRenameTagDialogOpen(false)}\n        tag={crossnoteContainer.selectedSection.path}\n      ></RenameTagDialog>\n\n      <DeleteTagDialog\n        open={deleteTagDialogOpen}\n        onClose={() => setDeleteTagDialogOpen(false)}\n        tag={crossnoteContainer.selectedSection.path}\n      ></DeleteTagDialog>\n\n      {crossnoteContainer.isLoadingNotebook && (\n        <CircularProgress className={clsx(classes.loading)}></CircularProgress>\n      )}\n\n      <Notes searchValue={finalSearchValue}></Notes>\n    </Box>\n  );\n}\n","import React, { useEffect } from \"react\";\nimport { createStyles, makeStyles, Theme } from \"@material-ui/core/styles\";\nimport clsx from \"clsx\";\nimport { CrossnoteContainer } from \"../containers/crossnote\";\nimport { Box, Card, IconButton, Typography, Hidden } from \"@material-ui/core\";\nimport { Menu as MenuIcon } from \"mdi-material-ui\";\nimport { useTranslation } from \"react-i18next\";\nimport { renderPreview } from \"vickymd/preview\";\nimport { postprocessPreview } from \"../utilities/preview\";\n\nconst previewZIndex = 99;\nconst useStyles = makeStyles((theme: Theme) =>\n  createStyles({\n    wikiPanel: {\n      position: \"relative\",\n      display: \"flex\",\n      flexDirection: \"column\",\n      height: \"100%\",\n    },\n    topPanel: {\n      padding: theme.spacing(1),\n      borderRadius: \"0\",\n    },\n    row: {\n      display: \"flex\",\n      alignItems: \"center\",\n    },\n    sectionName: {\n      marginLeft: theme.spacing(1),\n    },\n    toc: {\n      position: \"relative\",\n      flex: \"1\",\n      overflowY: \"auto\",\n      paddingBottom: theme.spacing(12),\n    },\n    preview: {\n      position: \"relative\",\n      left: \"0\",\n      top: \"0\",\n      margin: \"4px\",\n      width: \"calc(100% - 8px)\",\n      height: \"100%\",\n      border: \"none\",\n      overflow: \"auto !important\",\n      padding: theme.spacing(2),\n      zIndex: previewZIndex,\n      [theme.breakpoints.down(\"sm\")]: {\n        padding: theme.spacing(1),\n      },\n      // gridArea: \"2 / 2 / 3 / 3\"\n    },\n  }),\n);\n\ninterface Props {\n  toggleDrawer: () => void;\n}\n\nexport default function WikiPanel(props: Props) {\n  const classes = useStyles(props);\n  const crossnoteContainer = CrossnoteContainer.useContainer();\n  const { t } = useTranslation();\n\n  useEffect(() => {\n    return () => {\n      crossnoteContainer.setWikiTOCElement(null);\n    };\n  }, []);\n\n  useEffect(() => {\n    if (crossnoteContainer.wikiTOCElement) {\n      crossnoteContainer\n        .getNote(crossnoteContainer.selectedNotebook, \"SUMMARY.md\")\n        .then((note) => {\n          renderPreview(crossnoteContainer.wikiTOCElement, note.markdown);\n          postprocessPreview(crossnoteContainer.wikiTOCElement, note);\n        })\n        .catch(() => {});\n    }\n  }, [crossnoteContainer.wikiTOCElement]);\n\n  return (\n    <Box className={clsx(classes.wikiPanel)}>\n      <Card className={clsx(classes.topPanel)}>\n        <Box className={clsx(classes.row)}>\n          <Hidden smUp implementation=\"css\">\n            <IconButton onClick={props.toggleDrawer}>\n              <MenuIcon></MenuIcon>\n            </IconButton>\n          </Hidden>\n          <Box className={clsx(classes.row)}>\n            <span role=\"img\" aria-label=\"wiki\">\n              {\"📖\"}\n            </span>\n            <Typography className={clsx(classes.sectionName)}>\n              {t(\"general/wiki\")}\n            </Typography>\n          </Box>\n        </Box>\n      </Card>\n      <div\n        className={clsx(classes.toc, classes.preview, \"preview\")}\n        ref={(element: HTMLElement) => {\n          crossnoteContainer.setWikiTOCElement(element);\n        }}\n      ></div>\n    </Box>\n  );\n}\n","import { createContainer } from \"unstated-next\";\nimport { useState, useEffect, useCallback } from \"react\";\nimport {\n  User,\n  useViewerQuery,\n  useSetUserInfoMutation,\n  NotebookFieldsFragment,\n} from \"../generated/graphql\";\nimport Noty from \"noty\";\nimport { SettingsContainer } from \"./settings\";\nimport { useTranslation } from \"react-i18next\";\n\ninterface InitialState {}\n\nfunction useCloudContainer(initialState: InitialState) {\n  const { t } = useTranslation();\n\n  const [authDialogOpen, setAuthDialogOpen] = useState<boolean>(false);\n  const [loggedIn, setLoggedIn] = useState<boolean>(false);\n  const [viewer, setViewer] = useState<User>(null);\n  const [resViewer, executeViewerQuery] = useViewerQuery({\n    requestPolicy: \"network-only\",\n    pause: true,\n  });\n  const [resSetUserInfo, executeSetUserInfoMutation] = useSetUserInfoMutation();\n  const [token, setToken] = useState<string>(\n    localStorage.getItem(\"token\") || \"\",\n  );\n  const [selectedNotebook, setSelectedNotebook] = useState<\n    NotebookFieldsFragment\n  >(null);\n  const [displayNotebookPreview, setDisplayNotebookPreview] = useState<boolean>(\n    false,\n  );\n  const settingsContainer = SettingsContainer.useContainer();\n\n  const refetchViewer = useCallback(() => {\n    if (token) {\n      executeViewerQuery({\n        requestPolicy: \"network-only\",\n        pollInterval: 60 * 1000, // Refetch the viewer every 60 seconds for checking notifications\n      });\n    }\n  }, [executeViewerQuery, token]);\n\n  const logout = () => {\n    localStorage.removeItem(\"token\");\n    window.location.reload();\n  };\n\n  const setUserInfo = useCallback(\n    ({\n      name = \"\",\n      cover = \"\",\n      avatar = \"\",\n      language = \"en-US\",\n      editorCursorColor = \"rgba(74, 144, 226, 1)\",\n    }) => {\n      executeSetUserInfoMutation({\n        cover,\n        name,\n        avatar,\n        bio: \"\",\n        language,\n        location: \"\",\n        editorCursorColor,\n      });\n    },\n    [executeSetUserInfoMutation],\n  );\n\n  const reduceNotificationsCountByOne = useCallback(() => {\n    if (viewer) {\n      viewer.notifications.totalCount = Math.max(\n        0,\n        viewer.notifications.totalCount - 1,\n      );\n      setViewer(Object.assign({}, viewer) as User);\n    }\n  }, [viewer]);\n\n  const clearNotificationsCount = useCallback(() => {\n    viewer.notifications.totalCount = 0;\n    setViewer(Object.assign({}, viewer) as User);\n  }, [viewer]);\n\n  useEffect(() => {\n    if (resViewer.fetching) {\n    } else if (resViewer.error) {\n      /*\n      // Don't display error message here\n      // because the application might be offline now\n      new Noty({\n        type: \"error\",\n        text: resViewer.error.message,\n        layout: \"topRight\",\n        theme: \"relax\",\n        timeout: 2000\n      }).show();\n      */\n      // logout(); // <= Cause mobile device login failure.\n    } else if (resViewer.data && resViewer.data.viewer) {\n      const viewer = resViewer.data.viewer as User;\n      setViewer(viewer);\n    }\n  }, [resViewer]);\n\n  useEffect(() => {\n    if (viewer) {\n      setLoggedIn(true);\n      if (!loggedIn) {\n        // NOTE: Stop syncing properties below from the cloud\n        // settingsContainer.setLanguage(viewer.language);\n        // settingsContainer.setAuthorName(viewer.name);\n        // settingsContainer.setAuthorEmail(viewer.email);\n        // settingsContainer.setEditorCursorColor(viewer.editorCursorColor);\n      }\n    }\n  }, [loggedIn, viewer]);\n\n  useEffect(() => {\n    if (token && refetchViewer) {\n      refetchViewer();\n    }\n  }, [token, refetchViewer]);\n\n  useEffect(() => {\n    if (resSetUserInfo.fetching) {\n    } else if (resSetUserInfo.error) {\n      new Noty({\n        type: \"error\",\n        text: resSetUserInfo.error.message,\n        layout: \"topRight\",\n        theme: \"relax\",\n        timeout: 2000,\n      }).show();\n    } else if (resSetUserInfo.data && resSetUserInfo.data.setUserInfo) {\n      setViewer(resSetUserInfo.data.setUserInfo as User);\n      new Noty({\n        type: \"success\",\n        text: t(\"general/profile-updated\"),\n        layout: \"topRight\",\n        theme: \"relax\",\n        timeout: 2000,\n      }).show();\n    }\n  }, [\n    resSetUserInfo,\n    /*\n    t // TODO: Will cause repeated run\n    */\n  ]);\n\n  return {\n    loggedIn,\n    logout,\n    authDialogOpen,\n    setAuthDialogOpen,\n    viewer,\n    refetchViewer,\n    resSetUserInfo,\n    setUserInfo,\n    reduceNotificationsCountByOne,\n    clearNotificationsCount,\n    selectedNotebook,\n    setSelectedNotebook,\n    displayNotebookPreview,\n    setDisplayNotebookPreview,\n  };\n}\n\nexport const CloudContainer = createContainer(useCloudContainer);\n","export default {\"logMessage\": \"259b7e8 相对路径\",\"hash\":\"259b7e886d5f98a02ad8ef09e18654e489a5977d\"}\n","import {\n  Box,\n  Card,\n  Typography,\n  Popover,\n  Hidden,\n  IconButton,\n  TextField,\n  Select,\n  MenuItem,\n  Button,\n  Avatar,\n  Tooltip,\n  Chip,\n  Link,\n} from \"@material-ui/core\";\nimport { createStyles, makeStyles, Theme } from \"@material-ui/core/styles\";\nimport clsx from \"clsx\";\nimport React, { useState, useEffect } from \"react\";\nimport { SketchPicker } from \"react-color\";\nimport { useTranslation } from \"react-i18next\";\nimport Identicon from \"identicon.js\";\nimport { sha256 } from \"js-sha256\";\nimport { SettingsContainer } from \"../containers/settings\";\nimport {\n  Menu as MenuIcon,\n  Translate,\n  ImagePlus,\n  Github,\n  ThemeLightDark,\n  Keyboard,\n} from \"mdi-material-ui\";\nimport { CloudContainer } from \"../containers/cloud\";\nimport { smmsUploadImages } from \"../utilities/image_uploader\";\nimport {\n  useGitHubUserQuery,\n  useUnlinkGitHubAccountMutation,\n} from \"../generated/graphql\";\nimport { startGitHubOAuth } from \"../utilities/utils\";\nimport GitCommit from \"../_git_commit\";\nimport { themeManager } from \"../themes/manager\";\nimport { KeyMap } from \"../lib/keymap\";\nimport { browserHistory } from \"../utilities/history\";\n\nconst useStyles = makeStyles((theme: Theme) =>\n  createStyles({\n    settingsCard: {\n      padding: theme.spacing(2),\n      width: \"600px\",\n      maxWidth: \"100%\",\n      position: \"relative\",\n      margin: `${theme.spacing(4)}px auto`,\n      height: \"fit-content\",\n      [theme.breakpoints.down(\"sm\")]: {\n        top: \"0\",\n        margin: \"0\",\n        height: \"100%\",\n        overflow: \"auto\",\n      },\n    },\n    cover: {\n      position: \"relative\",\n      width: \"100%\",\n      height: \"0\",\n      marginTop: theme.spacing(2),\n      paddingTop: \"30%\",\n      backgroundSize: \"cover\",\n      backgroundPosition: \"center\",\n      backgroundColor: \"#fade79\",\n      [theme.breakpoints.down(\"sm\")]: {\n        paddingTop: \"50%\",\n      },\n    },\n    row: {\n      display: \"flex\",\n      flexDirection: \"row\",\n      alignItems: \"center\",\n    },\n    loggedInSection: {\n      position: \"relative\",\n      padding: theme.spacing(0, 2),\n      border: `1px solid ${theme.palette.primary.light}`,\n      marginBottom: theme.spacing(4),\n      marginTop: theme.spacing(2),\n      borderRadius: \"4px\",\n    },\n    avatar: {\n      marginTop: theme.spacing(2),\n      width: \"64px\",\n      height: \"64px\",\n      borderRadius: \"4px\",\n    },\n    saveBtn: {\n      marginBottom: theme.spacing(2),\n    },\n    logoutBtn: {\n      position: \"absolute\",\n      top: \"16px\",\n      right: \"16px\",\n    },\n    section: {\n      marginTop: theme.spacing(1),\n    },\n    swatch: {\n      padding: \"4px\",\n      backgroundColor: \"#fff\",\n      borderRadius: \"1px\",\n      boxShadow: \"0 0 0 1px rgba(0,0,0,0.1)\",\n      display: \"inline-block\",\n      cursor: \"pointer\",\n    },\n    color: {\n      width: \"36px\",\n      height: \"18px\",\n      borderRadius: \"2px\",\n    },\n    editorText: {\n      marginLeft: theme.spacing(4),\n    },\n    editorCursor: {\n      borderLeftStyle: \"solid\",\n      borderLeftWidth: \"2px\",\n      padding: \"0\",\n      position: \"relative\",\n    },\n  }),\n);\n\ninterface RGBA {\n  r: number;\n  g: number;\n  b: number;\n  a: number;\n}\n\nfunction getRGBA(inputStr: string = \"\"): RGBA {\n  if (!inputStr || !inputStr.length || !inputStr.match(/^rgba\\(/)) {\n    return {\n      r: 51,\n      g: 51,\n      b: 51,\n      a: 1,\n    };\n  } else {\n    const match = inputStr.match(\n      /^rgba\\(\\s*(\\d+)\\s*,\\s*(\\d+)\\s*,\\s*(\\d+)\\s*,\\s*(\\d+)\\s*\\)$/,\n    );\n    if (!match) {\n      return {\n        r: 51,\n        g: 51,\n        b: 51,\n        a: 1,\n      };\n    } else {\n      return {\n        r: parseInt(match[1], 10),\n        g: parseInt(match[2], 10),\n        b: parseInt(match[3], 10),\n        a: parseInt(match[4], 10),\n      };\n    }\n  }\n}\n\ninterface Props {\n  toggleDrawer: () => void;\n}\nexport function Settings(props: Props) {\n  const classes = useStyles(props);\n  const { t } = useTranslation();\n  const [colorPickerAnchorElement, setColorPickerAnchorElement] = useState<\n    HTMLElement\n  >(null);\n  const [imageUploaderElement, setImageUploaderElement] = useState<\n    HTMLInputElement\n  >(null);\n  const displayColorPicker = Boolean(colorPickerAnchorElement);\n  const settingsContainer = SettingsContainer.useContainer();\n  const cloudContainer = CloudContainer.useContainer();\n  const [avatar, setAvatar] = useState<string>(\n    (cloudContainer.viewer && cloudContainer.viewer.avatar) || \"\",\n  );\n  const [uploadingAvatar, setUploadingAvatar] = useState<boolean>(false);\n  const [resGitHubUser] = useGitHubUserQuery();\n  const [\n    resUnlinkGitHubAccount,\n    executeUnlinkGitHubAccount,\n  ] = useUnlinkGitHubAccountMutation();\n\n  function uploadAvatar(\n    event: React.MouseEvent<HTMLButtonElement, MouseEvent>,\n  ) {\n    event.preventDefault();\n    event.stopPropagation();\n    if (!imageUploaderElement) return;\n    imageUploaderElement.onchange = function (event) {\n      const target = event.target as any;\n      const files = target.files || [];\n      new Noty({\n        type: \"info\",\n        text: \"Uploading avatar image\",\n        layout: \"topRight\",\n        theme: \"relax\",\n        timeout: 2000,\n      }).show();\n      smmsUploadImages(files)\n        .then((urls) => {\n          setUploadingAvatar(false);\n          setAvatar(urls[0] || \"\");\n        })\n        .catch((error: any) => {\n          // console.log(error);\n          new Noty({\n            type: \"error\",\n            text: \"Failed to upload image\",\n            layout: \"topRight\",\n            theme: \"relax\",\n            timeout: 2000,\n          }).show();\n          setUploadingAvatar(false);\n        });\n    };\n    setUploadingAvatar(true);\n    imageUploaderElement.click();\n  }\n\n  useEffect(() => {\n    if (cloudContainer.viewer) {\n      setAvatar((avatar) => avatar || cloudContainer.viewer.avatar);\n    }\n  }, [cloudContainer.viewer]);\n\n  useEffect(() => {\n    if (resUnlinkGitHubAccount.data) {\n      window.location.reload();\n    }\n  }, [resUnlinkGitHubAccount]);\n\n  return (\n    <Card className={clsx(classes.settingsCard)}>\n      <Box\n        style={{ display: \"flex\", flexDirection: \"row\", alignItems: \"center\" }}\n      >\n        <Hidden smUp implementation=\"css\">\n          <IconButton onClick={props.toggleDrawer}>\n            <MenuIcon></MenuIcon>\n          </IconButton>\n        </Hidden>\n        <Typography variant={\"h6\"}>{t(\"general/Settings\")}</Typography>\n      </Box>\n      {cloudContainer.loggedIn ? (\n        <Box className={clsx(classes.loggedInSection)}>\n          <Box className={clsx(classes.section)}>\n            <Box className={clsx(classes.row)}>\n              <img\n                src=\"/logo.svg\"\n                style={{ width: \"48px\", height: \"48px\" }}\n                alt={\"Crossnote\"}\n              ></img>\n              <Typography variant={\"h6\"}>\n                @{cloudContainer.viewer.username}\n              </Typography>\n            </Box>\n            <Typography>{cloudContainer.viewer.email}</Typography>\n            <Typography variant={\"caption\"}>\n              {t(\"settings/created-cloud-widgets-count\") +\n                `: ${cloudContainer.viewer.widgetsCount}/∞`}\n            </Typography>\n          </Box>\n          <Box className={clsx(classes.section)}>\n            <Avatar\n              className={clsx(classes.avatar)}\n              variant={\"rounded\"}\n              src={\n                avatar ||\n                \"data:image/png;base64,\" +\n                  new Identicon(\n                    sha256(\n                      cloudContainer.viewer && cloudContainer.viewer.username,\n                    ),\n                    80,\n                  ).toString()\n              }\n            ></Avatar>\n            <Box className={clsx(classes.row)}>\n              <TextField\n                label={t(\"settings/Avatar\")}\n                style={{ marginTop: 8 }}\n                placeholder=\"https://.../xxx.png\"\n                helperText={t(\"settings/enter-avatar-image-url\")}\n                fullWidth\n                margin=\"normal\"\n                InputLabelProps={{\n                  shrink: true,\n                }}\n                value={avatar}\n                onChange={(event) => setAvatar(event.currentTarget.value)}\n              />\n              <Tooltip title={t(\"settings/upload-image\")}>\n                <IconButton disabled={uploadingAvatar} onClick={uploadAvatar}>\n                  <ImagePlus></ImagePlus>\n                </IconButton>\n              </Tooltip>\n            </Box>\n          </Box>\n          <Box\n            className={clsx(classes.section)}\n            style={{ marginBottom: \"16px\" }}\n          >\n            {resGitHubUser.data &&\n            resGitHubUser.data.viewer &&\n            resGitHubUser.data.viewer.githubUser ? (\n              <Chip\n                color={\"primary\"}\n                avatar={\n                  <Avatar\n                    src={resGitHubUser.data.viewer.githubUser.avatar}\n                  ></Avatar>\n                }\n                label={\n                  t(\"settings/linked-with-github-account\") +\n                  \": \" +\n                  resGitHubUser.data.viewer.githubUser.login\n                }\n                onClick={() => {\n                  window.open(\n                    \"https://github.com/\" +\n                      resGitHubUser.data.viewer.githubUser.login,\n                    \"_blank\",\n                  );\n                }}\n                disabled={resUnlinkGitHubAccount.fetching}\n                onDelete={() => {\n                  executeUnlinkGitHubAccount();\n                }}\n              />\n            ) : (\n              <Chip\n                color={\"default\"}\n                disabled={resGitHubUser.fetching}\n                icon={<Github></Github>}\n                onClick={() => startGitHubOAuth()}\n                label={t(\"settings/link-with-github-account\")}\n              ></Chip>\n            )}\n          </Box>\n          <Box className={clsx(classes.section)}>\n            <Button\n              variant={\"contained\"}\n              color={\"primary\"}\n              className={clsx(classes.saveBtn)}\n              onClick={() => {\n                cloudContainer.setUserInfo({\n                  name: settingsContainer.authorName,\n                  cover: \"\",\n                  avatar,\n                  editorCursorColor: settingsContainer.editorCursorColor,\n                  language: settingsContainer.language,\n                });\n              }}\n              disabled={cloudContainer.resSetUserInfo.fetching}\n            >\n              {t(\"general/upload-the-profile\")}\n            </Button>\n          </Box>\n          <Button\n            variant={\"outlined\"}\n            color=\"secondary\"\n            className={clsx(classes.logoutBtn)}\n            onClick={() => {\n              cloudContainer.logout();\n            }}\n          >\n            {t(\"settings/log-out\")}\n          </Button>\n        </Box>\n      ) : null}\n      <Box className={clsx(classes.section)}>\n        <Typography\n          variant={\"body2\"}\n          style={{\n            fontSize: \"0.75rem\",\n            marginBottom: \"6px\",\n          }}\n        >\n          <Translate style={{ marginRight: \"8px\" }}></Translate>\n          {\"Languages/语言\"}\n        </Typography>\n        <Select\n          variant={\"standard\"}\n          value={settingsContainer.language}\n          onChange={(event) =>\n            settingsContainer.setLanguage(event.target.value as string)\n          }\n        >\n          <MenuItem value={\"en-US\"}>English</MenuItem>\n          <MenuItem value={\"zh-CN\"}>简体中文</MenuItem>\n          <MenuItem value={\"zh-TW\"}>繁体中文</MenuItem>\n          <MenuItem value={\"ja-JP\"}>日本語</MenuItem>\n        </Select>\n      </Box>\n      <Box className={clsx(classes.section)}>\n        <TextField\n          label={t(\"settings/author-name\")}\n          placeholder={t(\"account/Anonymous\")}\n          fullWidth\n          margin=\"normal\"\n          InputLabelProps={{\n            shrink: true,\n          }}\n          value={settingsContainer.authorName}\n          onChange={(event) =>\n            settingsContainer.setAuthorName(event.currentTarget.value)\n          }\n        ></TextField>\n      </Box>\n      <Box className={clsx(classes.section)}>\n        <TextField\n          label={t(\"settings/author-email\")}\n          placeholder={\"anonymous@crossnote.app\"}\n          fullWidth\n          margin=\"normal\"\n          InputLabelProps={{\n            shrink: true,\n          }}\n          value={settingsContainer.authorEmail}\n          onChange={(event) =>\n            settingsContainer.setAuthorEmail(event.currentTarget.value)\n          }\n        ></TextField>\n      </Box>\n      <Box className={clsx(classes.section)}>\n        <Typography\n          variant={\"body2\"}\n          style={{\n            fontSize: \"0.75rem\",\n            marginBottom: \"6px\",\n            marginTop: \"16px\",\n          }}\n        >\n          <ThemeLightDark style={{ marginRight: \"8px\" }}></ThemeLightDark>\n          {t(\"settings/theme\") + \" (beta)\"}\n        </Typography>\n        <Select\n          value={settingsContainer.theme.name}\n          onChange={(event) => {\n            settingsContainer.setTheme(event.target.value as string);\n          }}\n        >\n          {themeManager.themes.map((theme) => {\n            return (\n              <MenuItem key={theme.name} value={theme.name}>\n                {theme.name}\n              </MenuItem>\n            );\n          })}\n        </Select>\n      </Box>\n      <Box className={clsx(classes.section)}>\n        <Typography\n          variant={\"body2\"}\n          style={{\n            fontSize: \"0.75rem\",\n            marginBottom: \"6px\",\n            marginTop: \"16px\",\n          }}\n        >\n          {t(\"settings/editor-cursor-color\") + \" (beta)\"}\n        </Typography>\n        <Box\n          style={{\n            display: \"flex\",\n            flexDirection: \"row\",\n            alignItems: \"center\",\n          }}\n        >\n          <Box\n            className={clsx(classes.swatch)}\n            onClick={(event: React.MouseEvent<HTMLElement>) =>\n              setColorPickerAnchorElement(event.currentTarget)\n            }\n          >\n            <Box\n              className={clsx(classes.color)}\n              style={{ backgroundColor: settingsContainer.editorCursorColor }}\n            ></Box>\n          </Box>\n          <div className={clsx(classes.editorText)}>\n            {t(\"settings/hello\")}\n            <span\n              className={clsx(classes.editorCursor)}\n              style={{\n                borderLeftColor:\n                  settingsContainer.editorCursorColor || \"#4A90E2\",\n              }}\n            ></span>\n            {t(\"settings/world\")}\n          </div>\n        </Box>\n        <Popover\n          open={displayColorPicker}\n          anchorEl={colorPickerAnchorElement}\n          onClose={() => {\n            setColorPickerAnchorElement(null);\n          }}\n          anchorOrigin={{\n            vertical: \"bottom\",\n            horizontal: \"center\",\n          }}\n          transformOrigin={{\n            vertical: \"top\",\n            horizontal: \"center\",\n          }}\n        >\n          <SketchPicker\n            color={getRGBA(settingsContainer.editorCursorColor)}\n            onChange={(color) => {\n              const cursorColor = `rgba(${color.rgb.r}, ${color.rgb.g}, ${color.rgb.b}, ${color.rgb.a})`;\n              settingsContainer.setEditorCursorColor(cursorColor);\n            }}\n          ></SketchPicker>\n        </Popover>\n      </Box>\n      <Box className={clsx(classes.section)}>\n        <Typography\n          variant={\"body2\"}\n          style={{\n            fontSize: \"0.75rem\",\n            marginBottom: \"6px\",\n            marginTop: \"16px\",\n          }}\n        >\n          <Keyboard style={{ marginRight: \"8px\" }}></Keyboard>\n          {t(\"settings/key-map\") + \" (beta)\"}\n        </Typography>\n        <Select\n          value={settingsContainer.keyMap}\n          onChange={(event) => {\n            settingsContainer.setKeyMap(event.target.value as KeyMap);\n          }}\n        >\n          <MenuItem value={KeyMap.DEFAULT}>{t(\"general/Default\")}</MenuItem>\n          <MenuItem value={KeyMap.VIM}>{t(\"general/Vim\")}</MenuItem>\n          <MenuItem value={KeyMap.EMACS}>{t(\"general/Emacs\")}</MenuItem>\n        </Select>\n      </Box>\n      <Box className={clsx(classes.section)} style={{ marginTop: \"32px\" }}>\n        <Link\n          href={\n            \"https://crossnote.app/?repo=https%3A%2F%2Fgithub.com%2F0xGG%2Fwelcome-notebook.git&branch=master&filePath=README.md\"\n          }\n          target={\"_blank\"}\n        >\n          <Typography variant={\"caption\"}>\n            {\"🤔 \" + t(\"settings/about-this-project\")}\n          </Typography>\n        </Link>\n        <br></br>\n        <Link\n          href={`https://github.com/0xGG/crossnote/issues`}\n          target={\"_blank\"}\n        >\n          <Typography variant={\"caption\"}>\n            {\"👀 \" + t(\"settings/issues-and-feature-requests\")}\n          </Typography>\n        </Link>\n        <br></br>\n        <Link\n          href={`https://github.com/0xGG/crossnote/commit/${GitCommit.hash}`}\n          target={\"_blank\"}\n        >\n          <Typography variant={\"caption\"}>\n            {\"🛠 Build \" + GitCommit.logMessage}\n          </Typography>\n        </Link>\n        <br></br>\n        <Link\n          href={`/privacy`}\n          onClick={(event: any) => {\n            event.preventDefault();\n            browserHistory.push(`/privacy`);\n          }}\n        >\n          <Typography variant={\"caption\"}>{\"🔏 Privacy policy\"}</Typography>\n        </Link>\n      </Box>\n      {!cloudContainer.loggedIn && (\n        <Button\n          variant={\"outlined\"}\n          color={\"primary\"}\n          className={clsx(classes.logoutBtn)}\n          onClick={() => cloudContainer.setAuthDialogOpen(true)}\n        >\n          {t(\"general/sign-in\")}\n        </Button>\n      )}\n      <input\n        type=\"file\"\n        multiple\n        style={{ display: \"none\" }}\n        ref={(element: HTMLInputElement) => {\n          setImageUploaderElement(element);\n        }}\n      ></input>\n    </Card>\n  );\n}\n","import React, { useEffect, useState, useCallback } from \"react\";\nimport {\n  Dialog,\n  DialogTitle,\n  DialogContent,\n  TextField,\n  Box,\n  Button,\n  Typography,\n  Chip,\n  Divider,\n  Link,\n  Avatar,\n} from \"@material-ui/core\";\nimport { createStyles, makeStyles, Theme } from \"@material-ui/core/styles\";\nimport clsx from \"clsx\";\nimport { browserHistory } from \"../utilities/history\";\nimport { CloudContainer } from \"../containers/cloud\";\nimport { useTranslation } from \"react-i18next\";\nimport { Github } from \"mdi-material-ui\";\nimport Identicon from \"identicon.js\";\nimport { sha256 } from \"js-sha256\";\nimport {\n  useSignInMutation,\n  useSignUpMutation,\n  useSendEmailVerificationCodeMutation,\n  useResetPasswordMutation,\n} from \"../generated/graphql\";\nimport { startGitHubOAuth } from \"../utilities/utils\";\nimport Noty from \"noty\";\n\nconst useStyles = makeStyles((theme: Theme) =>\n  createStyles({\n    form: {\n      position: \"relative\",\n      width: \"400px\",\n      // height: \"360px\",\n      maxWidth: \"90%\",\n      margin: \"0 auto\",\n      padding: \"24px 12px\",\n      display: \"flex\",\n      flexDirection: \"column\",\n    },\n    avatar: {\n      borderRadius: \"4px\",\n      width: \"32px\",\n      height: \"32px\",\n      gridArea: \"avatar\",\n      cursor: \"pointer\",\n      marginLeft: theme.spacing(1),\n      marginRight: theme.spacing(1),\n    },\n    header: {\n      marginBottom: \"24px\",\n    },\n    username: {\n      marginBottom: \"24px\",\n    },\n    email: {\n      marginBottom: \"24px\",\n    },\n    password: {\n      marginBottom: \"24px\",\n    },\n    authBtn: {\n      marginBottom: \"16px\",\n    },\n    switchLink: {\n      \"marginTop\": \"16px\",\n      \"&:hover\": {\n        cursor: \"pointer\",\n      },\n    },\n    errorMessage: {\n      color: \"#f44336\",\n    },\n  }),\n);\n\nenum Stage {\n  Signin,\n  Signup,\n  ForgotPassword,\n}\n\ninterface Props {\n  open: boolean;\n  onClose: () => void;\n}\nexport function AuthDialog(props: Props) {\n  const classes = useStyles(props);\n  const [stage, setStage] = useState<Stage>(Stage.Signin);\n  const [username, setUsername] = useState<string>(\"\");\n  const [email, setEmail] = useState<string>(\"\");\n  const [password, setPassword] = useState<string>(\"\");\n  const [passwordConfirmation, setPasswordConfirmation] = useState<string>(\"\");\n  const [errorMessage, setErrorMessage] = useState<string>(\"\");\n  const [verificationCode, setVerificationCode] = useState<string>(\"\");\n  const cloudContainer = CloudContainer.useContainer();\n\n  const [resSignIn, executeSignInMutation] = useSignInMutation();\n  const [resSignUp, executeSignUpMutation] = useSignUpMutation();\n  const [\n    resSendEmailVerificationCode,\n    executeSendEmailVerificationCodeMutation,\n  ] = useSendEmailVerificationCodeMutation();\n  const [\n    resResetPassword,\n    executeResetPasswordMutation,\n  ] = useResetPasswordMutation();\n\n  const { t } = useTranslation();\n  const [loggedIn, setLoggedIn] = useState<boolean>(cloudContainer.loggedIn);\n\n  const signin = useCallback(() => {\n    executeSignInMutation({\n      email: email.trim(),\n      password,\n    });\n  }, [email, password, executeSignInMutation]);\n\n  const signup = useCallback(() => {\n    if (password === passwordConfirmation) {\n      executeSignUpMutation({\n        username: username.trim(),\n        email: email.trim(),\n        password,\n      });\n    } else {\n      setErrorMessage(t(\"widget/crossnote.auth/password-mismatch\"));\n    }\n  }, [\n    username,\n    email,\n    password,\n    passwordConfirmation,\n    t,\n    executeSignUpMutation,\n  ]);\n\n  const sendEmailVerificationCode = useCallback(() => {\n    if (email.trim().length > 0) {\n      executeSendEmailVerificationCodeMutation({\n        email: email.trim(),\n      });\n    }\n  }, [email, executeSendEmailVerificationCodeMutation]);\n\n  const resetPassword = useCallback(() => {\n    if (password === passwordConfirmation) {\n      executeResetPasswordMutation({\n        email: email.trim(),\n        verificationCode: verificationCode.trim(),\n        password,\n      });\n    } else {\n      setErrorMessage(t(\"widget/crossnote.auth/password-mismatch\"));\n    }\n  }, [\n    email,\n    password,\n    passwordConfirmation,\n    executeResetPasswordMutation,\n    verificationCode,\n    t,\n  ]);\n\n  const close = useCallback(() => {\n    setStage(Stage.Signin);\n    setErrorMessage(\"\");\n    props.onClose();\n  }, [props]);\n\n  useEffect(() => {\n    if (resSignIn.error) {\n      setErrorMessage(\n        resSignIn.error.message.replace(/\\[GraphQL\\]/, \"\").trim(),\n      );\n    } else if (resSignIn.data && resSignIn.data.signIn) {\n      localStorage.setItem(\"token\", resSignIn.data.signIn.token);\n      browserHistory.replace(\"/\");\n      window.location.reload();\n    }\n  }, [resSignIn]);\n\n  useEffect(() => {\n    if (resSignUp.error) {\n      setErrorMessage(\n        resSignUp.error.message.replace(/\\[GraphQL\\]/, \"\").trim(),\n      );\n    } else if (resSignUp.data && resSignUp.data.signUp) {\n      localStorage.setItem(\"token\", resSignUp.data.signUp.token);\n      browserHistory.replace(\"/\");\n      window.location.reload();\n    }\n  }, [resSignUp]);\n\n  useEffect(() => {\n    if (resSendEmailVerificationCode.error) {\n      setErrorMessage(\n        resSendEmailVerificationCode.error.message\n          .replace(/\\[GraphQL\\]/, \"\")\n          .trim(),\n      );\n    } else if (resSendEmailVerificationCode.data) {\n      if (!resSendEmailVerificationCode.data.sendEmailVerificationCode) {\n        setErrorMessage(t(\"widget/crossnote.auth/failed_to_send_code\"));\n      } else {\n        new Noty({\n          type: \"success\",\n          text: t(\"widget/crossnote.auth/verification_code_sent\") + email,\n          layout: \"topRight\",\n          theme: \"relax\",\n          timeout: 2000,\n        }).show();\n      }\n    }\n  }, [resSendEmailVerificationCode, email, t]);\n\n  useEffect(() => {\n    if (resResetPassword.error) {\n      setErrorMessage(\n        resResetPassword.error.message.replace(/\\[GraphQL\\]/, \"\").trim(),\n      );\n    } else if (resResetPassword.data) {\n      if (resResetPassword.data.resetPassword) {\n        new Noty({\n          type: \"success\",\n          text: t(\"widget/crossnote.auth/password_reset\") + \" \" + email,\n          layout: \"topRight\",\n          theme: \"relax\",\n          timeout: 2000,\n        }).show();\n        setTimeout(() => {\n          window.location.reload();\n        }, 4000);\n      } else {\n        setErrorMessage(t(\"widget/crossnote.auth/failed_to_reset_password\"));\n      }\n    }\n  }, [resResetPassword, email, t]);\n\n  useEffect(() => {\n    setLoggedIn(cloudContainer.loggedIn);\n  }, [cloudContainer.loggedIn]);\n\n  if (cloudContainer.loggedIn) {\n    return (\n      <Dialog open={props.open} onClose={close}>\n        <DialogContent>\n          <Box\n            style={{\n              display: \"flex\",\n              justifyContent: \"space-between\",\n            }}\n          >\n            <Box\n              style={{\n                display: \"flex\",\n                flexDirection: \"row\",\n                alignItems: \"center\",\n              }}\n            >\n              <Typography variant=\"body1\" style={{ marginBottom: \"0\" }}>\n                {t(\"widget/crossnote.auth/hello\")}\n              </Typography>\n              <Avatar\n                className={clsx(classes.avatar)}\n                src={\n                  cloudContainer.viewer.avatar ||\n                  \"data:image/png;base64,\" +\n                    new Identicon(\n                      sha256(cloudContainer.viewer.username),\n                      80,\n                    ).toString()\n                }\n              ></Avatar>\n              <Typography variant=\"body1\" style={{ marginBottom: \"0\" }}>\n                {\"  \" + cloudContainer.viewer.username}!\n              </Typography>\n            </Box>\n            <Button\n              variant={\"outlined\"}\n              color={\"secondary\"}\n              onClick={() => {\n                cloudContainer.logout();\n              }}\n              style={{ marginLeft: \"8px\" }}\n            >\n              {t(\"settings/log-out\")}\n            </Button>\n          </Box>\n        </DialogContent>\n      </Dialog>\n    );\n  }\n\n  return (\n    <Dialog open={props.open} onClose={close}>\n      <DialogTitle>{t(\"widget/crossnote.auth/welcome\")}</DialogTitle>\n      <DialogContent style={{ width: \"400px\", maxWidth: \"100%\" }}>\n        {stage === Stage.Signup ? (\n          <TextField\n            className={clsx(classes.email)}\n            label={t(\"general/Username\")}\n            variant=\"outlined\"\n            value={username}\n            fullWidth={true}\n            onChange={(event) => {\n              setErrorMessage(\"\");\n              setUsername(event.target.value);\n            }}\n          ></TextField>\n        ) : null}\n        <TextField\n          className={clsx(classes.email)}\n          label={t(\"general/Email\")}\n          variant=\"outlined\"\n          value={email}\n          fullWidth={true}\n          onChange={(event) => {\n            setErrorMessage(\"\");\n            setEmail(event.target.value);\n          }}\n          onClick={(event) => {\n            event.currentTarget.focus();\n          }}\n        ></TextField>\n        {stage === Stage.ForgotPassword && email.trim().length > 0 ? (\n          <Box\n            style={{\n              display: \"flex\",\n              flexDirection: \"row\",\n              alignItems: \"center\",\n              justifyContent: \"space-evenly\",\n            }}\n          >\n            <TextField\n              className={clsx(classes.password)}\n              label={t(\"widget/crossnote.auth/enter-the-verification-code\")}\n              variant=\"outlined\"\n              value={verificationCode}\n              fullWidth={true}\n              onChange={(event) => {\n                setErrorMessage(\"\");\n                setVerificationCode(event.target.value);\n              }}\n            ></TextField>\n            <Button\n              variant={\"outlined\"}\n              color={\"primary\"}\n              style={{ marginBottom: \"24px\" }}\n              onClick={() => sendEmailVerificationCode()}\n              disabled={resSendEmailVerificationCode.fetching}\n            >\n              {resSendEmailVerificationCode.fetching\n                ? t(\"general/sending\")\n                : t(\"widget/crossnote.auth/get-code\")}\n            </Button>\n          </Box>\n        ) : null}\n        {(stage === Stage.Signin ||\n          stage === Stage.Signup ||\n          (stage === Stage.ForgotPassword &&\n            verificationCode.trim().length > 0)) && (\n          <TextField\n            className={clsx(classes.password)}\n            label={t(\"general/Password\")}\n            variant=\"outlined\"\n            type=\"password\"\n            value={password}\n            fullWidth={true}\n            onChange={(event) => {\n              setErrorMessage(\"\");\n              setPassword(event.target.value);\n            }}\n            onKeyDown={(event) => {\n              if (event.which === 13) {\n                if (stage === Stage.Signin) {\n                  signin();\n                } /* else {\n              signup();\n            }*/\n              }\n            }}\n          ></TextField>\n        )}\n        {(stage === Stage.Signup ||\n          (stage === Stage.ForgotPassword &&\n            verificationCode.trim().length > 0)) && (\n          <TextField\n            className={clsx(classes.password)}\n            label={t(\"general/confirm-password\")}\n            variant=\"outlined\"\n            type=\"password\"\n            value={passwordConfirmation}\n            fullWidth={true}\n            onChange={(event) => {\n              setErrorMessage(\"\");\n              setPasswordConfirmation(event.target.value);\n            }}\n            onKeyDown={(event) => {\n              if (event.which === 13) {\n                signup();\n              }\n            }}\n          ></TextField>\n        )}\n        {stage === Stage.Signin ? (\n          <>\n            <Button\n              className={clsx(classes.authBtn)}\n              variant=\"contained\"\n              color=\"primary\"\n              onClick={() => signin()}\n              disabled={resSignIn.fetching}\n              fullWidth={true}\n            >\n              {t(\"general/sign-in\")}\n            </Button>\n            <Typography style={{ textAlign: \"center\" }}>\n              {t(\"widget/crossnote.auth/Or\")}\n            </Typography>\n            <Chip\n              label={t(\"widget/crossnote.auth/sign-in-with-github-account\")}\n              icon={<Github></Github>}\n              style={{ marginBottom: \"16px\", marginTop: \"16px\", width: \"100%\" }}\n              onClick={() => startGitHubOAuth()}\n            ></Chip>\n            <Divider></Divider>\n            <Link\n              className={clsx(classes.switchLink)}\n              onClick={() => setStage(Stage.Signup)}\n            >\n              {t(\"widget/crossnote.auth/doesnt-have-account\")}\n            </Link>\n            <br></br>\n            <Link\n              className={clsx(classes.switchLink)}\n              onClick={() => setStage(Stage.ForgotPassword)}\n            >\n              {t(\"widget/crossnote.auth/forgot_password\")}\n            </Link>\n          </>\n        ) : stage === Stage.Signup ? (\n          <>\n            <Button\n              className={clsx(classes.authBtn)}\n              variant=\"contained\"\n              color=\"primary\"\n              onClick={() => signup()}\n              disabled={resSignUp.fetching}\n              fullWidth={true}\n            >\n              {t(\"general/sign-up\")}\n            </Button>\n            <Link\n              className={clsx(classes.switchLink)}\n              onClick={() => setStage(Stage.Signin)}\n            >\n              {t(\"widget/crossnote.auth/already-have-an-account\")}\n            </Link>\n            <br></br>\n            <Link\n              className={clsx(classes.switchLink)}\n              onClick={() => setStage(Stage.ForgotPassword)}\n            >\n              {t(\"widget/crossnote.auth/forgot_password\")}\n            </Link>\n          </>\n        ) : (\n          verificationCode.length > 0 && (\n            <>\n              <Button\n                className={clsx(classes.authBtn)}\n                variant=\"contained\"\n                color=\"primary\"\n                onClick={() => resetPassword()}\n                disabled={resResetPassword.fetching}\n                fullWidth={true}\n              >\n                {t(\"widget/crossnote.auth/reset-password\")}\n              </Button>\n              <Link\n                className={clsx(classes.switchLink)}\n                onClick={() => setStage(Stage.Signin)}\n              >\n                {t(\"widget/crossnote.auth/already-have-an-account\")}\n              </Link>\n            </>\n          )\n        )}\n        {errorMessage.length ? (\n          <Typography className={clsx(classes.errorMessage)}>\n            {errorMessage}\n          </Typography>\n        ) : null}\n      </DialogContent>\n    </Dialog>\n  );\n}\n","import { useState, useEffect, useCallback } from \"react\";\nimport { createContainer } from \"unstated-next\";\nimport {\n  PageInfo,\n  useNotificationsQuery,\n  Notification,\n  useDeleteNotificationMutation,\n  useDeleteAllNotificationsMutation,\n} from \"../generated/graphql\";\nimport { EmptyPageInfo } from \"../utilities/note\";\nimport Noty from \"noty\";\n\ninterface InitialState {}\n\nfunction useNotificationsContainer(initialState: InitialState) {\n  const [pageInfo, setPageInfo] = useState<PageInfo>(EmptyPageInfo);\n  const [notifications, setNotifications] = useState<Notification[]>([]);\n  const [needsRefetch, setNeedsRefetch] = useState<boolean>(false);\n  const [resNotifications, executeNotificationsQuery] = useNotificationsQuery({\n    variables: {\n      before: pageInfo.startCursor,\n      after: pageInfo.endCursor,\n      first: 0,\n      last: 20,\n    },\n    requestPolicy: \"network-only\",\n    pause: true,\n  });\n  const [\n    resDeleteNotification,\n    executeDeleteNotificationMutation,\n  ] = useDeleteNotificationMutation();\n  const [\n    resDeleteAllNotifications,\n    executeDeleteAllNotificationsMutation,\n  ] = useDeleteAllNotificationsMutation();\n\n  const fetchMoreNotifications = useCallback(() => {\n    executeNotificationsQuery({\n      requestPolicy: \"network-only\",\n    });\n  }, [executeNotificationsQuery]);\n\n  const deleteNotification = useCallback(\n    (notificationID: string) => {\n      setNotifications((notifications) => {\n        if (\n          pageInfo.hasPreviousPage &&\n          pageInfo.startCursor === notificationID\n        ) {\n          const notification = notifications[1];\n          if (notification) {\n            setPageInfo({\n              startCursor: notification.id,\n              endCursor: pageInfo.endCursor,\n              hasPreviousPage: pageInfo.hasPreviousPage,\n              hasNextPage: pageInfo.hasNextPage,\n            });\n          }\n        }\n        return notifications.filter((n) => n.id !== notificationID);\n      });\n      executeDeleteNotificationMutation({\n        notificationID: notificationID,\n      });\n    },\n    [executeDeleteNotificationMutation, pageInfo],\n  );\n\n  const deleteAllNotifications = useCallback(() => {\n    setNotifications([]);\n    setPageInfo(EmptyPageInfo);\n    executeDeleteAllNotificationsMutation();\n  }, [executeDeleteAllNotificationsMutation]);\n\n  const refresh = useCallback(() => {\n    setNotifications([]);\n    setPageInfo(EmptyPageInfo);\n    setNeedsRefetch(true);\n  }, [executeNotificationsQuery]);\n\n  useEffect(() => {\n    if (resNotifications.fetching) {\n    } /*else if (resNotifications.error) {\n      // There might be records that are not found because origin(user) undo the action.\n      new Noty({\n        type: \"error\",\n        text: resNotifications.error.message,\n        layout: \"topRight\",\n        theme: \"relax\",\n        timeout: 2000\n      }).show();\n    } */ else if (\n      resNotifications.data &&\n      resNotifications.data.viewer.notifications\n    ) {\n      const ns = resNotifications.data.viewer.notifications;\n      const pageInfo = ns.pageInfo;\n      const edges = ns.edges;\n      const newNotifications = (edges || [])\n        .map((edge) => {\n          if (edge) {\n            return edge.node as any;\n          } else {\n            return null;\n          }\n        })\n        .reverse()\n        .filter((x) => x);\n      setNotifications((notifications) =>\n        [...notifications, ...newNotifications].filter(\n          (notification, index, self) =>\n            index === self.findIndex((m) => m.id === notification.id),\n        ),\n      );\n      setPageInfo(pageInfo);\n    }\n  }, [resNotifications]);\n\n  useEffect(() => {\n    if (resDeleteNotification.fetching) {\n    } else if (resDeleteNotification.error) {\n      new Noty({\n        type: \"error\",\n        text: resDeleteNotification.error.message,\n        layout: \"topRight\",\n        theme: \"relax\",\n        timeout: 2000,\n      }).show();\n    } else if (\n      resDeleteNotification.data &&\n      resDeleteNotification.data.deleteNotification\n    ) {\n    }\n  }, [resDeleteNotification]);\n\n  useEffect(() => {\n    if (resDeleteAllNotifications.fetching) {\n    } else if (resDeleteAllNotifications.error) {\n      new Noty({\n        type: \"error\",\n        text: resDeleteAllNotifications.error.message,\n        layout: \"topRight\",\n        theme: \"relax\",\n        timeout: 2000,\n      }).show();\n    } else if (\n      resDeleteAllNotifications.data &&\n      resDeleteAllNotifications.data.deleteAllNotifications\n    ) {\n      setNotifications([]);\n      setPageInfo(EmptyPageInfo);\n    }\n  }, [resDeleteAllNotifications]);\n\n  useEffect(() => {\n    if (needsRefetch) {\n      fetchMoreNotifications();\n      setNeedsRefetch(false);\n    }\n  }, [needsRefetch, fetchMoreNotifications]);\n\n  return {\n    fetching: resNotifications.fetching,\n    notifications,\n    pageInfo,\n    fetchMoreNotifications,\n    deleteNotification,\n    deleteAllNotifications,\n    refresh,\n  };\n}\n\nexport const NotificationsContainer = createContainer(\n  useNotificationsContainer,\n);\n","import React from \"react\";\nimport { User } from \"../../generated/graphql\";\nimport { Typography, Box, Avatar, Tooltip } from \"@material-ui/core\";\nimport { createStyles, makeStyles, Theme } from \"@material-ui/core/styles\";\nimport clsx from \"clsx\";\nimport Identicon from \"identicon.js\";\nimport { sha256 } from \"js-sha256\";\nimport { formatRelative } from \"date-fns\";\nimport { languageCodeToDateFNSLocale } from \"../../i18n/i18n\";\nimport { SettingsContainer } from \"../../containers/settings\";\n\nconst useStyles = makeStyles((theme: Theme) =>\n  createStyles({\n    avatarPanel: {\n      display: \"flex\",\n      flexDirection: \"row\",\n      alignItems: \"center\",\n      justifyContent: \"space-between\",\n      width: \"100%\",\n    },\n    row: {\n      display: \"flex\",\n      flexDirection: \"row\",\n      alignItems: \"center\",\n    },\n    avatar: {\n      borderRadius: \"4px\",\n      width: \"32px\",\n      height: \"32px\",\n      cursor: \"pointer\",\n    },\n    title: {\n      marginLeft: theme.spacing(1),\n    },\n  }),\n);\n\ninterface NotificationAvatarPanelProps {\n  user: User;\n  createdAt: number;\n  title: string;\n}\nexport function NotificationAvatarPanel(props: NotificationAvatarPanelProps) {\n  const classes = useStyles(props);\n  const user = props.user;\n  const createdAt = props.createdAt;\n  const settingsContainer = SettingsContainer.useContainer();\n\n  return (\n    <Box className={clsx(classes.avatarPanel)}>\n      <Box className={clsx(classes.row)}>\n        <Tooltip title={user.username}>\n          <Avatar\n            className={clsx(classes.avatar)}\n            onClick={() => {\n              // browserHistory.push(`/user/${user.username}`);\n            }}\n            variant={\"rounded\"}\n            src={\n              user.avatar ||\n              \"data:image/png;base64,\" +\n                new Identicon(sha256(user.username), 80).toString()\n            }\n          ></Avatar>\n        </Tooltip>\n        <Typography variant={\"body1\"} className={clsx(classes.title)}>\n          {props.title}\n        </Typography>\n      </Box>\n      <Typography variant=\"body2\" color={\"textSecondary\"}>\n        {formatRelative(new Date(createdAt), new Date(), {\n          locale: languageCodeToDateFNSLocale(settingsContainer.language),\n        })}\n      </Typography>\n    </Box>\n  );\n}\n","import { Box } from \"@material-ui/core\";\nimport { createStyles, makeStyles, Theme } from \"@material-ui/core/styles\";\nimport clsx from \"clsx\";\nimport React, { useEffect } from \"react\";\nimport { Notification } from \"../../generated/graphql\";\nimport { useTranslation } from \"react-i18next\";\nimport { NotificationAvatarPanel } from \"./NotificationAvatarPanel\";\nimport { WidgetTopPanel } from \"../../editor/widgets/widget/WidgetTopPanel\";\nimport { renderPreview } from \"vickymd/preview\";\n\nconst useStyles = makeStyles((theme: Theme) =>\n  createStyles({\n    notification: {\n      display: \"flex\",\n      flexDirection: \"column\",\n      alignItems: \"flex-start\",\n      flexWrap: \"wrap\",\n      width: \"100%\",\n    },\n  }),\n);\n\ninterface Props {\n  notification: Notification;\n}\nexport function CommentWidgetMessagePostingNotification(props: Props) {\n  const classes = useStyles(props);\n  const { t } = useTranslation();\n  const notification = props.notification;\n  const message = (notification as any).event.message;\n  let widget;\n  if (message) {\n    widget = message.widget;\n  }\n  const [previewElement, setPreviewElement] = React.useState<HTMLElement>(null);\n\n  useEffect(() => {\n    if (previewElement) {\n      renderPreview(previewElement, message.markdown);\n    }\n  }, [previewElement, message.markdown]);\n\n  if (!message || !widget) {\n    return null;\n  }\n\n  return (\n    <Box key={notification.id} className={clsx(classes.notification)}>\n      <NotificationAvatarPanel\n        user={notification.origin}\n        createdAt={notification.createdAt}\n        title={t(\"notification/replies-to-you-in\")}\n      ></NotificationAvatarPanel>\n      <WidgetTopPanel widget={widget} isPreview={true}></WidgetTopPanel>\n      <div\n        className={\"preview\"}\n        ref={(element: HTMLElement) => {\n          setPreviewElement(element);\n        }}\n        style={{ backgroundColor: \"inherit\" }}\n      ></div>\n    </Box>\n  );\n}\n","import {\n  Box,\n  Button,\n  Typography,\n  List,\n  ListItem,\n  ListItemIcon,\n  IconButton,\n  Card,\n  Divider,\n  Hidden,\n} from \"@material-ui/core\";\nimport { createStyles, makeStyles, Theme } from \"@material-ui/core/styles\";\nimport clsx from \"clsx\";\nimport React, { useEffect, useState } from \"react\";\nimport { NotificationsContainer } from \"../containers/notifications\";\nimport { NotificationEventType } from \"../generated/graphql\";\nimport { useTranslation } from \"react-i18next\";\nimport { Close, Menu as MenuIcon } from \"mdi-material-ui\";\nimport { CloudContainer } from \"../containers/cloud\";\nimport { CommentWidgetMessagePostingNotification } from \"./notifications/CommentWidgetMessagePostingNotification\";\n\nconst useStyles = makeStyles((theme: Theme) =>\n  createStyles({\n    notifications: {\n      width: \"100%\",\n      backgroundColor: theme.palette.background.default,\n      padding: theme.spacing(2),\n      [theme.breakpoints.down(\"sm\")]: {\n        padding: theme.spacing(1),\n      },\n    },\n    notificationsCard: {\n      margin: theme.spacing(2),\n      [theme.breakpoints.down(\"sm\")]: {\n        marginLeft: \"0\",\n        marginRight: \"0\",\n      },\n    },\n    topBar: {\n      display: \"flex\",\n      flexDirection: \"row\",\n      alignItems: \"center\",\n      justifyContent: \"space-between\",\n    },\n    row: {\n      display: \"flex\",\n      flexDirection: \"row\",\n      alignItems: \"center\",\n    },\n  }),\n);\n\ninterface Props {\n  toggleDrawer: () => void;\n}\nexport function Notifications(props: Props) {\n  const classes = useStyles(props);\n  const { t } = useTranslation();\n  const cloudContainer = CloudContainer.useContainer();\n  const notificationsContainer = NotificationsContainer.useContainer();\n\n  /*\n  useEffect(() => {\n    const mainPanel = document.getElementById(\"main-panel\");\n    if (mainPanel) {\n      mainPanel.onscroll = () => {\n        if (mainPanel.scrollTop > mainPanel.offsetHeight / 2) {\n          if (\n            !notificationsContainer.fetching &&\n            notificationsContainer.pageInfo.hasPreviousPage\n          ) {\n            notificationsContainer.fetchMoreNotifications();\n          }\n        }\n      };\n    }\n  }, [notificationsContainer.fetchMoreNotifications, notificationsContainer]);\n  */\n\n  useEffect(\n    () => {\n      notificationsContainer.refresh();\n    },\n    [\n      /*notificationsContainer*/\n    ],\n  );\n\n  return (\n    <Box className={clsx(classes.notifications)}>\n      <Box className={clsx(classes.topBar)}>\n        <Box className={clsx(classes.row)}>\n          <Hidden smUp implementation=\"css\">\n            <IconButton onClick={props.toggleDrawer}>\n              <MenuIcon></MenuIcon>\n            </IconButton>\n          </Hidden>\n          <Typography variant={\"h6\"}>{t(\"general/Notifications\")}</Typography>\n        </Box>\n        <Button\n          variant={\"contained\"}\n          color={\"primary\"}\n          onClick={() => {\n            notificationsContainer.deleteAllNotifications();\n            cloudContainer.clearNotificationsCount();\n          }}\n        >\n          {t(\"general/clear-all\")}\n        </Button>\n      </Box>\n      {!notificationsContainer.notifications.length ? (\n        notificationsContainer.fetching ? (\n          <Typography>{t(\"general/loading-notifications\")}</Typography>\n        ) : (\n          <Typography>{t(\"general/no-notifications-found\")}</Typography>\n        )\n      ) : (\n        <>\n          <Card className={clsx(classes.notificationsCard)}>\n            <List dense={true}>\n              {notificationsContainer.notifications.map((notification, idx) => {\n                let notificationComponent = null;\n                /*if (\n                notification.event!.type === NotificationEventType.UserFollowing\n              ) {\n                notificationComponent = (\n                  <UserFollowingNotificationWidget\n                    notification={notification}\n                  ></UserFollowingNotificationWidget>\n                );\n              }*/\n\n                if (\n                  notification.event!.type ===\n                  NotificationEventType.CommentWidgetMessagePosting\n                ) {\n                  notificationComponent = (\n                    <CommentWidgetMessagePostingNotification\n                      notification={notification}\n                      key={notification.id}\n                    ></CommentWidgetMessagePostingNotification>\n                  );\n                } else {\n                  return null;\n                }\n                return (\n                  <React.Fragment key={notification.id}>\n                    <ListItem key={notification.id}>\n                      <ListItemIcon>\n                        <IconButton\n                          onClick={() => {\n                            notificationsContainer.deleteNotification(\n                              notification.id,\n                            );\n                            cloudContainer.reduceNotificationsCountByOne();\n                          }}\n                        >\n                          <Close></Close>\n                        </IconButton>\n                      </ListItemIcon>\n                      {notificationComponent}\n                    </ListItem>\n                    {idx < notificationsContainer.notifications.length - 1 ? (\n                      <Divider key={idx}></Divider>\n                    ) : null}\n                  </React.Fragment>\n                );\n              })}\n            </List>\n          </Card>\n          {notificationsContainer.pageInfo.hasPreviousPage && (\n            <Box style={{ textAlign: \"center\" }}>\n              {\" \"}\n              <Button\n                style={{ margin: \"16px 0 64px\" }}\n                variant={\"outlined\"}\n                color={\"secondary\"}\n                disabled={notificationsContainer.fetching}\n                onClick={() => notificationsContainer.fetchMoreNotifications()}\n              >\n                {t(\"notification/view-more-notifications\")}\n              </Button>\n            </Box>\n          )}\n        </>\n      )}\n    </Box>\n  );\n}\n","import React, { useState, useEffect } from \"react\";\nimport {\n  Dialog,\n  DialogTitle,\n  DialogContent,\n  TextField,\n  DialogActions,\n  Button,\n  Typography,\n  Box,\n  useTheme,\n  darken,\n} from \"@material-ui/core\";\nimport { useTranslation } from \"react-i18next\";\nimport { usePublishNotebookMutation } from \"../generated/graphql\";\nimport { CloudContainer } from \"../containers/cloud\";\nimport Noty from \"noty\";\n\ninterface Props {\n  open: boolean;\n  onClose: () => void;\n}\nexport default function PublishNotebookDialog(props: Props) {\n  const { t } = useTranslation();\n  const theme = useTheme();\n  const cloudContainer = CloudContainer.useContainer();\n  const [gitURL, setGitURL] = useState<string>(\"\");\n  const [gitBranch, setGitBranch] = useState<string>(\"master\");\n  const [\n    resPublishNotebook,\n    executePublishNotebookMutation,\n  ] = usePublishNotebookMutation();\n\n  useEffect(() => {\n    if (resPublishNotebook.error) {\n      new Noty({\n        type: \"error\",\n        text: t(\"error/failed-to-publish-notebook\"),\n        layout: \"topRight\",\n        theme: \"relax\",\n        timeout: 2000,\n      }).show();\n    } else if (resPublishNotebook.data) {\n      /*\n      new Noty({\n        type: \"success\",\n        text: \"Notebook is published\",\n        layout: \"topRight\",\n        theme: \"relax\",\n        timeout: 2000,\n      }).show();\n      props.onClose();*/\n      window.location.reload();\n    }\n  }, [resPublishNotebook]);\n\n  return (\n    <Dialog open={props.open} onClose={props.onClose}>\n      <DialogTitle>{t(\"general/publish-your-notebook\")}</DialogTitle>\n      <DialogContent>\n        <TextField\n          label={t(\"general/url\")}\n          placeholder={\"https://github.com/0xGG/welcome-notebook.git\"}\n          fullWidth={true}\n          value={gitURL}\n          onChange={(event) => setGitURL(event.target.value)}\n        ></TextField>\n        <TextField\n          label={t(\"general/branch\")}\n          placeholder={\"master\"}\n          fullWidth={true}\n          value={gitBranch}\n          onChange={(event) => setGitBranch(event.target.value)}\n        ></TextField>\n        <Box style={{ marginTop: \"32px\" }}></Box>\n        <Typography variant={\"caption\"}>\n          {\"* \" + t(\"publish-notebook/disclaimer-1\")}\n        </Typography>\n        <br></br>\n        <Typography variant={\"caption\"}>\n          {\"* \" + t(\"publish-notebook/disclaimer-2\")}\n        </Typography>\n        <pre\n          style={{\n            padding: theme.spacing(1),\n            backgroundColor: darken(theme.palette.background.default, 0.01),\n            color: theme.palette.text.primary,\n          }}\n        >\n          <code className=\"language-markdown\">\n            {`--- \nnotebook: \n  owner: ${\n    cloudContainer.viewer\n      ? cloudContainer.viewer.username\n      : t(\"general/Username\")\n  }\n  name: ${t(\"general/notebook-name\") + ` (${t(\"general/optional\")})`}\n---\n\n# ${t(\"general/notebook-name\")}\n...\n`}\n          </code>\n        </pre>\n\n        {/*\n        <Typography variant={\"caption\"}>\n          {\n            \"* We reserve our rights to remove your notebook if it contains content that violates the local laws.\"\n          }\n        \n        </Typography>\n        */}\n      </DialogContent>\n      <DialogActions>\n        <Button\n          variant={\"contained\"}\n          color={\"primary\"}\n          disabled={resPublishNotebook.fetching}\n          onClick={() => {\n            if (gitURL.trim().length > 0) {\n              executePublishNotebookMutation({\n                gitURL: gitURL.trim(),\n                gitBranch: gitBranch.trim() || \"master\",\n              });\n            }\n          }}\n        >\n          {t(\"general/Publish\")}\n        </Button>\n        <Button onClick={props.onClose}>{t(\"general/cancel\")}</Button>\n      </DialogActions>\n    </Dialog>\n  );\n}\n","import React, { useState, useEffect } from \"react\";\nimport { createStyles, makeStyles, Theme } from \"@material-ui/core/styles\";\nimport clsx from \"clsx\";\nimport { NotebookFieldsFragment } from \"../generated/graphql\";\nimport {\n  Box,\n  ButtonBase,\n  Typography,\n  useTheme,\n  Avatar,\n  Tooltip,\n} from \"@material-ui/core\";\nimport { useTranslation } from \"react-i18next\";\nimport {\n  Summary,\n  getHeaderFromMarkdown,\n  generateSummaryFromMarkdown,\n} from \"../utilities/note\";\nimport Identicon from \"identicon.js\";\nimport { sha256 } from \"js-sha256\";\nimport { Star, StarOutline } from \"mdi-material-ui\";\nimport { CloudContainer } from \"../containers/cloud\";\nimport { resolveNotebookFilePath } from \"../utilities/image\";\n\nconst useStyles = makeStyles((theme: Theme) =>\n  createStyles({\n    notebookCard: {\n      width: \"100%\",\n      display: \"flex\",\n      flexDirection: \"row\",\n      alignItems: \"flex-start\",\n      padding: theme.spacing(2, 0.5, 0),\n      textAlign: \"left\",\n      cursor: \"default\",\n      backgroundColor: theme.palette.background.paper,\n    },\n    selected: {\n      borderLeft: `4px solid ${theme.palette.primary.main}`,\n    },\n    unselected: {\n      borderLeft: `4px solid rgba(0, 0, 0, 0)`,\n    },\n    leftPanel: {\n      width: \"48px\",\n      paddingLeft: theme.spacing(0.5),\n    },\n    rightPanel: {\n      width: \"calc(100% - 48px)\",\n      borderBottom: `1px solid ${theme.palette.divider}`,\n    },\n    bottomPanel: {\n      display: \"flex\",\n      flexDirection: \"row\",\n      alignItems: \"center\",\n      color: theme.palette.text.secondary,\n    },\n    avatar: {\n      width: \"24px\",\n      height: \"24px\",\n      borderRadius: \"4px\",\n    },\n    header: {\n      marginBottom: theme.spacing(1),\n      wordBreak: \"break-all\",\n    },\n    summary: {\n      \"color\": theme.palette.text.secondary,\n      \"marginBottom\": theme.spacing(1),\n      \"paddingRight\": theme.spacing(2),\n      \"display\": \"-webkit-box\",\n      \"lineHeight\": \"1.3rem !important\",\n      \"textOverflow\": \"ellipsis !important\",\n      \"overflow\": \"hidden !important\",\n      \"maxWidth\": \"100%\",\n      \"maxHeight\": \"2.6rem\", // lineHeight x -website-line-clamp\n      \"-webkit-line-clamp\": 2,\n      \"-webkit-box-orient\": \"vertical\",\n      \"wordBreak\": \"break-all\",\n    },\n    images: {\n      display: \"flex\",\n      width: \"100%\",\n      overflow: \"hidden\",\n      position: \"relative\",\n      marginBottom: theme.spacing(1),\n    },\n    imagesWrapper: {\n      display: \"flex\",\n      alignItems: \"center\",\n      flexDirection: \"row\",\n    },\n    image: {\n      width: \"128px\",\n      height: \"80px\",\n      marginRight: theme.spacing(1),\n      position: \"relative\",\n      backgroundSize: \"cover\",\n      backgroundPosition: \"center\",\n      display: \"block\",\n      borderRadius: \"6px\",\n    },\n    star: {\n      color: theme.palette.secondary.main,\n      marginRight: theme.spacing(0.5),\n    },\n  }),\n);\ninterface Props {\n  notebook: NotebookFieldsFragment;\n}\nexport function NotebookCard(props: Props) {\n  const theme = useTheme();\n  const classes = useStyles(props);\n  const { t } = useTranslation();\n  const cloudContainer = CloudContainer.useContainer();\n  const notebook = props.notebook;\n  const [header, setHeader] = useState<string>(\"\");\n  const [summary, setSummary] = useState<Summary>(null);\n  const [images, setImages] = useState<string[]>([]);\n\n  useEffect(() => {\n    setHeader(getHeaderFromMarkdown(notebook.markdown));\n    generateSummaryFromMarkdown(\n      notebook.markdown.trim() || t(\"general/this-notebook-is-empty\"),\n    )\n      .then((summary) => {\n        setSummary(summary);\n\n        // render images\n        setImages(\n          summary.images\n            .map((image) => resolveNotebookFilePath(notebook, image))\n            .filter((x) => x.length > 0)\n            .slice(0, 3) || [],\n        );\n      })\n      .catch((error) => {});\n  }, [notebook, t]);\n\n  return (\n    <ButtonBase\n      className={clsx(\n        classes.notebookCard,\n        cloudContainer.selectedNotebook &&\n          cloudContainer.selectedNotebook.id === notebook.id\n          ? classes.selected\n          : classes.unselected,\n      )}\n      onClick={() => {\n        cloudContainer.setSelectedNotebook(notebook);\n        cloudContainer.setDisplayNotebookPreview(true);\n      }}\n    >\n      <Box className={clsx(classes.leftPanel)}>\n        <Tooltip title={notebook.owner.username}>\n          <Avatar\n            className={clsx(classes.avatar)}\n            variant={\"rounded\"}\n            src={\n              notebook.owner.avatar ||\n              \"data:image/png;base64,\" +\n                new Identicon(sha256(notebook.owner.username), 80).toString()\n            }\n          ></Avatar>\n        </Tooltip>\n      </Box>\n      <Box className={clsx(classes.rightPanel)}>\n        {header && (\n          <Typography\n            style={{ fontWeight: \"bold\" }}\n            variant={\"body1\"}\n            className={clsx(classes.header)}\n          >\n            {header}\n          </Typography>\n        )}\n        {summary && summary.summary.trim().length > 0 && (\n          <Typography className={clsx(classes.summary)}>\n            {summary && summary.summary}\n          </Typography>\n        )}\n        {images.length > 0 && (\n          <Box className={clsx(classes.images)}>\n            <Box className={clsx(classes.imagesWrapper)}>\n              {images.map((image) => (\n                <div\n                  key={image}\n                  className={clsx(classes.image)}\n                  style={{\n                    backgroundImage: `url(${image})`,\n                  }}\n                ></div>\n              ))}\n            </Box>\n          </Box>\n        )}\n        <Box className={clsx(classes.bottomPanel)}>\n          {notebook.isStarred ? (\n            <Star className={clsx(classes.star)}></Star>\n          ) : (\n            <StarOutline\n              className={clsx(classes.star)}\n              style={{ color: theme.palette.text.secondary }}\n            ></StarOutline>\n          )}\n          {\" \" + notebook.starsCount}\n        </Box>\n      </Box>\n    </ButtonBase>\n  );\n}\n","import React, { useState, useEffect } from \"react\";\nimport {\n  createStyles,\n  makeStyles,\n  Theme,\n  useTheme,\n} from \"@material-ui/core/styles\";\nimport clsx from \"clsx\";\nimport { Box, Typography, CircularProgress, Button } from \"@material-ui/core\";\nimport {\n  NotebookFieldsFragment,\n  useNotebooksQuery,\n  NotebookOrderBy,\n} from \"../generated/graphql\";\nimport { useTranslation } from \"react-i18next\";\nimport { NotebookCard } from \"./NotebookCard\";\nimport { CloudContainer } from \"../containers/cloud\";\n\nconst useStyles = makeStyles((theme: Theme) =>\n  createStyles({\n    notebooksList: {\n      position: \"relative\",\n      flex: \"1\",\n      overflowY: \"auto\",\n      paddingBottom: theme.spacing(12),\n      marginTop: theme.spacing(0.5),\n    },\n  }),\n);\n\ninterface Props {\n  searchValue: string;\n}\n\nconst perPage = 20;\nexport function Notebooks(props: Props) {\n  const classes = useStyles(props);\n  const { t } = useTranslation();\n  const theme = useTheme();\n  const cloudContainer = CloudContainer.useContainer();\n  const [notebooksListElement, setNotebooksListElement] = useState<\n    HTMLDivElement\n  >(null);\n  const [notebooks, setNotebooks] = useState<NotebookFieldsFragment[]>([]);\n  const [page, setPage] = useState<number>(0);\n  const [resNotebooks, executeNotebooksQuery] = useNotebooksQuery({\n    variables: {\n      page: page,\n      perPage,\n      orderBy: NotebookOrderBy.TotalStarsCount,\n      query: props.searchValue,\n    },\n    pause: true,\n  });\n  const [finishedLoadingAll, setFinishedLoadingAll] = useState<boolean>(false);\n\n  useEffect(() => {\n    return () => {\n      cloudContainer.setSelectedNotebook(null);\n    };\n  }, []);\n\n  useEffect(() => {\n    setNotebooks([]);\n    setPage(0);\n    setFinishedLoadingAll(false);\n  }, [props.searchValue]);\n\n  useEffect(() => {\n    // Init\n    if (notebooks.length === 0 && page === 0 && finishedLoadingAll === false) {\n      executeNotebooksQuery();\n    }\n  }, [notebooks, page, finishedLoadingAll, executeNotebooksQuery]);\n\n  useEffect(() => {\n    if (!finishedLoadingAll && page !== 0) {\n      executeNotebooksQuery();\n    }\n  }, [page, finishedLoadingAll]);\n\n  useEffect(() => {\n    if (resNotebooks.error) {\n    } else if (resNotebooks.data) {\n      const newNotebooks = resNotebooks.data.notebooks;\n      setNotebooks((notebooks) => {\n        const pendingNotebooks = [...notebooks, ...newNotebooks]\n          .reverse()\n          .filter(\n            (notebook, offset, self) =>\n              self.findIndex((n) => n.id === notebook.id) === offset,\n          )\n          .reverse();\n        return pendingNotebooks;\n      });\n      if (newNotebooks.length < perPage) {\n        setFinishedLoadingAll(true);\n      }\n      resNotebooks.data = null;\n    }\n  }, [resNotebooks]);\n\n  useEffect(() => {\n    if (!cloudContainer.selectedNotebook) {\n      cloudContainer.setSelectedNotebook(notebooks[0]);\n    }\n  }, [notebooks]);\n\n  return (\n    <div\n      className={clsx(classes.notebooksList)}\n      ref={(element: HTMLElement) => {\n        setNotebooksListElement(element as HTMLDivElement);\n      }}\n    >\n      {notebooks.map((notebook) => {\n        return (\n          <NotebookCard notebook={notebook} key={notebook.id}></NotebookCard>\n        );\n      })}\n      {!finishedLoadingAll &&\n        (resNotebooks.fetching ? (\n          <Box style={{ marginTop: theme.spacing(2), textAlign: \"center\" }}>\n            <CircularProgress></CircularProgress>\n          </Box>\n        ) : (\n          <Box style={{ textAlign: \"center\", margin: theme.spacing(2) }}>\n            <Button\n              color={\"primary\"}\n              variant={\"outlined\"}\n              onClick={() => {\n                console.log(\"clicked\");\n                setPage((page) => page + 1);\n              }}\n            >\n              {\"View more notebooks\"}\n            </Button>\n          </Box>\n        ))}\n      {finishedLoadingAll ? (\n        <Typography\n          style={{\n            textAlign: \"center\",\n            marginTop: \"32px\",\n          }}\n          variant={\"body2\"}\n        >\n          {\"🧐 \" + t(\"general/no-more-notebooks-found\")}\n        </Typography>\n      ) : null}\n    </div>\n  );\n}\n","import React, { useState, useCallback } from \"react\";\nimport {\n  fade,\n  createStyles,\n  makeStyles,\n  Theme,\n} from \"@material-ui/core/styles\";\nimport clsx from \"clsx\";\nimport {\n  Magnify,\n  Cog,\n  Menu as MenuIcon,\n  SortVariant,\n  SortDescending,\n  SortAscending,\n  Publish,\n} from \"mdi-material-ui\";\nimport {\n  Box,\n  Button,\n  Card,\n  Hidden,\n  IconButton,\n  InputBase,\n  Typography,\n} from \"@material-ui/core\";\nimport { useTranslation } from \"react-i18next\";\nimport PublishNotebookDialog from \"./PublishNotebookDialog\";\nimport { CloudContainer } from \"../containers/cloud\";\nimport { Notebooks } from \"./Notebooks\";\n\nconst useStyles = makeStyles((theme: Theme) =>\n  createStyles({\n    explorePanel: {\n      position: \"relative\",\n      display: \"flex\",\n      flexDirection: \"column\",\n      height: \"100%\",\n      backgroundColor: theme.palette.background.default,\n    },\n    topPanel: {\n      padding: theme.spacing(1),\n      borderRadius: 0,\n      backgroundColor: theme.palette.background.paper,\n    },\n    row: {\n      display: \"flex\",\n      alignItems: \"center\",\n    },\n    sectionName: {\n      marginLeft: theme.spacing(1),\n    },\n    search: {\n      \"position\": \"relative\",\n      \"borderRadius\": theme.shape.borderRadius,\n      \"backgroundColor\": fade(theme.palette.common.white, 0.15),\n      \"&:hover\": {\n        backgroundColor: fade(theme.palette.common.white, 0.25),\n      },\n      \"marginRight\": 0, // theme.spacing(2),\n      \"marginLeft\": 0,\n      \"width\": \"100%\",\n      [theme.breakpoints.up(\"sm\")]: {\n        // marginLeft: theme.spacing(3),\n        // width: \"auto\"\n      },\n    },\n    searchIcon: {\n      width: theme.spacing(7),\n      height: \"100%\",\n      position: \"absolute\",\n      pointerEvents: \"none\",\n      display: \"flex\",\n      alignItems: \"center\",\n      justifyContent: \"center\",\n    },\n    inputRoot: {\n      color: \"inherit\",\n      border: \"1px solid #bbb\",\n      borderRadius: \"4px\",\n      width: \"100%\",\n    },\n    inputInput: {\n      padding: theme.spacing(1, 1, 1, 7),\n      transition: theme.transitions.create(\"width\"),\n      width: \"100%\",\n      [theme.breakpoints.up(\"md\")]: {\n        // width: 200\n      },\n    },\n  }),\n);\n\ninterface Props {\n  toggleDrawer: () => void;\n}\n\nexport default function ExplorePanel(props: Props) {\n  const classes = useStyles(props);\n  const { t } = useTranslation();\n  const cloudContainer = CloudContainer.useContainer();\n\n  const [publishNotebookDialogOpen, setPublishNotebookDialogOpen] = useState<\n    boolean\n  >(false);\n\n  // Search\n  const [searchValue, setSearchValue] = useState<string>(\"\");\n  const [searchValueInputTimeout, setSearchValueInputTimeout] = useState<\n    NodeJS.Timeout\n  >(null);\n  const [finalSearchValue, setFinalSearchValue] = useState<string>(\"\");\n\n  const onChangeSearchValue = useCallback(\n    (event: React.ChangeEvent<HTMLTextAreaElement | HTMLInputElement>) => {\n      const value = event.target.value;\n      setSearchValue(value);\n      if (searchValueInputTimeout) {\n        clearTimeout(searchValueInputTimeout);\n      }\n      const timeout = setTimeout(() => {\n        setFinalSearchValue(value);\n      }, 600);\n      setSearchValueInputTimeout(timeout);\n    },\n    [searchValueInputTimeout],\n  );\n\n  return (\n    <Box className={clsx(classes.explorePanel)}>\n      <Card className={clsx(classes.topPanel)}>\n        <Box className={clsx(classes.row)}>\n          <Hidden smUp implementation=\"css\">\n            <IconButton onClick={props.toggleDrawer}>\n              <MenuIcon></MenuIcon>\n            </IconButton>\n          </Hidden>\n          <div className={classes.search}>\n            <div className={classes.searchIcon}>\n              <Magnify />\n            </div>\n            <InputBase\n              placeholder={t(\"search/notebooks\")}\n              classes={{\n                root: classes.inputRoot,\n                input: classes.inputInput,\n              }}\n              value={searchValue}\n              inputProps={{ \"aria-label\": \"search\" }}\n              onChange={onChangeSearchValue}\n              autoComplete={\"off\"}\n              autoCorrect={\"off\"}\n            />\n          </div>\n        </Box>\n        <Box\n          className={clsx(classes.row)}\n          style={{ justifyContent: \"space-between\", marginTop: \"8px\" }}\n        >\n          <Box className={clsx(classes.row)}>\n            <span role=\"img\" aria-label=\"folder\">\n              <img\n                src=\"/logo.svg\"\n                style={{ width: \"28px\", height: \"28px\" }}\n                alt={\"Crossnote\"}\n              ></img>\n            </span>\n            <Typography className={clsx(classes.sectionName)}>\n              {t(\"general/Explore\")}\n            </Typography>\n          </Box>\n          <Box>\n            {/* TODO: Support OrderBy */}\n            <Button\n              variant={\"contained\"}\n              color={\"primary\"}\n              onClick={() => {\n                if (cloudContainer.loggedIn) {\n                  setPublishNotebookDialogOpen(true);\n                } else {\n                  cloudContainer.setAuthDialogOpen(true);\n                }\n              }}\n            >\n              <Publish></Publish>\n              {t(\"general/Publish\")}\n            </Button>\n          </Box>\n        </Box>\n      </Card>\n      <PublishNotebookDialog\n        open={publishNotebookDialogOpen}\n        onClose={() => setPublishNotebookDialogOpen(false)}\n      ></PublishNotebookDialog>\n\n      <Notebooks searchValue={finalSearchValue}></Notebooks>\n    </Box>\n  );\n}\n","import React, { useState, useEffect, useCallback } from \"react\";\nimport {\n  NotebookFieldsFragment,\n  useUpdateNotebookMutation,\n  useUnpublishNotebookMutation,\n} from \"../generated/graphql\";\nimport {\n  Dialog,\n  DialogTitle,\n  DialogContent,\n  DialogActions,\n  Button,\n  TextField,\n} from \"@material-ui/core\";\nimport Noty from \"noty\";\nimport { useTranslation } from \"react-i18next\";\n\ninterface Props {\n  notebook: NotebookFieldsFragment;\n  open: boolean;\n  onClose: () => void;\n}\n\nconst MaxClickDeleteCount = 3;\nexport default function ConfigurePublishedNotebookDialog(props: Props) {\n  const notebook = props.notebook;\n  const { t } = useTranslation();\n  const [gitURL, setGitURL] = useState<string>(\"\");\n  const [gitBranch, setGitBranch] = useState<string>(\"\");\n  const [\n    resUpdateNotebook,\n    executeUpdateNotebookMutation,\n  ] = useUpdateNotebookMutation();\n  const [\n    resUnpublishNotebook,\n    executeUnpublishNotebookMutation,\n  ] = useUnpublishNotebookMutation();\n  const [clickDeleteCount, setClickDeleteCount] = useState<number>(\n    MaxClickDeleteCount,\n  );\n\n  const updateNotebook = useCallback(() => {\n    executeUpdateNotebookMutation({\n      notebookID: notebook.id,\n      gitURL: gitURL,\n      gitBranch: gitBranch,\n    });\n  }, [notebook, gitURL, gitBranch, executeUpdateNotebookMutation]);\n\n  const unpublishNotebook = useCallback(() => {\n    executeUnpublishNotebookMutation({\n      notebookID: notebook.id,\n    });\n  }, [notebook, executeUnpublishNotebookMutation]);\n\n  useEffect(() => {\n    setClickDeleteCount(MaxClickDeleteCount);\n  }, [props.open]);\n\n  useEffect(() => {\n    setGitURL(notebook.gitURL);\n    setGitBranch(notebook.gitBranch);\n  }, [props.open, notebook, notebook.gitURL, notebook.gitBranch]);\n\n  useEffect(() => {\n    if (resUpdateNotebook.error) {\n      new Noty({\n        type: \"error\",\n        text: t(\"error/failed-to-update-the-notebook\"),\n        layout: \"topRight\",\n        theme: \"relax\",\n        timeout: 2000,\n      }).show();\n      setClickDeleteCount(MaxClickDeleteCount);\n    } else if (resUpdateNotebook.data) {\n      window.location.reload();\n    }\n  }, [resUpdateNotebook]);\n\n  useEffect(() => {\n    if (resUnpublishNotebook.error) {\n      new Noty({\n        type: \"error\",\n        text: t(\"error/failed-to-unpublish-the-notebook\"),\n        layout: \"topRight\",\n        theme: \"relax\",\n        timeout: 2000,\n      }).show();\n      setClickDeleteCount(MaxClickDeleteCount);\n    } else if (resUnpublishNotebook.data) {\n      window.location.reload();\n    }\n  }, [resUnpublishNotebook]);\n\n  return (\n    <Dialog open={props.open} onClose={props.onClose}>\n      <DialogTitle>{t(\"general/configure-the-notebook\")}</DialogTitle>\n      <DialogContent>\n        <TextField\n          label={t(\"general/url\")}\n          placeholder={\"https://github.com/0xGG/welcome-notebook.git\"}\n          fullWidth={true}\n          value={gitURL}\n          onChange={(event) => setGitURL(event.target.value)}\n        ></TextField>\n        <TextField\n          label={t(\"general/branch\")}\n          placeholder={\"master\"}\n          fullWidth={true}\n          value={gitBranch}\n          onChange={(event) => setGitBranch(event.target.value)}\n        ></TextField>\n      </DialogContent>\n      <DialogActions>\n        <Button\n          variant={\"contained\"}\n          color={\"primary\"}\n          onClick={updateNotebook}\n          disabled={resUnpublishNotebook.fetching || resUpdateNotebook.fetching}\n        >\n          {t(\"general/Update\")}\n        </Button>\n        <Button\n          variant={\"contained\"}\n          color={\"secondary\"}\n          onClick={() => {\n            if (clickDeleteCount === 1) {\n              unpublishNotebook();\n              setClickDeleteCount(clickDeleteCount - 1);\n            } else {\n              setClickDeleteCount(clickDeleteCount - 1);\n            }\n          }}\n          disabled={resUnpublishNotebook.fetching || resUpdateNotebook.fetching}\n        >\n          {t(\"general/Unpublish\") +\n            (clickDeleteCount < MaxClickDeleteCount\n              ? ` ${clickDeleteCount}`\n              : \"\")}\n        </Button>\n        <Button onClick={props.onClose}>{t(\"general/cancel\")}</Button>\n      </DialogActions>\n    </Dialog>\n  );\n}\n","import React, { useState, useEffect, useCallback } from \"react\";\nimport { env } from \"../env\";\nimport {\n  Box,\n  Hidden,\n  ButtonGroup,\n  Button,\n  Typography,\n} from \"@material-ui/core\";\nimport {\n  createStyles,\n  makeStyles,\n  Theme,\n  useTheme,\n} from \"@material-ui/core/styles\";\nimport clsx from \"clsx\";\nimport {\n  NotebookFieldsFragment,\n  useStarNotebookMutation,\n  useUnstarNotebookMutation,\n} from \"../generated/graphql\";\nimport { CloudContainer } from \"../containers/cloud\";\nimport {\n  ChevronLeft,\n  Git,\n  Star,\n  StarOutline,\n  CloudDownloadOutline,\n  Cog,\n  BookOpenPageVariant,\n} from \"mdi-material-ui\";\nimport { useTranslation } from \"react-i18next\";\nimport { renderPreview } from \"vickymd/preview\";\nimport { CrossnoteContainer } from \"../containers/crossnote\";\nimport AddNotebookDialog from \"./AddNotebookDialog\";\nimport ConfigurePublishedNotebookDialog from \"./ConfigurePublishedNotebookDialog\";\nimport { resolveNotebookFilePath } from \"../utilities/image\";\nimport { browserHistory } from \"../utilities/history\";\nimport { matter } from \"../utilities/markdown\";\n\nconst previewZIndex = 99;\nconst useStyles = makeStyles((theme: Theme) =>\n  createStyles({\n    notebookPanel: {\n      width: \"100%\",\n      height: \"100%\",\n      display: \"flex\",\n      flexDirection: \"column\",\n      borderRadius: 0,\n    },\n    topPanel: {\n      position: \"relative\",\n      padding: theme.spacing(0.5, 1), // theme.spacing(0.5, 1),\n      display: \"flex\",\n      alignItems: \"center\",\n      justifyContent: \"space-between\",\n      // borderBottom: \"1px solid #eee\",\n      overflow: \"auto\",\n      backgroundColor: theme.palette.background.paper,\n    },\n    bottomPanel: {\n      position: \"relative\",\n      padding: theme.spacing(0.5, 1),\n      display: \"flex\",\n      alignItems: \"center\",\n      justifyContent: \"space-between\",\n      backgroundColor: theme.palette.background.paper,\n      // borderTop: \"1px solid #eee\",\n      // color: theme.palette.primary.contrastText,\n      // backgroundColor: theme.palette.primary.main\n    },\n    controlBtn: {\n      padding: theme.spacing(0.5, 1.5),\n      color: theme.palette.text.secondary,\n    },\n    controlBtnSelected: {\n      color: theme.palette.primary.main,\n    },\n    controlBtnSelectedSecondary: {\n      color: theme.palette.secondary.main,\n    },\n    row: {\n      display: \"flex\",\n      flexDirection: \"row\",\n      alignItems: \"center\",\n    },\n    backBtn: {\n      marginRight: \"8px\",\n      [theme.breakpoints.up(\"sm\")]: {\n        display: \"none\",\n      },\n    },\n    previewWrapper: {\n      flex: 1,\n      overflow: \"auto\",\n      backgroundColor: theme.palette.background.paper,\n    },\n    preview: {\n      position: \"relative\",\n      left: \"0\",\n      top: \"0\",\n      width: \"100%\",\n      height: \"100%\",\n      border: \"none\",\n      overflow: \"auto !important\",\n      padding: theme.spacing(2),\n      zIndex: previewZIndex,\n      [theme.breakpoints.down(\"sm\")]: {\n        padding: theme.spacing(1),\n      },\n      // gridArea: \"2 / 2 / 3 / 3\"\n    },\n    presentation: {\n      padding: \"0 !important\",\n    },\n    star: {\n      color: theme.palette.secondary.main,\n      marginRight: theme.spacing(0.5),\n    },\n  }),\n);\n\ninterface Props {\n  notebook: NotebookFieldsFragment;\n}\n\nexport function NotebookPanel(props: Props) {\n  const classes = useStyles(props);\n  const theme = useTheme();\n  const { t } = useTranslation();\n  const notebook = props.notebook;\n  const cloudContainer = CloudContainer.useContainer();\n  const crossnoteContainer = CrossnoteContainer.useContainer();\n  const [previewElement, setPreviewElement] = useState<HTMLElement>(null);\n  const [previewIsPresentation, setPreviewIsPresentation] = useState<boolean>(\n    false,\n  );\n  const [alreadyDownloadedNotebook, setAlreadyDownloadedNotebook] = useState<\n    boolean\n  >(false);\n  const [addNotebookDialogOpen, setAddNotebookDialogOpen] = useState<boolean>(\n    false,\n  );\n  const [\n    configureNotebookDialogOpen,\n    setConfigureNotebookDialogOpen,\n  ] = useState<boolean>(false);\n  const [forceUpdate, setForceUpdate] = useState<number>(Date.now());\n  const [\n    resStarNotebook,\n    executeStarNotebookMutation,\n  ] = useStarNotebookMutation();\n  const [\n    resUnstarNotebook,\n    executeUnstarNotebookMutation,\n  ] = useUnstarNotebookMutation();\n\n  const openGitURLWithBranch = useCallback(() => {\n    if (!notebook) {\n      return;\n    }\n    const { gitURL, gitBranch } = notebook;\n    const gitURLArr = gitURL.replace(\"https://\", \"\").split(\"/\");\n    const gitHost = gitURLArr[0].toLowerCase();\n    const gitOwner = gitURLArr[1];\n    const gitRepo = gitURLArr[2].replace(/\\.git$/, \"\");\n    let url = \"\";\n    if (gitHost === \"github.com\") {\n      url = `https://github.com/${gitOwner}/${gitRepo}/tree/${gitBranch}`;\n    } else if (gitHost === \"gitlab.com\") {\n      url = `https://gitlab.com/${gitOwner}/${gitRepo}/-/tree/${gitBranch}`;\n    } else if (gitHost === \"gitee.com\") {\n      url = `https://gitee.com/${gitOwner}/${gitRepo}/tree/${gitBranch}`;\n    } else if (gitHost === \"gitea.com\") {\n      url = `https://gitea.com/${gitOwner}/${gitRepo}/src/branch/${gitBranch}`;\n    }\n    if (url.length) {\n      window.open(url, \"_blank\");\n    }\n  }, [notebook]);\n\n  const starOrUnstarTheNotebook = useCallback(() => {\n    if (!notebook) {\n      return;\n    }\n    if (!cloudContainer.loggedIn) {\n      cloudContainer.setAuthDialogOpen(true);\n      return;\n    }\n    const starred = notebook.isStarred;\n    notebook.isStarred = !notebook.isStarred;\n    if (starred) {\n      notebook.starsCount = Math.max(0, notebook.starsCount - 1);\n      executeUnstarNotebookMutation({\n        notebookID: notebook.id,\n      });\n    } else {\n      notebook.starsCount += 1;\n      executeStarNotebookMutation({\n        notebookID: notebook.id,\n      });\n    }\n    setForceUpdate(Date.now());\n  }, [\n    notebook,\n    executeStarNotebookMutation,\n    executeUnstarNotebookMutation,\n    cloudContainer.loggedIn,\n  ]);\n\n  const openNotebook = useCallback(() => {\n    if (!notebook || !crossnoteContainer.notebooks.length) {\n      return;\n    }\n    const nb = crossnoteContainer.notebooks.find(\n      (n) => n.gitURL === notebook.gitURL && n.gitBranch === notebook.gitBranch,\n    );\n    if (nb) {\n      crossnoteContainer.setSelectedNotebook(nb);\n    }\n  }, [notebook, crossnoteContainer.notebooks]);\n\n  useEffect(() => {\n    return () => {\n      setPreviewElement(null);\n    };\n  }, []);\n\n  useEffect(() => {\n    if (!notebook || !previewElement) {\n      return;\n    }\n    const handleLinksClickEvent = (preview: HTMLElement) => {\n      // Handle link click event\n      const links = preview.getElementsByTagName(\"A\");\n      for (let i = 0; i < links.length; i++) {\n        const link = links[i] as HTMLAnchorElement;\n        link.onclick = (event) => {\n          event.preventDefault();\n          const href = link.getAttribute(\"href\");\n          if (!href.match(/^(https?|data):/)) {\n            const alreadyDownloaded = !!crossnoteContainer.notebooks.find(\n              (nb) =>\n                nb.gitURL === notebook.gitURL &&\n                nb.gitBranch === notebook.gitBranch,\n            );\n            if (alreadyDownloaded) {\n              const filePath = href.replace(/^\\/+/, \"\").replace(/^\\.\\/+/, \"\");\n              browserHistory.push(\n                //`${env.approot}/?repo=${encodeURIComponent(\n                `/?repo=${encodeURIComponent(\n                  notebook.gitURL,\n                )}&branch=${encodeURIComponent(\n                  notebook.gitBranch || \"master\",\n                )}&filePath=${encodeURIComponent(filePath)}`,\n              );\n            } else {\n              setAddNotebookDialogOpen(true);\n            }\n          } else {\n            const url = resolveNotebookFilePath(notebook, href);\n            if (url.startsWith(\"https://\") || url.startsWith(\"http://\")) {\n              window.open(url, \"_blank\");\n            }\n          }\n        };\n      }\n    };\n    const resolveImages = (preview: HTMLElement) => {\n      const images = preview.getElementsByTagName(\"IMG\");\n      for (let i = 0; i < images.length; i++) {\n        const image = images[i] as HTMLImageElement;\n        const imageSrc = image.getAttribute(\"src\");\n        image.setAttribute(\"src\", resolveNotebookFilePath(notebook, imageSrc));\n      }\n    };\n    renderPreview(previewElement, notebook.markdown);\n    if (\n      previewElement.childElementCount &&\n      previewElement.children[0].tagName.toUpperCase() === \"IFRAME\"\n    ) {\n      // presentation\n      previewElement.style.maxWidth = \"100%\";\n      previewElement.style.height = \"100%\";\n      previewElement.style.overflow = \"hidden !important\";\n      handleLinksClickEvent(\n        (previewElement.children[0] as HTMLIFrameElement).contentDocument\n          .body as HTMLElement,\n      );\n      resolveImages(\n        (previewElement.children[0] as HTMLIFrameElement).contentDocument\n          .body as HTMLElement,\n      );\n      setPreviewIsPresentation(true);\n    } else {\n      // normal\n      // previewElement.style.maxWidth = `${EditorPreviewMaxWidth}px`;\n      previewElement.style.height = \"100%\";\n      previewElement.style.overflow = \"hidden !important\";\n      handleLinksClickEvent(previewElement);\n      resolveImages(previewElement);\n      setPreviewIsPresentation(false);\n    }\n  }, [notebook, previewElement, crossnoteContainer.notebooks]);\n\n  useEffect(() => {\n    if (!notebook) {\n      setAlreadyDownloadedNotebook(false);\n    } else {\n      const index = crossnoteContainer.notebooks.findIndex(\n        (n) =>\n          n.gitURL === notebook.gitURL && n.gitBranch === notebook.gitBranch,\n      );\n      setAlreadyDownloadedNotebook(index >= 0);\n    }\n  }, [notebook, crossnoteContainer.notebooks]);\n\n  if (!notebook) {\n    return (\n      <Box className={clsx(classes.notebookPanel)}>\n        <Hidden smUp>\n          <Box className={clsx(classes.topPanel)}>\n            <Box className={clsx(classes.row)}>\n              <ButtonGroup className={clsx(classes.backBtn)}>\n                <Button\n                  className={clsx(classes.controlBtn)}\n                  onClick={() => {\n                    cloudContainer.setDisplayNotebookPreview(false);\n                  }}\n                >\n                  <ChevronLeft></ChevronLeft>\n                </Button>\n              </ButtonGroup>\n            </Box>\n          </Box>\n        </Hidden>\n        <Box\n          style={{\n            margin: \"0 auto\",\n            top: \"50%\",\n            position: \"relative\",\n          }}\n        >\n          <Typography>{`📒 ${t(\"general/nothing-here\")}`}</Typography>\n        </Box>\n      </Box>\n    );\n  }\n  return (\n    <Box className={clsx(classes.notebookPanel)}>\n      <Box className={clsx(classes.topPanel, \"editor-toolbar\")}>\n        <Box className={clsx(classes.row)}>\n          <ButtonGroup className={clsx(classes.backBtn)}>\n            <Button\n              className={clsx(classes.controlBtn)}\n              onClick={() => {\n                cloudContainer.setDisplayNotebookPreview(false);\n              }}\n            >\n              <ChevronLeft></ChevronLeft>\n            </Button>\n          </ButtonGroup>\n          <ButtonGroup>\n            <Button\n              className={clsx(classes.controlBtn)}\n              onClick={starOrUnstarTheNotebook}\n            >\n              {notebook.isStarred ? (\n                <Star className={clsx(classes.star)}></Star>\n              ) : (\n                <StarOutline\n                  className={clsx(classes.star)}\n                  style={{ color: theme.palette.text.secondary }}\n                ></StarOutline>\n              )}\n              {notebook.starsCount}\n            </Button>\n          </ButtonGroup>\n          {alreadyDownloadedNotebook ? (\n            <ButtonGroup style={{ marginLeft: theme.spacing(1) }}>\n              <Button\n                className={clsx(classes.controlBtn)}\n                onClick={openNotebook}\n              >\n                <BookOpenPageVariant\n                  style={{ marginRight: theme.spacing(0.5) }}\n                ></BookOpenPageVariant>\n                {t(\"general/Open\")}\n              </Button>\n            </ButtonGroup>\n          ) : (\n            <ButtonGroup style={{ marginLeft: theme.spacing(1) }}>\n              <Button\n                className={clsx(classes.controlBtn)}\n                disabled={crossnoteContainer.isAddingNotebook}\n                onClick={() => setAddNotebookDialogOpen(true)}\n              >\n                <CloudDownloadOutline\n                  style={{ marginRight: theme.spacing(0.5) }}\n                ></CloudDownloadOutline>\n                {t(\"general/Download\")}\n              </Button>\n            </ButtonGroup>\n          )}\n          {cloudContainer.viewer &&\n            cloudContainer.viewer.username === notebook.owner.username && (\n              <ButtonGroup style={{ marginLeft: theme.spacing(1) }}>\n                <Button\n                  className={clsx(classes.controlBtn)}\n                  onClick={() => setConfigureNotebookDialogOpen(true)}\n                >\n                  <Cog></Cog>\n                  {t(\"general/Configure\")}\n                </Button>\n              </ButtonGroup>\n            )}\n        </Box>\n      </Box>\n      <Box className={clsx(classes.previewWrapper)}>\n        <div\n          className={clsx(\n            classes.preview,\n            \"preview\",\n            previewIsPresentation ? classes.presentation : null,\n          )}\n          ref={(element: HTMLElement) => {\n            setPreviewElement(element);\n          }}\n        ></div>\n      </Box>\n      <Box className={clsx(classes.bottomPanel)}>\n        <Box className={clsx(classes.row)}>\n          <Git\n            style={{\n              color: theme.palette.text.secondary,\n              marginRight: theme.spacing(0.5),\n            }}\n          ></Git>\n          <Typography\n            variant={\"caption\"}\n            style={{ cursor: \"pointer\" }}\n            color={\"textPrimary\"}\n            onClick={openGitURLWithBranch}\n          >{`${notebook.gitURL}:${notebook.gitBranch}`}</Typography>\n        </Box>\n      </Box>\n      <AddNotebookDialog\n        open={addNotebookDialogOpen}\n        onClose={() => setAddNotebookDialogOpen(false)}\n        gitURL={notebook.gitURL}\n        gitBranch={notebook.gitBranch}\n        notebookName={matter(notebook.markdown).data?.notebook?.name || \"\"}\n        canCancel={true}\n      ></AddNotebookDialog>\n      <ConfigurePublishedNotebookDialog\n        notebook={notebook}\n        open={configureNotebookDialogOpen}\n        onClose={() => setConfigureNotebookDialogOpen(false)}\n      ></ConfigurePublishedNotebookDialog>\n    </Box>\n  );\n}\n","import React from \"react\";\nimport { Box, Hidden, IconButton, Typography } from \"@material-ui/core\";\nimport { Menu as MenuIcon } from \"mdi-material-ui\";\n\ninterface Props {\n  toggleDrawer: () => void;\n}\n\nexport function PrivacyPolicy(props: Props) {\n  return (\n    <Box style={{ padding: \"16px\" }} className={\"preview\"}>\n      <Box\n        style={{ display: \"flex\", flexDirection: \"row\", alignItems: \"center\" }}\n      >\n        <Hidden smUp implementation=\"css\">\n          <IconButton onClick={props.toggleDrawer}>\n            <MenuIcon></MenuIcon>\n          </IconButton>\n        </Hidden>\n        <Typography variant={\"h2\"}>Privacy Policy</Typography>\n      </Box>\n      <p>\n        shd101wyy built the Crossnote app as an Open Source app. This SERVICE is\n        provided by shd101wyy at no cost and is intended for use as is.\n      </p>\n      <p>\n        This page is used to inform visitors regarding my policies with the\n        collection, use, and disclosure of Personal Information if anyone\n        decided to use my Service.\n      </p>\n      <p>\n        If you choose to use my Service, then you agree to the collection and\n        use of information in relation to this policy. The Personal Information\n        that I collect is used for providing and improving the Service. I will\n        not use or share your information with anyone except as described in\n        this Privacy Policy.\n      </p>\n      <p>\n        The terms used in this Privacy Policy have the same meanings as in our\n        Terms and Conditions, which is accessible at Crossnote unless otherwise\n        defined in this Privacy Policy.\n      </p>\n      <p>\n        <strong>Information Collection and Use</strong>\n      </p>\n      <p>\n        For a better experience, while using our Service, I may require you to\n        provide us with certain personally identifiable information. The\n        information that I request will be retained on your device and is not\n        collected by me in any way.\n      </p>\n      <p>\n        <strong>Log Data</strong>\n      </p>\n      <p>\n        I want to inform you that whenever you use my Service, in a case of an\n        error in the app I collect data and information (through third party\n        products) on your phone called Log Data. This Log Data may include\n        information such as your device Internet Protocol (“IP”) address, device\n        name, operating system version, the configuration of the app when\n        utilizing my Service, the time and date of your use of the Service, and\n        other statistics.\n      </p>\n      <p>\n        <strong>Cookies</strong>\n      </p>\n      <p>\n        Cookies are files with a small amount of data that are commonly used as\n        anonymous unique identifiers. These are sent to your browser from the\n        websites that you visit and are stored on your device's internal memory.\n      </p>\n      <p>\n        This Service does not use these “cookies” explicitly. However, the app\n        may use third party code and libraries that use “cookies” to collect\n        information and improve their services. You have the option to either\n        accept or refuse these cookies and know when a cookie is being sent to\n        your device. If you choose to refuse our cookies, you may not be able to\n        use some portions of this Service.\n      </p>\n      <p>\n        <strong>Service Providers</strong>\n      </p>\n      <p>\n        I may employ third-party companies and individuals due to the following\n        reasons:\n      </p>\n      <ul>\n        <li>To facilitate our Service;</li>{\" \"}\n        <li>To provide the Service on our behalf;</li>{\" \"}\n        <li>To perform Service-related services; or</li>{\" \"}\n        <li>To assist us in analyzing how our Service is used.</li>\n      </ul>\n      <p>\n        I want to inform users of this Service that these third parties have\n        access to your Personal Information. The reason is to perform the tasks\n        assigned to them on our behalf. However, they are obligated not to\n        disclose or use the information for any other purpose.\n      </p>\n      <p>\n        <strong>Security</strong>\n      </p>\n      <p>\n        I value your trust in providing us your Personal Information, thus we\n        are striving to use commercially acceptable means of protecting it. But\n        remember that no method of transmission over the internet, or method of\n        electronic storage is 100% secure and reliable, and I cannot guarantee\n        its absolute security.\n      </p>\n      <p>\n        <strong>Links to Other Sites</strong>\n      </p>\n      <p>\n        This Service may contain links to other sites. If you click on a\n        third-party link, you will be directed to that site. Note that these\n        external sites are not operated by me. Therefore, I strongly advise you\n        to review the Privacy Policy of these websites. I have no control over\n        and assume no responsibility for the content, privacy policies, or\n        practices of any third-party sites or services.\n      </p>\n      <p>\n        <strong>Children's Privacy</strong>\n      </p>\n      <p>\n        These Services do not address anyone under the age of 13. I do not\n        knowingly collect personally identifiable information from children\n        under 13. In the case I discover that a child under 13 has provided me\n        with personal information, I immediately delete this from our servers.\n        If you are a parent or guardian and you are aware that your child has\n        provided us with personal information, please contact me so that I will\n        be able to do necessary actions.\n      </p>\n      <p>\n        <strong>Changes to This Privacy Policy</strong>\n      </p>\n      <p>\n        I may update our Privacy Policy from time to time. Thus, you are advised\n        to review this page periodically for any changes. I will notify you of\n        any changes by posting the new Privacy Policy on this page.\n      </p>\n      <p>This policy is effective as of 2020-05-03</p>{\" \"}\n      <p>\n        <strong>Contact Us</strong>\n      </p>\n      <p>\n        If you have any questions or suggestions about my Privacy Policy, do not\n        hesitate to contact me at shd101wyy@gmail.com.\n      </p>\n      <p>\n        This privacy policy page was created at{\" \"}\n        <a href=\"https://privacypolicytemplate.net\" target=\"_blank\">\n          privacypolicytemplate.net\n        </a>{\" \"}\n        and modified/generated by{\" \"}\n        <a\n          href=\"https://app-privacy-policy-generator.firebaseapp.com/\"\n          target=\"_blank\"\n        >\n          App Privacy Policy Generator\n        </a>\n      </p>\n    </Box>\n  );\n}\n","import React, { useState, useEffect } from \"react\";\nimport { createStyles, makeStyles, Theme } from \"@material-ui/core/styles\";\nimport clsx from \"clsx\";\nimport { CrossnoteContainer } from \"../containers/crossnote\";\nimport { Attachment } from \"../lib/crossnote\";\nimport { ButtonBase, Typography, Box } from \"@material-ui/core\";\nimport { basename } from \"path\";\nimport { loadImageAsBase64, isFileAnImage } from \"../utilities/image\";\nimport { Image } from \"mdi-material-ui\";\nimport { useTranslation } from \"react-i18next\";\n\nconst useStyles = makeStyles((theme: Theme) =>\n  createStyles({\n    attachmentCard: {\n      width: \"100%\",\n      display: \"flex\",\n      flexDirection: \"row\",\n      alignItems: \"flex-start\",\n      padding: theme.spacing(2, 0.5, 0),\n      textAlign: \"left\",\n      cursor: \"default\",\n      backgroundColor: theme.palette.background.paper,\n    },\n    selected: {\n      borderLeft: `4px solid ${theme.palette.primary.main}`,\n    },\n    unselected: {\n      borderLeft: `4px solid rgba(0, 0, 0, 0)`,\n    },\n    leftPanel: {\n      width: \"48px\",\n      paddingLeft: theme.spacing(0.5),\n    },\n    rightPanel: {\n      width: \"calc(100% - 48px)\",\n      borderBottom: `1px solid ${theme.palette.divider}`,\n    },\n    image: {\n      width: \"128px\",\n      height: \"80px\",\n      marginRight: theme.spacing(1),\n      position: \"relative\",\n      backgroundSize: \"cover\",\n      backgroundPosition: \"center\",\n      display: \"block\",\n      borderRadius: \"6px\",\n    },\n    filePath: {\n      wordBreak: \"break-all\",\n    },\n  }),\n);\n\ninterface Props {\n  attachment: Attachment;\n}\n\nexport default function AttachmentCard(props: Props) {\n  const classes = useStyles(props);\n  const attachment = props.attachment;\n  const { t } = useTranslation();\n  const crossnoteContainer = CrossnoteContainer.useContainer();\n  const [image, setImage] = useState<string>(\"\");\n  const [gitStatus, setGitStatus] = useState<string>(\"\");\n\n  useEffect(() => {\n    if (crossnoteContainer && crossnoteContainer.crossnote && attachment) {\n      crossnoteContainer.crossnote\n        .getStatus(attachment.notebook, attachment.filePath)\n        .then((status) => {\n          setGitStatus(status);\n        })\n        .catch((error) => {\n          setGitStatus(\"\");\n        });\n    } else {\n      setGitStatus(\"\");\n    }\n  }, [attachment, crossnoteContainer.crossnote]);\n\n  useEffect(() => {\n    if (attachment && isFileAnImage(attachment.filePath)) {\n      loadImageAsBase64(attachment.notebook, \".\", attachment.filePath)\n        .then((base64) => {\n          setImage(base64);\n        })\n        .catch((error) => {\n          setImage(\"\");\n        });\n    }\n  }, [attachment]);\n\n  return (\n    <ButtonBase\n      className={clsx(\n        classes.attachmentCard,\n        /*\n        crossnoteContainer.selectedAttachment &&\n          crossnoteContainer.selectedAttachment.filePath === attachment.filePath\n          ? classes.selected\n          : classes.unselected,\n          */\n      )}\n      onClick={() => {\n        crossnoteContainer.setSelectedAttachment(attachment);\n        crossnoteContainer.setDisplayAttachmentEditor(true);\n      }}\n    >\n      <Box className={clsx(classes.leftPanel)}>\n        {isFileAnImage(attachment.filePath) && <Image></Image>}\n      </Box>\n      <Box className={clsx(classes.rightPanel)}>\n        {image && (\n          <div\n            key={`${image}`}\n            className={clsx(classes.image)}\n            style={{\n              backgroundImage: `url(${image})`,\n            }}\n          ></div>\n        )}\n        <Typography variant={\"caption\"} className={clsx(classes.filePath)}>\n          {basename(attachment.filePath).startsWith(\"unnamed_\")\n            ? t(`git/status/${gitStatus}`)\n            : attachment.filePath + \" - \" + t(`git/status/${gitStatus}`)}\n        </Typography>\n      </Box>\n    </ButtonBase>\n  );\n}\n","import React, { useState, useEffect } from \"react\";\nimport { createStyles, makeStyles, Theme } from \"@material-ui/core/styles\";\nimport clsx from \"clsx\";\nimport { Attachment } from \"../lib/crossnote\";\nimport { useTranslation } from \"react-i18next\";\nimport { Box, Typography } from \"@material-ui/core\";\nimport AttachmentCard from \"./AttachmentCard\";\n\nconst useStyles = makeStyles((theme: Theme) =>\n  createStyles({\n    attachmentsList: {\n      position: \"relative\",\n      flex: \"1\",\n      overflowY: \"auto\",\n      paddingBottom: theme.spacing(12),\n      marginTop: theme.spacing(0.5),\n    },\n  }),\n);\n\ninterface Props {\n  searchValue: string;\n  attachments: Attachment[];\n}\n\nexport default function Attachments(props: Props) {\n  const classes = useStyles(props);\n  const { t } = useTranslation();\n\n  const [attachments, setAttachments] = useState<Attachment[]>([]);\n\n  useEffect(() => {\n    const searchValue = props.searchValue;\n    const attachments = props.attachments.filter((attachment) => {\n      if (searchValue.trim().length) {\n        const regexp = new RegExp(\n          \"(\" +\n            searchValue\n              .trim()\n              .split(/\\s+/g)\n              .map((s) => s.replace(/[.!@#$%^&*()_+\\-=[\\]]/g, (x) => `\\\\${x}`)) // escape special regexp characters\n              .join(\"|\") +\n            \")\",\n          \"i\",\n        );\n\n        return (\n          attachment.content.match(regexp) || attachment.filePath.match(regexp)\n        );\n      } else {\n        return true;\n      }\n    });\n    setAttachments(attachments);\n  }, [props.attachments, props.searchValue]);\n\n  return (\n    <Box className={clsx(classes.attachmentsList)}>\n      {(attachments || []).map((attachment) => {\n        return (\n          <AttachmentCard\n            attachment={attachment}\n            key={attachment.filePath}\n          ></AttachmentCard>\n        );\n      })}\n\n      {attachments.length === 0 && (\n        <Typography\n          style={{\n            textAlign: \"center\",\n            marginTop: \"32px\",\n          }}\n          variant={\"body2\"}\n        >\n          {\"🧐 \" + t(\"general/no-more-attachments-found\")}\n        </Typography>\n      )}\n    </Box>\n  );\n}\n","import React, { useState, useCallback, useEffect } from \"react\";\nimport {\n  createStyles,\n  makeStyles,\n  Theme,\n  fade,\n} from \"@material-ui/core/styles\";\nimport clsx from \"clsx\";\nimport { CrossnoteContainer } from \"../containers/crossnote\";\nimport { useTranslation } from \"react-i18next\";\nimport {\n  Box,\n  Card,\n  Hidden,\n  IconButton,\n  Tooltip,\n  InputBase,\n  CircularProgress,\n  Typography,\n} from \"@material-ui/core\";\nimport { Menu as MenuIcon, Magnify, Plus } from \"mdi-material-ui\";\nimport { Attachment } from \"../lib/crossnote\";\nimport Attachments from \"./Attachments\";\n\nconst useStyles = makeStyles((theme: Theme) =>\n  createStyles({\n    attachmentsPanel: {\n      position: \"relative\",\n      display: \"flex\",\n      flexDirection: \"column\",\n      height: \"100%\",\n    },\n    topPanel: {\n      padding: theme.spacing(1),\n      borderRadius: \"0\",\n    },\n    row: {\n      display: \"flex\",\n      alignItems: \"center\",\n    },\n    sectionName: {\n      marginLeft: theme.spacing(1),\n    },\n    search: {\n      \"position\": \"relative\",\n      \"borderRadius\": theme.shape.borderRadius,\n      \"backgroundColor\": fade(theme.palette.common.white, 0.15),\n      \"&:hover\": {\n        backgroundColor: fade(theme.palette.common.white, 0.25),\n      },\n      \"marginRight\": 0, // theme.spacing(2),\n      \"marginLeft\": 0,\n      \"width\": \"100%\",\n      [theme.breakpoints.up(\"sm\")]: {\n        // marginLeft: theme.spacing(3),\n        // width: \"auto\"\n      },\n    },\n    searchIcon: {\n      width: theme.spacing(7),\n      height: \"100%\",\n      position: \"absolute\",\n      pointerEvents: \"none\",\n      display: \"flex\",\n      alignItems: \"center\",\n      justifyContent: \"center\",\n    },\n    inputRoot: {\n      color: \"inherit\",\n      border: \"1px solid #bbb\",\n      borderRadius: \"4px\",\n      width: \"100%\",\n    },\n    inputInput: {\n      padding: theme.spacing(1, 1, 1, 7),\n      transition: theme.transitions.create(\"width\"),\n      width: \"100%\",\n      [theme.breakpoints.up(\"md\")]: {\n        // width: 200\n      },\n    },\n    loading: {\n      position: \"absolute\",\n      top: \"40%\",\n      left: \"50%\",\n      transform: \"translateX(-50%)\",\n    },\n    sortSelected: {\n      \"color\": theme.palette.primary.main,\n      \"& svg\": {\n        color: theme.palette.primary.main,\n      },\n    },\n  }),\n);\n\ninterface Props {\n  toggleDrawer: () => void;\n}\nexport default function AttachmentsPanel(props: Props) {\n  const classes = useStyles(props);\n  const { t } = useTranslation();\n  const crossnoteContainer = CrossnoteContainer.useContainer();\n\n  const [attachments, setAttachments] = useState<Attachment[]>([]);\n\n  // Search\n  const [searchValue, setSearchValue] = useState<string>(\"\");\n  const [searchValueInputTimeout, setSearchValueInputTimeout] = useState<\n    NodeJS.Timeout\n  >(null);\n  const [finalSearchValue, setFinalSearchValue] = useState<string>(\"\");\n\n  const onChangeSearchValue = useCallback(\n    (event: React.ChangeEvent<HTMLTextAreaElement | HTMLInputElement>) => {\n      const value = event.target.value;\n      setSearchValue(value);\n      if (searchValueInputTimeout) {\n        clearTimeout(searchValueInputTimeout);\n      }\n      const timeout = setTimeout(() => {\n        setFinalSearchValue(value);\n      }, 400);\n      setSearchValueInputTimeout(timeout);\n    },\n    [searchValueInputTimeout],\n  );\n\n  useEffect(() => {\n    crossnoteContainer\n      .loadAttachments()\n      .then((attachments) => {\n        setAttachments(attachments);\n        crossnoteContainer.setSelectedAttachment(attachments[0] || null);\n      })\n      .catch((error) => {\n        setAttachments([]);\n      });\n  }, []);\n\n  return (\n    <Box className={clsx(classes.attachmentsPanel)}>\n      <Card className={clsx(classes.topPanel)}>\n        <Box className={clsx(classes.row)}>\n          <Hidden smUp implementation=\"css\">\n            <IconButton onClick={props.toggleDrawer}>\n              <MenuIcon></MenuIcon>\n            </IconButton>\n          </Hidden>\n          <div className={classes.search}>\n            <div className={classes.searchIcon}>\n              <Magnify />\n            </div>\n            <InputBase\n              placeholder={t(\"search/attachments\")}\n              classes={{\n                root: classes.inputRoot,\n                input: classes.inputInput,\n              }}\n              value={searchValue}\n              inputProps={{ \"aria-label\": \"search\" }}\n              onChange={onChangeSearchValue}\n              autoComplete={\"off\"}\n              autoCorrect={\"off\"}\n            />\n          </div>\n          {/*\n          <IconButton disabled={!crossnoteContainer.initialized}>\n            <Tooltip title={t(\"general/new-attachment\")}>\n              <Plus></Plus>\n            </Tooltip>\n          </IconButton>\n          */}\n        </Box>\n        <Box\n          className={clsx(classes.row)}\n          style={{ justifyContent: \"space-between\", padding: \"8px 0 4px 0\" }}\n        >\n          <Box className={clsx(classes.row)}>\n            <span role=\"img\" aria-label=\"notes\">\n              {\"📎\"}\n            </span>\n            <Typography className={clsx(classes.sectionName)}>\n              {t(\"general/attachments\") + \" (beta)\"}\n            </Typography>\n          </Box>\n        </Box>\n      </Card>\n\n      {crossnoteContainer.isLoadingAttachments && (\n        <CircularProgress className={clsx(classes.loading)}></CircularProgress>\n      )}\n\n      <Attachments\n        searchValue={finalSearchValue}\n        attachments={attachments}\n      ></Attachments>\n    </Box>\n  );\n}\n","import React, { useState, useCallback } from \"react\";\nimport {\n  Dialog,\n  DialogTitle,\n  DialogContent,\n  Typography,\n  List,\n  ListItem,\n  ListItemText,\n  // useMediaQuery,\n  // useTheme,\n} from \"@material-ui/core\";\nimport { useTranslation } from \"react-i18next\";\nimport { CrossnoteContainer } from \"../containers/crossnote\";\nimport { SettingsContainer } from \"../containers/settings\";\nimport useInterval from \"@use-it/interval\";\nimport { Translate, ChevronDown } from \"mdi-material-ui\";\n\ninterface Props {}\nexport default function LanguageSelectorDialog(props: Props) {\n  const { t } = useTranslation();\n  // const theme = useTheme();\n  const crossnoteContainer = CrossnoteContainer.useContainer();\n  const settingsContainer = SettingsContainer.useContainer();\n  const languages = [\"en-US\", \"zh-CN\", \"zh-TW\", \"ja-JP\"];\n  // const fullScreen = useMediaQuery(theme.breakpoints.down(\"xs\"));\n\n  const [open, setOpen] = useState<boolean>(\n    crossnoteContainer.notebooks.length <= 1 &&\n      !localStorage.getItem(\"settings/language\"),\n  );\n  const [titleLanguage, setTitleLanguage] = useState<string>(languages[0]);\n\n  const chooseLanguage = useCallback((language: string) => {\n    settingsContainer.setLanguage(language);\n    setOpen(false);\n  }, []);\n\n  useInterval(() => {\n    let index = languages.findIndex((x) => x === titleLanguage);\n    index = index + 1;\n    if (index >= languages.length) {\n      index = 0;\n    }\n    setTitleLanguage(languages[index]);\n  }, 5000);\n\n  return (\n    <Dialog\n      open={open}\n      fullWidth={true}\n      style={{ zIndex: 2000 }}\n      onClose={() => chooseLanguage(\"en-US\")}\n    >\n      <DialogTitle style={{ textAlign: \"center\" }}>\n        {\"📝 \" + t(\"widget/crossnote.auth/welcome\", { lng: titleLanguage })}\n      </DialogTitle>\n      <DialogContent>\n        <Typography\n          variant={\"body2\"}\n          style={{\n            fontSize: \"0.75rem\",\n            marginBottom: \"6px\",\n            textAlign: \"center\",\n          }}\n        >\n          <Translate style={{ marginRight: \"8px\" }}></Translate>\n          {t(\"language-selector-dialog/subtitle\", { lng: titleLanguage })}\n        </Typography>\n        <Typography\n          variant={\"body2\"}\n          style={{\n            fontSize: \"0.75rem\",\n            marginBottom: \"6px\",\n            textAlign: \"center\",\n          }}\n        >\n          <ChevronDown></ChevronDown>\n        </Typography>\n        <List>\n          <ListItem button onClick={() => chooseLanguage(\"en-US\")}>\n            <ListItemText style={{ textAlign: \"center\" }}>English</ListItemText>\n          </ListItem>\n          <ListItem button onClick={() => chooseLanguage(\"zh-CN\")}>\n            <ListItemText style={{ textAlign: \"center\" }}>\n              简体中文\n            </ListItemText>\n          </ListItem>\n          <ListItem button onClick={() => chooseLanguage(\"zh-TW\")}>\n            <ListItemText style={{ textAlign: \"center\" }}>\n              繁体中文\n            </ListItemText>\n          </ListItem>\n          <ListItem button onClick={() => chooseLanguage(\"ja-JP\")}>\n            <ListItemText style={{ textAlign: \"center\" }}>日本語</ListItemText>\n          </ListItem>\n        </List>\n      </DialogContent>\n    </Dialog>\n  );\n}\n","import {\n  Box,\n  CssBaseline,\n  Drawer,\n  Hidden,\n  List,\n  ListItem,\n  IconButton,\n  Divider,\n  ListItemIcon,\n  ListItemText,\n  Avatar,\n  CircularProgress,\n  Badge,\n  useMediaQuery,\n  ListItemSecondaryAction,\n  Tooltip,\n  Card,\n} from \"@material-ui/core\";\nimport {\n  fade,\n  createStyles,\n  makeStyles,\n  Theme,\n  useTheme,\n  lighten,\n} from \"@material-ui/core/styles\";\nimport clsx from \"clsx\";\nimport React, { useState, useCallback, useEffect } from \"react\";\nimport { useTranslation } from \"react-i18next\";\nimport Identicon from \"identicon.js\";\nimport { sha256 } from \"js-sha256\";\nimport {\n  PlusCircleOutline,\n  Cog as SettingsIcon,\n  Bell,\n  Notebook,\n} from \"mdi-material-ui\";\nimport SplitPane from \"react-split-pane\";\nimport {\n  CrossnoteContainer,\n  SelectedSectionType,\n  HomeSection,\n} from \"../containers/crossnote\";\nimport Editor from \"../components/Editor\";\nimport AddNotebookDialog from \"../components/AddNotebookDialog\";\nimport NotebookTreeView from \"../components/NotebookTreeView\";\nimport NotesPanel from \"../components/NotesPanel\";\nimport WikiPanel from \"../components/WikiPanel\";\nimport { browserHistory } from \"../utilities/history\";\nimport { Settings } from \"../components/Settings\";\nimport { CloudContainer } from \"../containers/cloud\";\nimport { globalContainers } from \"../containers/global\";\nimport { SettingsContainer } from \"../containers/settings\";\nimport { AuthDialog } from \"../components/AuthDialog\";\nimport { Notifications } from \"../components/Notifications\";\nimport ExplorePanel from \"../components/ExplorePanel\";\nimport { NotebookPanel } from \"../components/NotebookPanel\";\nimport { PrivacyPolicy } from \"./Privacy\";\nimport AttachmentsPanel from \"../components/AttachmentsPanel\";\nimport LanguageSelectorDialog from \"../components/LanguageSelectorDialog\";\nconst is = require(\"is_js\");\n\nconst drawerWidth = 200;\nconst notesPanelWidth = 350;\nconst notesPanelMinWidth = 220;\nconst notesPanelMaxWidth = 400;\nconst useStyles = makeStyles((theme: Theme) =>\n  createStyles({\n    page: {\n      display: \"flex\",\n      width: \"100%\",\n      height: \"100%\",\n    },\n    appBar: {\n      zIndex: theme.zIndex.drawer + 1,\n      boxShadow: \"none\",\n    },\n    toolBar: {\n      display: \"flex\",\n      flexDirection: \"row\",\n      justifyContent: \"space-between\",\n    },\n    search: {\n      \"position\": \"relative\",\n      \"borderRadius\": theme.shape.borderRadius,\n      \"backgroundColor\": fade(theme.palette.common.white, 0.15),\n      \"&:hover\": {\n        backgroundColor: fade(theme.palette.common.white, 0.25),\n      },\n      \"marginRight\": theme.spacing(2),\n      \"marginLeft\": 0,\n      \"width\": \"100%\",\n      [theme.breakpoints.up(\"sm\")]: {\n        marginLeft: theme.spacing(3),\n        width: \"auto\",\n      },\n    },\n    searchIcon: {\n      width: theme.spacing(7),\n      height: \"100%\",\n      position: \"absolute\",\n      pointerEvents: \"none\",\n      display: \"flex\",\n      alignItems: \"center\",\n      justifyContent: \"center\",\n    },\n    inputRoot: {\n      color: \"inherit\",\n    },\n    inputInput: {\n      padding: theme.spacing(1, 1, 1, 7),\n      transition: theme.transitions.create(\"width\"),\n      width: \"100%\",\n      [theme.breakpoints.up(\"md\")]: {\n        width: 200,\n      },\n    },\n    displayNone: {\n      display: \"none\",\n    },\n    drawer: {\n      [theme.breakpoints.up(\"sm\")]: {\n        width: drawerWidth,\n        flexShrink: 0,\n      },\n    },\n    drawerPaper: {\n      width: drawerWidth,\n      backgroundColor: lighten(theme.palette.background.paper, 0.05),\n      display: \"flex\",\n      flexDirection: \"column\",\n      justifyContent: \"space-between\",\n      overflow: \"hidden\",\n    },\n    notebooksSection: {\n      overflowY: \"auto\",\n    },\n    controllersSection: {\n      // flex: 1,\n    },\n    listItemIcon: {\n      color: theme.palette.text.secondary,\n    },\n    avatar: {\n      width: \"24px\",\n      height: \"24px\",\n      borderRadius: \"4px\",\n    },\n    selectedSection: {\n      backgroundColor: \"#ccc\",\n    },\n    left: {\n      display: \"flex\",\n      flexDirection: \"row\",\n      alignItems: \"center\",\n    },\n    menuButton: {\n      marginRight: theme.spacing(2),\n      /*\n      [theme.breakpoints.up(\"sm\")]: {\n        display: \"none\"\n      }\n      */\n    },\n    mainPanel: {\n      position: \"relative\",\n      display: \"flex\",\n      flexDirection: \"row\",\n      flexGrow: 1,\n      overflow: \"auto\",\n      backgroundColor: theme.palette.background.default,\n    },\n    notesPanel: {\n      maxWidth: \"100%\",\n      height: \"100%\",\n      borderRadius: 0,\n      backgroundColor: theme.palette.background.default,\n      [theme.breakpoints.down(\"xs\")]: {\n        width: \"100%\",\n      },\n    },\n    editorPanel: {\n      position: \"absolute\",\n      width: \"100%\",\n      height: \"100%\",\n      borderRadius: 0,\n      backgroundColor: theme.palette.background.default,\n      [theme.breakpoints.down(\"md\")]: {\n        // width: `calc(100% - ${notesPanelWidth}px)`,\n        // left: `${notesPanelWidth}px`\n      },\n      [theme.breakpoints.down(\"xs\")]: {\n        display: \"none\",\n        top: \"0\",\n        left: \"0\",\n        width: \"100%\",\n        height: \"100%\",\n      },\n    },\n    toolBarSpace: theme.mixins.toolbar,\n  }),\n);\n\ninterface QueryParams {\n  notebookID?: string;\n  repo?: string;\n  branch?: string;\n  filePath?: string;\n}\n\ninterface Props {\n  section: HomeSection;\n  queryParams: QueryParams;\n}\n\nexport function Home(props: Props) {\n  const classes = useStyles(props);\n  const theme = useTheme();\n  const isMobile = useMediaQuery(theme.breakpoints.down(\"xs\"));\n  const [addNotebookDialogOpen, setAddNotebookDialogOpen] = useState<boolean>(\n    false,\n  );\n  const [addNotebookRepo, setAddNotebookRepo] = useState<string>(\"\");\n  const [addNotebookBranch, setAddNotebookBranch] = useState<string>(\"\");\n\n  const [drawerOpen, setDrawerOpen] = useState<boolean>(false);\n  const { t } = useTranslation();\n  const crossnoteContainer = CrossnoteContainer.useContainer();\n  const cloudContainer = CloudContainer.useContainer();\n  const settingsContainer = SettingsContainer.useContainer();\n\n  // HACK: Register globalContainers for widgets use\n  globalContainers.cloudContainer = cloudContainer;\n  globalContainers.settingsContainer = settingsContainer;\n  globalContainers.crossnoteContainer = crossnoteContainer;\n\n  const toggleDrawer = useCallback(() => {\n    setDrawerOpen(!drawerOpen);\n  }, [drawerOpen]);\n\n  useEffect(() => {\n    if (!crossnoteContainer.initialized) {\n      return;\n    }\n    if (props.section === HomeSection.Notebooks) {\n      if (props.queryParams) {\n        const notebookID = props.queryParams[\"notebookID\"];\n        if (notebookID) {\n          const filePath = decodeURIComponent(props.queryParams.filePath || \"\");\n          const notebook = crossnoteContainer.notebooks.find(\n            (nb) => nb._id === notebookID,\n          );\n          if (notebook && crossnoteContainer.selectedNotebook !== notebook) {\n            crossnoteContainer.setSelectedNotebook(notebook);\n          }\n          if (filePath) {\n            crossnoteContainer.setPendingNote({\n              notebookID: notebookID,\n              filePath,\n            });\n          } else {\n            crossnoteContainer.setPendingNote(null);\n          }\n        } else if (props.queryParams.repo && props.queryParams.branch) {\n          const repo = decodeURIComponent(props.queryParams.repo || \"\");\n          const branch = decodeURIComponent(props.queryParams.branch || \"\");\n          const filePath = decodeURIComponent(props.queryParams.filePath || \"\");\n          const notebook = crossnoteContainer.notebooks.find(\n            (nb) => nb.gitURL === repo && nb.gitBranch === branch,\n          );\n          if (notebook) {\n            if (crossnoteContainer.selectedNotebook !== notebook) {\n              crossnoteContainer.setSelectedNotebook(notebook);\n            }\n            if (filePath) {\n              crossnoteContainer.setPendingNote({\n                repo,\n                branch,\n                filePath,\n              });\n            } else {\n              crossnoteContainer.setPendingNote(null);\n            }\n          } else {\n            // Show dialog\n            setAddNotebookRepo(repo);\n            setAddNotebookBranch(branch);\n            setAddNotebookDialogOpen(true);\n          }\n        }\n      }\n    }\n  }, [props.section, props.queryParams, crossnoteContainer.initialized]);\n\n  useEffect(() => {\n    crossnoteContainer.setHomeSection(props.section);\n  }, [props.section]);\n\n  const drawer = (\n    <React.Fragment>\n      <Box\n        className={clsx(classes.notebooksSection)}\n        style={{\n          overflowY: crossnoteContainer.initialized ? \"auto\" : \"hidden\",\n        }}\n      >\n        <List disablePadding={true}>\n          <ListItem>\n            <ListItemIcon className={clsx(classes.listItemIcon)}>\n              <Notebook></Notebook>\n            </ListItemIcon>\n            <ListItemText primary={t(\"general/Notebooks\")}></ListItemText>\n            <ListItemSecondaryAction style={{ right: \"0\" }}>\n              {crossnoteContainer.initialized && (\n                <Tooltip title={t(\"general/add-a-notebook\")}>\n                  <IconButton\n                    className={clsx(classes.listItemIcon)}\n                    onClick={() => setAddNotebookDialogOpen(true)}\n                  >\n                    <PlusCircleOutline></PlusCircleOutline>\n                  </IconButton>\n                </Tooltip>\n              )}\n            </ListItemSecondaryAction>\n          </ListItem>\n        </List>\n        <List disablePadding={true} style={{ marginBottom: theme.spacing(16) }}>\n          {crossnoteContainer.notebooks.map((notebook) => {\n            return (\n              <ListItem\n                disableGutters={true}\n                style={{ padding: \"0\" }}\n                key={notebook._id}\n              >\n                <NotebookTreeView notebook={notebook}></NotebookTreeView>\n              </ListItem>\n            );\n          })}\n          {!crossnoteContainer.initialized && (\n            <ListItem>\n              <CircularProgress style={{ margin: \"0 auto\" }}></CircularProgress>\n            </ListItem>\n          )}\n        </List>\n      </Box>\n\n      <Box className={clsx(classes.controllersSection)}>\n        <Divider></Divider>\n        <List disablePadding={true}>\n          <ListItem\n            button\n            onClick={() => {\n              browserHistory.push(`/explore`);\n              setDrawerOpen(false);\n            }}\n            style={{ display: is.online() ? \"flex\" : \"none\" }}\n          >\n            <ListItemIcon className={clsx(classes.listItemIcon)}>\n              <img\n                src=\"/logo.svg\"\n                style={{ width: \"28px\", height: \"28px\" }}\n                alt={\"Crossnote\"}\n              ></img>\n            </ListItemIcon>\n            <ListItemText primary={t(\"general/Explore\")}></ListItemText>\n          </ListItem>\n          <ListItem\n            button\n            onClick={() => {\n              browserHistory.push(`/settings`);\n              setDrawerOpen(false);\n            }}\n          >\n            {cloudContainer.viewer ? (\n              <ListItemIcon className={clsx(classes.listItemIcon)}>\n                <Avatar\n                  className={clsx(classes.avatar)}\n                  variant={\"rounded\"}\n                  src={\n                    cloudContainer.viewer.avatar ||\n                    \"data:image/png;base64,\" +\n                      new Identicon(\n                        sha256(\n                          cloudContainer.viewer &&\n                            cloudContainer.viewer.username,\n                        ),\n                        80,\n                      ).toString()\n                  }\n                ></Avatar>\n              </ListItemIcon>\n            ) : (\n              <ListItemIcon className={clsx(classes.listItemIcon)}>\n                <SettingsIcon></SettingsIcon>\n              </ListItemIcon>\n            )}\n            <ListItemText primary={t(\"general/Settings\")}></ListItemText>\n          </ListItem>\n          {cloudContainer.loggedIn && (\n            <ListItem\n              button\n              onClick={() => {\n                browserHistory.push(`/notifications`);\n                setDrawerOpen(false);\n              }}\n            >\n              <ListItemIcon className={clsx(classes.listItemIcon)}>\n                {cloudContainer.viewer.notifications.totalCount > 0 ? (\n                  <Badge\n                    color={\"secondary\"}\n                    badgeContent={\n                      cloudContainer.viewer.notifications.totalCount || \"\"\n                    }\n                  >\n                    <Bell></Bell>\n                  </Badge>\n                ) : (\n                  <Bell></Bell>\n                )}\n              </ListItemIcon>\n              <ListItemText primary={t(\"general/Notifications\")}></ListItemText>\n            </ListItem>\n          )}\n        </List>\n      </Box>\n    </React.Fragment>\n  );\n\n  const notesPanel =\n    props.section === HomeSection.Notebooks &&\n    (crossnoteContainer.selectedSection.type === SelectedSectionType.Wiki ? (\n      <Box className={clsx(classes.notesPanel)} id={\"notes-panel\"}>\n        <WikiPanel toggleDrawer={toggleDrawer}></WikiPanel>\n      </Box>\n    ) : crossnoteContainer.selectedSection.type ===\n      SelectedSectionType.Attachments ? (\n      <Box className={clsx(classes.notesPanel)} id={\"notes-panel\"}>\n        <AttachmentsPanel toggleDrawer={toggleDrawer}></AttachmentsPanel>\n      </Box>\n    ) : (\n      <Box className={clsx(classes.notesPanel)} id={\"notes-panel\"}>\n        <NotesPanel toggleDrawer={toggleDrawer}></NotesPanel>\n      </Box>\n    ));\n\n  const editorPanel = props.section === HomeSection.Notebooks && (\n    <Card\n      className={clsx(classes.editorPanel, \"editor-panel\")}\n      style={{\n        display: crossnoteContainer.displayMobileEditor && \"block\",\n      }}\n    >\n      <Editor note={crossnoteContainer.selectedNote}></Editor>\n    </Card>\n  );\n\n  const explorePanel = props.section === HomeSection.Explore && (\n    <Box className={clsx(classes.notesPanel)}>\n      <ExplorePanel toggleDrawer={toggleDrawer}></ExplorePanel>\n    </Box>\n  );\n\n  const notebookPanel = props.section === HomeSection.Explore && (\n    <Card\n      className={clsx(classes.editorPanel)}\n      style={{\n        display: cloudContainer.displayNotebookPreview && \"block\",\n      }}\n    >\n      <NotebookPanel notebook={cloudContainer.selectedNotebook}></NotebookPanel>\n    </Card>\n  );\n\n  return (\n    <Box className={clsx(classes.page)}>\n      <CssBaseline></CssBaseline>\n      <nav className={clsx(classes.drawer, \"drawer\")}>\n        {/* The implementation can be swapped with js to avoid SEO duplication of links. */}\n        <Hidden smUp implementation=\"css\">\n          <Drawer\n            variant=\"temporary\"\n            open={drawerOpen}\n            onClose={toggleDrawer}\n            classes={{\n              paper: classes.drawerPaper,\n            }}\n            ModalProps={{\n              keepMounted: true, // Better open performance on mobile.\n            }}\n          >\n            {drawer}\n          </Drawer>\n        </Hidden>\n        <Hidden xsDown implementation=\"css\">\n          <Drawer\n            classes={{\n              paper: classes.drawerPaper,\n            }}\n            variant=\"permanent\"\n            open\n          >\n            {drawer}\n          </Drawer>\n        </Hidden>\n      </nav>\n      <Box className={clsx(classes.mainPanel)} id=\"main-panel\">\n        {props.section === HomeSection.Notebooks &&\n          (isMobile ? (\n            <React.Fragment>\n              {notesPanel}\n              {editorPanel}\n            </React.Fragment>\n          ) : (\n            <SplitPane\n              defaultSize={notesPanelWidth}\n              minSize={notesPanelMinWidth}\n              maxSize={notesPanelMaxWidth}\n              className={\"main-panel-split-pane\"}\n            >\n              {notesPanel}\n              {editorPanel}\n            </SplitPane>\n          ))}\n        {props.section === HomeSection.Explore &&\n          (isMobile ? (\n            <React.Fragment>\n              {explorePanel}\n              {notebookPanel}\n            </React.Fragment>\n          ) : (\n            <SplitPane\n              defaultSize={notesPanelWidth}\n              minSize={notesPanelMinWidth}\n              maxSize={notesPanelMaxWidth}\n              className={\"main-panel-split-pane\"}\n            >\n              {explorePanel}\n              {notebookPanel}\n            </SplitPane>\n          ))}\n        {props.section === HomeSection.Settings && (\n          <Settings toggleDrawer={toggleDrawer}></Settings>\n        )}\n        {props.section === HomeSection.Notifications && (\n          <Notifications toggleDrawer={toggleDrawer}></Notifications>\n        )}\n        {props.section === HomeSection.Privacy && (\n          <PrivacyPolicy toggleDrawer={toggleDrawer}></PrivacyPolicy>\n        )}\n      </Box>\n      <AddNotebookDialog\n        open={addNotebookDialogOpen}\n        onClose={() => setAddNotebookDialogOpen(false)}\n        canCancel={true}\n        gitURL={addNotebookRepo}\n        gitBranch={addNotebookBranch}\n      ></AddNotebookDialog>\n      <AuthDialog\n        open={cloudContainer.authDialogOpen}\n        onClose={() => cloudContainer.setAuthDialogOpen(false)}\n      ></AuthDialog>\n      <LanguageSelectorDialog></LanguageSelectorDialog>\n    </Box>\n  );\n}\n","import React, { useEffect, useState } from \"react\";\nimport { useTranslation } from \"react-i18next\";\nimport {\n  Box,\n  Typography,\n  IconButton,\n  TextField,\n  Card,\n  Button,\n} from \"@material-ui/core\";\nimport { createStyles, makeStyles, Theme } from \"@material-ui/core/styles\";\nimport clsx from \"clsx\";\nimport {\n  useLinkWithGitHubAccountMutation,\n  useSignInWithGitHubAccountMutation,\n  useSignUpWithGitHubAccountMutation,\n} from \"../generated/graphql\";\nimport { browserHistory } from \"../utilities/history\";\nimport { UUIDNil } from \"../utilities/utils\";\nimport { ChevronLeft } from \"mdi-material-ui\";\nimport Noty from \"noty\";\n\nconst useStyles = makeStyles((theme: Theme) =>\n  createStyles({\n    container: {\n      position: \"relative\",\n      width: \"100%\",\n      height: \"100%\",\n      color: theme.palette.text.primary,\n      backgroundColor: theme.palette.background.default,\n    },\n    wrapper: {\n      position: \"relative\",\n      width: \"960px\",\n      maxWidth: \"100%\",\n      margin: \"0 auto\",\n      transform: \"translateY(-60%)\",\n      top: \"50%\",\n      padding: \"16px\",\n      boxSizing: \"border-box\",\n    },\n    email: {\n      marginBottom: \"24px\",\n    },\n    password: {\n      marginBottom: \"24px\",\n    },\n    errorMessage: {\n      color: \"#f44336\",\n    },\n    card: {\n      position: \"relative\",\n      width: \"300px\",\n      maxWidth: \"100%\",\n      padding: \"16px\",\n      margin: \"32px auto\",\n    },\n  }),\n);\n\ninterface Props {\n  code: string;\n}\nexport function GitHubOAuthCallback(props: Props) {\n  const classes = useStyles(props);\n  const { t, i18n } = useTranslation();\n  const [accessToken, setAccessToken] = useState<string>(\"\");\n  const [title, setTitle] = useState<string>(t(\"github-oauth/wait\"));\n  const [username, setUsername] = useState<string>(\"\");\n  const [email, setEmail] = useState<string>(\"\");\n  const [errorMessage, setErrorMessage] = useState<string>(\"\");\n  const [\n    resLinkWithGitHubAccount,\n    executeLinkWithGitHubAccount,\n  ] = useLinkWithGitHubAccountMutation();\n  const [\n    resSignInWithGitHubAccount,\n    executeSignInWithGitHubAccount,\n  ] = useSignInWithGitHubAccountMutation();\n  const [\n    resSignUpWithGitHubAccount,\n    executeSignUpWithGitHubAccount,\n  ] = useSignUpWithGitHubAccountMutation();\n\n  useEffect(() => {\n    if (props.code) {\n      if (localStorage.getItem(\"token\")) {\n        // Link with GitHub account\n        executeLinkWithGitHubAccount({ code: props.code });\n      } else {\n        // Sign in with GitHub account\n        executeSignInWithGitHubAccount({ code: props.code });\n      }\n    }\n  }, [props.code]);\n\n  useEffect(() => {\n    if (resLinkWithGitHubAccount.fetching) {\n    } else if (resLinkWithGitHubAccount.error) {\n      new Noty({\n        type: \"error\",\n        text: t(\"github-oauth/link-with-github-account-failure\"),\n        layout: \"topRight\",\n        theme: \"relax\",\n        timeout: 2000,\n      }).show();\n      setTitle(t(\"github-oauth/link-with-github-account-failure\"));\n    } else if (resLinkWithGitHubAccount.data) {\n      browserHistory.replace(\"/settings\");\n    }\n  }, [resLinkWithGitHubAccount]);\n\n  useEffect(() => {\n    if (resSignInWithGitHubAccount.fetching) {\n    } else if (resSignInWithGitHubAccount.error) {\n      new Noty({\n        type: \"error\",\n        text: t(\"github-oauth/sign-in-with-github-account-failure\"),\n        layout: \"topRight\",\n        theme: \"relax\",\n        timeout: 2000,\n      }).show();\n      setTitle(t(\"github-oauth/sign-in-with-github-account-failure\"));\n    } else if (\n      resSignInWithGitHubAccount.data &&\n      resSignInWithGitHubAccount.data.signInWithGitHubAccount &&\n      resSignInWithGitHubAccount.data.signInWithGitHubAccount.token\n    ) {\n      if (\n        resSignInWithGitHubAccount.data.signInWithGitHubAccount.user.id ===\n        UUIDNil\n      ) {\n        // Ask user to register for new account\n        setAccessToken(\n          resSignInWithGitHubAccount.data.signInWithGitHubAccount.token,\n        );\n        setUsername(\n          resSignInWithGitHubAccount.data.signInWithGitHubAccount.user.username,\n        );\n        setEmail(\n          resSignInWithGitHubAccount.data.signInWithGitHubAccount.user.email,\n        );\n      } else {\n        localStorage.setItem(\n          \"token\",\n          resSignInWithGitHubAccount.data.signInWithGitHubAccount.token,\n        );\n        browserHistory.replace(\"/\");\n        window.location.reload();\n      }\n    }\n  }, [resSignInWithGitHubAccount]);\n\n  useEffect(() => {\n    if (resSignUpWithGitHubAccount.error) {\n      setErrorMessage(\n        resSignUpWithGitHubAccount.error.message\n          .replace(/\\[GraphQL\\]/, \"\")\n          .trim(),\n      );\n    } else if (resSignUpWithGitHubAccount.data) {\n      localStorage.setItem(\n        \"token\",\n        resSignUpWithGitHubAccount.data.signUpWithGitHubAccount.token,\n      );\n      browserHistory.replace(\"/\");\n      window.location.reload();\n    }\n  }, [resSignUpWithGitHubAccount]);\n\n  const signUpWithGitHubAccessToken = () => {\n    executeSignUpWithGitHubAccount({\n      email,\n      username,\n      accessToken,\n    });\n  };\n\n  const backBtn = (\n    <IconButton\n      onClick={() => {\n        browserHistory.replace(\"/\");\n        window.location.reload();\n      }}\n      color={\"inherit\"}\n    >\n      <ChevronLeft></ChevronLeft>\n    </IconButton>\n  );\n\n  return (\n    <Box className={clsx(classes.container)}>\n      <Box className={clsx(classes.wrapper)}>\n        {accessToken ? (\n          <React.Fragment>\n            {backBtn}\n            <Typography variant=\"h4\" style={{ marginBottom: \"0\" }}>\n              {t(\"github-oauth/first-time-sign-in\")}\n            </Typography>\n            <Typography variant=\"h5\" style={{ marginBottom: \"0\" }}>\n              {t(\"github-oauth/first-time-sign-in-small\")}\n            </Typography>\n            <Card elevation={2} className={clsx(classes.card)}>\n              <TextField\n                className={clsx(classes.email)}\n                label={t(\"general/Username\")}\n                variant=\"outlined\"\n                value={username}\n                onChange={(event) => {\n                  setErrorMessage(\"\");\n                  setUsername(event.target.value);\n                }}\n                fullWidth={true}\n              ></TextField>\n              <TextField\n                className={clsx(classes.email)}\n                label={t(\"general/Email\")}\n                variant=\"outlined\"\n                value={email}\n                onChange={(event) => {\n                  setErrorMessage(\"\");\n                  setEmail(event.target.value);\n                }}\n                onClick={(event) => {\n                  event.currentTarget.focus();\n                }}\n                fullWidth={true}\n              ></TextField>\n              {errorMessage.length ? (\n                <Typography className={clsx(classes.errorMessage)}>\n                  {errorMessage}\n                </Typography>\n              ) : null}\n              <Button\n                variant=\"contained\"\n                color=\"primary\"\n                onClick={() => signUpWithGitHubAccessToken()}\n                fullWidth={true}\n                disabled={resSignUpWithGitHubAccount.fetching}\n              >\n                {t(\"general/Continue\")}\n              </Button>\n            </Card>\n          </React.Fragment>\n        ) : (\n          <React.Fragment>\n            {backBtn}\n            <Typography variant={\"h2\"}>{title}</Typography>\n            <Typography>{props.code}</Typography>\n          </React.Fragment>\n        )}\n      </Box>\n    </Box>\n  );\n}\n","// This optional code is used to register a service worker.\n// register() is not called by default.\n\n// This lets the app load faster on subsequent visits in production, and gives\n// it offline capabilities. However, it also means that developers (and users)\n// will only see deployed updates on subsequent visits to a page, after all the\n// existing tabs open on the page have been closed, since previously cached\n// resources are updated in the background.\n\n// To learn more about the benefits of this model and instructions on how to\n// opt-in, read https://bit.ly/CRA-PWA\n\nconst isLocalhost = Boolean(\n  window.location.hostname === \"localhost\" ||\n    // [::1] is the IPv6 localhost address.\n    window.location.hostname === \"[::1]\" ||\n    // 127.0.0.1/8 is considered localhost for IPv4.\n    window.location.hostname.match(\n      /^127(?:\\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/,\n    ),\n);\n\ntype Config = {\n  onSuccess?: (registration: ServiceWorkerRegistration) => void;\n  onUpdate?: (registration: ServiceWorkerRegistration) => void;\n};\n\nexport function register(config?: Config) {\n  if (process.env.NODE_ENV === \"production\" && \"serviceWorker\" in navigator) {\n    // The URL constructor is available in all browsers that support SW.\n    const publicUrl = new URL(\n      (process as { env: { [key: string]: string } }).env.PUBLIC_URL,\n      window.location.href,\n    );\n    if (publicUrl.origin !== window.location.origin) {\n      // Our service worker won't work if PUBLIC_URL is on a different origin\n      // from what our page is served on. This might happen if a CDN is used to\n      // serve assets; see https://github.com/facebook/create-react-app/issues/2374\n      return;\n    }\n\n    window.addEventListener(\"load\", () => {\n      const swUrl = `${process.env.PUBLIC_URL}/service-worker.js`;\n\n      if (isLocalhost) {\n        // This is running on localhost. Let's check if a service worker still exists or not.\n        checkValidServiceWorker(swUrl, config);\n\n        // Add some additional logging to localhost, pointing developers to the\n        // service worker/PWA documentation.\n        navigator.serviceWorker.ready.then(() => {\n          console.log(\n            \"This web app is being served cache-first by a service \" +\n              \"worker. To learn more, visit https://bit.ly/CRA-PWA\",\n          );\n        });\n      } else {\n        // Is not localhost. Just register service worker\n        registerValidSW(swUrl, config);\n      }\n    });\n  }\n}\n\nfunction registerValidSW(swUrl: string, config?: Config) {\n  navigator.serviceWorker\n    .register(swUrl)\n    .then((registration) => {\n      registration.onupdatefound = () => {\n        const installingWorker = registration.installing;\n        if (installingWorker == null) {\n          return;\n        }\n        installingWorker.onstatechange = () => {\n          if (installingWorker.state === \"installed\") {\n            if (navigator.serviceWorker.controller) {\n              // At this point, the updated precached content has been fetched,\n              // but the previous service worker will still serve the older\n              // content until all client tabs are closed.\n              console.log(\n                \"New content is available and will be used when all \" +\n                  \"tabs for this page are closed. See https://bit.ly/CRA-PWA.\",\n              );\n\n              // Execute callback\n              if (config && config.onUpdate) {\n                config.onUpdate(registration);\n              }\n            } else {\n              // At this point, everything has been precached.\n              // It's the perfect time to display a\n              // \"Content is cached for offline use.\" message.\n              console.log(\"Content is cached for offline use.\");\n\n              // Execute callback\n              if (config && config.onSuccess) {\n                config.onSuccess(registration);\n              }\n            }\n          }\n        };\n      };\n    })\n    .catch((error) => {\n      console.error(\"Error during service worker registration:\", error);\n    });\n}\n\nfunction checkValidServiceWorker(swUrl: string, config?: Config) {\n  // Check if the service worker can be found. If it can't reload the page.\n  fetch(swUrl)\n    .then((response) => {\n      // Ensure service worker exists, and that we really are getting a JS file.\n      const contentType = response.headers.get(\"content-type\");\n      if (\n        response.status === 404 ||\n        (contentType != null && contentType.indexOf(\"javascript\") === -1)\n      ) {\n        // No service worker found. Probably a different app. Reload the page.\n        navigator.serviceWorker.ready.then((registration) => {\n          registration.unregister().then(() => {\n            window.location.reload();\n          });\n        });\n      } else {\n        // Service worker found. Proceed as normal.\n        registerValidSW(swUrl, config);\n      }\n    })\n    .catch(() => {\n      console.log(\n        \"No internet connection found. App is running in offline mode.\",\n      );\n    });\n}\n\nexport function unregister() {\n  if (\"serviceWorker\" in navigator) {\n    navigator.serviceWorker.ready.then((registration) => {\n      registration.unregister();\n    });\n  }\n}\n","import React, { FC, useEffect, useCallback } from \"react\";\nimport { Snackbar, Button } from \"@material-ui/core\";\nimport * as serviceWorker from \"../serviceWorker\";\nimport { useTranslation } from \"react-i18next\";\n\nconst ServiceWorkerWrapper: FC = () => {\n  const { t } = useTranslation();\n  const [showReload, setShowReload] = React.useState(false);\n  const [\n    waitingWorker,\n    setWaitingWorker,\n  ] = React.useState<ServiceWorker | null>(null);\n\n  const onSWUpdate = (registration: ServiceWorkerRegistration) => {\n    setShowReload(true);\n    setWaitingWorker(registration.waiting);\n  };\n\n  useEffect(() => {\n    serviceWorker.register({ onUpdate: onSWUpdate });\n  }, []);\n\n  const reloadPage = useCallback(() => {\n    waitingWorker?.postMessage({ type: \"SKIP_WAITING\" });\n    setShowReload(false);\n    window.location.reload(true);\n  }, [waitingWorker]);\n\n  return (\n    <Snackbar\n      open={showReload}\n      message={t(\"notifications/new-version-available\")}\n      onClick={reloadPage}\n      anchorOrigin={{ vertical: \"top\", horizontal: \"center\" }}\n      action={\n        <Button color=\"inherit\" size=\"small\" onClick={reloadPage}>\n          {t(\"general/update\")}\n        </Button>\n      }\n    />\n  );\n};\n\nexport default ServiceWorkerWrapper;\n","import React, { useEffect, FC } from \"react\";\nimport \"./App.css\";\nimport { ThemeProvider } from \"@material-ui/styles\";\nimport * as qs from \"qs\";\nimport { Router, Route, Switch } from \"react-router-dom\";\nimport { browserHistory } from \"./utilities/history\";\nimport { Home } from \"./pages/Home\";\nimport { GitHubOAuthCallback } from \"./components/GitHubOAuthCallback\";\nimport \"./editor\";\nimport { HomeSection } from \"./containers/crossnote\";\nimport { SettingsContainer } from \"./containers/settings\";\nimport ServiceWorkerWrapper from \"./components/ServiceWorkerWrapper\";\n// @ts-ignore\nimport PWAPrompt from \"react-ios-pwa-prompt\";\nimport { useTranslation } from \"react-i18next\";\nconst is = require(\"is_js\");\n\nconst App: FC = () => {\n  const { t } = useTranslation();\n  const settingsContainer = SettingsContainer.useContainer();\n  useEffect(() => {\n    const handler = (event: any) => {\n      try {\n        event.preventDefault();\n        event.prompt();\n        event.userChoice.then((choiceResult: any) => {\n          console.log(choiceResult);\n        });\n      } catch (error) {\n        console.log(error);\n      }\n    };\n    window.addEventListener(\"beforeinstallprompt\", handler);\n    return () => {\n      window.removeEventListener(\"beforeinstallprompt\", handler);\n    };\n  }, []);\n  return (\n    <ThemeProvider theme={settingsContainer.theme.muiTheme}>\n      <div className=\"App\">\n        <Router history={browserHistory}>\n          <Switch>\n            <Route\n              path={`/settings`}\n              exact={true}\n              render={(props) => (\n                <Home section={HomeSection.Settings} queryParams={{}}></Home>\n              )}\n            ></Route>\n            <Route\n              path={`/explore`}\n              exact={true}\n              render={(props) => (\n                <Home section={HomeSection.Explore} queryParams={{}}></Home>\n              )}\n            ></Route>\n            <Route\n              path={`/notifications`}\n              exact={true}\n              render={(props) => (\n                <Home\n                  section={HomeSection.Notifications}\n                  queryParams={{}}\n                ></Home>\n              )}\n            ></Route>\n            <Route\n              exact={true}\n              path={`/github_oauth_callback`}\n              render={(props) => (\n                <GitHubOAuthCallback\n                  code={\n                    qs.parse(props.location.search.replace(/^\\?/, \"\"))[\n                      \"code\"\n                    ] || \"\"\n                  }\n                ></GitHubOAuthCallback>\n              )}\n            ></Route>\n            <Route\n              path={`/privacy`}\n              exact={true}\n              render={(props) => (\n                <Home section={HomeSection.Privacy} queryParams={{}}></Home>\n              )}\n            ></Route>\n            <Route\n              path={`/`}\n              render={(props) => (\n                <Home\n                  section={HomeSection.Notebooks}\n                  queryParams={qs.parse(\n                    props.location.search.replace(/^\\?/, \"\"),\n                  )}\n                ></Home>\n              )}\n            ></Route>\n          </Switch>\n        </Router>\n        <ServiceWorkerWrapper></ServiceWorkerWrapper>\n        {is.safari() ? (\n          <PWAPrompt\n            copyTitle={t(\"react-ios-pwa-prompt/copy-title\")}\n            copyBody={t(\"react-ios-pwa-prompt/copy-body\")}\n            copyShareButtonLabel={t(\n              \"react-ios-pwa-prompt/copy-share-button-label\",\n            )}\n            copyAddHomeButtonLabel={t(\n              \"react-ios-pwa-prompt/copy-add-home-button-label\",\n            )}\n            copyClosePrompt={t(\"general/cancel\")}\n          ></PWAPrompt>\n        ) : null}\n      </div>\n    </ThemeProvider>\n  );\n};\n\nexport default App;\n","import React from \"react\";\nimport ReactDOM from \"react-dom\";\nimport \"typeface-noto-sans-sc\";\nimport \"typeface-roboto\";\nimport \"noty/lib/noty.css\";\nimport \"noty/lib/themes/relax.css\";\nimport \"@mdi/font/css/materialdesignicons.min.css\";\n\nimport \"./i18n/i18n\";\nimport \"./index.css\";\nimport \"./themes/manager\";\nimport App from \"./App\";\nimport Crossnote from \"./lib/crossnote\";\nimport \"./lib/fs\";\nimport { CrossnoteContainer } from \"./containers/crossnote\";\nimport { SettingsContainer } from \"./containers/settings\";\nimport { CloudContainer } from \"./containers/cloud\";\nimport { NotificationsContainer } from \"./containers/notifications\";\n\nimport { Provider } from \"urql\";\nimport { GraphQLClient } from \"./utilities/client\";\n\ntry {\n  const crossnote = new Crossnote();\n  ReactDOM.render(\n    <Provider value={GraphQLClient}>\n      <CrossnoteContainer.Provider\n        initialState={{\n          crossnote: crossnote,\n        }}\n      >\n        <SettingsContainer.Provider initialState={{}}>\n          <CloudContainer.Provider initialState={{}}>\n            <NotificationsContainer.Provider initialState={{}}>\n              <App />\n            </NotificationsContainer.Provider>\n          </CloudContainer.Provider>\n        </SettingsContainer.Provider>\n      </CrossnoteContainer.Provider>\n    </Provider>,\n    document.getElementById(\"root\"),\n  );\n} catch (error) {\n  console.log(error);\n}\n\n// If you want your app to work offline and load faster, you can change\n// unregister() to register() below. Note this comes with some pitfalls.\n// Learn more about service workers: https://bit.ly/CRA-PWA\n// serviceWorker.unregister();\n//// serviceWorker.register();\n","import { PeerJSOption } from \"peerjs\";\n\nexport function waitForTimeout(timeout: number) {\n  return new Promise((resolve, reject) => {\n    return setTimeout(() => {\n      return resolve();\n    }, timeout);\n  });\n}\n\nexport const UUIDNil = \"00000000-0000-0000-0000-000000000000\";\n\nexport const OneDay = 1000 * 60 * 60 * 24;\n\nexport function getGraphQLEndpoint() {\n  if (process.env.NODE_ENV === \"production\") {\n    return `https://crossnote.app/api/graphql`;\n  } else {\n    return `http://${window.location.hostname}:9999/graphql`;\n  }\n}\n\nexport function getPeerJSEndpoint(): PeerJSOption {\n  if (process.env.NODE_ENV === \"production\") {\n    return {\n      host: `crossnote.app`,\n      path: \"/peer\",\n      secure: true,\n      // config: { iceServers: [{ url: \"stun:stun.l.google.com:19302\" }] }\n    };\n  } else {\n    return {\n      host: window.location.hostname,\n      port: 9000,\n      path: \"/peer\",\n      secure: false,\n      // config: { iceServers: [{ url: \"stun:stun.l.google.com:19302\" }] }\n    };\n  }\n}\n\nexport function getGitHubOAuthClientID() {\n  if (process.env.NODE_ENV === \"production\") {\n    return \"3dd81bb2c212b7749761\";\n  } else {\n    return \"c7477b9aa512785936e0\";\n  }\n}\n\nexport function getGitHubOAuthCallbackURL() {\n  if (process.env.NODE_ENV === \"production\") {\n    return \"https://crossnote.app/github_oauth_callback\";\n  } else {\n    return `http://${window.location.host}/github_oauth_callback`;\n  }\n}\n\nexport function startGitHubOAuth() {\n  window.open(\n    `https://github.com/login/oauth/authorize?client_id=${getGitHubOAuthClientID()}&redirect_uri=${encodeURIComponent(\n      getGitHubOAuthCallbackURL(),\n    )}`,\n    \"_self\",\n  );\n}\n\nexport const graphqlFetchContext = {\n  fetchOptions: {\n    headers: {\n      Authorization: `Bearer ${localStorage.getItem(\"token\")}`,\n    },\n  },\n};\nexport function formatDate(dateString: string) {\n  if (!dateString) return \"\";\n  const date = new Date(dateString);\n  const diff = Date.now() - date.getTime();\n  const passedTime = Math.abs(diff);\n\n  if (passedTime <= 1000 * 60 * 60 * 24) {\n    // within 24h\n    if (passedTime <= 1000 * 60 * 60) {\n      // within 1 hour\n      return (\n        (diff < 0 ? \"future \" : \"\") + Math.ceil(passedTime / (1000 * 60)) + \"m\"\n      );\n    } else {\n      return (\n        (diff < 0 ? \"future \" : \"\") +\n        Math.floor(passedTime / (1000 * 60 * 60)) +\n        \"h\"\n      );\n    }\n  } else {\n    const monthNamesShort = [\n      \"Jan\",\n      \"Feb\",\n      \"Mar\",\n      \"Apr\",\n      \"May\",\n      \"Jun\",\n      \"Jul\",\n      \"Aug\",\n      \"Sep\",\n      \"Oct\",\n      \"Nov\",\n      \"Dec\",\n    ];\n    return (\n      monthNamesShort[date.getMonth()] +\n      \" \" +\n      date.getDate() +\n      \" \" +\n      date.getFullYear()\n    );\n  }\n}\n\n// https://stackoverflow.com/questions/400212/how-do-i-copy-to-the-clipboard-in-javascript\nexport function copyToClipboard(text: string) {\n  if (\"clipboardData\" in window && (window as any).clipboardData.setData) {\n    // Internet Explorer-specific code path to prevent textarea being shown while dialog is visible.\n    return (window as any).setData(\"Text\", text);\n  } else if (\n    document.queryCommandSupported &&\n    document.queryCommandSupported(\"copy\")\n  ) {\n    var textarea = document.createElement(\"textarea\");\n    textarea.textContent = text;\n    textarea.style.position = \"fixed\"; // Prevent scrolling to bottom of page in Microsoft Edge.\n    document.body.appendChild(textarea);\n    textarea.select();\n    try {\n      return document.execCommand(\"copy\"); // Security exception may be thrown by some browsers.\n    } catch (ex) {\n      console.warn(\"Copy to clipboard failed.\", ex);\n      return false;\n    } finally {\n      document.body.removeChild(textarea);\n    }\n  }\n}\n\nexport function generateUUID() {\n  // Public Domain/MIT\n  var d = new Date().getTime(); //Timestamp\n  var d2 = (performance && performance.now && performance.now() * 1000) || 0; //Time in microseconds since page-load or 0 if unsupported\n  return \"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx\".replace(/[xy]/g, function (c) {\n    var r = Math.random() * 16; //random number between 0 and 16\n    if (d > 0) {\n      //Use timestamp until depleted\n      r = (d + r) % 16 | 0;\n      d = Math.floor(d / 16);\n    } else {\n      //Use microseconds since page-load if supported\n      r = (d2 + r) % 16 | 0;\n      d2 = Math.floor(d2 / 16);\n    }\n    return (c === \"x\" ? r : (r & 0x3) | 0x8).toString(16);\n  });\n}\n\nexport class RandomColorGenerator {\n  private cache: { [key: string]: string } = {};\n  private hashCode(s: string): number {\n    let n = s.split(\"\").reduce(function (a, b) {\n      a = (a << 5) - a + b.charCodeAt(0);\n      return a & a;\n    }, 0);\n    n = Math.abs(n);\n    const x = \"0.\" + n.toString();\n    return parseFloat(x);\n  }\n  public generateColor(key: string): string {\n    if (key in this.cache) {\n      return this.cache[key];\n    } else {\n      const color =\n        \"#\" +\n        (((1 << 24) * /* Math.random() */ this.hashCode(key)) | 0).toString(16);\n      this.cache[key] = color;\n      return color;\n    }\n  }\n}\n\nexport const randomColorGenerator = new RandomColorGenerator();\n\nexport function randomID() {\n  return Math.random().toString(36).substr(2, 9);\n}\n","// const loadLanguages = require(\"prismjs/components/\");\n// loadLanguages([\"python\"]);\n\nexport const TagStopRegExp = /[@#,.!$%^&*()[\\]-_+=~`<>?\\\\，。]/g;\nexport function getTags(markdown: string): string[] {\n  const tags = new Set(\n    markdown.match(\n      /(#([^#]+?)#[\\s@#,.!$%^&*()[\\]-_+=~`<>?\\\\，。])|(#[^\\s@#,.!$%^&*()[\\]-_+=~`<>?\\\\，。]+)/g,\n    ) || [],\n  );\n  return Array.from(tags).map(\n    (tag) => tag.replace(TagStopRegExp, \"\").trim(), // Don't remove \\s here\n  );\n}\n\nexport function sanitizeTag(tagName: string): string {\n  let tag = tagName.trim() || \"\";\n  return tag\n    .replace(/\\s+/g, \" \")\n    .replace(TagStopRegExp, \"\")\n    .split(\"/\")\n    .map((t) => t.trim())\n    .filter((x) => x.length > 0)\n    .join(\"/\");\n}\n\nexport interface MatterOutput {\n  data: any;\n  content: string;\n}\n\nexport function matter(markdown: string): MatterOutput {\n  let endFrontMatterOffset = 0;\n  let frontMatter = {};\n  if (\n    markdown.startsWith(\"---\") &&\n    /* tslint:disable-next-line:no-conditional-assignment */\n    (endFrontMatterOffset = markdown.indexOf(\"\\n---\")) > 0\n  ) {\n    const frontMatterString = markdown.slice(3, endFrontMatterOffset);\n    try {\n      frontMatter = (window as any)[\"YAML\"].parse(frontMatterString);\n    } catch (error) {}\n    markdown = markdown\n      .slice(endFrontMatterOffset + 4)\n      .replace(/^[ \\t]*\\n/, \"\");\n  }\n  return {\n    data: frontMatter,\n    content: markdown,\n  };\n}\n\nexport function matterStringify(markdown: string, frontMatter: any) {\n  frontMatter = frontMatter || {};\n  const yamlStr = (window as any)[\"YAML\"].stringify(frontMatter).trim();\n  if (yamlStr === \"{}\" || !yamlStr) {\n    return markdown;\n  } else {\n    return `---\n${yamlStr}\n---\n${markdown}`;\n  }\n}\n"],"sourceRoot":""}